<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>umiåŸºç¡€</title>
    <link href="/blog/2022/11/28/umi/"/>
    <url>/blog/2022/11/28/umi/</url>
    
    <content type="html"><![CDATA[<h1 id="Umi"><a href="#Umi" class="headerlink" title="Umi"></a>Umi</h1><p>Umiï¼Œä¸­æ–‡å¯å‘éŸ³ä¸º<strong>ä¹Œç±³</strong>ï¼Œæ˜¯å¯æ‰©å±•çš„ä¼ä¸šçº§å‰ç«¯åº”ç”¨æ¡†æ¶ã€‚Umi ä»¥è·¯ç”±ä¸ºåŸºç¡€çš„ï¼ŒåŒæ—¶æ”¯æŒé…ç½®å¼è·¯ç”±å’Œçº¦å®šå¼è·¯ç”±ï¼Œä¿è¯è·¯ç”±çš„åŠŸèƒ½å®Œå¤‡ï¼Œå¹¶ä»¥æ­¤è¿›è¡ŒåŠŸèƒ½æ‰©å±•ã€‚ç„¶åé…ä»¥ç”Ÿå‘½å‘¨æœŸå®Œå–„çš„æ’ä»¶ä½“ç³»ï¼Œè¦†ç›–ä»æºç åˆ°æ„å»ºäº§ç‰©çš„æ¯ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œæ”¯æŒå„ç§åŠŸèƒ½æ‰©å±•å’Œä¸šåŠ¡éœ€æ±‚ã€‚</p><p>Umi æ˜¯èš‚èšé›†å›¢çš„åº•å±‚å‰ç«¯æ¡†æ¶ï¼Œå·²ç›´æ¥æˆ–é—´æ¥åœ°æœåŠ¡äº† 3000+ åº”ç”¨ï¼ŒåŒ…æ‹¬ javaã€nodeã€H5 æ— çº¿ã€ç¦»çº¿ï¼ˆHybridï¼‰åº”ç”¨ã€çº¯å‰ç«¯ assets åº”ç”¨ã€CMS åº”ç”¨ç­‰ã€‚ä»–å·²ç»å¾ˆå¥½åœ°æœåŠ¡äº†æˆ‘ä»¬çš„å†…éƒ¨ç”¨æˆ·ï¼ŒåŒæ—¶å¸Œæœ›ä»–ä¹Ÿèƒ½æœåŠ¡å¥½å¤–éƒ¨ç”¨æˆ·ã€‚</p><p>å®ƒä¸»è¦å…·å¤‡ä»¥ä¸‹åŠŸèƒ½ï¼š</p><ul><li>ğŸ‰ <strong>å¯æ‰©å±•</strong>ï¼ŒUmi å®ç°äº†å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¹¶ä½¿å…¶æ’ä»¶åŒ–ï¼ŒUmi å†…éƒ¨åŠŸèƒ½ä¹Ÿå…¨ç”±æ’ä»¶å®Œæˆã€‚æ­¤å¤–è¿˜æ”¯æŒæ’ä»¶å’Œæ’ä»¶é›†ï¼Œä»¥æ»¡è¶³åŠŸèƒ½å’Œå‚ç›´åŸŸçš„åˆ†å±‚éœ€æ±‚ã€‚</li><li>ğŸ“¦ <strong>å¼€ç®±å³ç”¨</strong>ï¼ŒUmi å†…ç½®äº†è·¯ç”±ã€æ„å»ºã€éƒ¨ç½²ã€æµ‹è¯•ç­‰ï¼Œä»…éœ€ä¸€ä¸ªä¾èµ–å³å¯ä¸Šæ‰‹å¼€å‘ã€‚å¹¶ä¸”è¿˜æä¾›é’ˆå¯¹ React çš„é›†æˆæ’ä»¶é›†ï¼Œå†…æ¶µä¸°å¯Œçš„åŠŸèƒ½ï¼Œå¯æ»¡è¶³æ—¥å¸¸ 80% çš„å¼€å‘éœ€æ±‚ã€‚</li><li>ğŸ  <strong>ä¼ä¸šçº§</strong>ï¼Œç»èš‚èšå†…éƒ¨ 3000+ é¡¹ç›®ä»¥åŠé˜¿é‡Œã€ä¼˜é…·ã€ç½‘æ˜“ã€é£çŒªã€å£ç¢‘ç­‰å…¬å¸é¡¹ç›®çš„éªŒè¯ï¼Œå€¼å¾—ä¿¡èµ–ã€‚</li><li>ğŸš€ <strong>å¤§é‡è‡ªç ”</strong>ï¼ŒåŒ…å«å¾®å‰ç«¯ã€ç»„ä»¶æ‰“åŒ…ã€æ–‡æ¡£å·¥å…·ã€è¯·æ±‚åº“ã€hooks åº“ã€æ•°æ®æµç­‰ï¼Œæ»¡è¶³æ—¥å¸¸é¡¹ç›®çš„å‘¨è¾¹éœ€æ±‚ã€‚</li><li>ğŸŒ´ <strong>å®Œå¤‡è·¯ç”±</strong>ï¼ŒåŒæ—¶æ”¯æŒé…ç½®å¼è·¯ç”±å’Œçº¦å®šå¼è·¯ç”±ï¼ŒåŒæ—¶ä¿æŒåŠŸèƒ½çš„å®Œå¤‡æ€§ï¼Œæ¯”å¦‚åŠ¨æ€è·¯ç”±ã€åµŒå¥—è·¯ç”±ã€æƒé™è·¯ç”±ç­‰ç­‰ã€‚</li><li>ğŸš„ <strong>é¢å‘æœªæ¥</strong>ï¼Œåœ¨æ»¡è¶³éœ€æ±‚çš„åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿä¸ä¼šåœæ­¢å¯¹æ–°æŠ€æœ¯çš„æ¢ç´¢ã€‚æ¯”å¦‚ dll æé€Ÿã€modern modeã€webpack@5ã€è‡ªåŠ¨åŒ– externalã€bundler less ç­‰ç­‰ã€‚</li></ul><h2 id="umi-ä¸´æ—¶æ–‡ä»¶"><a href="#umi-ä¸´æ—¶æ–‡ä»¶" class="headerlink" title=".umi ä¸´æ—¶æ–‡ä»¶"></a>.umi ä¸´æ—¶æ–‡ä»¶</h2><p>.umi ä¸´æ—¶ç›®å½•æ˜¯æ•´ä¸ª Umi é¡¹ç›®çš„å‘åŠ¨æœºï¼Œä½ çš„å…¥å£æ–‡ä»¶ã€è·¯ç”±ç­‰ç­‰éƒ½åœ¨è¿™é‡Œï¼Œè¿™äº›æ˜¯ç”± umi å†…éƒ¨æ’ä»¶åŠä¸‰æ–¹æ’ä»¶ç”Ÿæˆçš„ã€‚</p><p>ä½ é€šå¸¸ä¼šåœ¨ .umi ä¸‹çœ‹åˆ°ä»¥ä¸‹ç›®å½•ï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">+ .umi<br>  + core     <span class="hljs-comment"># å†…éƒ¨æ’ä»¶ç”Ÿæˆ</span><br>  + pluginA  <span class="hljs-comment"># å¤–éƒ¨æ’ä»¶ç”Ÿæˆ</span><br>  + presetB  <span class="hljs-comment"># å¤–éƒ¨æ’ä»¶ç”Ÿæˆ</span><br>  + umi.ts   <span class="hljs-comment"># å…¥å£æ–‡ä»¶</span><br></code></pre></td></tr></table></figure><p>ä¸´æ—¶æ–‡ä»¶æ˜¯ Umi æ¡†æ¶ä¸­éå¸¸é‡è¦çš„ä¸€éƒ¨åˆ†ï¼Œæ¡†æ¶æˆ–æ’ä»¶ä¼šæ ¹æ®ä½ çš„ä»£ç ç”Ÿæˆä¸´æ—¶æ–‡ä»¶ï¼Œè¿™äº›åŸæ¥éœ€è¦æ”¾åœ¨é¡¹ç›®é‡Œçš„è„ä¹±å·®çš„éƒ¨åˆ†éƒ½è¢«è—åœ¨äº†è¿™é‡Œã€‚</p><p>ä½ å¯ä»¥åœ¨è¿™é‡Œè°ƒè¯•ä»£ç ï¼Œä½†ä¸è¦åœ¨ .git ä»“åº“é‡Œæäº¤ä»–ï¼Œå› ä¸ºä»–çš„ä¸´æ—¶æ€§ï¼Œæ¯æ¬¡å¯åŠ¨ umi æ—¶éƒ½ä¼šè¢«åˆ é™¤å¹¶é‡æ–°ç”Ÿæˆã€‚</p><h2 id="éƒ¨ç½²å‘å¸ƒ"><a href="#éƒ¨ç½²å‘å¸ƒ" class="headerlink" title="éƒ¨ç½²å‘å¸ƒ"></a>éƒ¨ç½²å‘å¸ƒ</h2><h3 id="æ„å»º"><a href="#æ„å»º" class="headerlink" title="æ„å»º"></a>æ„å»º</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ yarn build<br>âœ” Webpack  Compiled successfully <span class="hljs-keyword">in</span> 17.17s<br> DONE  Compiled successfully <span class="hljs-keyword">in</span> 17167ms                                       8:26:25 PM<br>Build success.âœ¨  Done <span class="hljs-keyword">in</span> 20.79s.<br></code></pre></td></tr></table></figure><p>æ„å»ºäº§ç‰©é»˜è®¤ç”Ÿæˆåˆ° <code>./dist</code> ä¸‹ï¼Œç„¶åé€šè¿‡ tree å‘½ä»¤æŸ¥çœ‹ï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">tree ./dist<br>./distâ”œâ”€â”€ index.htmlâ”œâ”€â”€ umi.cssâ””â”€â”€ umi.js<br></code></pre></td></tr></table></figure><h3 id="æœ¬åœ°éªŒè¯"><a href="#æœ¬åœ°éªŒè¯" class="headerlink" title="æœ¬åœ°éªŒè¯"></a>æœ¬åœ°éªŒè¯</h3><p>å‘å¸ƒä¹‹å‰ï¼Œå¯ä»¥é€šè¿‡ <code>serve</code> åšæœ¬åœ°éªŒè¯ï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ yarn global add serve$ serve ./dist<br>   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                                                    â”‚   â”‚   Serving!                                         â”‚   â”‚                                                    â”‚   â”‚   - Local:            http://localhost:5000        â”‚   â”‚   - On Your Network:  http://192.168.12.34:5000    â”‚   â”‚                                                    â”‚   â”‚   Copied <span class="hljs-built_in">local</span> address to clipboard!               â”‚   â”‚                                                    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></td></tr></table></figure><p>è®¿é—® <a href="http://localhost:5000/">http://localhost:5000</a>ï¼Œæ­£å¸¸æƒ…å†µä¸‹åº”è¯¥æ˜¯å’Œæ‰§è¡Œ <code>yarn start</code> æ—¶æ˜¯ä¸€è‡´çš„ã€‚</p><h3 id="éƒ¨ç½²"><a href="#éƒ¨ç½²" class="headerlink" title="éƒ¨ç½²"></a>éƒ¨ç½²</h3><p>æœ¬åœ°éªŒè¯å®Œï¼Œå°±å¯ä»¥éƒ¨ç½²äº†ã€‚ä½ éœ€è¦æŠŠ <code>dist</code> ç›®å½•éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šã€‚</p><h2 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h2><p>ä¸€ä¸ªåŸºç¡€çš„ Umi é¡¹ç›®å¤§è‡´æ˜¯è¿™æ ·çš„ï¼Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs unknown">.<br>â”œâ”€â”€ package.json<br>â”œâ”€â”€ .umirc.ts<br>â”œâ”€â”€ .env<br>â”œâ”€â”€ dist<br>â”œâ”€â”€ mock<br>â”œâ”€â”€ public<br>â””â”€â”€ src<br>    â”œâ”€â”€ .umi<br>    â”œâ”€â”€ layouts/index.tsx<br>    â”œâ”€â”€ pages<br>        â”œâ”€â”€ index.less<br>        â””â”€â”€ index.tsx<br>    â””â”€â”€ app.ts<br></code></pre></td></tr></table></figure><h3 id="æ ¹ç›®å½•"><a href="#æ ¹ç›®å½•" class="headerlink" title="æ ¹ç›®å½•"></a>æ ¹ç›®å½•</h3><h4 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h4><p>åŒ…å«æ’ä»¶å’Œæ’ä»¶é›†ï¼Œä»¥ <code>@umijs/preset-</code>ã€<code>@umijs/plugin-</code>ã€<code>umi-preset-</code> å’Œ <code>umi-plugin-</code> å¼€å¤´çš„ä¾èµ–ä¼šè¢«è‡ªåŠ¨æ³¨å†Œä¸ºæ’ä»¶æˆ–æ’ä»¶é›†ã€‚</p><h4 id="umirc-ts"><a href="#umirc-ts" class="headerlink" title=".umirc.ts"></a>.umirc.ts</h4><p>é…ç½®æ–‡ä»¶ï¼ŒåŒ…å« umi å†…ç½®åŠŸèƒ½å’Œæ’ä»¶çš„é…ç½®ã€‚</p><h4 id="env"><a href="#env" class="headerlink" title=".env"></a>.env</h4><p>ç¯å¢ƒå˜é‡ã€‚</p><p>æ¯”å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs unknown">PORT=8888<br>COMPRESS=none<br></code></pre></td></tr></table></figure><h4 id="dist-ç›®å½•"><a href="#dist-ç›®å½•" class="headerlink" title="dist ç›®å½•"></a>dist ç›®å½•</h4><p>æ‰§è¡Œ <code>umi build</code> åï¼Œäº§ç‰©é»˜è®¤ä¼šå­˜æ”¾åœ¨è¿™é‡Œã€‚</p><h4 id="mock-ç›®å½•"><a href="#mock-ç›®å½•" class="headerlink" title="mock ç›®å½•"></a>mock ç›®å½•</h4><p>å­˜å‚¨ mock æ–‡ä»¶ï¼Œæ­¤ç›®å½•ä¸‹æ‰€æœ‰ js å’Œ ts æ–‡ä»¶ä¼šè¢«è§£æä¸º mock æ–‡ä»¶ã€‚</p><h4 id="public-ç›®å½•"><a href="#public-ç›®å½•" class="headerlink" title="public ç›®å½•"></a>public ç›®å½•</h4><p>æ­¤ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ä¼šè¢« copy åˆ°è¾“å‡ºè·¯å¾„ã€‚</p><h3 id="src-ç›®å½•"><a href="#src-ç›®å½•" class="headerlink" title="/src ç›®å½•"></a><code>/src</code> ç›®å½•</h3><h4 id="umi-ç›®å½•"><a href="#umi-ç›®å½•" class="headerlink" title=".umi ç›®å½•"></a>.umi ç›®å½•</h4><p>ä¸´æ—¶æ–‡ä»¶ç›®å½•ï¼Œæ¯”å¦‚å…¥å£æ–‡ä»¶ã€è·¯ç”±ç­‰ï¼Œéƒ½ä¼šè¢«ä¸´æ—¶ç”Ÿæˆåˆ°è¿™é‡Œã€‚<strong>ä¸è¦æäº¤ .umi ç›®å½•åˆ° git ä»“åº“ï¼Œä»–ä»¬ä¼šåœ¨ umi dev å’Œ umi build æ—¶è¢«åˆ é™¤å¹¶é‡æ–°ç”Ÿæˆã€‚</strong></p><h4 id="layouts-x2F-index-tsx"><a href="#layouts-x2F-index-tsx" class="headerlink" title="layouts&#x2F;index.tsx"></a>layouts&#x2F;index.tsx</h4><p>çº¦å®šå¼è·¯ç”±æ—¶çš„å…¨å±€å¸ƒå±€æ–‡ä»¶ã€‚</p><h4 id="pages-ç›®å½•"><a href="#pages-ç›®å½•" class="headerlink" title="pages ç›®å½•"></a>pages ç›®å½•</h4><p>æ‰€æœ‰è·¯ç”±ç»„ä»¶å­˜æ”¾åœ¨è¿™é‡Œã€‚</p><h4 id="app-ts"><a href="#app-ts" class="headerlink" title="app.ts"></a>app.ts</h4><p>è¿è¡Œæ—¶é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥åœ¨è¿™é‡Œæ‰©å±•è¿è¡Œæ—¶çš„èƒ½åŠ›ï¼Œæ¯”å¦‚ä¿®æ”¹è·¯ç”±ã€ä¿®æ”¹ render æ–¹æ³•ç­‰ã€‚</p><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>Umi åœ¨ <code>.umirc.ts</code> æˆ– <code>config/config.ts</code> ä¸­é…ç½®é¡¹ç›®å’Œæ’ä»¶ï¼Œæ”¯æŒ es6ã€‚ä¸€ä»½å¸¸è§çš„é…ç½®å¦‚ä¸‹ï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> default &#123;<br>  base: <span class="hljs-string">&#x27;/docs/&#x27;</span>,<br>  publicPath: <span class="hljs-string">&#x27;/static/&#x27;</span>,<br>  <span class="hljs-built_in">hash</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-built_in">history</span>: &#123;<br>    <span class="hljs-built_in">type</span>: <span class="hljs-string">&#x27;hash&#x27;</span>,<br>  &#125;,<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h3><p>å¦‚æœé¡¹ç›®çš„é…ç½®ä¸å¤æ‚ï¼Œæ¨èåœ¨ <code>.umirc.ts</code> ä¸­å†™é…ç½®ï¼› å¦‚æœé¡¹ç›®çš„é…ç½®æ¯”è¾ƒå¤æ‚ï¼Œå¯ä»¥å°†é…ç½®å†™åœ¨ <code>config/config.ts</code> ä¸­ï¼Œå¹¶æŠŠé…ç½®çš„ä¸€éƒ¨åˆ†æ‹†åˆ†å‡ºå»ï¼Œæ¯”å¦‚è·¯ç”±é…ç½®å¯ä»¥æ‹†åˆ†æˆå•ç‹¬çš„ <code>routes.ts</code>ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// config/routes.ts</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> [    &#123; <span class="hljs-attr">exact</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-attr">component</span>: <span class="hljs-string">&#x27;index&#x27;</span> &#125;,];<br><span class="hljs-comment">// config/config.ts</span><br><span class="hljs-keyword">import</span> &#123; defineConfig &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;umi&#x27;</span>;<br><span class="hljs-keyword">import</span> routes <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./routes&#x27;</span>;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>(&#123;  <br>    <span class="hljs-attr">routes</span>: routes,<br>&#125;);<br></code></pre></td></tr></table></figure><p>æ¨èä¸¤ç§é…ç½®æ–¹å¼äºŒé€‰ä¸€ï¼Œ<code>.umirc.ts</code> ä¼˜å…ˆçº§æ›´é«˜ã€‚</p><h3 id="TypeScript-æç¤º"><a href="#TypeScript-æç¤º" class="headerlink" title="TypeScript æç¤º"></a>TypeScript æç¤º</h3><p>å¦‚æœä½ æƒ³åœ¨å†™é…ç½®æ—¶ä¹Ÿæœ‰æç¤ºï¼Œå¯ä»¥é€šè¿‡ umi çš„ <code>defineConfig</code> æ–¹æ³•å®šä¹‰é…ç½®ï¼Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; defineConfig &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;umi&#x27;</span>;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>(&#123;  <br>    <span class="hljs-attr">routes</span>: [    <br>        &#123; <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-attr">component</span>: <span class="hljs-string">&#x27;@/pages/index&#x27;</span> &#125;,  <br>    ],<br>&#125;);<br></code></pre></td></tr></table></figure><p><img src="https://img.alicdn.com/tfs/TB1EV1pv.T1gK0jSZFhXXaAtVXa-1204-838.png" alt="img"></p><h3 id="æœ¬åœ°ä¸´æ—¶é…ç½®"><a href="#æœ¬åœ°ä¸´æ—¶é…ç½®" class="headerlink" title="æœ¬åœ°ä¸´æ—¶é…ç½®"></a>æœ¬åœ°ä¸´æ—¶é…ç½®</h3><p>å¯ä»¥æ–°å»º <code>.umirc.local.ts</code>ï¼Œè¿™ä»½é…ç½®ä¼šå’Œ <code>.umirc.ts</code> åš deep merge åå½¢æˆæœ€ç»ˆé…ç½®ã€‚</p><blockquote><p>æ³¨ï¼š<code>.umirc.local.ts</code> ä»…åœ¨ <code>umi dev</code> æ—¶æœ‰æ•ˆã€‚<code>umi build</code> æ—¶ä¸ä¼šè¢«åŠ è½½ã€‚</p></blockquote><p>æ¯”å¦‚ï¼Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// .umirc.ts æˆ–è€… config/config.tsexport default &#123; a: 1, b: 2 &#125;;</span><br><span class="hljs-comment">// .umirc.local.ts æˆ–è€… config/config.local.tsexport default &#123; c: &#x27;local&#x27; &#125;;</span><br></code></pre></td></tr></table></figure><p>æ‹¿åˆ°çš„é…ç½®æ˜¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js">&#123;<br>  <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>,<br>  <span class="hljs-attr">b</span>: <span class="hljs-number">2</span>,<br>  <span class="hljs-attr">c</span>: <span class="hljs-string">&#x27;local&#x27;</span>,<br>&#125;<br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><ul><li><code>config/config.ts</code> å¯¹åº”çš„æ˜¯ <code>config/config.local.ts</code></li><li><code>.local.ts</code> æ˜¯æœ¬åœ°éªŒè¯ä½¿ç”¨çš„ä¸´æ—¶é…ç½®ï¼Œè¯·å°†å…¶æ·»åŠ åˆ° <code>.gitignore</code>ï¼Œ<strong>åŠ¡å¿…ä¸è¦æäº¤åˆ° git ä»“åº“ä¸­</strong></li><li><code>.local.ts</code> é…ç½®çš„ä¼˜å…ˆçº§æœ€é«˜ï¼Œæ¯” <code>UMI_ENV</code> æŒ‡å®šçš„é…ç½®æ›´é«˜</li></ul><h3 id="å¤šç¯å¢ƒå¤šä»½é…ç½®"><a href="#å¤šç¯å¢ƒå¤šä»½é…ç½®" class="headerlink" title="å¤šç¯å¢ƒå¤šä»½é…ç½®"></a>å¤šç¯å¢ƒå¤šä»½é…ç½®</h3><p>å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡ <code>UMI_ENV</code> åŒºåˆ†ä¸åŒç¯å¢ƒæ¥æŒ‡å®šé…ç½®ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// .umirc.js æˆ–è€… config/config.jsexport default &#123; a: 1, b: 2 &#125;;</span><br><span class="hljs-comment">// .umirc.cloud.js æˆ–è€… config/config.cloud.jsexport default &#123; b: &#x27;cloud&#x27;, c: &#x27;cloud&#x27; &#125;;</span><br><span class="hljs-comment">// .umirc.local.js æˆ–è€… config/config.local.jsexport default &#123; c: &#x27;local&#x27; &#125;;</span><br></code></pre></td></tr></table></figure><p>ä¸æŒ‡å®š <code>UMI_ENV</code> æ—¶ï¼Œæ‹¿åˆ°çš„é…ç½®æ˜¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js">&#123;<br>  <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>,<br>  <span class="hljs-attr">b</span>: <span class="hljs-number">2</span>,<br>  <span class="hljs-attr">c</span>: <span class="hljs-string">&#x27;local&#x27;</span>,<br>&#125;<br></code></pre></td></tr></table></figure><p>æŒ‡å®š <code>UMI_ENV=cloud</code> æ—¶ï¼Œæ‹¿åˆ°çš„é…ç½®æ˜¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js">&#123;<br>  <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>,<br>  <span class="hljs-attr">b</span>: <span class="hljs-string">&#x27;cloud&#x27;</span>,<br>  <span class="hljs-attr">c</span>: <span class="hljs-string">&#x27;local&#x27;</span>,<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="è¿è¡Œæ—¶é…ç½®"><a href="#è¿è¡Œæ—¶é…ç½®" class="headerlink" title="è¿è¡Œæ—¶é…ç½®"></a>è¿è¡Œæ—¶é…ç½®</h2><p>è¿è¡Œæ—¶é…ç½®å’Œé…ç½®çš„åŒºåˆ«æ˜¯ä»–è·‘åœ¨æµè§ˆå™¨ç«¯ï¼ŒåŸºäºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œå†™å‡½æ•°ã€jsxã€import æµè§ˆå™¨ç«¯ä¾èµ–ç­‰ç­‰ï¼Œæ³¨æ„ä¸è¦å¼•å…¥ node ä¾èµ–ã€‚</p><h3 id="é…ç½®æ–¹å¼"><a href="#é…ç½®æ–¹å¼" class="headerlink" title="é…ç½®æ–¹å¼"></a>é…ç½®æ–¹å¼</h3><p>çº¦å®š <code>src/app.tsx</code> ä¸ºè¿è¡Œæ—¶é…ç½®ã€‚</p><h3 id="é…ç½®é¡¹"><a href="#é…ç½®é¡¹" class="headerlink" title="é…ç½®é¡¹"></a>é…ç½®é¡¹</h3><h5 id="modifyClientRenderOpts-fn"><a href="#modifyClientRenderOpts-fn" class="headerlink" title="modifyClientRenderOpts(fn)"></a>modifyClientRenderOpts(fn)</h5><p>ä¿®æ”¹ clientRender å‚æ•°ã€‚</p><p>æ¯”å¦‚åœ¨å¾®å‰ç«¯é‡ŒåŠ¨æ€ä¿®æ”¹æ¸²æŸ“æ ¹èŠ‚ç‚¹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> isSubApp = <span class="hljs-literal">false</span>;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">modifyClientRenderOpts</span>(<span class="hljs-params">memo</span>) &#123;<br>  <span class="hljs-keyword">return</span> &#123;<br>    ...memo,<br>    <span class="hljs-attr">rootElement</span>: isSubApp ? <span class="hljs-string">&#x27;sub-root&#x27;</span> : memo.<span class="hljs-property">rootElement</span>,    <br>  &#125;;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="patchRoutes-routes"><a href="#patchRoutes-routes" class="headerlink" title="patchRoutes({ routes })"></a>patchRoutes({ routes })</h5><p>ä¿®æ”¹è·¯ç”±ã€‚</p><p>æ¯”å¦‚åœ¨æœ€å‰é¢æ·»åŠ ä¸€ä¸ª <code>/foo</code> è·¯ç”±ï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> <span class="hljs-keyword">function</span> patchRoutes(&#123; routes &#125;) &#123;<br>  routes.unshift(&#123;<br>    path: <span class="hljs-string">&#x27;/foo&#x27;</span>,<br>    exact: <span class="hljs-literal">true</span>,<br>    component: require(<span class="hljs-string">&#x27;@/extraRoutes/foo&#x27;</span>).default,<br>  &#125;);<br>&#125;<br></code></pre></td></tr></table></figure><p>æ¯”å¦‚å’Œ <code>render</code> é…ç½®é…åˆä½¿ç”¨ï¼Œè¯·æ±‚æœåŠ¡ç«¯æ ¹æ®å“åº”åŠ¨æ€æ›´æ–°è·¯ç”±ï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">let</span> extraRoutes;<br><span class="hljs-built_in">export</span> <span class="hljs-keyword">function</span> patchRoutes(&#123; routes &#125;) &#123;  merge(routes, extraRoutes);&#125;<br><span class="hljs-built_in">export</span> <span class="hljs-keyword">function</span> render(oldRender) &#123;  fetch(<span class="hljs-string">&#x27;/api/routes&#x27;</span>).<span class="hljs-keyword">then</span>(res=&gt;res.json()).<span class="hljs-keyword">then</span>((res) =&gt; &#123;     extraRoutes = res.routes;    oldRender();  &#125;)&#125;<br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><ul><li>ç›´æ¥ä¿®æ”¹routesï¼Œä¸éœ€è¦è¿”å›</li></ul><h5 id="render-oldRender-Function"><a href="#render-oldRender-Function" class="headerlink" title="render(oldRender: Function)"></a>render(oldRender: Function)</h5><p>è¦†å†™ renderã€‚</p><p>æ¯”å¦‚ç”¨äºæ¸²æŸ“ä¹‹å‰åšæƒé™æ ¡éªŒï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">import &#123; <span class="hljs-built_in">history</span> &#125; from <span class="hljs-string">&#x27;umi&#x27;</span>;<br><span class="hljs-built_in">export</span> <span class="hljs-keyword">function</span> render(oldRender) &#123;  fetch(<span class="hljs-string">&#x27;/api/auth&#x27;</span>).<span class="hljs-keyword">then</span>(auth =&gt; &#123;    <span class="hljs-keyword">if</span> (auth.isLogin) &#123; oldRender() &#125;    <span class="hljs-keyword">else</span> &#123;       history.push(<span class="hljs-string">&#x27;/login&#x27;</span>);       oldRender()    &#125;  &#125;);&#125;<br></code></pre></td></tr></table></figure><h5 id="onRouteChange-routes-matchedRoutes-location-action"><a href="#onRouteChange-routes-matchedRoutes-location-action" class="headerlink" title="onRouteChange({ routes, matchedRoutes, location, action })"></a>onRouteChange({ routes, matchedRoutes, location, action })</h5><p>åœ¨åˆå§‹åŠ è½½å’Œè·¯ç”±åˆ‡æ¢æ—¶åšä¸€äº›äº‹æƒ…ã€‚</p><p>æ¯”å¦‚ç”¨äºåšåŸ‹ç‚¹ç»Ÿè®¡ï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> <span class="hljs-keyword">function</span> onRouteChange(&#123; location, routes, action &#125;) &#123;<br>  bacon(location.pathname);<br>&#125;<br></code></pre></td></tr></table></figure><p>æ¯”å¦‚ç”¨äºè®¾ç½®æ ‡é¢˜ï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> <span class="hljs-keyword">function</span> onRouteChange(&#123; matchedRoutes &#125;) &#123;<br>  <span class="hljs-keyword">if</span> (matchedRoutes.length) &#123;<br>    document.title = matchedRoutes[matchedRoutes.length - 1].route.title || <span class="hljs-string">&#x27;&#x27;</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="rootContainer-LastRootContainer-args"><a href="#rootContainer-LastRootContainer-args" class="headerlink" title="rootContainer(LastRootContainer, args)"></a>rootContainer(LastRootContainer, args)</h5><p>ä¿®æ”¹äº¤ç»™ react-dom æ¸²æŸ“æ—¶çš„æ ¹ç»„ä»¶ã€‚</p><p>æ¯”å¦‚ç”¨äºåœ¨å¤–é¢åŒ…ä¸€ä¸ª Providerï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> <span class="hljs-keyword">function</span> rootContainer(container) &#123;<br>  <span class="hljs-built_in">return</span> React.createElement(ThemeProvider, null, container);<br>&#125;<br></code></pre></td></tr></table></figure><p>args åŒ…å«ï¼š</p><ul><li>routesï¼Œå…¨é‡è·¯ç”±é…ç½®</li><li>pluginï¼Œè¿è¡Œæ—¶æ’ä»¶æœºåˆ¶</li><li>historyï¼Œhistory å®ä¾‹</li></ul><h3 id="æ›´å¤šé…ç½®é¡¹"><a href="#æ›´å¤šé…ç½®é¡¹" class="headerlink" title="æ›´å¤šé…ç½®é¡¹"></a>æ›´å¤šé…ç½®é¡¹</h3><p>Umi å…è®¸æ’ä»¶æ³¨å†Œè¿è¡Œæ—¶é…ç½®ï¼Œå¦‚æœä½ ä½¿ç”¨æ’ä»¶ï¼Œè‚¯å®šä¼šåœ¨æ’ä»¶é‡Œæ‰¾åˆ°æ›´å¤šè¿è¡Œæ—¶çš„é…ç½®é¡¹ã€‚</p><h2 id="çº¦å®šå¼è·¯ç”±"><a href="#çº¦å®šå¼è·¯ç”±" class="headerlink" title="çº¦å®šå¼è·¯ç”±"></a>çº¦å®šå¼è·¯ç”±</h2><p>é™¤é…ç½®å¼è·¯ç”±å¤–ï¼ŒUmi ä¹Ÿæ”¯æŒçº¦å®šå¼è·¯ç”±ã€‚çº¦å®šå¼è·¯ç”±ä¹Ÿå«æ–‡ä»¶è·¯ç”±ï¼Œå°±æ˜¯ä¸éœ€è¦æ‰‹å†™é…ç½®ï¼Œæ–‡ä»¶ç³»ç»Ÿå³è·¯ç”±ï¼Œé€šè¿‡ç›®å½•å’Œæ–‡ä»¶åŠå…¶å‘½ååˆ†æå‡ºè·¯ç”±é…ç½®ã€‚</p><p><strong>å¦‚æœæ²¡æœ‰ routes é…ç½®ï¼ŒUmi ä¼šè¿›å…¥çº¦å®šå¼è·¯ç”±æ¨¡å¼</strong>ï¼Œç„¶ååˆ†æ <code>src/pages</code> ç›®å½•æ‹¿åˆ°è·¯ç”±é…ç½®ã€‚</p><p>æ¯”å¦‚ä»¥ä¸‹æ–‡ä»¶ç»“æ„ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">.<br>  â””â”€â”€ pages<br>    â”œâ”€â”€ index.tsx<br>    â””â”€â”€ users.tsx<br></code></pre></td></tr></table></figure><p>ä¼šå¾—åˆ°ä»¥ä¸‹è·¯ç”±é…ç½®ï¼Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">[<br>  &#123; <span class="hljs-attr">exact</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-attr">component</span>: <span class="hljs-string">&#x27;@/pages/index&#x27;</span> &#125;,<br>  &#123; <span class="hljs-attr">exact</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/users&#x27;</span>, <span class="hljs-attr">component</span>: <span class="hljs-string">&#x27;@/pages/users&#x27;</span> &#125;,<br>]<br></code></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ»¡è¶³ä»¥ä¸‹ä»»æ„è§„åˆ™çš„æ–‡ä»¶ä¸ä¼šè¢«æ³¨å†Œä¸ºè·¯ç”±ï¼Œ</p><ul><li>ä»¥ <code>.</code> æˆ– <code>_</code> å¼€å¤´çš„æ–‡ä»¶æˆ–ç›®å½•</li><li>ä»¥ <code>d.ts</code> ç»“å°¾çš„ç±»å‹å®šä¹‰æ–‡ä»¶</li><li>ä»¥ <code>test.ts</code>ã€<code>spec.ts</code>ã€<code>e2e.ts</code> ç»“å°¾çš„æµ‹è¯•æ–‡ä»¶ï¼ˆé€‚ç”¨äº <code>.js</code>ã€<code>.jsx</code> å’Œ <code>.tsx</code> æ–‡ä»¶ï¼‰</li><li><code>components</code> å’Œ <code>component</code> ç›®å½•</li><li><code>utils</code> å’Œ <code>util</code> ç›®å½•</li><li>ä¸æ˜¯ <code>.js</code>ã€<code>.jsx</code>ã€<code>.ts</code> æˆ– <code>.tsx</code> æ–‡ä»¶</li><li>æ–‡ä»¶å†…å®¹ä¸åŒ…å« JSX å…ƒç´ </li></ul><h3 id="åŠ¨æ€è·¯ç”±"><a href="#åŠ¨æ€è·¯ç”±" class="headerlink" title="åŠ¨æ€è·¯ç”±"></a>åŠ¨æ€è·¯ç”±</h3><p>çº¦å®š <code>[]</code> åŒ…è£¹çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ä¸ºåŠ¨æ€è·¯ç”±ã€‚</p><p>æ¯”å¦‚ï¼š</p><ul><li><code>src/pages/users/[id].tsx</code> ä¼šæˆä¸º <code>/users/:id</code></li><li><code>src/pages/users/[id]/settings.tsx</code> ä¼šæˆä¸º <code>/users/:id/settings</code></li></ul><p>ä¸¾ä¸ªå®Œæ•´çš„ä¾‹å­ï¼Œæ¯”å¦‚ä»¥ä¸‹æ–‡ä»¶ç»“æ„ï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">.<br>  â””â”€â”€ pages<br>    â””â”€â”€ [post]<br>      â”œâ”€â”€ index.tsx<br>      â””â”€â”€ comments.tsx<br>    â””â”€â”€ <span class="hljs-built_in">users</span><br>      â””â”€â”€ [<span class="hljs-built_in">id</span>].tsx<br>    â””â”€â”€ index.tsx<br></code></pre></td></tr></table></figure><p>ä¼šç”Ÿæˆè·¯ç”±é…ç½®ï¼Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js">[<br>  &#123; <span class="hljs-attr">exact</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-attr">component</span>: <span class="hljs-string">&#x27;@/pages/index&#x27;</span> &#125;,<br>  &#123; <span class="hljs-attr">exact</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/users/:id&#x27;</span>, <span class="hljs-attr">component</span>: <span class="hljs-string">&#x27;@/pages/users/[id]&#x27;</span> &#125;,<br>  &#123; <span class="hljs-attr">exact</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/:post/&#x27;</span>, <span class="hljs-attr">component</span>: <span class="hljs-string">&#x27;@/pages/[post]/index&#x27;</span> &#125;,<br>  &#123;<br>    <span class="hljs-attr">exact</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/:post/comments&#x27;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-string">&#x27;@/pages/[post]/comments&#x27;</span>,<br>  &#125;,<br>];<br></code></pre></td></tr></table></figure><h3 id="åŠ¨æ€å¯é€‰è·¯ç”±"><a href="#åŠ¨æ€å¯é€‰è·¯ç”±" class="headerlink" title="åŠ¨æ€å¯é€‰è·¯ç”±"></a>åŠ¨æ€å¯é€‰è·¯ç”±</h3><p>çº¦å®š <code>[ $]</code> åŒ…è£¹çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ä¸ºåŠ¨æ€å¯é€‰è·¯ç”±ã€‚</p><p>æ¯”å¦‚ï¼š</p><ul><li><code>src/pages/users/[id$].tsx</code> ä¼šæˆä¸º <code>/users/:id?</code></li><li><code>src/pages/users/[id$]/settings.tsx</code> ä¼šæˆä¸º <code>/users/:id?/settings</code></li></ul><p>ä¸¾ä¸ªå®Œæ•´çš„ä¾‹å­ï¼Œæ¯”å¦‚ä»¥ä¸‹æ–‡ä»¶ç»“æ„ï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">.<br>  â””â”€â”€ pages<br>    â””â”€â”€ [post$]<br>      â””â”€â”€ comments.tsx<br>    â””â”€â”€ <span class="hljs-built_in">users</span><br>      â””â”€â”€ [<span class="hljs-built_in">id</span>$].tsx<br>    â””â”€â”€ index.tsx<br></code></pre></td></tr></table></figure><p>ä¼šç”Ÿæˆè·¯ç”±é…ç½®ï¼Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js">[<br>  &#123; <span class="hljs-attr">exact</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-attr">component</span>: <span class="hljs-string">&#x27;@/pages/index&#x27;</span> &#125;,<br>  &#123; <span class="hljs-attr">exact</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/users/:id?&#x27;</span>, <span class="hljs-attr">component</span>: <span class="hljs-string">&#x27;@/pages/users/[id$]&#x27;</span> &#125;,<br>  &#123;<br>    <span class="hljs-attr">exact</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/:post?/comments&#x27;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-string">&#x27;@/pages/[post$]/comments&#x27;</span>,<br>  &#125;,<br>];<br></code></pre></td></tr></table></figure><h3 id="åµŒå¥—è·¯ç”±"><a href="#åµŒå¥—è·¯ç”±" class="headerlink" title="åµŒå¥—è·¯ç”±"></a>åµŒå¥—è·¯ç”±</h3><p>Umi é‡Œçº¦å®šç›®å½•ä¸‹æœ‰ <code>_layout.tsx</code> æ—¶ä¼šç”ŸæˆåµŒå¥—è·¯ç”±ï¼Œä»¥ <code>_layout.tsx</code> ä¸ºè¯¥ç›®å½•çš„ layoutã€‚layout æ–‡ä»¶éœ€è¦è¿”å›ä¸€ä¸ª React ç»„ä»¶ï¼Œå¹¶é€šè¿‡ <code>props.children</code> æ¸²æŸ“å­ç»„ä»¶ã€‚</p><p>æ¯”å¦‚ä»¥ä¸‹ç›®å½•ç»“æ„ï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">.<br>â””â”€â”€ pages<br>    â””â”€â”€ <span class="hljs-built_in">users</span><br>        â”œâ”€â”€ _layout.tsx<br>        â”œâ”€â”€ index.tsx<br>        â””â”€â”€ list.tsx<br></code></pre></td></tr></table></figure><p>ä¼šç”Ÿæˆè·¯ç”±ï¼Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js">[<br>  &#123; <span class="hljs-attr">exact</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/users&#x27;</span>, <span class="hljs-attr">component</span>: <span class="hljs-string">&#x27;@/pages/users/_layout&#x27;</span>,<br>    <span class="hljs-attr">routes</span>: [<br>      &#123; <span class="hljs-attr">exact</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/users&#x27;</span>, <span class="hljs-attr">component</span>: <span class="hljs-string">&#x27;@/pages/users/index&#x27;</span> &#125;,<br>      &#123; <span class="hljs-attr">exact</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/users/list&#x27;</span>, <span class="hljs-attr">component</span>: <span class="hljs-string">&#x27;@/pages/users/list&#x27;</span> &#125;,<br>    ]<br>  &#125;<br>]<br></code></pre></td></tr></table></figure><h3 id="å…¨å±€-layout"><a href="#å…¨å±€-layout" class="headerlink" title="å…¨å±€ layout"></a>å…¨å±€ layout</h3><p>çº¦å®š <code>src/layouts/index.tsx</code> ä¸ºå…¨å±€è·¯ç”±ã€‚è¿”å›ä¸€ä¸ª React ç»„ä»¶ï¼Œå¹¶é€šè¿‡ <code>props.children</code> æ¸²æŸ“å­ç»„ä»¶ã€‚</p><p>æ¯”å¦‚ä»¥ä¸‹ç›®å½•ç»“æ„ï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">.<br>â””â”€â”€ src<br>    â”œâ”€â”€ layouts<br>    â”‚   â””â”€â”€ index.tsx<br>    â””â”€â”€ pages<br>        â”œâ”€â”€ index.tsx<br>        â””â”€â”€ users.tsx<br></code></pre></td></tr></table></figure><p>ä¼šç”Ÿæˆè·¯ç”±ï¼Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js">[<br>  &#123; <span class="hljs-attr">exact</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-attr">component</span>: <span class="hljs-string">&#x27;@/layouts/index&#x27;</span>,<br>    <span class="hljs-attr">routes</span>: [<br>      &#123; <span class="hljs-attr">exact</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-attr">component</span>: <span class="hljs-string">&#x27;@/pages/index&#x27;</span> &#125;,<br>      &#123; <span class="hljs-attr">exact</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/users&#x27;</span>, <span class="hljs-attr">component</span>: <span class="hljs-string">&#x27;@/pages/users&#x27;</span> &#125;,<br>    ],<br>  &#125;,<br>]<br></code></pre></td></tr></table></figure><p>ä¸€ä¸ªè‡ªå®šä¹‰çš„å…¨å±€ <code>layout</code> å¦‚ä¸‹ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">IRouteComponentProps</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;umi&#x27;</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Layout</span>(<span class="hljs-params">&#123; children, location, route, history, match &#125;: IRouteComponentProps</span>) &#123;  <span class="hljs-keyword">return</span> children&#125;<br></code></pre></td></tr></table></figure><h3 id="ä¸åŒçš„å…¨å±€-layout"><a href="#ä¸åŒçš„å…¨å±€-layout" class="headerlink" title="ä¸åŒçš„å…¨å±€ layout"></a>ä¸åŒçš„å…¨å±€ layout</h3><p>ä½ å¯èƒ½éœ€è¦é’ˆå¯¹ä¸åŒè·¯ç”±è¾“å‡ºä¸åŒçš„å…¨å±€ layoutï¼ŒUmi ä¸æ”¯æŒè¿™æ ·çš„é…ç½®ï¼Œä½†ä½ ä»å¯ä»¥åœ¨ <code>src/layouts/index.tsx</code> ä¸­å¯¹ <code>location.path</code> åšåŒºåˆ†ï¼Œæ¸²æŸ“ä¸åŒçš„ layout ã€‚</p><p>æ¯”å¦‚æƒ³è¦é’ˆå¯¹ <code>/login</code> è¾“å‡ºç®€å•å¸ƒå±€ï¼Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">props</span>) &#123;  <span class="hljs-keyword">if</span> (props.<span class="hljs-property">location</span>.<span class="hljs-property">pathname</span> === <span class="hljs-string">&#x27;/login&#x27;</span>) &#123;    <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">SimpleLayout</span>&gt;</span>&#123; props.children &#125;<span class="hljs-tag">&lt;/<span class="hljs-name">SimpleLayout</span>&gt;</span></span>  &#125;<br>  <span class="hljs-keyword">return</span> (    <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span>      <span class="hljs-tag">&lt;<span class="hljs-name">Header</span> /&gt;</span>      &#123; props.children &#125;      <span class="hljs-tag">&lt;<span class="hljs-name">Footer</span> /&gt;</span>    <span class="hljs-tag">&lt;/&gt;</span></span>  );&#125;<br></code></pre></td></tr></table></figure><h3 id="404-è·¯ç”±"><a href="#404-è·¯ç”±" class="headerlink" title="404 è·¯ç”±"></a>404 è·¯ç”±</h3><p>çº¦å®š <code>src/pages/404.tsx</code> ä¸º 404 é¡µé¢ï¼Œéœ€è¿”å› React ç»„ä»¶ã€‚</p><p>æ¯”å¦‚ä»¥ä¸‹ç›®å½•ç»“æ„ï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">.<br>â””â”€â”€ pages<br>    â”œâ”€â”€ 404.tsx<br>    â”œâ”€â”€ index.tsx<br>    â””â”€â”€ users.tsx<br></code></pre></td></tr></table></figure><p>ä¼šç”Ÿæˆè·¯ç”±ï¼Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js">[<br>  &#123; <span class="hljs-attr">exact</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-attr">component</span>: <span class="hljs-string">&#x27;@/pages/index&#x27;</span> &#125;,<br>  &#123; <span class="hljs-attr">exact</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/users&#x27;</span>, <span class="hljs-attr">component</span>: <span class="hljs-string">&#x27;@/pages/users&#x27;</span> &#125;,<br>  &#123; <span class="hljs-attr">component</span>: <span class="hljs-string">&#x27;@/pages/404&#x27;</span> &#125;,<br>]<br></code></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œå¦‚æœè®¿é—® <code>/foo</code>ï¼Œ<code>/</code> å’Œ <code>/users</code> éƒ½ä¸èƒ½åŒ¹é…ï¼Œä¼š fallback åˆ° 404 è·¯ç”±ï¼Œé€šè¿‡ <code>src/pages/404.tsx</code> è¿›è¡Œæ¸²æŸ“ã€‚</p><h3 id="æƒé™è·¯ç”±"><a href="#æƒé™è·¯ç”±" class="headerlink" title="æƒé™è·¯ç”±"></a>æƒé™è·¯ç”±</h3><p>é€šè¿‡æŒ‡å®šé«˜é˜¶ç»„ä»¶ <code>wrappers</code> è¾¾æˆæ•ˆæœã€‚</p><p>å¦‚ä¸‹ï¼Œ<code>src/pages/user</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">User</span>(<span class="hljs-params"></span>) &#123;  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span>user profile<span class="hljs-tag">&lt;/&gt;</span></span>&#125;<br><span class="hljs-title class_">User</span>.<span class="hljs-property">wrappers</span> = [<span class="hljs-string">&#x27;@/wrappers/auth&#x27;</span>]<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">User</span><br></code></pre></td></tr></table></figure><p>ç„¶ååœ¨ <code>src/wrappers/auth</code> ä¸­ï¼Œ</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Redirect</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;umi&#x27;</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> (props) =&gt; &#123;  <span class="hljs-keyword">const</span> &#123; isLogin &#125; = <span class="hljs-title function_">useAuth</span>();  <span class="hljs-keyword">if</span> (isLogin) &#123;    <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123; props.children &#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;  &#125; <span class="hljs-keyword">else</span> &#123;    <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Redirect</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/login&quot;</span> /&gt;</span></span>;  &#125;&#125;<br></code></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œè®¿é—® <code>/user</code>ï¼Œå°±é€šè¿‡ <code>useAuth</code> åšæƒé™æ ¡éªŒï¼Œå¦‚æœé€šè¿‡ï¼Œæ¸²æŸ“ <code>src/pages/user</code>ï¼Œå¦åˆ™è·³è½¬åˆ° <code>/login</code>ï¼Œç”± <code>src/pages/login</code> è¿›è¡Œæ¸²æŸ“ã€‚</p><h3 id="æ‰©å±•è·¯ç”±å±æ€§"><a href="#æ‰©å±•è·¯ç”±å±æ€§" class="headerlink" title="æ‰©å±•è·¯ç”±å±æ€§"></a>æ‰©å±•è·¯ç”±å±æ€§</h3><p>æ”¯æŒåœ¨ä»£ç å±‚é€šè¿‡å¯¼å‡ºé™æ€å±æ€§çš„æ–¹å¼æ‰©å±•è·¯ç”±ã€‚</p><p>æ¯”å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">HomePage</span>(<span class="hljs-params"></span>) &#123;  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Home Page<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;&#125;<br><span class="hljs-title class_">HomePage</span>.<span class="hljs-property">title</span> = <span class="hljs-string">&#x27;Home Page&#x27;</span>;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">HomePage</span>;<br></code></pre></td></tr></table></figure><p>å…¶ä¸­çš„ <code>title</code> ä¼šé™„åŠ åˆ°è·¯ç”±é…ç½®ä¸­ã€‚</p><h2 id="æ’ä»¶"><a href="#æ’ä»¶" class="headerlink" title="æ’ä»¶"></a>æ’ä»¶</h2><h3 id="æ’ä»¶çš„-id-å’Œ-key"><a href="#æ’ä»¶çš„-id-å’Œ-key" class="headerlink" title="æ’ä»¶çš„ id å’Œ key"></a>æ’ä»¶çš„ id å’Œ key</h3><p>æ¯ä¸ªæ’ä»¶éƒ½ä¼šå¯¹åº”ä¸€ä¸ª id å’Œä¸€ä¸ª keyï¼Œ<strong>id æ˜¯è·¯å¾„çš„ç®€å†™</strong>ï¼Œ<strong>key æ˜¯è¿›ä¸€æ­¥ç®€åŒ–åç”¨äºé…ç½®çš„å”¯ä¸€å€¼</strong>ã€‚</p><p>æ¯”å¦‚æ’ä»¶ <code>/node_modules/@umijs/plugin-foo/index.js</code>ï¼Œé€šå¸¸æ¥è¯´ï¼Œå…¶ id ä¸º <code>@umijs/plugin-foo</code>ï¼Œkey ä¸º <code>foo</code>ã€‚</p><h3 id="å¯ç”¨æ’ä»¶"><a href="#å¯ç”¨æ’ä»¶" class="headerlink" title="å¯ç”¨æ’ä»¶"></a>å¯ç”¨æ’ä»¶</h3><p>æ’ä»¶æœ‰å¤šç§å¯ç”¨æ–¹å¼ï¼Œ</p><h4 id="package-json-ä¾èµ–"><a href="#package-json-ä¾èµ–" class="headerlink" title="package.json ä¾èµ–"></a>package.json ä¾èµ–</h4><p>Umi ä¼šè‡ªåŠ¨æ£€æµ‹ <code>dependencies</code> å’Œ <code>devDependencies</code> é‡Œçš„ umi æ’ä»¶ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;dependencies&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;@umijs/preset-react&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆ <code>@umijs/preset-react</code> ä¼šè‡ªåŠ¨è¢«æ³¨å†Œï¼Œæ— éœ€åœ¨é…ç½®é‡Œé‡å¤å£°æ˜ã€‚</p><h4 id="é…ç½®-1"><a href="#é…ç½®-1" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><p>åœ¨é…ç½®é‡Œå¯é€šè¿‡ <code>presets</code> å’Œ <code>plugins</code> é…ç½®æ’ä»¶ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-attr">presets</span>: [<span class="hljs-string">&#x27;./preset&#x27;</span>, <span class="hljs-string">&#x27;foo/presets&#x27;</span>],<br>  <span class="hljs-attr">plugins</span>: [<span class="hljs-string">&#x27;./plugin&#x27;</span>],<br>&#125;<br></code></pre></td></tr></table></figure><p>é€šå¸¸ç”¨äºå‡ ç§æƒ…å†µï¼š</p><ol><li>é¡¹ç›®ç›¸å¯¹è·¯å¾„çš„æ’ä»¶</li><li>é npm åŒ…å…¥å£æ–‡ä»¶çš„æ’ä»¶</li></ol><p>æ³¨æ„ï¼š</p><ul><li>è¯·ä¸è¦é…ç½® npm åŒ…çš„æ’ä»¶ï¼Œå¦åˆ™ä¼šæŠ¥é‡å¤æ³¨å†Œçš„é”™è¯¯</li></ul><h4 id="ç¯å¢ƒå˜é‡"><a href="#ç¯å¢ƒå˜é‡" class="headerlink" title="ç¯å¢ƒå˜é‡"></a>ç¯å¢ƒå˜é‡</h4><p>è¿˜å¯é€šè¿‡ç¯å¢ƒå˜é‡ <code>UMI_PRESETS</code> å’Œ <code>UMI_PLUGINS</code> æ³¨å†Œé¢å¤–æ’ä»¶ã€‚</p><p>æ¯”å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ UMI_PRESETS=/a/b/preset.js umi dev<br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><ul><li>é¡¹ç›®é‡Œä¸å»ºè®®ä½¿ç”¨ï¼Œé€šå¸¸ç”¨äºåŸºäº umi çš„æ¡†æ¶äºŒæ¬¡å°è£…</li></ul><h3 id="æ£€æŸ¥æ’ä»¶æ³¨å†Œæƒ…å†µ"><a href="#æ£€æŸ¥æ’ä»¶æ³¨å†Œæƒ…å†µ" class="headerlink" title="æ£€æŸ¥æ’ä»¶æ³¨å†Œæƒ…å†µ"></a>æ£€æŸ¥æ’ä»¶æ³¨å†Œæƒ…å†µ</h3><h4 id="é€šè¿‡å‘½ä»¤è¡Œ"><a href="#é€šè¿‡å‘½ä»¤è¡Œ" class="headerlink" title="é€šè¿‡å‘½ä»¤è¡Œ"></a>é€šè¿‡å‘½ä»¤è¡Œ</h4><p>å¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ umi plugin list<br><span class="hljs-comment"># é¡ºä¾¿çœ‹çœ‹ä»–ä»¬åˆ†åˆ«ç”¨äº†å“ªäº› key$ umi plugin list --key</span><br></code></pre></td></tr></table></figure><p>ç»“æœé€šå¸¸å¦‚ä¸‹ï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">Plugins:<br>    - @umijs/preset-built-in [key: builtIn] (preset)    - @@/registerMethods [key: registerMethods]    - @@/routes [key: routes]    - @@/generateFiles/core/history [key: <span class="hljs-built_in">history</span>]    - @@/generateFiles/core/plugin [key: plugin]    - @@/generateFiles/core/routes [key: routes]    - ...<br></code></pre></td></tr></table></figure><h4 id="åœ¨æ’ä»¶é‡Œæ„ŸçŸ¥å…¶ä»–æ’ä»¶"><a href="#åœ¨æ’ä»¶é‡Œæ„ŸçŸ¥å…¶ä»–æ’ä»¶" class="headerlink" title="åœ¨æ’ä»¶é‡Œæ„ŸçŸ¥å…¶ä»–æ’ä»¶"></a>åœ¨æ’ä»¶é‡Œæ„ŸçŸ¥å…¶ä»–æ’ä»¶</h4><p>å¯é€šè¿‡ <code>api.hasPlugins(pluginId[])</code> å’Œ <code>api.hasPresets(pluginId[])</code> çš„æ–¹å¼æ„ŸçŸ¥å…¶ä»–æ’ä»¶ï¼Œè¯¦è§æ’ä»¶ APIã€‚</p><h3 id="ç¦ç”¨æ’ä»¶"><a href="#ç¦ç”¨æ’ä»¶" class="headerlink" title="ç¦ç”¨æ’ä»¶"></a>ç¦ç”¨æ’ä»¶</h3><p>æœ‰ä¸¤ç§æ–¹å¼å¯ç¦ç”¨æ’ä»¶ï¼Œ</p><h4 id="é…ç½®-key-ä¸º-false"><a href="#é…ç½®-key-ä¸º-false" class="headerlink" title="é…ç½® key ä¸º false"></a>é…ç½® key ä¸º false</h4><p>æ¯”å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-attr">mock</span>: <span class="hljs-literal">false</span>,<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¼šç¦ç”¨ Umi å†…ç½®çš„ mock æ’ä»¶åŠå…¶åŠŸèƒ½ã€‚</p><h4 id="åœ¨æ’ä»¶é‡Œç¦ç”¨å…¶ä»–æ’ä»¶"><a href="#åœ¨æ’ä»¶é‡Œç¦ç”¨å…¶ä»–æ’ä»¶" class="headerlink" title="åœ¨æ’ä»¶é‡Œç¦ç”¨å…¶ä»–æ’ä»¶"></a>åœ¨æ’ä»¶é‡Œç¦ç”¨å…¶ä»–æ’ä»¶</h4><p>å¯é€šè¿‡ <code>api.skipPlugins(pluginId[])</code> çš„æ–¹å¼ç¦ç”¨ï¼Œè¯¦è§æ’ä»¶ APIã€‚</p><h3 id="é…ç½®æ’ä»¶"><a href="#é…ç½®æ’ä»¶" class="headerlink" title="é…ç½®æ’ä»¶"></a>é…ç½®æ’ä»¶</h3><p>é€šè¿‡æ’ä»¶çš„ key æ¥é…ç½®æ’ä»¶ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-attr">mock</span>: &#123; <span class="hljs-attr">exclude</span>: [<span class="hljs-string">&#x27;./foo&#x27;</span>] &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„ mock æ˜¯ mock æ’ä»¶çš„ keyã€‚</p><p>å†æ¯”å¦‚æˆ‘ä»¬å®‰è£…ä¸€ä¸ªæ’ä»¶ <code>umi-plugin-bar</code>ï¼Œå…¶ key é»˜è®¤æ˜¯ <code>bar</code>ï¼Œå°±å¯ä»¥è¿™ä¹ˆé…ç½®ï¼Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-attr">bar</span>: &#123; ...balabala &#125;,<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Mock-æ•°æ®"><a href="#Mock-æ•°æ®" class="headerlink" title="Mock æ•°æ®"></a>Mock æ•°æ®</h2><p>Mock æ•°æ®æ˜¯å‰ç«¯å¼€å‘è¿‡ç¨‹ä¸­å¿…ä¸å¯å°‘çš„ä¸€ç¯ï¼Œæ˜¯åˆ†ç¦»å‰åç«¯å¼€å‘çš„å…³é”®é“¾è·¯ã€‚é€šè¿‡é¢„å…ˆè·ŸæœåŠ¡å™¨ç«¯çº¦å®šå¥½çš„æ¥å£ï¼Œæ¨¡æ‹Ÿè¯·æ±‚æ•°æ®ç”šè‡³é€»è¾‘ï¼Œèƒ½å¤Ÿè®©å‰ç«¯å¼€å‘ç‹¬ç«‹è‡ªä¸»ï¼Œä¸ä¼šè¢«æœåŠ¡ç«¯çš„å¼€å‘æ‰€é˜»å¡ã€‚</p><h3 id="çº¦å®šå¼-Mock-æ–‡ä»¶"><a href="#çº¦å®šå¼-Mock-æ–‡ä»¶" class="headerlink" title="çº¦å®šå¼ Mock æ–‡ä»¶"></a>çº¦å®šå¼ Mock æ–‡ä»¶</h3><p>Umi çº¦å®š <code>/mock</code> æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ–‡ä»¶ä¸º mock æ–‡ä»¶ã€‚</p><p>æ¯”å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">.<br>â”œâ”€â”€ mock<br>    â”œâ”€â”€ api.ts<br>    â””â”€â”€ users.ts<br>â””â”€â”€ src<br>    â””â”€â”€ pages<br>        â””â”€â”€ index.tsx<br></code></pre></td></tr></table></figure><p><code>/mock</code> ä¸‹çš„ <code>api.ts</code> å’Œ <code>users.ts</code> ä¼šè¢«è§£æä¸º mock æ–‡ä»¶ã€‚</p><h3 id="ç¼–å†™-Mock-æ–‡ä»¶"><a href="#ç¼–å†™-Mock-æ–‡ä»¶" class="headerlink" title="ç¼–å†™ Mock æ–‡ä»¶"></a>ç¼–å†™ Mock æ–‡ä»¶</h3><p>å¦‚æœ <code>/mock/api.ts</code> çš„å†…å®¹å¦‚ä¸‹ï¼Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;  <span class="hljs-comment">// æ”¯æŒå€¼ä¸º Object å’Œ Array  &#x27;GET /api/users&#x27;: &#123; users: [1, 2] &#125;,</span><br>  <span class="hljs-comment">// GET å¯å¿½ç•¥  &#x27;/api/users/1&#x27;: &#123; id: 1 &#125;,</span><br>  <span class="hljs-comment">// æ”¯æŒè‡ªå®šä¹‰å‡½æ•°ï¼ŒAPI å‚è€ƒ express@4  &#x27;POST /api/users/create&#x27;: (req, res) =&gt; &#123;    // æ·»åŠ è·¨åŸŸè¯·æ±‚å¤´    res.setHeader(&#x27;Access-Control-Allow-Origin&#x27;, &#x27;*&#x27;);    res.end(&#x27;ok&#x27;);  &#125;,&#125;</span><br></code></pre></td></tr></table></figure><p>ç„¶åè®¿é—® <code>/api/users</code> å°±èƒ½å¾—åˆ° <code>&#123; users: [1,2] &#125;</code> çš„å“åº”ï¼Œå…¶ä»–ä»¥æ­¤ç±»æ¨ã€‚</p><h3 id="é…ç½®-Mock"><a href="#é…ç½®-Mock" class="headerlink" title="é…ç½® Mock"></a>é…ç½® Mock</h3><p>è¯¦è§<a href="https://v3.umijs.org/config#mock">é…ç½®#mock</a>ã€‚</p><h3 id="å¦‚ä½•å…³é—­-Mockï¼Ÿ"><a href="#å¦‚ä½•å…³é—­-Mockï¼Ÿ" class="headerlink" title="å¦‚ä½•å…³é—­ Mockï¼Ÿ"></a>å¦‚ä½•å…³é—­ Mockï¼Ÿ</h3><p>å¯ä»¥é€šè¿‡é…ç½®å…³é—­ï¼Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-attr">mock</span>: <span class="hljs-literal">false</span>,<br>&#125;;<br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡ä¸´æ—¶å…³é—­ï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ MOCK=none umi dev<br></code></pre></td></tr></table></figure><h3 id="å¼•å…¥-Mock-js"><a href="#å¼•å…¥-Mock-js" class="headerlink" title="å¼•å…¥ Mock.js"></a>å¼•å…¥ Mock.js</h3><p><a href="http://mockjs.com/">Mock.js</a> æ˜¯å¸¸ç”¨çš„è¾…åŠ©ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®çš„ä¸‰æ–¹åº“ï¼Œå€ŸåŠ©ä»–å¯ä»¥æå‡æˆ‘ä»¬çš„ mock æ•°æ®èƒ½åŠ›ã€‚</p><p>æ¯”å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> mockjs <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;mockjs&#x27;</span>;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;  <span class="hljs-comment">// ä½¿ç”¨ mockjs ç­‰ä¸‰æ–¹åº“  &#x27;GET /api/tags&#x27;: mockjs.mock(&#123;    &#x27;list|100&#x27;: [&#123; name: &#x27;@city&#x27;, &#x27;value|1-100&#x27;: 50, &#x27;type|0-2&#x27;: 1 &#125;],  &#125;),&#125;;</span><br></code></pre></td></tr></table></figure><h2 id="å‘½ä»¤è¡Œå·¥å…·"><a href="#å‘½ä»¤è¡Œå·¥å…·" class="headerlink" title="å‘½ä»¤è¡Œå·¥å…·"></a>å‘½ä»¤è¡Œå·¥å…·</h2><h3 id="umi-build"><a href="#umi-build" class="headerlink" title="umi build"></a>umi build</h3><p>ç¼–è¯‘æ„å»º web äº§ç‰©ã€‚é€šå¸¸éœ€è¦é’ˆå¯¹éƒ¨ç½²ç¯å¢ƒï¼Œåšç‰¹å®šçš„é…ç½®å’Œç¯å¢ƒå˜é‡ä¿®æ”¹ã€‚ç›¸å…³è¯¦æƒ…ï¼Œè¯·æŸ¥é˜…<a href="https://v3.umijs.org/zh-CN/docs/deployment">éƒ¨ç½²</a>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ umi build<br>âœ” Webpack  Compiled successfully <span class="hljs-keyword">in</span> 5.54s<br>  DONE  Compiled successfully <span class="hljs-keyword">in</span> 5547ms<br>Build success.âœ¨  Done <span class="hljs-keyword">in</span> 9.77s.<br></code></pre></td></tr></table></figure><p>é»˜è®¤äº§ç‰©è¾“å‡ºåˆ°é¡¹ç›®çš„ <code>dist</code> æ–‡ä»¶å¤¹ï¼Œä½ å¯ä»¥é€šè¿‡ä¿®æ”¹é…ç½® <code>outputPath</code> æŒ‡å®šäº§ç‰©è¾“å‡ºç›®å½•ã€‚ é»˜è®¤ç¼–è¯‘æ—¶ä¼šå°† <code>public</code> æ–‡ä»¶å¤¹å†…çš„æ‰€æœ‰æ–‡ä»¶ï¼ŒåŸæ ·æ‹·è´åˆ° <code>dist</code> ç›®å½•ï¼Œå¦‚æœä½ ä¸éœ€è¦è¿™ä¸ªç‰¹æ€§ï¼Œå¯ä»¥é€šè¿‡é…ç½® <code>chainWebpack</code> æ¥åˆ é™¤å®ƒã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-title function_">chainWebpack</span>(<span class="hljs-params">memo, &#123; env, webpack &#125;</span>) &#123;<br>    <span class="hljs-comment">// åˆ é™¤ umi å†…ç½®æ’ä»¶</span><br>    memo.<span class="hljs-property">plugins</span>.<span class="hljs-title function_">delete</span>(<span class="hljs-string">&#x27;copy&#x27;</span>);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šå¦‚æœ <code>public</code> é‡Œé¢å­˜åœ¨äº§ç‰©åŒåæ–‡ä»¶ï¼Œå¦‚ <code>index.html</code>ï¼Œå°†ä¼šå¯¼è‡´äº§ç‰©æ–‡ä»¶è¢«è¦†ç›–ã€‚</p></blockquote><h3 id="umi-dev"><a href="#umi-dev" class="headerlink" title="umi dev"></a>umi dev</h3><p>å¯åŠ¨æœ¬åœ°å¼€å‘æœåŠ¡å™¨è¿›è¡Œé¡¹ç›®çš„å¼€å‘è°ƒè¯•</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ umi dev<br></code></pre></td></tr></table></figure><p>å¯åŠ¨åœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„å¼€å‘æœåŠ¡å™¨ï¼Œå¹¶ç›‘è§†æºæ–‡ä»¶å˜åŒ–ï¼Œè‡ªåŠ¨çƒ­åŠ è½½ã€‚</p><p>é»˜è®¤ä½¿ç”¨ <code>8000</code> ç«¯å£ï¼Œå¦‚æœ <code>8000</code> ç«¯å£è¢«å ç”¨ï¼Œå°†ä¼šä½¿ç”¨ <code>8001</code> ç«¯å£ï¼Œä»¥æ­¤ç±»æ¨ã€‚ ä½ å¯ä»¥é€šè¿‡è®¾ç½®ç¯å¢ƒå˜é‡ <code>PORT</code> æ¥æŒ‡å®šå¼€å‘ç«¯å£å·ã€‚æ›´å¤šç¯å¢ƒå˜é‡é…ç½®ï¼Œè¯·æŸ¥é˜…<a href="https://v3.umijs.org/docs/env-variables">ç¯å¢ƒå˜é‡</a>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">umi devStarting the development server...<br>âœ” Webpack  Compiled successfully <span class="hljs-keyword">in</span> 2.27s<br>  DONE  Compiled successfully <span class="hljs-keyword">in</span> 2276ms<br>  App running at:  - Local:   http://localhost:8000 (copied to clipboard)  - Network: http://192.168.50.236:8000<br></code></pre></td></tr></table></figure><p>å¼€å¯å¼€å‘æœåŠ¡è¿˜ä¼šåŒæ—¶æä¾›ä¸€ä¸ª Network çš„é“¾æ¥ï¼Œä½ å¯ä»¥åœ¨èƒ½è®¿é—®åˆ°ä½ å½“å‰è¿è¡Œè®¾å¤‡çš„å…¶ä»–è®¾å¤‡ä¸­é¢„è§ˆé¡µé¢ã€‚</p><blockquote><p>æ³¨æ„ï¼šå¦‚æœæ˜¯åœ¨å¼€å¯äº†VPNï¼Œæˆ–è€…è™šæ‹Ÿæœºç­‰å¤æ‚çš„ç½‘ç»œç¯å¢ƒä¸­ï¼Œè¿™ä¸ªåœ°å€å¾ˆå¯èƒ½ä¼šé”™è¯¯ã€‚ä½ å¯ä»¥é€šè¿‡è®¿é—®ä½ çœŸå®å¯ç”¨ <code>ip</code> çš„å¯¹åº”ç«¯å£å·æ¥è®¿é—®å¼€å‘é¡µé¢ã€‚</p></blockquote><h3 id="umi-generate"><a href="#umi-generate" class="headerlink" title="umi generate"></a>umi generate</h3><p>å†…ç½®çš„ç”Ÿæˆå™¨åŠŸèƒ½ï¼Œå†…ç½®çš„ç±»å‹æœ‰ <code>page</code> ï¼Œç”¨äºç”Ÿæˆæœ€ç®€é¡µé¢ã€‚æ”¯æŒåˆ«åè°ƒç”¨ <code>umi g</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ umi generate &lt;<span class="hljs-built_in">type</span>&gt; &lt;name&gt; [options]<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤æ”¯æŒæ‰©å±•ï¼Œé€šè¿‡ <code>api.registerGenerator</code> æ³¨å†Œï¼Œä½ å¯ä»¥é€šè¿‡æ’ä»¶æ¥å®ç°è‡ªå·±å¸¸ç”¨çš„ç”Ÿæˆå™¨ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Generator</span>, <span class="hljs-title class_">IApi</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;umi&#x27;</span>;<br><span class="hljs-keyword">const</span> createPagesGenerator = <span class="hljs-keyword">function</span> (<span class="hljs-params">&#123; api &#125;: &#123; api: IApi &#125;</span>) &#123;  <span class="hljs-keyword">return</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PageGenerator</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Generator</span> &#123;    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">opts: <span class="hljs-built_in">any</span></span>) &#123;      <span class="hljs-variable language_">super</span>(opts);    &#125;    <span class="hljs-keyword">async</span> <span class="hljs-title function_">writing</span>(<span class="hljs-params"></span>) &#123;&#125;  &#125;;&#125;<br>api.<span class="hljs-title function_">registerGenerator</span>(&#123;  <span class="hljs-attr">key</span>: <span class="hljs-string">&#x27;pages&#x27;</span>,  <span class="hljs-title class_">Generator</span>: <span class="hljs-title function_">createPageGenerator</span>(&#123; api &#125;),&#125;);<br>umi generate page pageName<br>umi generate page pageName --typescript<br>umi generate page pageName --less<br></code></pre></td></tr></table></figure><p>æ›´å¤šä½¿ç”¨ç±»å‹å’Œå‚æ•°ï¼Œè¯·æŸ¥é˜…æä¾›ç”Ÿæˆå™¨æ‰©å±•çš„æ’ä»¶çš„æ–‡æ¡£ã€‚</p><h3 id="umi-plugin"><a href="#umi-plugin" class="headerlink" title="umi plugin"></a>umi plugin</h3><p>å¿«é€ŸæŸ¥çœ‹å½“å‰é¡¹ç›®ä½¿ç”¨åˆ°çš„æ‰€æœ‰çš„ <code>umi</code> æ’ä»¶ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ umi plugin &lt;<span class="hljs-built_in">type</span>&gt; [options]<br></code></pre></td></tr></table></figure><p>å½“å‰æ”¯æŒçš„ <code>type</code> æ˜¯ <code>list</code>ï¼Œå¯é€‰å‚æ•° <code>key</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ umi plugin list<br>Plugins:<br>  - @umijs/preset-built-in (preset)  - ./node_modules/umi/lib/plugins/umiAlias<br>âœ¨  Done <span class="hljs-keyword">in</span> 2.27s.<br>$ umi plugin list --key<br>Plugins:<br>  - @umijs/preset-built-in [key: builtIn]  (preset)  - ./node_modules/umi/lib/plugins/umiAlias  [key: builtIn]<br>âœ¨  Done <span class="hljs-keyword">in</span> 2.27s.<br></code></pre></td></tr></table></figure><h3 id="umi-help"><a href="#umi-help" class="headerlink" title="umi help"></a>umi help</h3><p>umi å‘½ä»¤è¡Œçš„ç®€æ˜“å¸®åŠ©æ–‡æ¡£ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ umi <span class="hljs-built_in">help</span> &lt;<span class="hljs-built_in">command</span>&gt;<br></code></pre></td></tr></table></figure><h3 id="umi-version"><a href="#umi-version" class="headerlink" title="umi version"></a>umi version</h3><p>æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„ umi çš„ç‰ˆæœ¬å·ï¼Œå¯ä»¥ä½¿ç”¨åˆ«å <code>-v</code> è°ƒç”¨ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ umi version<br>$ umi -v<br></code></pre></td></tr></table></figure><h3 id="umi-webpack"><a href="#umi-webpack" class="headerlink" title="umi webpack"></a>umi webpack</h3><p>æŸ¥çœ‹ umi ä½¿ç”¨çš„ webpack é…ç½®ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ umi webpack [options]<br></code></pre></td></tr></table></figure><p>å‚æ•°ï¼Œ</p><table><thead><tr><th>å¯é€‰å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>rules</td><td>æŸ¥çœ‹ webpack.module.rules é…ç½®è¯¦æƒ…</td></tr><tr><td>rule&#x3D;[name]</td><td>æŸ¥çœ‹ webpack.module.rules ä¸­æŸä¸ªè§„åˆ™çš„é…ç½®è¯¦æƒ…</td></tr><tr><td>plugins</td><td>æŸ¥çœ‹ webpack.plugins é…ç½®è¯¦æƒ…</td></tr><tr><td>plugin&#x3D;[name]</td><td>æŸ¥çœ‹ webpack.plugins ä¸­æŸä¸ªæ’ä»¶çš„é…ç½®è¯¦æƒ…</td></tr></tbody></table><p>ç¤ºä¾‹ï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ umi webpack<br>&#123;  mode: <span class="hljs-string">&#x27;development&#x27;</span>,  devtool: <span class="hljs-string">&#x27;cheap-module-source-map&#x27;</span>,  node:&#123; &#125;,  output:&#123; &#125;,  resolve:&#123; &#125;,  module:&#123;    rules:[ ]  &#125;,  plugins:[ ],  entry:&#123; &#125;&#125;<br>$ umi webpack --rules<br>[  <span class="hljs-string">&#x27;js&#x27;</span>,  <span class="hljs-string">&#x27;ts-in-node_modules&#x27;</span>,  <span class="hljs-string">&#x27;js-in-node_modules&#x27;</span>,  <span class="hljs-string">&#x27;images&#x27;</span>,  <span class="hljs-string">&#x27;svg&#x27;</span>,  <span class="hljs-string">&#x27;fonts&#x27;</span>,  <span class="hljs-string">&#x27;plaintext&#x27;</span>,  <span class="hljs-string">&#x27;css&#x27;</span>,  <span class="hljs-string">&#x27;less&#x27;</span>]<br>$ umi webpack --rule=js<br>&#123;  <span class="hljs-built_in">test</span>: /\.(js|mjs|jsx|ts|tsx)$/,  include: [ <span class="hljs-string">&#x27;xx/umi&#x27;</span> ],  exclude: [ /node_modules/ ],  use:[    &#123;      loader:<span class="hljs-string">&#x27;xx/babel-loader/lib/index.js&#x27;</span>,      options: &#123;        sourceType: <span class="hljs-string">&#x27;unambiguous&#x27;</span>      &#125;    &#125;  ]&#125;<br>$ umi webpack --plugins<br>[  <span class="hljs-string">&#x27;extract-css&#x27;</span>,  <span class="hljs-string">&#x27;define&#x27;</span>,  <span class="hljs-string">&#x27;progress&#x27;</span>,  <span class="hljs-string">&#x27;copy&#x27;</span>,  <span class="hljs-string">&#x27;friendly-error&#x27;</span>,  <span class="hljs-string">&#x27;hmr&#x27;</span>]<br>$ umi webpack --plugin=extract-css<br>MiniCssExtractPlugin &#123;  options:&#123;    filename: <span class="hljs-string">&#x27;[name].css&#x27;</span>,    moduleFilename: [Function: moduleFilename],    ignoreOrder: <span class="hljs-literal">true</span>,    chunkFilename: <span class="hljs-string">&#x27;[name].chunk.css&#x27;</span>  &#125;&#125;<br></code></pre></td></tr></table></figure><p>é»˜è®¤ä¼šæ‰“å° development çš„é…ç½®ï¼Œå¦‚éœ€æŸ¥çœ‹ production é…ç½®ï¼Œéœ€è¦æŒ‡å®šç¯å¢ƒå˜é‡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ NODE_ENV=production umi webpack<br>&#123;  mode: <span class="hljs-string">&#x27;production&#x27;</span>&#125;<br></code></pre></td></tr></table></figure><h2 id="ä½¿ç”¨-CSS"><a href="#ä½¿ç”¨-CSS" class="headerlink" title="ä½¿ç”¨ CSS"></a>ä½¿ç”¨ CSS</h2><blockquote><p>æœ¬æ–‡æ¡£ä»¥ css ä¸ºç¤ºä¾‹ï¼ŒæŠŠåç¼€æ¢æˆ <code>.less</code> åŒæ ·é€‚ç”¨ã€‚</p></blockquote><h3 id="å…¨å±€æ ·å¼"><a href="#å…¨å±€æ ·å¼" class="headerlink" title="å…¨å±€æ ·å¼"></a>å…¨å±€æ ·å¼</h3><p>Umi ä¸­çº¦å®š <code>src/global.css</code> ä¸ºå…¨å±€æ ·å¼ï¼Œå¦‚æœå­˜åœ¨æ­¤æ–‡ä»¶ï¼Œä¼šè¢«è‡ªåŠ¨å¼•å…¥åˆ°å…¥å£æ–‡ä»¶æœ€å‰é¢ã€‚</p><p>æ¯”å¦‚ç”¨äºè¦†ç›–æ ·å¼ï¼Œ</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.ant-select-selection</span> &#123;<br>  <span class="hljs-attribute">max-height</span>: <span class="hljs-number">51px</span>;<br>  <span class="hljs-attribute">overflow</span>: auto;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="CSS-Modules"><a href="#CSS-Modules" class="headerlink" title="CSS Modules"></a>CSS Modules</h3><p>Umi ä¼šè‡ªåŠ¨è¯†åˆ« CSS Modules çš„ä½¿ç”¨ï¼Œä½ æŠŠä»–å½“åš CSS Modules ç”¨æ—¶æ‰æ˜¯ CSS Modulesã€‚</p><p>æ¯”å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// CSS Modulesimport styles from &#x27;./foo.css&#x27;;</span><br><span class="hljs-comment">// é CSS Modulesimport &#x27;./foo.css&#x27;;</span><br></code></pre></td></tr></table></figure><h3 id="CSS-é¢„å¤„ç†å™¨"><a href="#CSS-é¢„å¤„ç†å™¨" class="headerlink" title="CSS é¢„å¤„ç†å™¨"></a>CSS é¢„å¤„ç†å™¨</h3><p>Umi å†…ç½®æ”¯æŒ lessï¼Œä¸æ”¯æŒ sass å’Œ stylusï¼Œä½†å¦‚æœæœ‰éœ€æ±‚ï¼Œå¯ä»¥é€šè¿‡ chainWebpack é…ç½®æˆ–è€… umi æ’ä»¶çš„å½¢å¼æ”¯æŒã€‚</p><h3 id="CSS-ä¸­å¼•å…¥ä¸‰æ–¹åº“"><a href="#CSS-ä¸­å¼•å…¥ä¸‰æ–¹åº“" class="headerlink" title="CSS ä¸­å¼•å…¥ä¸‰æ–¹åº“"></a>CSS ä¸­å¼•å…¥ä¸‰æ–¹åº“</h3><p>TODOï¼šåˆ«åçš„ä½¿ç”¨ã€‚</p><h2 id="ä½¿ç”¨å›¾ç‰‡"><a href="#ä½¿ç”¨å›¾ç‰‡" class="headerlink" title="ä½¿ç”¨å›¾ç‰‡"></a>ä½¿ç”¨å›¾ç‰‡</h2><h3 id="JS-é‡Œä½¿ç”¨å›¾ç‰‡"><a href="#JS-é‡Œä½¿ç”¨å›¾ç‰‡" class="headerlink" title="JS é‡Œä½¿ç”¨å›¾ç‰‡"></a>JS é‡Œä½¿ç”¨å›¾ç‰‡</h3><p>é€šè¿‡ require å¼•ç”¨ç›¸å¯¹è·¯å¾„çš„å›¾ç‰‡ã€‚</p><p>æ¯”å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> () =&gt; <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&#123;require(</span>&#x27;<span class="hljs-attr">.</span>/<span class="hljs-attr">foo.png</span>&#x27;)&#125; /&gt;</span></span><br></code></pre></td></tr></table></figure><p>æ”¯æŒåˆ«åï¼Œæ¯”å¦‚é€šè¿‡ <code>@</code> æŒ‡å‘ src ç›®å½•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> () =&gt; <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&#123;require(</span>&#x27;@/<span class="hljs-attr">foo.png</span>&#x27;)&#125; /&gt;</span></span><br></code></pre></td></tr></table></figure><h3 id="JS-é‡Œä½¿ç”¨svg"><a href="#JS-é‡Œä½¿ç”¨svg" class="headerlink" title="JS é‡Œä½¿ç”¨svg"></a>JS é‡Œä½¿ç”¨svg</h3><p><strong>ç»„ä»¶å¼å¼•å…¥</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">ReactComponent</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">Logo</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./logo.svg&#x27;</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Analysis</span>(<span class="hljs-params"></span>) &#123;  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Logo</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&#123;90&#125;</span> <span class="hljs-attr">height</span>=<span class="hljs-string">&#123;120&#125;</span> /&gt;</span></span>&#125;<br></code></pre></td></tr></table></figure><p><strong>urlå¼å¼•å…¥</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> logoSrc <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./logo.svg&#x27;</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Analysis</span>(<span class="hljs-params"></span>) &#123;  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&#123;logoSrc&#125;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;logo&quot;</span> /&gt;</span></span>&#125;<br></code></pre></td></tr></table></figure><h3 id="CSS-é‡Œä½¿ç”¨å›¾ç‰‡"><a href="#CSS-é‡Œä½¿ç”¨å›¾ç‰‡" class="headerlink" title="CSS é‡Œä½¿ç”¨å›¾ç‰‡"></a>CSS é‡Œä½¿ç”¨å›¾ç‰‡</h3><p>é€šè¿‡ç›¸å¯¹è·¯å¾„å¼•ç”¨ã€‚</p><p>æ¯”å¦‚ï¼Œ</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.logo</span> &#123;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">./foo.png</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>CSS é‡Œä¹Ÿæ”¯æŒåˆ«åï¼Œä½†éœ€è¦åœ¨å‰é¢åŠ  <code>~</code> å‰ç¼€ï¼Œ</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.logo</span> &#123;<br>  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">~@/foo.png</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><ol><li>è¿™æ˜¯ webpack çš„è§„åˆ™ï¼Œå¦‚æœåˆ‡åˆ°å…¶ä»–æ‰“åŒ…å·¥å…·ï¼Œå¯èƒ½ä¼šæœ‰å˜åŒ–</li><li>less ä¸­åŒæ ·é€‚ç”¨</li></ol><h3 id="å›¾ç‰‡è·¯å¾„é—®é¢˜"><a href="#å›¾ç‰‡è·¯å¾„é—®é¢˜" class="headerlink" title="å›¾ç‰‡è·¯å¾„é—®é¢˜"></a>å›¾ç‰‡è·¯å¾„é—®é¢˜</h3><p>é¡¹ç›®ä¸­ä½¿ç”¨å›¾ç‰‡æœ‰ä¸¤ç§æ–¹å¼ï¼Œ</p><ol><li>å…ˆæŠŠå›¾ç‰‡ä¼ åˆ° cdnï¼Œç„¶ååœ¨ JS å’Œ CSS ä¸­ä½¿ç”¨å›¾ç‰‡çš„ç»å¯¹è·¯å¾„</li><li>æŠŠå›¾ç‰‡æ”¾åœ¨é¡¹ç›®é‡Œï¼Œç„¶ååœ¨ JS å’Œ CSS ä¸­é€šè¿‡ç›¸å¯¹è·¯å¾„çš„æ–¹å¼ä½¿ç”¨</li></ol><p>å‰è€…ä¸ä¼šæœ‰ä»»ä½•é—®é¢˜ï¼›åè€…ï¼Œå¦‚æœåœ¨ JS ä¸­å¼•ç”¨ç›¸å¯¹è·¯å¾„çš„å›¾ç‰‡æ—¶ï¼Œåœ¨å‘å¸ƒæ—¶ä¼šæ ¹æ® publicPath å¼•å…¥ç»å¯¹è·¯å¾„ï¼Œæ‰€ä»¥å°±ç®—æ²¡æœ‰å¼€å¯ dynamicImport æ—¶ï¼Œä¹Ÿéœ€è¦æ³¨æ„ publicPath çš„æ­£ç¡®æ€§ã€‚</p><h3 id="Base64-ç¼–è¯‘"><a href="#Base64-ç¼–è¯‘" class="headerlink" title="Base64 ç¼–è¯‘"></a>Base64 ç¼–è¯‘</h3><p>é€šè¿‡ç›¸å¯¹è·¯å¾„å¼•å…¥å›¾ç‰‡çš„æ—¶å€™ï¼Œå¦‚æœå›¾ç‰‡å°äº 10Kï¼Œä¼šè¢«ç¼–è¯‘ä¸º Base64ï¼Œå¦åˆ™ä¼šè¢«æ„å»ºä¸ºç‹¬ç«‹çš„å›¾ç‰‡æ–‡ä»¶ã€‚</p><p>10K è¿™ä¸ªé˜ˆå€¼å¯ä»¥é€šè¿‡ <a href="https://v3.umijs.org/zh-CN/config#inlinelimit">inlineLimit é…ç½®</a>ä¿®æ”¹ã€‚</p><h3 id="ä½¿ç”¨-CDN"><a href="#ä½¿ç”¨-CDN" class="headerlink" title="ä½¿ç”¨ CDN"></a>ä½¿ç”¨ CDN</h3><p>TODO</p><h2 id="æŒ‰éœ€åŠ è½½"><a href="#æŒ‰éœ€åŠ è½½" class="headerlink" title="æŒ‰éœ€åŠ è½½"></a>æŒ‰éœ€åŠ è½½</h2><h3 id="å¯ç”¨æŒ‰éœ€åŠ è½½"><a href="#å¯ç”¨æŒ‰éœ€åŠ è½½" class="headerlink" title="å¯ç”¨æŒ‰éœ€åŠ è½½"></a>å¯ç”¨æŒ‰éœ€åŠ è½½</h3><p><strong>å¸¸è§ä½¿ç”¨åœºæ™¯</strong>ï¼šç»„ä»¶ä½“ç§¯å¤ªå¤§ï¼Œä¸é€‚åˆç›´æ¥è®¡å…¥ bundle ä¸­ï¼Œä»¥å…å½±å“é¦–å±åŠ è½½é€Ÿåº¦ã€‚ä¾‹å¦‚ï¼šæŸç»„ä»¶ HugeA åŒ…å«å·¨å¤§çš„å®ç° &#x2F; ä¾èµ–äº†å·¨å¤§çš„ä¸‰æ–¹åº“ï¼Œä¸”è¯¥ç»„ä»¶ HugeA çš„ä½¿ç”¨ä¸åœ¨é¦–å±æ˜¾ç¤ºèŒƒå›´å†…ï¼Œå¯è¢«å•ç‹¬æ‹†å‡ºã€‚è¿™æ—¶å€™ï¼Œ<code>dynamic</code> å°±è¯¥ä¸Šåœºäº†ã€‚</p><p>ä¸ºäº†ç®€åŒ–éƒ¨ç½²æˆæœ¬ï¼ŒæŒ‰éœ€åŠ è½½åŠŸèƒ½é»˜è®¤æ˜¯å…³é—­çš„ï¼Œä½ éœ€è¦åœ¨ä½¿ç”¨ä¹‹å‰å…ˆé€šè¿‡é…ç½®å¼€å¯ï¼Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-attr">dynamicImport</span>: &#123;&#125;,<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ä½¿ç”¨æŒ‰éœ€åŠ è½½"><a href="#ä½¿ç”¨æŒ‰éœ€åŠ è½½" class="headerlink" title="ä½¿ç”¨æŒ‰éœ€åŠ è½½"></a>ä½¿ç”¨æŒ‰éœ€åŠ è½½</h3><h4 id="æŒ‰éœ€åŠ è½½ç»„ä»¶-dynamic"><a href="#æŒ‰éœ€åŠ è½½ç»„ä»¶-dynamic" class="headerlink" title="æŒ‰éœ€åŠ è½½ç»„ä»¶ dynamic"></a>æŒ‰éœ€åŠ è½½ç»„ä»¶ <code>dynamic</code></h4><p>**ä¸ºä»€ä¹ˆä½¿ç”¨ <code>dynamic</code>**ï¼šå°è£…äº†ä½¿ç”¨ä¸€ä¸ªå¼‚æ­¥ç»„ä»¶éœ€è¦åšçš„çŠ¶æ€ç»´æŠ¤å·¥ä½œï¼Œå¼€å‘è€…å¯ä»¥æ›´ä¸“æ³¨äºè‡ªå·±çš„ä¸šåŠ¡ç»„ä»¶å¼€å‘ï¼Œè€Œä¸å¿…å…³å¿ƒ code splitingã€async module loading ç­‰ç­‰æŠ€æœ¯ç»†èŠ‚ã€‚</p><p>é€šå¸¸æ­é… <a href="https://github.com/tc39/proposal-dynamic-import">åŠ¨æ€ import è¯­æ³•</a> ä½¿ç”¨ã€‚</p><p><strong>å°è£…ä¸€ä¸ªå¼‚æ­¥ç»„ä»¶</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; dynamic &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;umi&#x27;</span>;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">dynamic</span>(&#123;  <span class="hljs-attr">loader</span>: <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;    <span class="hljs-comment">// è¿™é‡Œçš„æ³¨é‡Š webpackChunkName å¯ä»¥æŒ‡å¯¼ webpack å°†è¯¥ç»„ä»¶ HugeA ä»¥è¿™ä¸ªåå­—å•ç‹¬æ‹†å‡ºå»    const &#123; default: HugeA &#125; = await import(/* webpackChunkName: &quot;external_A&quot; */ &#x27;./HugeA&#x27;);    return HugeA;  &#125;,&#125;);</span><br></code></pre></td></tr></table></figure><p><strong>ä½¿ç”¨å¼‚æ­¥ç»„ä»¶</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<span class="hljs-keyword">import</span> <span class="hljs-title class_">AsyncHugeA</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./AsyncHugeA&#x27;</span>;<br><span class="hljs-comment">// åƒä½¿ç”¨æ™®é€šç»„ä»¶ä¸€æ ·å³å¯// dynamic ä¸ºä½ åš:// 1. å¼‚æ­¥åŠ è½½è¯¥æ¨¡å—çš„ bundle// 2. åŠ è½½æœŸé—´ æ˜¾ç¤º loadingï¼ˆå¯å®šåˆ¶ï¼‰// 3. å¼‚æ­¥ç»„ä»¶åŠ è½½å®Œæ¯•åï¼Œæ˜¾ç¤ºå¼‚æ­¥ç»„ä»¶export default () =&gt; &#123;  return &lt;AsyncHugeA /&gt;;&#125;</span><br></code></pre></td></tr></table></figure><h2 id="å¿«é€Ÿåˆ·æ–°ï¼ˆFast-Refreshï¼‰"><a href="#å¿«é€Ÿåˆ·æ–°ï¼ˆFast-Refreshï¼‰" class="headerlink" title="å¿«é€Ÿåˆ·æ–°ï¼ˆFast Refreshï¼‰"></a>å¿«é€Ÿåˆ·æ–°ï¼ˆFast Refreshï¼‰</h2><blockquote><p>å¿«é€Ÿåˆ·æ–°ï¼ˆFast Refreshï¼‰æ˜¯ React å®˜æ–¹ä¸º React Native å¼€å‘çš„æ¨¡å—çƒ­æ›¿æ¢ï¼ˆHMRï¼‰æ–¹æ¡ˆï¼Œç”±äºå…¶æ ¸å¿ƒå®ç°ä¸å¹³å°æ— å…³ï¼ŒåŒæ—¶ä¹Ÿé€‚ç”¨äº Webã€‚</p></blockquote><p>Fast Refresh åŠŸèƒ½æœ€å¤§çš„ç‰¹æ€§æ˜¯ï¼šå¼€å‘ç¯å¢ƒä¸‹ï¼Œå¯ä»¥<strong>ä¿æŒç»„ä»¶çŠ¶æ€</strong>ï¼ŒåŒæ—¶ç¼–è¾‘æä¾›<strong>å³æ—¶åé¦ˆ</strong>ã€‚</p><h3 id="æ€æ ·ä½¿ç”¨ï¼Ÿ"><a href="#æ€æ ·ä½¿ç”¨ï¼Ÿ" class="headerlink" title="æ€æ ·ä½¿ç”¨ï¼Ÿ"></a>æ€æ ·ä½¿ç”¨ï¼Ÿ</h3><p>åœ¨<a href="https://v3.umijs.org/zh-CN/docs/config">é…ç½®æ–‡ä»¶</a>åŠ ä¸Š <code>fastRefresh: &#123;&#125;</code> å³å¯å¼€å¯</p><p>è¿™å¼  gif åŠ¨å›¾å±•ç¤ºçš„æ˜¯ä½¿ç”¨ Fast Refresh ç‰¹æ€§çš„å¼€å‘ä½“éªŒï¼Œå¯ä»¥çœ‹å‡ºï¼Œä¿®æ”¹ç»„ä»¶ä»£ç åï¼Œç”¨æˆ·åå’Œå¯†ç <strong>çŠ¶æ€ä¿æŒ</strong>ï¼Œè¿™å°†æå‡åº”ç”¨æœ¬åœ°ç ”å‘ä½“éªŒã€‚</p><p><img src="https://gw.alipayobjects.com/zos/antfincdn/B2biHHW6s%24/fast-refresh.gif" alt="img"></p><p>å¼€å‘æ–¹å¼ä¸Šä¸å¹³æ—¶æ²¡æœ‰åŒºåˆ«ï¼Œæ­£å¸¸åœ°ä¿®æ”¹ã€ä¿å­˜ã€é¢„è§ˆï¼Œåªæ˜¯åœ¨æ•ˆæœåé¦ˆä¸Šï¼Œä½“éªŒæ›´åŠ å¥½ã€‚</p><h3 id="é™åˆ¶"><a href="#é™åˆ¶" class="headerlink" title="é™åˆ¶"></a>é™åˆ¶</h3><p>æœ‰äº›æƒ…å†µä¸‹ï¼Œç»´æŒçŠ¶æ€å¹¶ä¸æ˜¯é¢„æœŸï¼Œæ‰€ä»¥ä¸ºäº†å¯é èµ·è§ï¼ŒFast Refresh é‡åˆ°ä»¥ä¸‹æƒ…å†µä¸€æ¦‚ä¸ä¿ç•™çŠ¶æ€ï¼ˆremountï¼‰ï¼š</p><ul><li>Class ç±»ç»„ä»¶ä¸€å¾‹é‡åˆ·ï¼ˆremountï¼‰ï¼ŒçŠ¶æ€ä¼šè¢«é‡ç½®ï¼ŒåŒ…æ‹¬é«˜é˜¶ç»„ä»¶è¿”å›çš„ Class ç»„ä»¶</li><li>ä¸çº¯ç»„ä»¶æ¨¡å—ï¼Œæ‰€ç¼–è¾‘çš„æ¨¡å—é™¤å¯¼å‡º React ç»„ä»¶å¤–ï¼Œè¿˜å¯¼å‡ºäº†å…¶å®ƒæ¨¡å—</li><li>ç‰¹æ®Šçš„ï¼Œè¿˜å¯ä»¥é€šè¿‡ <code>// @refresh reset</code> æŒ‡ä»¤ï¼ˆåœ¨æºç æ–‡ä»¶ä¸­ä»»æ„ä½ç½®åŠ ä¸Šè¿™è¡Œæ³¨é‡Šï¼‰å¼ºåˆ¶é‡åˆ·ï¼ˆremountï¼‰ï¼Œæœ€å¤§é™åº¦åœ°ä¿è¯å¯ç”¨æ€§</li></ul><h3 id="æŠ€å·§"><a href="#æŠ€å·§" class="headerlink" title="æŠ€å·§"></a>æŠ€å·§</h3><p>æ¨èå†™å‡½æ•°å‘½åç»„ä»¶ï¼Œä¾‹å¦‚ï¼š</p><p>âœ… Good:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">Foo</span> = (<span class="hljs-params"></span>) =&gt; &#123;&#125;;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Foo</span>;<br></code></pre></td></tr></table></figure><p>âŒ Bad:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> () =&gt; &#123;&#125;;<br></code></pre></td></tr></table></figure><h3 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h3><h4 id="TypeError-Cannot-read-property-â€˜forEachâ€™-of-undefined"><a href="#TypeError-Cannot-read-property-â€˜forEachâ€™-of-undefined" class="headerlink" title="TypeError: Cannot read property â€˜forEachâ€™ of undefined"></a>TypeError: Cannot read property â€˜forEachâ€™ of undefined</h4><p>è¯·æ£€æŸ¥æµè§ˆå™¨æ‰©å±• React DevTools çš„ç‰ˆæœ¬ï¼Œæ˜¯å¦å°äº v4ï¼Œè¯·å‡çº§è‡³ v4 ç‰ˆæœ¬å¯è§£å†³ã€‚<a href="https://github.com/umijs/umi/issues/6432">issue#6432</a></p><h2 id="éƒ¨ç½²-1"><a href="#éƒ¨ç½²-1" class="headerlink" title="éƒ¨ç½²"></a>éƒ¨ç½²</h2><h3 id="é»˜è®¤æ–¹æ¡ˆ"><a href="#é»˜è®¤æ–¹æ¡ˆ" class="headerlink" title="é»˜è®¤æ–¹æ¡ˆ"></a>é»˜è®¤æ–¹æ¡ˆ</h3><p>Umi é»˜è®¤å¯¹æ–°æ‰‹å‹å¥½ï¼Œæ‰€ä»¥é»˜è®¤ä¸åšæŒ‰éœ€åŠ è½½å¤„ç†ï¼Œ<code>umi build</code> åè¾“å‡º <code>index.html</code>ã€<code>umi.js</code> å’Œ <code>umi.css</code> ä¸‰ä¸ªæ–‡ä»¶ã€‚</p><h3 id="ä¸è¾“å‡º-html-æ–‡ä»¶"><a href="#ä¸è¾“å‡º-html-æ–‡ä»¶" class="headerlink" title="ä¸è¾“å‡º html æ–‡ä»¶"></a>ä¸è¾“å‡º html æ–‡ä»¶</h3><p>æŸäº›åœºæ™¯ html æ–‡ä»¶äº¤ç»™åç«¯è¾“å‡ºï¼Œå‰ç«¯æ„å»ºå¹¶ä¸éœ€è¦è¾“å‡º html æ–‡ä»¶ï¼Œå¯é…ç½®ç¯å¢ƒå˜é‡ <code>HTML=none</code> å®ç°ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ HTML=none umi build<br></code></pre></td></tr></table></figure><h3 id="éƒ¨ç½²-html-åˆ°éæ ¹ç›®å½•"><a href="#éƒ¨ç½²-html-åˆ°éæ ¹ç›®å½•" class="headerlink" title="éƒ¨ç½² html åˆ°éæ ¹ç›®å½•"></a>éƒ¨ç½² html åˆ°éæ ¹ç›®å½•</h3><p>ç»å¸¸æœ‰åŒå­¦é—®è¿™ä¸ªé—®é¢˜ï¼š</p><blockquote><p>ä¸ºä»€ä¹ˆæˆ‘æœ¬åœ°å¼€å‘æ˜¯å¥½çš„ï¼Œéƒ¨ç½²åå°±æ²¡ååº”äº†ï¼Œè€Œä¸”æ²¡æœ‰æŠ¥é”™ï¼Ÿ</p></blockquote><p><strong>æ²¡æœ‰æŠ¥é”™ï¼</strong> è¿™æ˜¯åº”ç”¨éƒ¨ç½²åœ¨éæ ¹è·¯å¾„çš„å…¸å‹ç°è±¡ã€‚ä¸ºå•¥ä¼šæœ‰è¿™ä¸ªé—®é¢˜ï¼Ÿå› ä¸ºè·¯ç”±æ²¡æœ‰åŒ¹é…ä¸Šï¼Œæ¯”å¦‚ä½ æŠŠåº”ç”¨éƒ¨ç½²åœ¨ <code>/xxx/</code> ä¸‹ï¼Œç„¶åè®¿é—® <code>/xxx/hello</code>ï¼Œè€Œä»£ç é‡ŒåŒ¹é…çš„æ˜¯ <code>/hello</code>ï¼Œé‚£å°±åŒ¹é…ä¸ä¸Šäº†ï¼Œè€Œåˆæ²¡æœ‰å®šä¹‰ fallback çš„è·¯ç”±ï¼Œæ¯”å¦‚ 404ï¼Œé‚£å°±ä¼šæ˜¾ç¤ºç©ºç™½é¡µã€‚</p><p>æ€ä¹ˆè§£å†³ï¼Ÿ</p><p>å¯é€šè¿‡é…ç½® <a href="https://v3.umijs.org/zh-CN/config#base">base</a> è§£å†³ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> default &#123;<br>  base: <span class="hljs-string">&#x27;/path/to/your/app/root&#x27;</span>,<br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="ä½¿ç”¨-hash-history"><a href="#ä½¿ç”¨-hash-history" class="headerlink" title="ä½¿ç”¨ hash history"></a>ä½¿ç”¨ hash history</h3><p>å¯é€šè¿‡é…ç½® <a href="https://v3.umijs.org/zh-CN/config#history">history</a> ä¸º <code>hash</code> ä¸ºè§£å†³ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> default &#123;<br>  <span class="hljs-built_in">history</span>: &#123; <span class="hljs-built_in">type</span>: <span class="hljs-string">&#x27;hash&#x27;</span> &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="æŒ‰éœ€åŠ è½½-1"><a href="#æŒ‰éœ€åŠ è½½-1" class="headerlink" title="æŒ‰éœ€åŠ è½½"></a>æŒ‰éœ€åŠ è½½</h3><p>è¦å®ç°æŒ‰éœ€åŠ è½½ï¼Œéœ€é…ç½® <a href="https://v3.umijs.org/zh-CN/config#dynamicimport">dynamicImport</a>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-attr">dynamicImport</span>: &#123;&#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="é™æ€èµ„æºåœ¨éæ ¹ç›®å½•æˆ–-cdn"><a href="#é™æ€èµ„æºåœ¨éæ ¹ç›®å½•æˆ–-cdn" class="headerlink" title="é™æ€èµ„æºåœ¨éæ ¹ç›®å½•æˆ– cdn"></a>é™æ€èµ„æºåœ¨éæ ¹ç›®å½•æˆ– cdn</h3><p>è¿™æ—¶ï¼Œå°±éœ€è¦é…ç½® <a href="https://v3.umijs.org/zh-CN/config#publicpath">publicPath</a>ã€‚è‡³äº publicPath æ˜¯å•¥ï¼Ÿå…·ä½“çœ‹ <a href="https://webpack.js.org/configuration/output/#output-publicpath">webpack æ–‡æ¡£</a>ï¼ŒæŠŠä»–æŒ‡å‘é™æ€èµ„æºï¼ˆjsã€cssã€å›¾ç‰‡ã€å­—ä½“ç­‰ï¼‰æ‰€åœ¨çš„è·¯å¾„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-attr">publicPath</span>: <span class="hljs-string">&quot;http://yourcdn/path/to/static/&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ä½¿ç”¨-runtime-çš„-publicPath"><a href="#ä½¿ç”¨-runtime-çš„-publicPath" class="headerlink" title="ä½¿ç”¨ runtime çš„ publicPath"></a>ä½¿ç”¨ runtime çš„ publicPath</h3><p>å¯¹äºéœ€è¦åœ¨ html é‡Œç®¡ç† publicPath çš„åœºæ™¯ï¼Œæ¯”å¦‚åœ¨ html é‡Œåˆ¤æ–­ç¯å¢ƒåšä¸åŒçš„è¾“å‡ºï¼Œå¯é€šè¿‡é…ç½® <a href="https://v3.umijs.org/zh-CN/config/#runtimepublicpath">runtimePublicPath</a> ä¸ºè§£å†³ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-attr">runtimePublicPath</span>: <span class="hljs-literal">true</span>,<br>&#125;;<br></code></pre></td></tr></table></figure><p>ç„¶ååœ¨ html é‡Œè¾“å‡ºï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-variable language_">window</span>.<span class="hljs-property">publicPath</span> = &lt;%= <span class="hljs-variable constant_">YOUR</span> <span class="hljs-variable constant_">PUBLIC_PATH</span> %&gt;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="é™æ€åŒ–"><a href="#é™æ€åŒ–" class="headerlink" title="é™æ€åŒ–"></a>é™æ€åŒ–</h3><p>åœ¨ä¸€äº›åœºæ™¯ä¸­ï¼Œæ— æ³•åšæœåŠ¡ç«¯çš„ html fallbackï¼Œå³è®©æ¯ä¸ªè·¯ç”±éƒ½è¾“å‡º index.html çš„å†…å®¹ï¼Œé‚£ä¹ˆå°±è¦åšé™æ€åŒ–ã€‚</p><p>æ¯”å¦‚ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬åœ¨ .umirc.js é‡Œé…ç½®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-attr">exportStatic</span>: &#123;&#125;,<br>&#125;<br></code></pre></td></tr></table></figure><p>ç„¶åæ‰§è¡Œ umi buildï¼Œä¼šä¸ºæ¯ä¸ªè·¯ç”±è¾“å‡ºä¸€ä¸ª html æ–‡ä»¶ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs unknown">./dist<br>â”œâ”€â”€ index.html<br>â”œâ”€â”€ list<br>â”‚   â””â”€â”€ index.html<br>â””â”€â”€ static<br>    â”œâ”€â”€ pages__index.5c0f5f51.async.js<br>    â”œâ”€â”€ pages__list.f940b099.async.js<br>    â”œâ”€â”€ umi.2eaebd79.js<br>    â””â”€â”€ umi.f4cb51da.css<br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šé™æ€åŒ–æš‚ä¸æ”¯æŒæœ‰å˜é‡è·¯ç”±çš„åœºæ™¯ã€‚</p></blockquote><h3 id="HTML-åç¼€"><a href="#HTML-åç¼€" class="headerlink" title="HTML åç¼€"></a>HTML åç¼€</h3><p>æœ‰äº›é™æ€åŒ–çš„åœºæ™¯é‡Œï¼Œæ˜¯ä¸ä¼šè‡ªåŠ¨è¯»ç´¢å¼•æ–‡ä»¶çš„ï¼Œæ¯”å¦‚æ”¯ä»˜å®çš„å®¹å™¨ç¯å¢ƒï¼Œé‚£ä¹ˆå°±ä¸èƒ½ç”Ÿæˆè¿™ç§ html æ–‡ä»¶ï¼Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs unknown">â”œâ”€â”€ index.html<br>â”œâ”€â”€ list<br>â”‚   â””â”€â”€ index.html<br></code></pre></td></tr></table></figure><p>è€Œæ˜¯ç”Ÿæˆï¼Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs unknown">â”œâ”€â”€ index.html<br>â””â”€â”€ list.html<br></code></pre></td></tr></table></figure><p>é…ç½®æ–¹å¼æ˜¯åœ¨ .umirc.js é‡Œï¼Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-attr">exportStatic</span>: &#123;<br>    <span class="hljs-attr">htmlSuffix</span>: <span class="hljs-literal">true</span>,<br>  &#125;,<br>&#125;<br></code></pre></td></tr></table></figure><p>umi build ä¼šç”Ÿæˆï¼Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs unknown">./dist<br>â”œâ”€â”€ index.html<br>â”œâ”€â”€ list.html<br>â””â”€â”€ static<br>    â”œâ”€â”€ pages__index.5c0f5f51.async.js<br>    â”œâ”€â”€ pages__list.f940b099.async.js<br>    â”œâ”€â”€ umi.2924fdb7.js<br>    â””â”€â”€ umi.cfe3ffab.css<br></code></pre></td></tr></table></figure><h3 id="é™æ€åŒ–åè¾“å‡ºåˆ°ä»»æ„è·¯å¾„"><a href="#é™æ€åŒ–åè¾“å‡ºåˆ°ä»»æ„è·¯å¾„" class="headerlink" title="é™æ€åŒ–åè¾“å‡ºåˆ°ä»»æ„è·¯å¾„"></a>é™æ€åŒ–åè¾“å‡ºåˆ°ä»»æ„è·¯å¾„</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-attr">exportStatic</span>: &#123;<br>    <span class="hljs-attr">htmlSuffix</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">dynamicRoot</span>: <span class="hljs-literal">true</span>,<br>  &#125;,<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰ç«¯</tag>
      
      <tag>umiæ¡†æ¶</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å…šè¯¾</title>
    <link href="/blog/2022/11/20/%E5%85%9A%E8%AF%BE/"/>
    <url>/blog/2022/11/20/%E5%85%9A%E8%AF%BE/</url>
    
    <content type="html"><![CDATA[<h1 id="å…šç« "><a href="#å…šç« " class="headerlink" title="å…šç« "></a>å…šç« </h1><p>2022.11.28</p><h2 id="x3D-x3D-æ€»-çº²-x3D-x3D"><a href="#x3D-x3D-æ€»-çº²-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;æ€»ã€€çº²&#x3D;&#x3D;"></a>&#x3D;&#x3D;æ€»ã€€çº²&#x3D;&#x3D;</h2><p>ã€€ã€€ä¸­å›½å…±äº§å…šæ˜¯ä¸­å›½å·¥äººé˜¶çº§çš„å…ˆé”‹é˜Ÿï¼ŒåŒæ—¶æ˜¯ä¸­å›½äººæ°‘å’Œä¸­åæ°‘æ—çš„å…ˆé”‹é˜Ÿï¼Œæ˜¯ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰äº‹ä¸šçš„é¢†å¯¼æ ¸å¿ƒï¼Œä»£è¡¨ä¸­å›½å…ˆè¿›ç”Ÿäº§åŠ›çš„å‘å±•è¦æ±‚ï¼Œä»£è¡¨ä¸­å›½å…ˆè¿›æ–‡åŒ–çš„å‰è¿›æ–¹å‘ï¼Œä»£è¡¨ä¸­å›½æœ€å¹¿å¤§äººæ°‘çš„æ ¹æœ¬åˆ©ç›Šã€‚å…šçš„æœ€é«˜ç†æƒ³å’Œæœ€ç»ˆç›®æ ‡æ˜¯å®ç°å…±äº§ä¸»ä¹‰ã€‚</p><p>ã€€ã€€ä¸­å›½å…±äº§å…šä»¥é©¬å…‹æ€åˆ—å®ä¸»ä¹‰ã€æ¯›æ³½ä¸œæ€æƒ³ã€é‚“å°å¹³ç†è®ºã€â€œä¸‰ä¸ªä»£è¡¨â€é‡è¦æ€æƒ³ã€ç§‘å­¦å‘å±•è§‚ã€ä¹ è¿‘å¹³æ–°æ—¶ä»£ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ€æƒ³ä½œä¸ºè‡ªå·±çš„è¡ŒåŠ¨æŒ‡å—ã€‚</p><p>ã€€ã€€é©¬å…‹æ€åˆ—å®ä¸»ä¹‰æ­ç¤ºäº†äººç±»ç¤¾ä¼šå†å²å‘å±•çš„è§„å¾‹ï¼Œå®ƒçš„åŸºæœ¬åŸç†æ˜¯æ­£ç¡®çš„ï¼Œå…·æœ‰å¼ºå¤§çš„ç”Ÿå‘½åŠ›ã€‚ä¸­å›½å…±äº§å…šäººè¿½æ±‚çš„å…±äº§ä¸»ä¹‰æœ€é«˜ç†æƒ³ï¼Œåªæœ‰åœ¨ç¤¾ä¼šä¸»ä¹‰ç¤¾ä¼šå……åˆ†å‘å±•å’Œé«˜åº¦å‘è¾¾çš„åŸºç¡€ä¸Šæ‰èƒ½å®ç°ã€‚ç¤¾ä¼šä¸»ä¹‰åˆ¶åº¦çš„å‘å±•å’Œå®Œå–„æ˜¯ä¸€ä¸ªé•¿æœŸçš„å†å²è¿‡ç¨‹ã€‚åšæŒé©¬å…‹æ€åˆ—å®ä¸»ä¹‰çš„åŸºæœ¬åŸç†ï¼Œèµ°ä¸­å›½äººæ°‘è‡ªæ„¿é€‰æ‹©çš„é€‚åˆä¸­å›½å›½æƒ…çš„é“è·¯ï¼Œä¸­å›½çš„ç¤¾ä¼šä¸»ä¹‰äº‹ä¸šå¿…å°†å–å¾—æœ€ç»ˆçš„èƒœåˆ©ã€‚</p><p>ã€€ã€€ä»¥æ¯›æ³½ä¸œåŒå¿—ä¸ºä¸»è¦ä»£è¡¨çš„ä¸­å›½å…±äº§å…šäººï¼ŒæŠŠé©¬å…‹æ€åˆ—å®ä¸»ä¹‰çš„åŸºæœ¬åŸç†åŒä¸­å›½é©å‘½çš„å…·ä½“å®è·µç»“åˆèµ·æ¥ï¼Œåˆ›ç«‹äº†æ¯›æ³½ä¸œæ€æƒ³ã€‚æ¯›æ³½ä¸œæ€æƒ³æ˜¯é©¬å…‹æ€åˆ—å®ä¸»ä¹‰åœ¨ä¸­å›½çš„è¿ç”¨å’Œå‘å±•ï¼Œæ˜¯è¢«å®è·µè¯æ˜äº†çš„å…³äºä¸­å›½é©å‘½å’Œå»ºè®¾çš„æ­£ç¡®çš„ç†è®ºåŸåˆ™å’Œç»éªŒæ€»ç»“ï¼Œæ˜¯ä¸­å›½å…±äº§å…šé›†ä½“æ™ºæ…§çš„ç»“æ™¶ã€‚åœ¨æ¯›æ³½ä¸œæ€æƒ³æŒ‡å¼•ä¸‹ï¼Œä¸­å›½å…±äº§å…šé¢†å¯¼å…¨å›½å„æ—äººæ°‘ï¼Œç»è¿‡é•¿æœŸçš„åå¯¹å¸å›½ä¸»ä¹‰ã€å°å»ºä¸»ä¹‰ã€å®˜åƒšèµ„æœ¬ä¸»ä¹‰çš„é©å‘½æ–—äº‰ï¼Œå–å¾—äº†æ–°æ°‘ä¸»ä¸»ä¹‰é©å‘½çš„èƒœåˆ©ï¼Œå»ºç«‹äº†äººæ°‘æ°‘ä¸»ä¸“æ”¿çš„ä¸­åäººæ°‘å…±å’Œå›½ï¼›æ–°ä¸­å›½æˆç«‹ä»¥åï¼Œé¡ºåˆ©åœ°è¿›è¡Œäº†ç¤¾ä¼šä¸»ä¹‰æ”¹é€ ï¼Œå®Œæˆäº†ä»æ–°æ°‘ä¸»ä¸»ä¹‰åˆ°ç¤¾ä¼šä¸»ä¹‰çš„è¿‡æ¸¡ï¼Œç¡®ç«‹äº†ç¤¾ä¼šä¸»ä¹‰åŸºæœ¬åˆ¶åº¦ï¼Œå‘å±•äº†ç¤¾ä¼šä¸»ä¹‰çš„ç»æµã€æ”¿æ²»å’Œæ–‡åŒ–ã€‚</p><p>ã€€ã€€åä¸€å±Šä¸‰ä¸­å…¨ä¼šä»¥æ¥ï¼Œä»¥é‚“å°å¹³åŒå¿—ä¸ºä¸»è¦ä»£è¡¨çš„ä¸­å›½å…±äº§å…šäººï¼Œæ€»ç»“æ–°ä¸­å›½æˆç«‹ä»¥æ¥æ­£åä¸¤æ–¹é¢çš„ç»éªŒï¼Œè§£æ”¾æ€æƒ³ï¼Œå®äº‹æ±‚æ˜¯ï¼Œå®ç°å…¨å…šå·¥ä½œä¸­å¿ƒå‘ç»æµå»ºè®¾çš„è½¬ç§»ï¼Œå®è¡Œæ”¹é©å¼€æ”¾ï¼Œå¼€è¾Ÿäº†ç¤¾ä¼šä¸»ä¹‰äº‹ä¸šå‘å±•çš„æ–°æ—¶æœŸï¼Œé€æ­¥å½¢æˆäº†å»ºè®¾ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰çš„è·¯çº¿ã€æ–¹é’ˆã€æ”¿ç­–ï¼Œé˜æ˜äº†åœ¨ä¸­å›½å»ºè®¾ç¤¾ä¼šä¸»ä¹‰ã€å·©å›ºå’Œå‘å±•ç¤¾ä¼šä¸»ä¹‰çš„åŸºæœ¬é—®é¢˜ï¼Œåˆ›ç«‹äº†é‚“å°å¹³ç†è®ºã€‚é‚“å°å¹³ç†è®ºæ˜¯é©¬å…‹æ€åˆ—å®ä¸»ä¹‰çš„åŸºæœ¬åŸç†åŒå½“ä»£ä¸­å›½å®è·µå’Œæ—¶ä»£ç‰¹å¾ç›¸ç»“åˆçš„äº§ç‰©ï¼Œæ˜¯æ¯›æ³½ä¸œæ€æƒ³åœ¨æ–°çš„å†å²æ¡ä»¶ä¸‹çš„ç»§æ‰¿å’Œå‘å±•ï¼Œæ˜¯é©¬å…‹æ€ä¸»ä¹‰åœ¨ä¸­å›½å‘å±•çš„æ–°é˜¶æ®µï¼Œæ˜¯å½“ä»£ä¸­å›½çš„é©¬å…‹æ€ä¸»ä¹‰ï¼Œæ˜¯ä¸­å›½å…±äº§å…šé›†ä½“æ™ºæ…§çš„ç»“æ™¶ï¼Œå¼•å¯¼ç€æˆ‘å›½ç¤¾ä¼šä¸»ä¹‰ç°ä»£åŒ–äº‹ä¸šä¸æ–­å‰è¿›ã€‚</p><p>ã€€ã€€åä¸‰å±Šå››ä¸­å…¨ä¼šä»¥æ¥ï¼Œä»¥æ±Ÿæ³½æ°‘åŒå¿—ä¸ºä¸»è¦ä»£è¡¨çš„ä¸­å›½å…±äº§å…šäººï¼Œåœ¨å»ºè®¾ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰çš„å®è·µä¸­ï¼ŒåŠ æ·±äº†å¯¹ä»€ä¹ˆæ˜¯ç¤¾ä¼šä¸»ä¹‰ã€æ€æ ·å»ºè®¾ç¤¾ä¼šä¸»ä¹‰å’Œå»ºè®¾ä»€ä¹ˆæ ·çš„å…šã€æ€æ ·å»ºè®¾å…šçš„è®¤è¯†ï¼Œç§¯ç´¯äº†æ²»å…šæ²»å›½æ–°çš„å®è´µç»éªŒï¼Œå½¢æˆäº†â€œä¸‰ä¸ªä»£è¡¨â€é‡è¦æ€æƒ³ã€‚â€œä¸‰ä¸ªä»£è¡¨â€é‡è¦æ€æƒ³æ˜¯å¯¹é©¬å…‹æ€åˆ—å®ä¸»ä¹‰ã€æ¯›æ³½ä¸œæ€æƒ³ã€é‚“å°å¹³ç†è®ºçš„ç»§æ‰¿å’Œå‘å±•ï¼Œåæ˜ äº†å½“ä»£ä¸–ç•Œå’Œä¸­å›½çš„å‘å±•å˜åŒ–å¯¹å…šå’Œå›½å®¶å·¥ä½œçš„æ–°è¦æ±‚ï¼Œæ˜¯åŠ å¼ºå’Œæ”¹è¿›å…šçš„å»ºè®¾ã€æ¨è¿›æˆ‘å›½ç¤¾ä¼šä¸»ä¹‰è‡ªæˆ‘å®Œå–„å’Œå‘å±•çš„å¼ºå¤§ç†è®ºæ­¦å™¨ï¼Œæ˜¯ä¸­å›½å…±äº§å…šé›†ä½“æ™ºæ…§çš„ç»“æ™¶ï¼Œæ˜¯å…šå¿…é¡»é•¿æœŸåšæŒçš„æŒ‡å¯¼æ€æƒ³ã€‚å§‹ç»ˆåšåˆ°â€œä¸‰ä¸ªä»£è¡¨â€ï¼Œæ˜¯æˆ‘ä»¬å…šçš„ç«‹å…šä¹‹æœ¬ã€æ‰§æ”¿ä¹‹åŸºã€åŠ›é‡ä¹‹æºã€‚</p><p>ã€€ã€€åå…­å¤§ä»¥æ¥ï¼Œä»¥èƒ¡é”¦æ¶›åŒå¿—ä¸ºä¸»è¦ä»£è¡¨çš„ä¸­å›½å…±äº§å…šäººï¼ŒåšæŒä»¥é‚“å°å¹³ç†è®ºå’Œâ€œä¸‰ä¸ªä»£è¡¨â€é‡è¦æ€æƒ³ä¸ºæŒ‡å¯¼ï¼Œæ ¹æ®æ–°çš„å‘å±•è¦æ±‚ï¼Œæ·±åˆ»è®¤è¯†å’Œå›ç­”äº†æ–°å½¢åŠ¿ä¸‹å®ç°ä»€ä¹ˆæ ·çš„å‘å±•ã€æ€æ ·å‘å±•ç­‰é‡å¤§é—®é¢˜ï¼Œå½¢æˆäº†ä»¥äººä¸ºæœ¬ã€å…¨é¢åè°ƒå¯æŒç»­å‘å±•çš„ç§‘å­¦å‘å±•è§‚ã€‚ç§‘å­¦å‘å±•è§‚æ˜¯åŒé©¬å…‹æ€åˆ—å®ä¸»ä¹‰ã€æ¯›æ³½ä¸œæ€æƒ³ã€é‚“å°å¹³ç†è®ºã€â€œä¸‰ä¸ªä»£è¡¨â€é‡è¦æ€æƒ³æ—¢ä¸€è„‰ç›¸æ‰¿åˆä¸æ—¶ä¿±è¿›çš„ç§‘å­¦ç†è®ºï¼Œæ˜¯é©¬å…‹æ€ä¸»ä¹‰å…³äºå‘å±•çš„ä¸–ç•Œè§‚å’Œæ–¹æ³•è®ºçš„é›†ä¸­ä½“ç°ï¼Œæ˜¯é©¬å…‹æ€ä¸»ä¹‰ä¸­å›½åŒ–é‡å¤§æˆæœï¼Œæ˜¯ä¸­å›½å…±äº§å…šé›†ä½“æ™ºæ…§çš„ç»“æ™¶ï¼Œæ˜¯å‘å±•ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰å¿…é¡»é•¿æœŸåšæŒçš„æŒ‡å¯¼æ€æƒ³ã€‚</p><p>ã€€ã€€åå…«å¤§ä»¥æ¥ï¼Œä»¥ä¹ è¿‘å¹³åŒå¿—ä¸ºä¸»è¦ä»£è¡¨çš„ä¸­å›½å…±äº§å…šäººï¼ŒåšæŒæŠŠé©¬å…‹æ€ä¸»ä¹‰åŸºæœ¬åŸç†åŒä¸­å›½å…·ä½“å®é™…ç›¸ç»“åˆã€åŒä¸­åä¼˜ç§€ä¼ ç»Ÿæ–‡åŒ–ç›¸ç»“åˆï¼Œç§‘å­¦å›ç­”äº†æ–°æ—¶ä»£åšæŒå’Œå‘å±•ä»€ä¹ˆæ ·çš„ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰ã€æ€æ ·åšæŒå’Œå‘å±•ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰ç­‰é‡å¤§æ—¶ä»£è¯¾é¢˜ï¼Œåˆ›ç«‹äº†ä¹ è¿‘å¹³æ–°æ—¶ä»£ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ€æƒ³ã€‚ä¹ è¿‘å¹³æ–°æ—¶ä»£ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ€æƒ³æ˜¯å¯¹é©¬å…‹æ€åˆ—å®ä¸»ä¹‰ã€æ¯›æ³½ä¸œæ€æƒ³ã€é‚“å°å¹³ç†è®ºã€â€œä¸‰ä¸ªä»£è¡¨â€é‡è¦æ€æƒ³ã€ç§‘å­¦å‘å±•è§‚çš„ç»§æ‰¿å’Œå‘å±•ï¼Œæ˜¯å½“ä»£ä¸­å›½é©¬å…‹æ€ä¸»ä¹‰ã€äºŒåä¸€ä¸–çºªé©¬å…‹æ€ä¸»ä¹‰ï¼Œæ˜¯ä¸­åæ–‡åŒ–å’Œä¸­å›½ç²¾ç¥çš„æ—¶ä»£ç²¾åï¼Œæ˜¯å…šå’Œäººæ°‘å®è·µç»éªŒå’Œé›†ä½“æ™ºæ…§çš„ç»“æ™¶ï¼Œæ˜¯ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰ç†è®ºä½“ç³»çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œæ˜¯å…¨å…šå…¨å›½äººæ°‘ä¸ºå®ç°ä¸­åæ°‘æ—ä¼Ÿå¤§å¤å…´è€Œå¥‹æ–—çš„è¡ŒåŠ¨æŒ‡å—ï¼Œå¿…é¡»é•¿æœŸåšæŒå¹¶ä¸æ–­å‘å±•ã€‚åœ¨ä¹ è¿‘å¹³æ–°æ—¶ä»£ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ€æƒ³æŒ‡å¯¼ä¸‹ï¼Œä¸­å›½å…±äº§å…šé¢†å¯¼å…¨å›½å„æ—äººæ°‘ï¼Œç»Ÿæ½ä¼Ÿå¤§æ–—äº‰ã€ä¼Ÿå¤§å·¥ç¨‹ã€ä¼Ÿå¤§äº‹ä¸šã€ä¼Ÿå¤§æ¢¦æƒ³ï¼Œæ¨åŠ¨ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰è¿›å…¥äº†æ–°æ—¶ä»£ï¼Œå®ç°ç¬¬ä¸€ä¸ªç™¾å¹´å¥‹æ–—ç›®æ ‡ï¼Œå¼€å¯äº†å®ç°ç¬¬äºŒä¸ªç™¾å¹´å¥‹æ–—ç›®æ ‡æ–°å¾ç¨‹ã€‚</p><p>ã€€ã€€æ”¹é©å¼€æ”¾ä»¥æ¥æˆ‘ä»¬å–å¾—ä¸€åˆ‡æˆç»©å’Œè¿›æ­¥çš„æ ¹æœ¬åŸå› ï¼Œå½’ç»“èµ·æ¥å°±æ˜¯ï¼šå¼€è¾Ÿäº†ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰é“è·¯ï¼Œå½¢æˆäº†ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰ç†è®ºä½“ç³»ï¼Œç¡®ç«‹äº†ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰åˆ¶åº¦ï¼Œå‘å±•äº†ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ–‡åŒ–ã€‚å…¨å…šåŒå¿—è¦å€åŠ çæƒœã€é•¿æœŸåšæŒå’Œä¸æ–­å‘å±•å…šå†ç»è‰°è¾›å¼€åˆ›çš„è¿™æ¡é“è·¯ã€è¿™ä¸ªç†è®ºä½“ç³»ã€è¿™ä¸ªåˆ¶åº¦ã€è¿™ä¸ªæ–‡åŒ–ï¼Œé«˜ä¸¾ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰ä¼Ÿå¤§æ——å¸œï¼Œåšå®šé“è·¯è‡ªä¿¡ã€ç†è®ºè‡ªä¿¡ã€åˆ¶åº¦è‡ªä¿¡ã€æ–‡åŒ–è‡ªä¿¡ï¼Œå‘æ‰¬æ–—äº‰ç²¾ç¥ï¼Œå¢å¼ºæ–—äº‰æœ¬é¢†ï¼Œè´¯å½»å…šçš„åŸºæœ¬ç†è®ºã€åŸºæœ¬è·¯çº¿ã€åŸºæœ¬æ–¹ç•¥ï¼Œä¸ºå®ç°æ¨è¿›ç°ä»£åŒ–å»ºè®¾ã€å®Œæˆç¥–å›½ç»Ÿä¸€ã€ç»´æŠ¤ä¸–ç•Œå’Œå¹³ä¸ä¿ƒè¿›å…±åŒå‘å±•è¿™ä¸‰å¤§å†å²ä»»åŠ¡ï¼Œå®ç°ç¬¬äºŒä¸ªç™¾å¹´å¥‹æ–—ç›®æ ‡ã€å®ç°ä¸­åæ°‘æ—ä¼Ÿå¤§å¤å…´çš„ä¸­å›½æ¢¦è€Œå¥‹æ–—ã€‚</p><p>ã€€ã€€ä¸­å›½å…±äº§å…šè‡ªæˆç«‹ä»¥æ¥ï¼Œå§‹ç»ˆæŠŠä¸ºä¸­å›½äººæ°‘è°‹å¹¸ç¦ã€ä¸ºä¸­åæ°‘æ—è°‹å¤å…´ä½œä¸ºè‡ªå·±çš„åˆå¿ƒä½¿å‘½ï¼Œå†ç»ç™¾å¹´å¥‹æ–—ï¼Œä»æ ¹æœ¬ä¸Šæ”¹å˜äº†ä¸­å›½äººæ°‘çš„å‰é€”å‘½è¿ï¼Œå¼€è¾Ÿäº†å®ç°ä¸­åæ°‘æ—ä¼Ÿå¤§å¤å…´çš„æ­£ç¡®é“è·¯ï¼Œå±•ç¤ºäº†é©¬å…‹æ€ä¸»ä¹‰çš„å¼ºå¤§ç”Ÿå‘½åŠ›ï¼Œæ·±åˆ»å½±å“äº†ä¸–ç•Œå†å²è¿›ç¨‹ï¼Œé”»é€ äº†èµ°åœ¨æ—¶ä»£å‰åˆ—çš„ä¸­å›½å…±äº§å…šã€‚ç»è¿‡é•¿æœŸå®è·µï¼Œç§¯ç´¯äº†åšæŒå…šçš„é¢†å¯¼ã€åšæŒäººæ°‘è‡³ä¸Šã€åšæŒç†è®ºåˆ›æ–°ã€åšæŒç‹¬ç«‹è‡ªä¸»ã€åšæŒä¸­å›½é“è·¯ã€åšæŒèƒ¸æ€€å¤©ä¸‹ã€åšæŒå¼€æ‹“åˆ›æ–°ã€åšæŒæ•¢äºæ–—äº‰ã€åšæŒç»Ÿä¸€æˆ˜çº¿ã€åšæŒè‡ªæˆ‘é©å‘½çš„å®è´µå†å²ç»éªŒï¼Œè¿™æ˜¯å…šå’Œäººæ°‘å…±åŒåˆ›é€ çš„ç²¾ç¥è´¢å¯Œï¼Œå¿…é¡»å€åŠ çæƒœã€é•¿æœŸåšæŒï¼Œå¹¶åœ¨å®è·µä¸­ä¸æ–­ä¸°å¯Œå’Œå‘å±•ã€‚</p><p>ã€€ã€€æˆ‘å›½æ­£å¤„äºå¹¶å°†é•¿æœŸå¤„äºç¤¾ä¼šä¸»ä¹‰åˆçº§é˜¶æ®µã€‚è¿™æ˜¯åœ¨åŸæœ¬ç»æµæ–‡åŒ–è½åçš„ä¸­å›½å»ºè®¾ç¤¾ä¼šä¸»ä¹‰ç°ä»£åŒ–ä¸å¯é€¾è¶Šçš„å†å²é˜¶æ®µï¼Œéœ€è¦ä¸Šç™¾å¹´çš„æ—¶é—´ã€‚æˆ‘å›½çš„ç¤¾ä¼šä¸»ä¹‰å»ºè®¾ï¼Œå¿…é¡»ä»æˆ‘å›½çš„å›½æƒ…å‡ºå‘ï¼Œèµ°ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰é“è·¯ï¼Œä»¥ä¸­å›½å¼ç°ä»£åŒ–å…¨é¢æ¨è¿›ä¸­åæ°‘æ—ä¼Ÿå¤§å¤å…´ã€‚åœ¨ç°é˜¶æ®µï¼Œæˆ‘å›½ç¤¾ä¼šçš„ä¸»è¦çŸ›ç›¾æ˜¯äººæ°‘æ—¥ç›Šå¢é•¿çš„ç¾å¥½ç”Ÿæ´»éœ€è¦å’Œä¸å¹³è¡¡ä¸å……åˆ†çš„å‘å±•ä¹‹é—´çš„çŸ›ç›¾ã€‚ç”±äºå›½å†…çš„å› ç´ å’Œå›½é™…çš„å½±å“ï¼Œé˜¶çº§æ–—äº‰è¿˜åœ¨ä¸€å®šèŒƒå›´å†…é•¿æœŸå­˜åœ¨ï¼Œåœ¨æŸç§æ¡ä»¶ä¸‹è¿˜æœ‰å¯èƒ½æ¿€åŒ–ï¼Œä½†å·²ç»ä¸æ˜¯ä¸»è¦çŸ›ç›¾ã€‚æˆ‘å›½ç¤¾ä¼šä¸»ä¹‰å»ºè®¾çš„æ ¹æœ¬ä»»åŠ¡ï¼Œæ˜¯è¿›ä¸€æ­¥è§£æ”¾ç”Ÿäº§åŠ›ï¼Œå‘å±•ç”Ÿäº§åŠ›ï¼Œé€æ­¥å®ç°ç¤¾ä¼šä¸»ä¹‰ç°ä»£åŒ–ï¼Œå¹¶ä¸”ä¸ºæ­¤è€Œæ”¹é©ç”Ÿäº§å…³ç³»å’Œä¸Šå±‚å»ºç­‘ä¸­ä¸é€‚åº”ç”Ÿäº§åŠ›å‘å±•çš„æ–¹é¢å’Œç¯èŠ‚ã€‚å¿…é¡»åšæŒå’Œå®Œå–„å…¬æœ‰åˆ¶ä¸ºä¸»ä½“ã€å¤šç§æ‰€æœ‰åˆ¶ç»æµå…±åŒå‘å±•ï¼ŒæŒ‰åŠ³åˆ†é…ä¸ºä¸»ä½“ã€å¤šç§åˆ†é…æ–¹å¼å¹¶å­˜ï¼Œç¤¾ä¼šä¸»ä¹‰å¸‚åœºç»æµä½“åˆ¶ç­‰åŸºæœ¬ç»æµåˆ¶åº¦ï¼Œé¼“åŠ±ä¸€éƒ¨åˆ†åœ°åŒºå’Œä¸€éƒ¨åˆ†äººå…ˆå¯Œèµ·æ¥ï¼Œé€æ­¥å®ç°å…¨ä½“äººæ°‘å…±åŒå¯Œè£•ï¼Œåœ¨ç”Ÿäº§å‘å±•å’Œç¤¾ä¼šè´¢å¯Œå¢é•¿çš„åŸºç¡€ä¸Šä¸æ–­æ»¡è¶³äººæ°‘æ—¥ç›Šå¢é•¿çš„ç¾å¥½ç”Ÿæ´»éœ€è¦ï¼Œä¿ƒè¿›äººçš„å…¨é¢å‘å±•ã€‚å‘å±•æ˜¯æˆ‘ä»¬å…šæ‰§æ”¿å…´å›½çš„ç¬¬ä¸€è¦åŠ¡ã€‚å¿…é¡»åšæŒä»¥äººæ°‘ä¸ºä¸­å¿ƒçš„å‘å±•æ€æƒ³ï¼ŒæŠŠæ¡æ–°å‘å±•é˜¶æ®µï¼Œè´¯å½»åˆ›æ–°ã€åè°ƒã€ç»¿è‰²ã€å¼€æ”¾ã€å…±äº«çš„æ–°å‘å±•ç†å¿µï¼ŒåŠ å¿«æ„å»ºä»¥å›½å†…å¤§å¾ªç¯ä¸ºä¸»ä½“ã€å›½å†…å›½é™…åŒå¾ªç¯ç›¸äº’ä¿ƒè¿›çš„æ–°å‘å±•æ ¼å±€ï¼Œæ¨åŠ¨é«˜è´¨é‡å‘å±•ã€‚å„é¡¹å·¥ä½œéƒ½è¦æŠŠæœ‰åˆ©äºå‘å±•ç¤¾ä¼šä¸»ä¹‰ç¤¾ä¼šçš„ç”Ÿäº§åŠ›ï¼Œæœ‰åˆ©äºå¢å¼ºç¤¾ä¼šä¸»ä¹‰å›½å®¶çš„ç»¼åˆå›½åŠ›ï¼Œæœ‰åˆ©äºæé«˜äººæ°‘çš„ç”Ÿæ´»æ°´å¹³ï¼Œä½œä¸ºæ€»çš„å‡ºå‘ç‚¹å’Œæ£€éªŒæ ‡å‡†ï¼Œå°Šé‡åŠ³åŠ¨ã€å°Šé‡çŸ¥è¯†ã€å°Šé‡äººæ‰ã€å°Šé‡åˆ›é€ ï¼Œåšåˆ°å‘å±•ä¸ºäº†äººæ°‘ã€å‘å±•ä¾é äººæ°‘ã€å‘å±•æˆæœç”±äººæ°‘å…±äº«ã€‚å¿…é¡»æŒ‰ç…§ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰äº‹ä¸šâ€œäº”ä½ä¸€ä½“â€æ€»ä½“å¸ƒå±€å’Œâ€œå››ä¸ªå…¨é¢â€æˆ˜ç•¥å¸ƒå±€ï¼Œç»Ÿç­¹æ¨è¿›ç»æµå»ºè®¾ã€æ”¿æ²»å»ºè®¾ã€æ–‡åŒ–å»ºè®¾ã€ç¤¾ä¼šå»ºè®¾ã€ç”Ÿæ€æ–‡æ˜å»ºè®¾ï¼Œåè°ƒæ¨è¿›å…¨é¢å»ºè®¾ç¤¾ä¼šä¸»ä¹‰ç°ä»£åŒ–å›½å®¶ã€å…¨é¢æ·±åŒ–æ”¹é©ã€å…¨é¢ä¾æ³•æ²»å›½ã€å…¨é¢ä»ä¸¥æ²»å…šã€‚æ–°æ—¶ä»£æ–°å¾ç¨‹ï¼Œç»æµå’Œç¤¾ä¼šå‘å±•çš„æˆ˜ç•¥ç›®æ ‡æ˜¯ï¼Œåˆ°äºŒã€‡ä¸‰äº”å¹´åŸºæœ¬å®ç°ç¤¾ä¼šä¸»ä¹‰ç°ä»£åŒ–ï¼Œåˆ°æœ¬ä¸–çºªä¸­å¶æŠŠæˆ‘å›½å»ºæˆç¤¾ä¼šä¸»ä¹‰ç°ä»£åŒ–å¼ºå›½ã€‚</p><p>ã€€ã€€ä¸­å›½å…±äº§å…šåœ¨ç¤¾ä¼šä¸»ä¹‰åˆçº§é˜¶æ®µçš„åŸºæœ¬è·¯çº¿æ˜¯ï¼šé¢†å¯¼å’Œå›¢ç»“å…¨å›½å„æ—äººæ°‘ï¼Œä»¥ç»æµå»ºè®¾ä¸ºä¸­å¿ƒï¼ŒåšæŒå››é¡¹åŸºæœ¬åŸåˆ™ï¼ŒåšæŒæ”¹é©å¼€æ”¾ï¼Œè‡ªåŠ›æ›´ç”Ÿï¼Œè‰°è‹¦åˆ›ä¸šï¼Œä¸ºæŠŠæˆ‘å›½å»ºè®¾æˆä¸ºå¯Œå¼ºæ°‘ä¸»æ–‡æ˜å’Œè°ç¾ä¸½çš„ç¤¾ä¼šä¸»ä¹‰ç°ä»£åŒ–å¼ºå›½è€Œå¥‹æ–—ã€‚</p><p>ã€€ã€€ä¸­å›½å…±äº§å…šåœ¨é¢†å¯¼ç¤¾ä¼šä¸»ä¹‰äº‹ä¸šä¸­ï¼Œå¿…é¡»åšæŒä»¥ç»æµå»ºè®¾ä¸ºä¸­å¿ƒï¼Œå…¶ä»–å„é¡¹å·¥ä½œéƒ½æœä»å’ŒæœåŠ¡äºè¿™ä¸ªä¸­å¿ƒã€‚è¦å®æ–½ç§‘æ•™å…´å›½æˆ˜ç•¥ã€äººæ‰å¼ºå›½æˆ˜ç•¥ã€åˆ›æ–°é©±åŠ¨å‘å±•æˆ˜ç•¥ã€ä¹¡æ‘æŒ¯å…´æˆ˜ç•¥ã€åŒºåŸŸåè°ƒå‘å±•æˆ˜ç•¥ã€å¯æŒç»­å‘å±•æˆ˜ç•¥ã€å†›æ°‘èåˆå‘å±•æˆ˜ç•¥ï¼Œå……åˆ†å‘æŒ¥ç§‘å­¦æŠ€æœ¯ä½œä¸ºç¬¬ä¸€ç”Ÿäº§åŠ›çš„ä½œç”¨ï¼Œå……åˆ†å‘æŒ¥äººæ‰ä½œä¸ºç¬¬ä¸€èµ„æºçš„ä½œç”¨ï¼Œå……åˆ†å‘æŒ¥åˆ›æ–°ä½œä¸ºå¼•é¢†å‘å±•ç¬¬ä¸€åŠ¨åŠ›çš„ä½œç”¨ï¼Œä¾é ç§‘æŠ€è¿›æ­¥ï¼Œæé«˜åŠ³åŠ¨è€…ç´ è´¨ï¼Œä¿ƒè¿›å›½æ°‘ç»æµæ›´é«˜è´¨é‡ã€æ›´æœ‰æ•ˆç‡ã€æ›´åŠ å…¬å¹³ã€æ›´å¯æŒç»­ã€æ›´ä¸ºå®‰å…¨å‘å±•ã€‚</p><p>ã€€ã€€åšæŒç¤¾ä¼šä¸»ä¹‰é“è·¯ã€åšæŒäººæ°‘æ°‘ä¸»ä¸“æ”¿ã€åšæŒä¸­å›½å…±äº§å…šçš„é¢†å¯¼ã€åšæŒé©¬å…‹æ€åˆ—å®ä¸»ä¹‰æ¯›æ³½ä¸œæ€æƒ³è¿™å››é¡¹åŸºæœ¬åŸåˆ™ï¼Œæ˜¯æˆ‘ä»¬çš„ç«‹å›½ä¹‹æœ¬ã€‚åœ¨ç¤¾ä¼šä¸»ä¹‰ç°ä»£åŒ–å»ºè®¾çš„æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œå¿…é¡»åšæŒå››é¡¹åŸºæœ¬åŸåˆ™ï¼Œåå¯¹èµ„äº§é˜¶çº§è‡ªç”±åŒ–ã€‚</p><p>ã€€ã€€åšæŒæ”¹é©å¼€æ”¾ï¼Œæ˜¯æˆ‘ä»¬çš„å¼ºå›½ä¹‹è·¯ã€‚åªæœ‰æ”¹é©å¼€æ”¾ï¼Œæ‰èƒ½å‘å±•ä¸­å›½ã€å‘å±•ç¤¾ä¼šä¸»ä¹‰ã€å‘å±•é©¬å…‹æ€ä¸»ä¹‰ã€‚è¦å…¨é¢æ·±åŒ–æ”¹é©ï¼Œå®Œå–„å’Œå‘å±•ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰åˆ¶åº¦ï¼Œæ¨è¿›å›½å®¶æ²»ç†ä½“ç³»å’Œæ²»ç†èƒ½åŠ›ç°ä»£åŒ–ã€‚è¦ä»æ ¹æœ¬ä¸Šæ”¹é©æŸç¼šç”Ÿäº§åŠ›å‘å±•çš„ç»æµä½“åˆ¶ï¼ŒåšæŒå’Œå®Œå–„ç¤¾ä¼šä¸»ä¹‰å¸‚åœºç»æµä½“åˆ¶ï¼›ä¸æ­¤ç›¸é€‚åº”ï¼Œè¦è¿›è¡Œæ”¿æ²»ä½“åˆ¶æ”¹é©å’Œå…¶ä»–é¢†åŸŸçš„æ”¹é©ã€‚è¦åšæŒå¯¹å¤–å¼€æ”¾çš„åŸºæœ¬å›½ç­–ï¼Œå¸æ”¶å’Œå€Ÿé‰´äººç±»ç¤¾ä¼šåˆ›é€ çš„ä¸€åˆ‡æ–‡æ˜æˆæœã€‚æ”¹é©å¼€æ”¾åº”å½“å¤§èƒ†æ¢ç´¢ï¼Œå‹‡äºå¼€æ‹“ï¼Œæé«˜æ”¹é©å†³ç­–çš„ç§‘å­¦æ€§ï¼Œæ›´åŠ æ³¨é‡æ”¹é©çš„ç³»ç»Ÿæ€§ã€æ•´ä½“æ€§ã€ååŒæ€§ï¼Œåœ¨å®è·µä¸­å¼€åˆ›æ–°è·¯ã€‚</p><p>ã€€ã€€ä¸­å›½å…±äº§å…šé¢†å¯¼äººæ°‘å‘å±•ç¤¾ä¼šä¸»ä¹‰å¸‚åœºç»æµã€‚æ¯«ä¸åŠ¨æ‘‡åœ°å·©å›ºå’Œå‘å±•å…¬æœ‰åˆ¶ç»æµï¼Œæ¯«ä¸åŠ¨æ‘‡åœ°é¼“åŠ±ã€æ”¯æŒã€å¼•å¯¼éå…¬æœ‰åˆ¶ç»æµå‘å±•ã€‚å‘æŒ¥å¸‚åœºåœ¨èµ„æºé…ç½®ä¸­çš„å†³å®šæ€§ä½œç”¨ï¼Œæ›´å¥½å‘æŒ¥æ”¿åºœä½œç”¨ï¼Œå»ºç«‹å®Œå–„çš„å®è§‚è°ƒæ§ä½“ç³»ã€‚ç»Ÿç­¹åŸä¹¡å‘å±•ã€åŒºåŸŸå‘å±•ã€ç»æµç¤¾ä¼šå‘å±•ã€äººä¸è‡ªç„¶å’Œè°å‘å±•ã€å›½å†…å‘å±•å’Œå¯¹å¤–å¼€æ”¾ï¼Œè°ƒæ•´ç»æµç»“æ„ï¼Œè½¬å˜ç»æµå‘å±•æ–¹å¼ï¼Œæ¨è¿›ä¾›ç»™ä¾§ç»“æ„æ€§æ”¹é©ã€‚ä¿ƒè¿›æ–°å‹å·¥ä¸šåŒ–ã€ä¿¡æ¯åŒ–ã€åŸé•‡åŒ–ã€å†œä¸šç°ä»£åŒ–åŒæ­¥å‘å±•ï¼Œå»ºè®¾ç¤¾ä¼šä¸»ä¹‰æ–°å†œæ‘ï¼Œèµ°ä¸­å›½ç‰¹è‰²æ–°å‹å·¥ä¸šåŒ–é“è·¯ï¼Œå»ºè®¾åˆ›æ–°å‹å›½å®¶å’Œä¸–ç•Œç§‘æŠ€å¼ºå›½ã€‚</p><p>ã€€ã€€ä¸­å›½å…±äº§å…šé¢†å¯¼äººæ°‘å‘å±•ç¤¾ä¼šä¸»ä¹‰æ°‘ä¸»æ”¿æ²»ã€‚åšæŒå…šçš„é¢†å¯¼ã€äººæ°‘å½“å®¶ä½œä¸»ã€ä¾æ³•æ²»å›½æœ‰æœºç»Ÿä¸€ï¼Œèµ°ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ”¿æ²»å‘å±•é“è·¯ã€ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ³•æ²»é“è·¯ï¼Œæ‰©å¤§ç¤¾ä¼šä¸»ä¹‰æ°‘ä¸»ï¼Œå»ºè®¾ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ³•æ²»ä½“ç³»ï¼Œå»ºè®¾ç¤¾ä¼šä¸»ä¹‰æ³•æ²»å›½å®¶ï¼Œå·©å›ºäººæ°‘æ°‘ä¸»ä¸“æ”¿ï¼Œå»ºè®¾ç¤¾ä¼šä¸»ä¹‰æ”¿æ²»æ–‡æ˜ã€‚åšæŒå’Œå®Œå–„äººæ°‘ä»£è¡¨å¤§ä¼šåˆ¶åº¦ã€ä¸­å›½å…±äº§å…šé¢†å¯¼çš„å¤šå…šåˆä½œå’Œæ”¿æ²»åå•†åˆ¶åº¦ã€æ°‘æ—åŒºåŸŸè‡ªæ²»åˆ¶åº¦ä»¥åŠåŸºå±‚ç¾¤ä¼—è‡ªæ²»åˆ¶åº¦ã€‚å‘å±•æ›´åŠ å¹¿æ³›ã€æ›´åŠ å……åˆ†ã€æ›´åŠ å¥å…¨çš„å…¨è¿‡ç¨‹äººæ°‘æ°‘ä¸»ï¼Œæ¨è¿›åå•†æ°‘ä¸»å¹¿æ³›å¤šå±‚åˆ¶åº¦åŒ–å‘å±•ï¼Œåˆ‡å®ä¿éšœäººæ°‘ç®¡ç†å›½å®¶äº‹åŠ¡å’Œç¤¾ä¼šäº‹åŠ¡ã€ç®¡ç†ç»æµå’Œæ–‡åŒ–äº‹ä¸šçš„æƒåˆ©ã€‚å°Šé‡å’Œä¿éšœäººæƒã€‚å¹¿å¼€è¨€è·¯ï¼Œå»ºç«‹å¥å…¨æ°‘ä¸»é€‰ä¸¾ã€æ°‘ä¸»åå•†ã€æ°‘ä¸»å†³ç­–ã€æ°‘ä¸»ç®¡ç†ã€æ°‘ä¸»ç›‘ç£çš„åˆ¶åº¦å’Œç¨‹åºã€‚å®Œå–„ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ³•å¾‹ä½“ç³»ï¼ŒåŠ å¼ºæ³•å¾‹å®æ–½å·¥ä½œï¼Œå®ç°å›½å®¶å„é¡¹å·¥ä½œæ³•æ²»åŒ–ã€‚</p><p>ã€€ã€€ä¸­å›½å…±äº§å…šé¢†å¯¼äººæ°‘å‘å±•ç¤¾ä¼šä¸»ä¹‰å…ˆè¿›æ–‡åŒ–ã€‚å»ºè®¾ç¤¾ä¼šä¸»ä¹‰ç²¾ç¥æ–‡æ˜ï¼Œå®è¡Œä¾æ³•æ²»å›½å’Œä»¥å¾·æ²»å›½ç›¸ç»“åˆï¼Œæé«˜å…¨æ°‘æ—çš„æ€æƒ³é“å¾·ç´ è´¨å’Œç§‘å­¦æ–‡åŒ–ç´ è´¨ï¼Œä¸ºæ”¹é©å¼€æ”¾å’Œç¤¾ä¼šä¸»ä¹‰ç°ä»£åŒ–å»ºè®¾æä¾›å¼ºå¤§çš„æ€æƒ³ä¿è¯ã€ç²¾ç¥åŠ¨åŠ›å’Œæ™ºåŠ›æ”¯æŒï¼Œå»ºè®¾ç¤¾ä¼šä¸»ä¹‰æ–‡åŒ–å¼ºå›½ã€‚åŠ å¼ºç¤¾ä¼šä¸»ä¹‰æ ¸å¿ƒä»·å€¼ä½“ç³»å»ºè®¾ï¼ŒåšæŒé©¬å…‹æ€ä¸»ä¹‰æŒ‡å¯¼æ€æƒ³ï¼Œæ ‘ç«‹ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰å…±åŒç†æƒ³ï¼Œå¼˜æ‰¬ä»¥çˆ±å›½ä¸»ä¹‰ä¸ºæ ¸å¿ƒçš„æ°‘æ—ç²¾ç¥å’Œä»¥æ”¹é©åˆ›æ–°ä¸ºæ ¸å¿ƒçš„æ—¶ä»£ç²¾ç¥ï¼ŒåŸ¹è‚²å’Œè·µè¡Œç¤¾ä¼šä¸»ä¹‰æ ¸å¿ƒä»·å€¼è§‚ï¼Œå€¡å¯¼ç¤¾ä¼šä¸»ä¹‰è£è¾±è§‚ï¼Œå¢å¼ºæ°‘æ—è‡ªå°Šã€è‡ªä¿¡å’Œè‡ªå¼ºç²¾ç¥ï¼ŒæŠµå¾¡èµ„æœ¬ä¸»ä¹‰å’Œå°å»ºä¸»ä¹‰è…æœ½æ€æƒ³çš„ä¾µèš€ï¼Œæ‰«é™¤å„ç§ç¤¾ä¼šä¸‘æ¶ç°è±¡ï¼ŒåŠªåŠ›ä½¿æˆ‘å›½äººæ°‘æˆä¸ºæœ‰ç†æƒ³ã€æœ‰é“å¾·ã€æœ‰æ–‡åŒ–ã€æœ‰çºªå¾‹çš„äººæ°‘ã€‚å¯¹å…šå‘˜è¦è¿›è¡Œå…±äº§ä¸»ä¹‰è¿œå¤§ç†æƒ³æ•™è‚²ã€‚å¤§åŠ›å‘å±•æ•™è‚²ã€ç§‘å­¦ã€æ–‡åŒ–äº‹ä¸šï¼Œæ¨åŠ¨ä¸­åä¼˜ç§€ä¼ ç»Ÿæ–‡åŒ–åˆ›é€ æ€§è½¬åŒ–ã€åˆ›æ–°æ€§å‘å±•ï¼Œç»§æ‰¿é©å‘½æ–‡åŒ–ï¼Œå‘å±•ç¤¾ä¼šä¸»ä¹‰å…ˆè¿›æ–‡åŒ–ï¼Œæé«˜å›½å®¶æ–‡åŒ–è½¯å®åŠ›ã€‚ç‰¢ç‰¢æŒæ¡æ„è¯†å½¢æ€å·¥ä½œé¢†å¯¼æƒï¼Œä¸æ–­å·©å›ºé©¬å…‹æ€ä¸»ä¹‰åœ¨æ„è¯†å½¢æ€é¢†åŸŸçš„æŒ‡å¯¼åœ°ä½ï¼Œå·©å›ºå…¨å…šå…¨å›½äººæ°‘å›¢ç»“å¥‹æ–—çš„å…±åŒæ€æƒ³åŸºç¡€ã€‚</p><p>ã€€ã€€ä¸­å›½å…±äº§å…šé¢†å¯¼äººæ°‘æ„å»ºç¤¾ä¼šä¸»ä¹‰å’Œè°ç¤¾ä¼šã€‚æŒ‰ç…§æ°‘ä¸»æ³•æ²»ã€å…¬å¹³æ­£ä¹‰ã€è¯šä¿¡å‹çˆ±ã€å……æ»¡æ´»åŠ›ã€å®‰å®šæœ‰åºã€äººä¸è‡ªç„¶å’Œè°ç›¸å¤„çš„æ€»è¦æ±‚å’Œå…±åŒå»ºè®¾ã€å…±åŒäº«æœ‰çš„åŸåˆ™ï¼Œä»¥ä¿éšœå’Œæ”¹å–„æ°‘ç”Ÿä¸ºé‡ç‚¹ï¼Œè§£å†³å¥½äººæ°‘æœ€å…³å¿ƒã€æœ€ç›´æ¥ã€æœ€ç°å®çš„åˆ©ç›Šé—®é¢˜ï¼Œä½¿å‘å±•æˆæœæ›´å¤šæ›´å…¬å¹³æƒ åŠå…¨ä½“äººæ°‘ï¼Œä¸æ–­å¢å¼ºäººæ°‘ç¾¤ä¼—è·å¾—æ„Ÿï¼ŒåŠªåŠ›å½¢æˆå…¨ä½“äººæ°‘å„å°½å…¶èƒ½ã€å„å¾—å…¶æ‰€è€Œåˆå’Œè°ç›¸å¤„çš„å±€é¢ã€‚åŠ å¼ºå’Œåˆ›æ–°ç¤¾ä¼šæ²»ç†ã€‚ä¸¥æ ¼åŒºåˆ†å’Œæ­£ç¡®å¤„ç†æ•Œæˆ‘çŸ›ç›¾å’Œäººæ°‘å†…éƒ¨çŸ›ç›¾è¿™ä¸¤ç±»ä¸åŒæ€§è´¨çš„çŸ›ç›¾ã€‚åŠ å¼ºç¤¾ä¼šæ²»å®‰ç»¼åˆæ²»ç†ï¼Œä¾æ³•åšå†³æ‰“å‡»å„ç§å±å®³å›½å®¶å®‰å…¨å’Œåˆ©ç›Šã€å±å®³ç¤¾ä¼šç¨³å®šå’Œç»æµå‘å±•çš„çŠ¯ç½ªæ´»åŠ¨å’ŒçŠ¯ç½ªåˆ†å­ï¼Œä¿æŒç¤¾ä¼šé•¿æœŸç¨³å®šã€‚åšæŒæ€»ä½“å›½å®¶å®‰å…¨è§‚ï¼Œç»Ÿç­¹å‘å±•å’Œå®‰å…¨ï¼Œåšå†³ç»´æŠ¤å›½å®¶ä¸»æƒã€å®‰å…¨ã€å‘å±•åˆ©ç›Šã€‚</p><p>ã€€ã€€ä¸­å›½å…±äº§å…šé¢†å¯¼äººæ°‘å»ºè®¾ç¤¾ä¼šä¸»ä¹‰ç”Ÿæ€æ–‡æ˜ã€‚æ ‘ç«‹å°Šé‡è‡ªç„¶ã€é¡ºåº”è‡ªç„¶ã€ä¿æŠ¤è‡ªç„¶çš„ç”Ÿæ€æ–‡æ˜ç†å¿µï¼Œå¢å¼ºç»¿æ°´é’å±±å°±æ˜¯é‡‘å±±é“¶å±±çš„æ„è¯†ï¼ŒåšæŒèŠ‚çº¦èµ„æºå’Œä¿æŠ¤ç¯å¢ƒçš„åŸºæœ¬å›½ç­–ï¼ŒåšæŒèŠ‚çº¦ä¼˜å…ˆã€ä¿æŠ¤ä¼˜å…ˆã€è‡ªç„¶æ¢å¤ä¸ºä¸»çš„æ–¹é’ˆï¼ŒåšæŒç”Ÿäº§å‘å±•ã€ç”Ÿæ´»å¯Œè£•ã€ç”Ÿæ€è‰¯å¥½çš„æ–‡æ˜å‘å±•é“è·¯ã€‚ç€åŠ›å»ºè®¾èµ„æºèŠ‚çº¦å‹ã€ç¯å¢ƒå‹å¥½å‹ç¤¾ä¼šï¼Œå®è¡Œæœ€ä¸¥æ ¼çš„ç”Ÿæ€ç¯å¢ƒä¿æŠ¤åˆ¶åº¦ï¼Œå½¢æˆèŠ‚çº¦èµ„æºå’Œä¿æŠ¤ç¯å¢ƒçš„ç©ºé—´æ ¼å±€ã€äº§ä¸šç»“æ„ã€ç”Ÿäº§æ–¹å¼ã€ç”Ÿæ´»æ–¹å¼ï¼Œä¸ºäººæ°‘åˆ›é€ è‰¯å¥½ç”Ÿäº§ç”Ÿæ´»ç¯å¢ƒï¼Œå®ç°ä¸­åæ°‘æ—æ°¸ç»­å‘å±•ã€‚</p><p>ã€€ã€€ä¸­å›½å…±äº§å…šåšæŒå¯¹äººæ°‘è§£æ”¾å†›å’Œå…¶ä»–äººæ°‘æ­¦è£…åŠ›é‡çš„ç»å¯¹é¢†å¯¼ï¼Œè´¯å½»ä¹ è¿‘å¹³å¼ºå†›æ€æƒ³ï¼ŒåŠ å¼ºäººæ°‘è§£æ”¾å†›çš„å»ºè®¾ï¼ŒåšæŒæ”¿æ²»å»ºå†›ã€æ”¹é©å¼ºå†›ã€ç§‘æŠ€å¼ºå†›ã€äººæ‰å¼ºå†›ã€ä¾æ³•æ²»å†›ï¼Œå»ºè®¾ä¸€æ”¯å¬å…šæŒ‡æŒ¥ã€èƒ½æ‰“èƒœä»—ã€ä½œé£ä¼˜è‰¯çš„äººæ°‘å†›é˜Ÿï¼ŒæŠŠäººæ°‘å†›é˜Ÿå»ºè®¾æˆä¸ºä¸–ç•Œä¸€æµå†›é˜Ÿï¼Œåˆ‡å®ä¿è¯äººæ°‘è§£æ”¾å†›æœ‰æ•ˆå±¥è¡Œæ–°æ—¶ä»£å†›é˜Ÿä½¿å‘½ä»»åŠ¡ï¼Œå……åˆ†å‘æŒ¥äººæ°‘è§£æ”¾å†›åœ¨å·©å›ºå›½é˜²ã€ä¿å«ç¥–å›½å’Œå‚åŠ ç¤¾ä¼šä¸»ä¹‰ç°ä»£åŒ–å»ºè®¾ä¸­çš„ä½œç”¨ã€‚</p><p>ã€€ã€€ä¸­å›½å…±äº§å…šç»´æŠ¤å’Œå‘å±•å¹³ç­‰å›¢ç»“äº’åŠ©å’Œè°çš„ç¤¾ä¼šä¸»ä¹‰æ°‘æ—å…³ç³»ï¼Œç§¯æåŸ¹å…»ã€é€‰æ‹”å°‘æ•°æ°‘æ—å¹²éƒ¨ï¼Œå¸®åŠ©å°‘æ•°æ°‘æ—å’Œæ°‘æ—åœ°åŒºå‘å±•ç»æµã€æ–‡åŒ–å’Œç¤¾ä¼šäº‹ä¸šï¼Œé“¸ç‰¢ä¸­åæ°‘æ—å…±åŒä½“æ„è¯†ï¼Œå®ç°å„æ°‘æ—å…±åŒå›¢ç»“å¥‹æ–—ã€å…±åŒç¹è£å‘å±•ã€‚å…¨é¢è´¯å½»å…šçš„å®—æ•™å·¥ä½œåŸºæœ¬æ–¹é’ˆï¼Œå›¢ç»“ä¿¡æ•™ç¾¤ä¼—ä¸ºç»æµç¤¾ä¼šå‘å±•ä½œè´¡çŒ®ã€‚</p><p>ã€€ã€€ä¸­å›½å…±äº§å…šåŒå…¨å›½å„æ°‘æ—å·¥äººã€å†œæ°‘ã€çŸ¥è¯†åˆ†å­å›¢ç»“åœ¨ä¸€èµ·ï¼ŒåŒå„æ°‘ä¸»å…šæ´¾ã€æ— å…šæ´¾äººå£«ã€å„æ°‘æ—çš„çˆ±å›½åŠ›é‡å›¢ç»“åœ¨ä¸€èµ·ï¼Œè¿›ä¸€æ­¥å‘å±•å’Œå£®å¤§ç”±å…¨ä½“ç¤¾ä¼šä¸»ä¹‰åŠ³åŠ¨è€…ã€ç¤¾ä¼šä¸»ä¹‰äº‹ä¸šçš„å»ºè®¾è€…ã€æ‹¥æŠ¤ç¤¾ä¼šä¸»ä¹‰çš„çˆ±å›½è€…ã€æ‹¥æŠ¤ç¥–å›½ç»Ÿä¸€å’Œè‡´åŠ›äºä¸­åæ°‘æ—ä¼Ÿå¤§å¤å…´çš„çˆ±å›½è€…ç»„æˆçš„æœ€å¹¿æ³›çš„çˆ±å›½ç»Ÿä¸€æˆ˜çº¿ã€‚ä¸æ–­åŠ å¼ºå…¨å›½äººæ°‘åŒ…æ‹¬é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºåŒèƒã€æ¾³é—¨ç‰¹åˆ«è¡Œæ”¿åŒºåŒèƒã€å°æ¹¾åŒèƒå’Œæµ·å¤–ä¾¨èƒçš„å›¢ç»“ã€‚å…¨é¢å‡†ç¡®ã€åšå®šä¸ç§»è´¯å½»â€œä¸€ä¸ªå›½å®¶ã€ä¸¤ç§åˆ¶åº¦â€çš„æ–¹é’ˆï¼Œä¿ƒè¿›é¦™æ¸¯ã€æ¾³é—¨é•¿æœŸç¹è£ç¨³å®šï¼Œåšå†³åå¯¹å’Œéåˆ¶â€œå°ç‹¬â€ï¼Œå®Œæˆç¥–å›½ç»Ÿä¸€å¤§ä¸šã€‚</p><p>ã€€ã€€ä¸­å›½å…±äº§å…šåšæŒç‹¬ç«‹è‡ªä¸»çš„å’Œå¹³å¤–äº¤æ”¿ç­–ï¼ŒåšæŒå’Œå¹³å‘å±•é“è·¯ï¼ŒåšæŒäº’åˆ©å…±èµ¢çš„å¼€æ”¾æˆ˜ç•¥ï¼Œç»Ÿç­¹å›½å†…å›½é™…ä¸¤ä¸ªå¤§å±€ï¼Œç§¯æå‘å±•å¯¹å¤–å…³ç³»ï¼ŒåŠªåŠ›ä¸ºæˆ‘å›½çš„æ”¹é©å¼€æ”¾å’Œç°ä»£åŒ–å»ºè®¾äº‰å–æœ‰åˆ©çš„å›½é™…ç¯å¢ƒã€‚åœ¨å›½é™…äº‹åŠ¡ä¸­ï¼Œå¼˜æ‰¬å’Œå¹³ã€å‘å±•ã€å…¬å¹³ã€æ­£ä¹‰ã€æ°‘ä¸»ã€è‡ªç”±çš„å…¨äººç±»å…±åŒä»·å€¼ï¼ŒåšæŒæ­£ç¡®ä¹‰åˆ©è§‚ï¼Œç»´æŠ¤æˆ‘å›½çš„ç‹¬ç«‹å’Œä¸»æƒï¼Œåå¯¹éœ¸æƒä¸»ä¹‰å’Œå¼ºæƒæ”¿æ²»ï¼Œç»´æŠ¤ä¸–ç•Œå’Œå¹³ï¼Œä¿ƒè¿›äººç±»è¿›æ­¥ï¼Œæ¨åŠ¨æ„å»ºäººç±»å‘½è¿å…±åŒä½“ï¼Œæ¨åŠ¨å»ºè®¾æŒä¹…å’Œå¹³ã€æ™®éå®‰å…¨ã€å…±åŒç¹è£ã€å¼€æ”¾åŒ…å®¹ã€æ¸…æ´ç¾ä¸½çš„ä¸–ç•Œã€‚åœ¨äº’ç›¸å°Šé‡ä¸»æƒå’Œé¢†åœŸå®Œæ•´ã€äº’ä¸ä¾µçŠ¯ã€äº’ä¸å¹²æ¶‰å†…æ”¿ã€å¹³ç­‰äº’åˆ©ã€å’Œå¹³å…±å¤„äº”é¡¹åŸåˆ™çš„åŸºç¡€ä¸Šï¼Œå‘å±•æˆ‘å›½åŒä¸–ç•Œå„å›½çš„å…³ç³»ã€‚ä¸æ–­å‘å±•æˆ‘å›½åŒå‘¨è¾¹å›½å®¶çš„ç¦é‚»å‹å¥½å…³ç³»ï¼ŒåŠ å¼ºåŒå‘å±•ä¸­å›½å®¶çš„å›¢ç»“ä¸åˆä½œã€‚éµå¾ªå…±å•†å…±å»ºå…±äº«åŸåˆ™ï¼Œæ¨è¿›â€œä¸€å¸¦ä¸€è·¯â€å»ºè®¾ã€‚æŒ‰ç…§ç‹¬ç«‹è‡ªä¸»ã€å®Œå…¨å¹³ç­‰ã€äº’ç›¸å°Šé‡ã€äº’ä¸å¹²æ¶‰å†…éƒ¨äº‹åŠ¡çš„åŸåˆ™ï¼Œå‘å±•æˆ‘å…šåŒå„å›½å…±äº§å…šå’Œå…¶ä»–æ”¿å…šçš„å…³ç³»ã€‚</p><p>ã€€ã€€ä¸­å›½å…±äº§å…šè¦é¢†å¯¼å…¨å›½å„æ—äººæ°‘å®ç°ç¬¬äºŒä¸ªç™¾å¹´å¥‹æ–—ç›®æ ‡ã€å®ç°ä¸­åæ°‘æ—ä¼Ÿå¤§å¤å…´çš„ä¸­å›½æ¢¦ï¼Œå¿…é¡»ç´§å¯†å›´ç»•å…šçš„åŸºæœ¬è·¯çº¿ï¼ŒåšæŒå’ŒåŠ å¼ºå…šçš„å…¨é¢é¢†å¯¼ï¼ŒåšæŒå…šè¦ç®¡å…šã€å…¨é¢ä»ä¸¥æ²»å…šï¼Œå¼˜æ‰¬åšæŒçœŸç†ã€åšå®ˆç†æƒ³ï¼Œè·µè¡Œåˆå¿ƒã€æ‹…å½“ä½¿å‘½ï¼Œä¸æ€•ç‰ºç‰²ã€è‹±å‹‡æ–—äº‰ï¼Œå¯¹å…šå¿ è¯šã€ä¸è´Ÿäººæ°‘çš„ä¼Ÿå¤§å»ºå…šç²¾ç¥ï¼ŒåŠ å¼ºå…šçš„é•¿æœŸæ‰§æ”¿èƒ½åŠ›å»ºè®¾ã€å…ˆè¿›æ€§å’Œçº¯æ´æ€§å»ºè®¾ï¼Œä»¥æ”¹é©åˆ›æ–°ç²¾ç¥å…¨é¢æ¨è¿›å…šçš„å»ºè®¾æ–°çš„ä¼Ÿå¤§å·¥ç¨‹ï¼Œä»¥å…šçš„æ”¿æ²»å»ºè®¾ä¸ºç»Ÿé¢†ï¼Œå…¨é¢æ¨è¿›å…šçš„æ”¿æ²»å»ºè®¾ã€æ€æƒ³å»ºè®¾ã€ç»„ç»‡å»ºè®¾ã€ä½œé£å»ºè®¾ã€çºªå¾‹å»ºè®¾ï¼ŒæŠŠåˆ¶åº¦å»ºè®¾è´¯ç©¿å…¶ä¸­ï¼Œæ·±å…¥æ¨è¿›åè…è´¥æ–—äº‰ï¼Œå…¨é¢æé«˜å…šçš„å»ºè®¾ç§‘å­¦åŒ–æ°´å¹³ï¼Œä»¥ä¼Ÿå¤§è‡ªæˆ‘é©å‘½å¼•é¢†ä¼Ÿå¤§ç¤¾ä¼šé©å‘½ã€‚åšæŒç«‹å…šä¸ºå…¬ã€æ‰§æ”¿ä¸ºæ°‘ï¼Œå‘æ‰¬å…šçš„ä¼˜è‰¯ä¼ ç»Ÿå’Œä½œé£ï¼Œä¸æ–­æé«˜å…šçš„é¢†å¯¼æ°´å¹³å’Œæ‰§æ”¿æ°´å¹³ï¼Œæé«˜æ‹’è…é˜²å˜å’ŒæŠµå¾¡é£é™©çš„èƒ½åŠ›ï¼Œä¸æ–­å¢å¼ºè‡ªæˆ‘å‡€åŒ–ã€è‡ªæˆ‘å®Œå–„ã€è‡ªæˆ‘é©æ–°ã€è‡ªæˆ‘æé«˜èƒ½åŠ›ï¼Œä¸æ–­å¢å¼ºå…šçš„é˜¶çº§åŸºç¡€å’Œæ‰©å¤§å…šçš„ç¾¤ä¼—åŸºç¡€ï¼Œä¸æ–­æé«˜å…šçš„åˆ›é€ åŠ›ã€å‡èšåŠ›ã€æˆ˜æ–—åŠ›ï¼Œå»ºè®¾å­¦ä¹ å‹ã€æœåŠ¡å‹ã€åˆ›æ–°å‹çš„é©¬å…‹æ€ä¸»ä¹‰æ‰§æ”¿å…šï¼Œä½¿æˆ‘ä»¬å…šå§‹ç»ˆèµ°åœ¨æ—¶ä»£å‰åˆ—ï¼Œæˆä¸ºé¢†å¯¼å…¨å›½äººæ°‘æ²¿ç€ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰é“è·¯ä¸æ–­å‰è¿›çš„åšå¼ºæ ¸å¿ƒã€‚å…šçš„å»ºè®¾å¿…é¡»åšå†³å®ç°ä»¥ä¸‹å…­é¡¹åŸºæœ¬è¦æ±‚ï¼š</p><p>ã€€ã€€ç¬¬ä¸€ï¼ŒåšæŒå…šçš„åŸºæœ¬è·¯çº¿ã€‚å…¨å…šè¦ç”¨é‚“å°å¹³ç†è®ºã€â€œä¸‰ä¸ªä»£è¡¨â€é‡è¦æ€æƒ³ã€ç§‘å­¦å‘å±•è§‚ã€ä¹ è¿‘å¹³æ–°æ—¶ä»£ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ€æƒ³å’Œå…šçš„åŸºæœ¬è·¯çº¿ç»Ÿä¸€æ€æƒ³ï¼Œç»Ÿä¸€è¡ŒåŠ¨ï¼Œå¹¶ä¸”æ¯«ä¸åŠ¨æ‘‡åœ°é•¿æœŸåšæŒä¸‹å»ã€‚å¿…é¡»æŠŠæ”¹é©å¼€æ”¾åŒå››é¡¹åŸºæœ¬åŸåˆ™ç»Ÿä¸€èµ·æ¥ï¼Œå…¨é¢è½å®å…šçš„åŸºæœ¬è·¯çº¿ï¼Œåå¯¹ä¸€åˆ‡â€œå·¦â€çš„å’Œå³çš„é”™è¯¯å€¾å‘ï¼Œè¦è­¦æƒ•å³ï¼Œä½†ä¸»è¦æ˜¯é˜²æ­¢â€œå·¦â€ã€‚å¿…é¡»æé«˜æ”¿æ²»åˆ¤æ–­åŠ›ã€æ”¿æ²»é¢†æ‚ŸåŠ›ã€æ”¿æ²»æ‰§è¡ŒåŠ›ï¼Œå¢å¼ºè´¯å½»è½å®å…šçš„ç†è®ºå’Œè·¯çº¿æ–¹é’ˆæ”¿ç­–çš„è‡ªè§‰æ€§å’Œåšå®šæ€§ã€‚</p><p>ã€€ã€€ç¬¬äºŒï¼ŒåšæŒè§£æ”¾æ€æƒ³ï¼Œå®äº‹æ±‚æ˜¯ï¼Œä¸æ—¶ä¿±è¿›ï¼Œæ±‚çœŸåŠ¡å®ã€‚å…šçš„æ€æƒ³è·¯çº¿æ˜¯ä¸€åˆ‡ä»å®é™…å‡ºå‘ï¼Œç†è®ºè”ç³»å®é™…ï¼Œå®äº‹æ±‚æ˜¯ï¼Œåœ¨å®è·µä¸­æ£€éªŒçœŸç†å’Œå‘å±•çœŸç†ã€‚å…¨å…šå¿…é¡»åšæŒè¿™æ¡æ€æƒ³è·¯çº¿ï¼Œç§¯ææ¢ç´¢ï¼Œå¤§èƒ†è¯•éªŒï¼Œå¼€æ‹“åˆ›æ–°ï¼Œåˆ›é€ æ€§åœ°å¼€å±•å·¥ä½œï¼Œä¸æ–­ç ”ç©¶æ–°æƒ…å†µï¼Œæ€»ç»“æ–°ç»éªŒï¼Œè§£å†³æ–°é—®é¢˜ï¼Œåœ¨å®è·µä¸­ä¸°å¯Œå’Œå‘å±•é©¬å…‹æ€ä¸»ä¹‰ï¼Œæ¨è¿›é©¬å…‹æ€ä¸»ä¹‰ä¸­å›½åŒ–æ—¶ä»£åŒ–ã€‚</p><p>ã€€ã€€ç¬¬ä¸‰ï¼ŒåšæŒæ–°æ—¶ä»£å…šçš„ç»„ç»‡è·¯çº¿ã€‚å…¨é¢è´¯å½»ä¹ è¿‘å¹³æ–°æ—¶ä»£ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ€æƒ³ï¼Œä»¥ç»„ç»‡ä½“ç³»å»ºè®¾ä¸ºé‡ç‚¹ï¼Œç€åŠ›åŸ¹å…»å¿ è¯šå¹²å‡€æ‹…å½“çš„é«˜ç´ è´¨å¹²éƒ¨ï¼Œç€åŠ›é›†èšçˆ±å›½å¥‰çŒ®çš„å„æ–¹é¢ä¼˜ç§€äººæ‰ï¼ŒåšæŒå¾·æ‰å…¼å¤‡ã€ä»¥å¾·ä¸ºå…ˆã€ä»»äººå”¯è´¤ï¼Œä¸ºåšæŒå’ŒåŠ å¼ºå…šçš„å…¨é¢é¢†å¯¼ã€åšæŒå’Œå‘å±•ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æä¾›åšå¼ºç»„ç»‡ä¿è¯ã€‚å…¨å…šå¿…é¡»å¢å¼ºå…šç»„ç»‡çš„æ”¿æ²»åŠŸèƒ½å’Œç»„ç»‡åŠŸèƒ½ï¼ŒåŸ¹å…»é€‰æ‹”å…šå’Œäººæ°‘éœ€è¦çš„å¥½å¹²éƒ¨ï¼ŒåŸ¹å…»å’Œé€ å°±å¤§æ‰¹å ªå½“æ—¶ä»£é‡ä»»çš„ç¤¾ä¼šä¸»ä¹‰äº‹ä¸šæ¥ç­äººï¼Œèšå¤©ä¸‹è‹±æ‰è€Œç”¨ä¹‹ï¼Œä»ç»„ç»‡ä¸Šä¿è¯å…šçš„åŸºæœ¬ç†è®ºã€åŸºæœ¬è·¯çº¿ã€åŸºæœ¬æ–¹ç•¥çš„è´¯å½»è½å®ã€‚</p><p>ã€€ã€€ç¬¬å››ï¼ŒåšæŒå…¨å¿ƒå…¨æ„ä¸ºäººæ°‘æœåŠ¡ã€‚å…šé™¤äº†å·¥äººé˜¶çº§å’Œæœ€å¹¿å¤§äººæ°‘ç¾¤ä¼—çš„åˆ©ç›Šï¼Œæ²¡æœ‰è‡ªå·±ç‰¹æ®Šçš„åˆ©ç›Šã€‚å…šåœ¨ä»»ä½•æ—¶å€™éƒ½æŠŠç¾¤ä¼—åˆ©ç›Šæ”¾åœ¨ç¬¬ä¸€ä½ï¼ŒåŒç¾¤ä¼—åŒç”˜å…±è‹¦ï¼Œä¿æŒæœ€å¯†åˆ‡çš„è”ç³»ï¼ŒåšæŒæƒä¸ºæ°‘æ‰€ç”¨ã€æƒ…ä¸ºæ°‘æ‰€ç³»ã€åˆ©ä¸ºæ°‘æ‰€è°‹ï¼Œä¸å…è®¸ä»»ä½•å…šå‘˜è„±ç¦»ç¾¤ä¼—ï¼Œå‡Œé©¾äºç¾¤ä¼—ä¹‹ä¸Šã€‚æˆ‘ä»¬å…šçš„æœ€å¤§æ”¿æ²»ä¼˜åŠ¿æ˜¯å¯†åˆ‡è”ç³»ç¾¤ä¼—ï¼Œå…šæ‰§æ”¿åçš„æœ€å¤§å±é™©æ˜¯è„±ç¦»ç¾¤ä¼—ã€‚å…šé£é—®é¢˜ã€å…šåŒäººæ°‘ç¾¤ä¼—è”ç³»é—®é¢˜æ˜¯å…³ç³»å…šç”Ÿæ­»å­˜äº¡çš„é—®é¢˜ã€‚å…šåœ¨è‡ªå·±çš„å·¥ä½œä¸­å®è¡Œç¾¤ä¼—è·¯çº¿ï¼Œä¸€åˆ‡ä¸ºäº†ç¾¤ä¼—ï¼Œä¸€åˆ‡ä¾é ç¾¤ä¼—ï¼Œä»ç¾¤ä¼—ä¸­æ¥ï¼Œåˆ°ç¾¤ä¼—ä¸­å»ï¼ŒæŠŠå…šçš„æ­£ç¡®ä¸»å¼ å˜ä¸ºç¾¤ä¼—çš„è‡ªè§‰è¡ŒåŠ¨ã€‚</p><p>ã€€ã€€ç¬¬äº”ï¼ŒåšæŒæ°‘ä¸»é›†ä¸­åˆ¶ã€‚æ°‘ä¸»é›†ä¸­åˆ¶æ˜¯æ°‘ä¸»åŸºç¡€ä¸Šçš„é›†ä¸­å’Œé›†ä¸­æŒ‡å¯¼ä¸‹çš„æ°‘ä¸»ç›¸ç»“åˆã€‚å®ƒæ—¢æ˜¯å…šçš„æ ¹æœ¬ç»„ç»‡åŸåˆ™ï¼Œä¹Ÿæ˜¯ç¾¤ä¼—è·¯çº¿åœ¨å…šçš„ç”Ÿæ´»ä¸­çš„è¿ç”¨ã€‚å¿…é¡»å……åˆ†å‘æ‰¬å…šå†…æ°‘ä¸»ï¼Œå°Šé‡å…šå‘˜ä¸»ä½“åœ°ä½ï¼Œä¿éšœå…šå‘˜æ°‘ä¸»æƒåˆ©ï¼Œå‘æŒ¥å„çº§å…šç»„ç»‡å’Œå¹¿å¤§å…šå‘˜çš„ç§¯ææ€§åˆ›é€ æ€§ã€‚å¿…é¡»å®è¡Œæ­£ç¡®çš„é›†ä¸­ï¼Œç‰¢å›ºæ ‘ç«‹æ”¿æ²»æ„è¯†ã€å¤§å±€æ„è¯†ã€æ ¸å¿ƒæ„è¯†ã€çœ‹é½æ„è¯†ï¼Œåšå®šç»´æŠ¤ä»¥ä¹ è¿‘å¹³åŒå¿—ä¸ºæ ¸å¿ƒçš„å…šä¸­å¤®æƒå¨å’Œé›†ä¸­ç»Ÿä¸€é¢†å¯¼ï¼Œä¿è¯å…¨å…šçš„å›¢ç»“ç»Ÿä¸€å’Œè¡ŒåŠ¨ä¸€è‡´ï¼Œä¿è¯å…šçš„å†³å®šå¾—åˆ°è¿…é€Ÿæœ‰æ•ˆçš„è´¯å½»æ‰§è¡Œã€‚åŠ å¼ºå’Œè§„èŒƒå…šå†…æ”¿æ²»ç”Ÿæ´»ï¼Œå¢å¼ºå…šå†…æ”¿æ²»ç”Ÿæ´»çš„æ”¿æ²»æ€§ã€æ—¶ä»£æ€§ã€åŸåˆ™æ€§ã€æˆ˜æ–—æ€§ï¼Œå‘å±•ç§¯æå¥åº·çš„å…šå†…æ”¿æ²»æ–‡åŒ–ï¼Œè¥é€ é£æ¸…æ°”æ­£çš„è‰¯å¥½æ”¿æ²»ç”Ÿæ€ã€‚å…šåœ¨è‡ªå·±çš„æ”¿æ²»ç”Ÿæ´»ä¸­æ­£ç¡®åœ°å¼€å±•æ‰¹è¯„å’Œè‡ªæˆ‘æ‰¹è¯„ï¼Œåœ¨åŸåˆ™é—®é¢˜ä¸Šè¿›è¡Œæ€æƒ³æ–—äº‰ï¼ŒåšæŒçœŸç†ï¼Œä¿®æ­£é”™è¯¯ã€‚åŠªåŠ›é€ æˆåˆæœ‰é›†ä¸­åˆæœ‰æ°‘ä¸»ï¼Œåˆæœ‰çºªå¾‹åˆæœ‰è‡ªç”±ï¼Œåˆæœ‰ç»Ÿä¸€æ„å¿—åˆæœ‰ä¸ªäººå¿ƒæƒ…èˆ’ç•…ç”ŸåŠ¨æ´»æ³¼çš„æ”¿æ²»å±€é¢ã€‚</p><p>ã€€ã€€ç¬¬å…­ï¼ŒåšæŒä»ä¸¥ç®¡å…šæ²»å…šã€‚å…¨é¢ä»ä¸¥æ²»å…šæ°¸è¿œåœ¨è·¯ä¸Šï¼Œå…šçš„è‡ªæˆ‘é©å‘½æ°¸è¿œåœ¨è·¯ä¸Šã€‚æ–°å½¢åŠ¿ä¸‹ï¼Œå…šé¢ä¸´çš„æ‰§æ”¿è€ƒéªŒã€æ”¹é©å¼€æ”¾è€ƒéªŒã€å¸‚åœºç»æµè€ƒéªŒã€å¤–éƒ¨ç¯å¢ƒè€ƒéªŒæ˜¯é•¿æœŸçš„ã€å¤æ‚çš„ã€ä¸¥å³»çš„ï¼Œç²¾ç¥æ‡ˆæ€ å±é™©ã€èƒ½åŠ›ä¸è¶³å±é™©ã€è„±ç¦»ç¾¤ä¼—å±é™©ã€æ¶ˆæè…è´¥å±é™©æ›´åŠ å°–é”åœ°æ‘†åœ¨å…¨å…šé¢å‰ã€‚è¦æŠŠä¸¥çš„æ ‡å‡†ã€ä¸¥çš„æªæ–½è´¯ç©¿äºç®¡å…šæ²»å…šå…¨è¿‡ç¨‹å’Œå„æ–¹é¢ã€‚åšæŒä¾è§„æ²»å…šã€æ ‡æœ¬å…¼æ²»ï¼Œä¸æ–­å¥å…¨å…šå†…æ³•è§„ä½“ç³»ï¼ŒåšæŒæŠŠçºªå¾‹æŒºåœ¨å‰é¢ï¼ŒåŠ å¼ºç»„ç»‡æ€§çºªå¾‹æ€§ï¼Œåœ¨å…šçš„çºªå¾‹é¢å‰äººäººå¹³ç­‰ã€‚å¼ºåŒ–å…¨é¢ä»ä¸¥æ²»å…šä¸»ä½“è´£ä»»å’Œç›‘ç£è´£ä»»ï¼ŒåŠ å¼ºå¯¹å…šçš„é¢†å¯¼æœºå…³å’Œå…šå‘˜é¢†å¯¼å¹²éƒ¨ç‰¹åˆ«æ˜¯ä¸»è¦é¢†å¯¼å¹²éƒ¨çš„ç›‘ç£ï¼Œä¸æ–­å®Œå–„å…šå†…ç›‘ç£ä½“ç³»ã€‚æ·±å…¥æ¨è¿›å…šé£å»‰æ”¿å»ºè®¾å’Œåè…è´¥æ–—äº‰ï¼Œä»¥é›¶å®¹å¿æ€åº¦æƒ©æ²»è…è´¥ï¼Œä¸€ä½“æ¨è¿›ä¸æ•¢è…ã€ä¸èƒ½è…ã€ä¸æƒ³è…ã€‚</p><p>ã€€ã€€ä¸­å›½å…±äº§å…šçš„é¢†å¯¼æ˜¯ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æœ€æœ¬è´¨çš„ç‰¹å¾ï¼Œæ˜¯ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰åˆ¶åº¦çš„æœ€å¤§ä¼˜åŠ¿ï¼Œå…šæ˜¯æœ€é«˜æ”¿æ²»é¢†å¯¼åŠ›é‡ã€‚å…šæ”¿å†›æ°‘å­¦ï¼Œä¸œè¥¿å—åŒ—ä¸­ï¼Œå…šæ˜¯é¢†å¯¼ä¸€åˆ‡çš„ã€‚å…šè¦é€‚åº”æ”¹é©å¼€æ”¾å’Œç¤¾ä¼šä¸»ä¹‰ç°ä»£åŒ–å»ºè®¾çš„è¦æ±‚ï¼ŒåšæŒç§‘å­¦æ‰§æ”¿ã€æ°‘ä¸»æ‰§æ”¿ã€ä¾æ³•æ‰§æ”¿ï¼ŒåŠ å¼ºå’Œæ”¹å–„å…šçš„é¢†å¯¼ã€‚å…šå¿…é¡»æŒ‰ç…§æ€»æ½å…¨å±€ã€åè°ƒå„æ–¹çš„åŸåˆ™ï¼Œåœ¨åŒçº§å„ç§ç»„ç»‡ä¸­å‘æŒ¥é¢†å¯¼æ ¸å¿ƒä½œç”¨ã€‚å…šå¿…é¡»é›†ä¸­ç²¾åŠ›é¢†å¯¼ç»æµå»ºè®¾ï¼Œç»„ç»‡ã€åè°ƒå„æ–¹é¢çš„åŠ›é‡ï¼ŒåŒå¿ƒååŠ›ï¼Œå›´ç»•ç»æµå»ºè®¾å¼€å±•å·¥ä½œï¼Œä¿ƒè¿›ç»æµç¤¾ä¼šå…¨é¢å‘å±•ã€‚å…šå¿…é¡»å®è¡Œæ°‘ä¸»çš„ç§‘å­¦çš„å†³ç­–ï¼Œåˆ¶å®šå’Œæ‰§è¡Œæ­£ç¡®çš„è·¯çº¿ã€æ–¹é’ˆã€æ”¿ç­–ï¼Œåšå¥½å…šçš„ç»„ç»‡å·¥ä½œå’Œå®£ä¼ æ•™è‚²å·¥ä½œï¼Œå‘æŒ¥å…¨ä½“å…šå‘˜çš„å…ˆé”‹æ¨¡èŒƒä½œç”¨ã€‚å…šå¿…é¡»åœ¨å®ªæ³•å’Œæ³•å¾‹çš„èŒƒå›´å†…æ´»åŠ¨ã€‚å…šå¿…é¡»ä¿è¯å›½å®¶çš„ç«‹æ³•ã€å¸æ³•ã€è¡Œæ”¿ã€ç›‘å¯Ÿæœºå…³ï¼Œç»æµã€æ–‡åŒ–ç»„ç»‡å’Œäººæ°‘å›¢ä½“ç§¯æä¸»åŠ¨åœ°ã€ç‹¬ç«‹è´Ÿè´£åœ°ã€åè°ƒä¸€è‡´åœ°å·¥ä½œã€‚å…šå¿…é¡»åŠ å¼ºå¯¹å·¥ä¼šã€å…±äº§ä¸»ä¹‰é’å¹´å›¢ã€å¦‡å¥³è”åˆä¼šç­‰ç¾¤å›¢ç»„ç»‡çš„é¢†å¯¼ï¼Œä½¿å®ƒä»¬ä¿æŒå’Œå¢å¼ºæ”¿æ²»æ€§ã€å…ˆè¿›æ€§ã€ç¾¤ä¼—æ€§ï¼Œå……åˆ†å‘æŒ¥ä½œç”¨ã€‚å…šå¿…é¡»é€‚åº”å½¢åŠ¿çš„å‘å±•å’Œæƒ…å†µçš„å˜åŒ–ï¼Œå®Œå–„é¢†å¯¼ä½“åˆ¶ï¼Œæ”¹è¿›é¢†å¯¼æ–¹å¼ï¼Œå¢å¼ºæ‰§æ”¿èƒ½åŠ›ã€‚å…±äº§å…šå‘˜å¿…é¡»åŒå…šå¤–ç¾¤ä¼—äº²å¯†åˆä½œï¼Œå…±åŒä¸ºå»ºè®¾ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰è€Œå¥‹æ–—ã€‚</p><h2 id="x3D-x3D-ç¬¬ä¸€ç« -å…š-å‘˜-x3D-x3D"><a href="#x3D-x3D-ç¬¬ä¸€ç« -å…š-å‘˜-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;ç¬¬ä¸€ç« ã€€å…šã€€å‘˜&#x3D;&#x3D;"></a>&#x3D;&#x3D;ç¬¬ä¸€ç« ã€€å…šã€€å‘˜&#x3D;&#x3D;</h2><p>ã€€ã€€ç¬¬ä¸€æ¡ã€€å¹´æ»¡åå…«å²çš„ä¸­å›½å·¥äººã€å†œæ°‘ã€å†›äººã€çŸ¥è¯†åˆ†å­å’Œå…¶ä»–ç¤¾ä¼šé˜¶å±‚çš„å…ˆè¿›åˆ†å­ï¼Œæ‰¿è®¤å…šçš„çº²é¢†å’Œç« ç¨‹ï¼Œæ„¿æ„å‚åŠ å…šçš„ä¸€ä¸ªç»„ç»‡å¹¶åœ¨å…¶ä¸­ç§¯æå·¥ä½œã€æ‰§è¡Œå…šçš„å†³è®®å’ŒæŒ‰æœŸäº¤çº³å…šè´¹çš„ï¼Œå¯ä»¥ç”³è¯·åŠ å…¥ä¸­å›½å…±äº§å…šã€‚</p><p>ã€€ã€€ç¬¬äºŒæ¡ã€€ä¸­å›½å…±äº§å…šå…šå‘˜æ˜¯ä¸­å›½å·¥äººé˜¶çº§çš„æœ‰å…±äº§ä¸»ä¹‰è§‰æ‚Ÿçš„å…ˆé”‹æˆ˜å£«ã€‚</p><p>ã€€ã€€ä¸­å›½å…±äº§å…šå…šå‘˜å¿…é¡»å…¨å¿ƒå…¨æ„ä¸ºäººæ°‘æœåŠ¡ï¼Œä¸æƒœç‰ºç‰²ä¸ªäººçš„ä¸€åˆ‡ï¼Œä¸ºå®ç°å…±äº§ä¸»ä¹‰å¥‹æ–—ç»ˆèº«ã€‚</p><p>ã€€ã€€ä¸­å›½å…±äº§å…šå…šå‘˜æ°¸è¿œæ˜¯åŠ³åŠ¨äººæ°‘çš„æ™®é€šä¸€å‘˜ã€‚é™¤äº†æ³•å¾‹å’Œæ”¿ç­–è§„å®šèŒƒå›´å†…çš„ä¸ªäººåˆ©ç›Šå’Œå·¥ä½œèŒæƒä»¥å¤–ï¼Œæ‰€æœ‰å…±äº§å…šå‘˜éƒ½ä¸å¾—è°‹æ±‚ä»»ä½•ç§åˆ©å’Œç‰¹æƒã€‚</p><p>ã€€ã€€ç¬¬ä¸‰æ¡ã€€å…šå‘˜å¿…é¡»å±¥è¡Œä¸‹åˆ—ä¹‰åŠ¡ï¼š</p><p>ã€€ã€€ï¼ˆä¸€ï¼‰è®¤çœŸå­¦ä¹ é©¬å…‹æ€åˆ—å®ä¸»ä¹‰ã€æ¯›æ³½ä¸œæ€æƒ³ã€é‚“å°å¹³ç†è®ºã€â€œä¸‰ä¸ªä»£è¡¨â€é‡è¦æ€æƒ³ã€ç§‘å­¦å‘å±•è§‚ã€ä¹ è¿‘å¹³æ–°æ—¶ä»£ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ€æƒ³ï¼Œå­¦ä¹ å…šçš„è·¯çº¿ã€æ–¹é’ˆã€æ”¿ç­–å’Œå†³è®®ï¼Œå­¦ä¹ å…šçš„åŸºæœ¬çŸ¥è¯†å’Œå…šçš„å†å²ï¼Œå­¦ä¹ ç§‘å­¦ã€æ–‡åŒ–ã€æ³•å¾‹å’Œä¸šåŠ¡çŸ¥è¯†ï¼ŒåŠªåŠ›æé«˜ä¸ºäººæ°‘æœåŠ¡çš„æœ¬é¢†ã€‚</p><p>ã€€ã€€ï¼ˆäºŒï¼‰å¢å¼ºâ€œå››ä¸ªæ„è¯†â€ã€åšå®šâ€œå››ä¸ªè‡ªä¿¡â€ã€åšåˆ°â€œä¸¤ä¸ªç»´æŠ¤â€ï¼Œè´¯å½»æ‰§è¡Œå…šçš„åŸºæœ¬è·¯çº¿å’Œå„é¡¹æ–¹é’ˆã€æ”¿ç­–ï¼Œå¸¦å¤´å‚åŠ æ”¹é©å¼€æ”¾å’Œç¤¾ä¼šä¸»ä¹‰ç°ä»£åŒ–å»ºè®¾ï¼Œå¸¦åŠ¨ç¾¤ä¼—ä¸ºç»æµå‘å±•å’Œç¤¾ä¼šè¿›æ­¥è‰°è‹¦å¥‹æ–—ï¼Œåœ¨ç”Ÿäº§ã€å·¥ä½œã€å­¦ä¹ å’Œç¤¾ä¼šç”Ÿæ´»ä¸­èµ·å…ˆé”‹æ¨¡èŒƒä½œç”¨ã€‚</p><p>ã€€ã€€ï¼ˆä¸‰ï¼‰åšæŒå…šå’Œäººæ°‘çš„åˆ©ç›Šé«˜äºä¸€åˆ‡ï¼Œä¸ªäººåˆ©ç›Šæœä»å…šå’Œäººæ°‘çš„åˆ©ç›Šï¼Œåƒè‹¦åœ¨å‰ï¼Œäº«å—åœ¨åï¼Œå…‹å·±å¥‰å…¬ï¼Œå¤šåšè´¡çŒ®ã€‚</p><p>ã€€ã€€ï¼ˆå››ï¼‰è‡ªè§‰éµå®ˆå…šçš„çºªå¾‹ï¼Œé¦–å…ˆæ˜¯å…šçš„æ”¿æ²»çºªå¾‹å’Œæ”¿æ²»è§„çŸ©ï¼Œæ¨¡èŒƒéµå®ˆå›½å®¶çš„æ³•å¾‹æ³•è§„ï¼Œä¸¥æ ¼ä¿å®ˆå…šå’Œå›½å®¶çš„ç§˜å¯†ï¼Œæ‰§è¡Œå…šçš„å†³å®šï¼Œæœä»ç»„ç»‡åˆ†é…ï¼Œç§¯æå®Œæˆå…šçš„ä»»åŠ¡ã€‚</p><p>ã€€ã€€ï¼ˆäº”ï¼‰ç»´æŠ¤å…šçš„å›¢ç»“å’Œç»Ÿä¸€ï¼Œå¯¹å…šå¿ è¯šè€å®ï¼Œè¨€è¡Œä¸€è‡´ï¼Œåšå†³åå¯¹ä¸€åˆ‡æ´¾åˆ«ç»„ç»‡å’Œå°é›†å›¢æ´»åŠ¨ï¼Œåå¯¹é˜³å¥‰é˜´è¿çš„ä¸¤é¢æ´¾è¡Œä¸ºå’Œä¸€åˆ‡é˜´è°‹è¯¡è®¡ã€‚</p><p>ã€€ã€€ï¼ˆå…­ï¼‰åˆ‡å®å¼€å±•æ‰¹è¯„å’Œè‡ªæˆ‘æ‰¹è¯„ï¼Œå‹‡äºæ­éœ²å’Œçº æ­£è¿åå…šçš„åŸåˆ™çš„è¨€è¡Œå’Œå·¥ä½œä¸­çš„ç¼ºç‚¹ã€é”™è¯¯ï¼Œåšå†³åŒæ¶ˆæè…è´¥ç°è±¡ä½œæ–—äº‰ã€‚</p><p>ã€€ã€€ï¼ˆä¸ƒï¼‰å¯†åˆ‡è”ç³»ç¾¤ä¼—ï¼Œå‘ç¾¤ä¼—å®£ä¼ å…šçš„ä¸»å¼ ï¼Œé‡äº‹åŒç¾¤ä¼—å•†é‡ï¼ŒåŠæ—¶å‘å…šåæ˜ ç¾¤ä¼—çš„æ„è§å’Œè¦æ±‚ï¼Œç»´æŠ¤ç¾¤ä¼—çš„æ­£å½“åˆ©ç›Šã€‚</p><p>ã€€ã€€ï¼ˆå…«ï¼‰å‘æ‰¬ç¤¾ä¼šä¸»ä¹‰æ–°é£å°šï¼Œå¸¦å¤´å®è·µç¤¾ä¼šä¸»ä¹‰æ ¸å¿ƒä»·å€¼è§‚å’Œç¤¾ä¼šä¸»ä¹‰è£è¾±è§‚ï¼Œæå€¡å…±äº§ä¸»ä¹‰é“å¾·ï¼Œå¼˜æ‰¬ä¸­åæ°‘æ—ä¼ ç»Ÿç¾å¾·ï¼Œä¸ºäº†ä¿æŠ¤å›½å®¶å’Œäººæ°‘çš„åˆ©ç›Šï¼Œåœ¨ä¸€åˆ‡å›°éš¾å’Œå±é™©çš„æ—¶åˆ»æŒºèº«è€Œå‡ºï¼Œè‹±å‹‡æ–—äº‰ï¼Œä¸æ€•ç‰ºç‰²ã€‚</p><p>ã€€ã€€ç¬¬å››æ¡ã€€å…šå‘˜äº«æœ‰ä¸‹åˆ—æƒåˆ©ï¼š</p><p>ã€€ã€€ï¼ˆä¸€ï¼‰å‚åŠ å…šçš„æœ‰å…³ä¼šè®®ï¼Œé˜…è¯»å…šçš„æœ‰å…³æ–‡ä»¶ï¼Œæ¥å—å…šçš„æ•™è‚²å’ŒåŸ¹è®­ã€‚</p><p>ã€€ã€€ï¼ˆäºŒï¼‰åœ¨å…šçš„ä¼šè®®ä¸Šå’Œå…šæŠ¥å…šåˆŠä¸Šï¼Œå‚åŠ å…³äºå…šçš„æ”¿ç­–é—®é¢˜çš„è®¨è®ºã€‚</p><p>ã€€ã€€ï¼ˆä¸‰ï¼‰å¯¹å…šçš„å·¥ä½œæå‡ºå»ºè®®å’Œå€¡è®®ã€‚</p><p>ã€€ã€€ï¼ˆå››ï¼‰åœ¨å…šçš„ä¼šè®®ä¸Šæœ‰æ ¹æ®åœ°æ‰¹è¯„å…šçš„ä»»ä½•ç»„ç»‡å’Œä»»ä½•å…šå‘˜ï¼Œå‘å…šè´Ÿè´£åœ°æ­å‘ã€æ£€ä¸¾å…šçš„ä»»ä½•ç»„ç»‡å’Œä»»ä½•å…šå‘˜è¿æ³•ä¹±çºªçš„äº‹å®ï¼Œè¦æ±‚å¤„åˆ†è¿æ³•ä¹±çºªçš„å…šå‘˜ï¼Œè¦æ±‚ç½¢å…æˆ–æ’¤æ¢ä¸ç§°èŒçš„å¹²éƒ¨ã€‚</p><p>ã€€ã€€ï¼ˆäº”ï¼‰è¡Œä½¿è¡¨å†³æƒã€é€‰ä¸¾æƒï¼Œæœ‰è¢«é€‰ä¸¾æƒã€‚</p><p>ã€€ã€€ï¼ˆå…­ï¼‰åœ¨å…šç»„ç»‡è®¨è®ºå†³å®šå¯¹å…šå‘˜çš„å…šçºªå¤„åˆ†æˆ–ä½œå‡ºé‰´å®šæ—¶ï¼Œæœ¬äººæœ‰æƒå‚åŠ å’Œè¿›è¡Œç”³è¾©ï¼Œå…¶ä»–å…šå‘˜å¯ä»¥ä¸ºä»–ä½œè¯å’Œè¾©æŠ¤ã€‚</p><p>ã€€ã€€ï¼ˆä¸ƒï¼‰å¯¹å…šçš„å†³è®®å’Œæ”¿ç­–å¦‚æœ‰ä¸åŒæ„è§ï¼Œåœ¨åšå†³æ‰§è¡Œçš„å‰æä¸‹ï¼Œå¯ä»¥å£°æ˜ä¿ç•™ï¼Œå¹¶ä¸”å¯ä»¥æŠŠè‡ªå·±çš„æ„è§å‘å…šçš„ä¸Šçº§ç»„ç»‡ç›´è‡³ä¸­å¤®æå‡ºã€‚</p><p>ã€€ã€€ï¼ˆå…«ï¼‰å‘å…šçš„ä¸Šçº§ç»„ç»‡ç›´è‡³ä¸­å¤®æå‡ºè¯·æ±‚ã€ç”³è¯‰å’Œæ§å‘Šï¼Œå¹¶è¦æ±‚æœ‰å…³ç»„ç»‡ç»™ä»¥è´Ÿè´£çš„ç­”å¤ã€‚</p><p>ã€€ã€€å…šçš„ä»»ä½•ä¸€çº§ç»„ç»‡ç›´è‡³ä¸­å¤®éƒ½æ— æƒå‰¥å¤ºå…šå‘˜çš„ä¸Šè¿°æƒåˆ©ã€‚</p><p>ã€€ã€€ç¬¬äº”æ¡ã€€å‘å±•å…šå‘˜ï¼Œå¿…é¡»æŠŠæ”¿æ²»æ ‡å‡†æ”¾åœ¨é¦–ä½ï¼Œç»è¿‡å…šçš„æ”¯éƒ¨ï¼ŒåšæŒä¸ªåˆ«å¸æ”¶çš„åŸåˆ™ã€‚</p><p>ã€€ã€€ç”³è¯·å…¥å…šçš„äººï¼Œè¦å¡«å†™å…¥å…šå¿—æ„¿ä¹¦ï¼Œè¦æœ‰ä¸¤åæ­£å¼å…šå‘˜ä½œä»‹ç»äººï¼Œè¦ç»è¿‡æ”¯éƒ¨å¤§ä¼šé€šè¿‡å’Œä¸Šçº§å…šç»„ç»‡æ‰¹å‡†ï¼Œå¹¶ä¸”ç»è¿‡é¢„å¤‡æœŸçš„è€ƒå¯Ÿï¼Œæ‰èƒ½æˆä¸ºæ­£å¼å…šå‘˜ã€‚</p><p>ã€€ã€€ä»‹ç»äººè¦è®¤çœŸäº†è§£ç”³è¯·äººçš„æ€æƒ³ã€å“è´¨ã€ç»å†å’Œå·¥ä½œè¡¨ç°ï¼Œå‘ä»–è§£é‡Šå…šçš„çº²é¢†å’Œå…šçš„ç« ç¨‹ï¼Œè¯´æ˜å…šå‘˜çš„æ¡ä»¶ã€ä¹‰åŠ¡å’Œæƒåˆ©ï¼Œå¹¶å‘å…šç»„ç»‡ä½œå‡ºè´Ÿè´£çš„æŠ¥å‘Šã€‚</p><p>ã€€ã€€å…šçš„æ”¯éƒ¨å§”å‘˜ä¼šå¯¹ç”³è¯·å…¥å…šçš„äººï¼Œè¦æ³¨æ„å¾æ±‚å…šå†…å¤–æœ‰å…³ç¾¤ä¼—çš„æ„è§ï¼Œè¿›è¡Œä¸¥æ ¼çš„å®¡æŸ¥ï¼Œè®¤ä¸ºåˆæ ¼åå†æäº¤æ”¯éƒ¨å¤§ä¼šè®¨è®ºã€‚</p><p>ã€€ã€€ä¸Šçº§å…šç»„ç»‡åœ¨æ‰¹å‡†ç”³è¯·äººå…¥å…šä»¥å‰ï¼Œè¦æ´¾äººåŒä»–è°ˆè¯ï¼Œä½œè¿›ä¸€æ­¥çš„äº†è§£ï¼Œå¹¶å¸®åŠ©ä»–æé«˜å¯¹å…šçš„è®¤è¯†ã€‚</p><p>ã€€ã€€åœ¨ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œå…šçš„ä¸­å¤®å’Œçœã€è‡ªæ²»åŒºã€ç›´è¾–å¸‚å§”å‘˜ä¼šå¯ä»¥ç›´æ¥æ¥æ”¶å…šå‘˜ã€‚</p><p>ã€€ã€€ç¬¬å…­æ¡ã€€é¢„å¤‡å…šå‘˜å¿…é¡»é¢å‘å…šæ——è¿›è¡Œå…¥å…šå®£èª“ã€‚èª“è¯å¦‚ä¸‹ï¼šæˆ‘å¿—æ„¿åŠ å…¥ä¸­å›½å…±äº§å…šï¼Œæ‹¥æŠ¤å…šçš„çº²é¢†ï¼Œéµå®ˆå…šçš„ç« ç¨‹ï¼Œå±¥è¡Œå…šå‘˜ä¹‰åŠ¡ï¼Œæ‰§è¡Œå…šçš„å†³å®šï¼Œä¸¥å®ˆå…šçš„çºªå¾‹ï¼Œä¿å®ˆå…šçš„ç§˜å¯†ï¼Œå¯¹å…šå¿ è¯šï¼Œç§¯æå·¥ä½œï¼Œä¸ºå…±äº§ä¸»ä¹‰å¥‹æ–—ç»ˆèº«ï¼Œéšæ—¶å‡†å¤‡ä¸ºå…šå’Œäººæ°‘ç‰ºç‰²ä¸€åˆ‡ï¼Œæ°¸ä¸å›å…šã€‚</p><p>ã€€ã€€ç¬¬ä¸ƒæ¡ã€€é¢„å¤‡å…šå‘˜çš„é¢„å¤‡æœŸä¸ºä¸€å¹´ã€‚å…šç»„ç»‡å¯¹é¢„å¤‡å…šå‘˜åº”å½“è®¤çœŸæ•™è‚²å’Œè€ƒå¯Ÿã€‚</p><p>ã€€ã€€é¢„å¤‡å…šå‘˜çš„ä¹‰åŠ¡åŒæ­£å¼å…šå‘˜ä¸€æ ·ã€‚é¢„å¤‡å…šå‘˜çš„æƒåˆ©ï¼Œé™¤äº†æ²¡æœ‰è¡¨å†³æƒã€é€‰ä¸¾æƒå’Œè¢«é€‰ä¸¾æƒä»¥å¤–ï¼Œä¹ŸåŒæ­£å¼å…šå‘˜ä¸€æ ·ã€‚</p><p>ã€€ã€€é¢„å¤‡å…šå‘˜é¢„å¤‡æœŸæ»¡ï¼Œå…šçš„æ”¯éƒ¨åº”å½“åŠæ—¶è®¨è®ºä»–èƒ½å¦è½¬ä¸ºæ­£å¼å…šå‘˜ã€‚è®¤çœŸå±¥è¡Œå…šå‘˜ä¹‰åŠ¡ï¼Œå…·å¤‡å…šå‘˜æ¡ä»¶çš„ï¼Œåº”å½“æŒ‰æœŸè½¬ä¸ºæ­£å¼å…šå‘˜ï¼›éœ€è¦ç»§ç»­è€ƒå¯Ÿå’Œæ•™è‚²çš„ï¼Œå¯ä»¥å»¶é•¿é¢„å¤‡æœŸï¼Œä½†ä¸èƒ½è¶…è¿‡ä¸€å¹´ï¼›ä¸å±¥è¡Œå…šå‘˜ä¹‰åŠ¡ï¼Œä¸å…·å¤‡å…šå‘˜æ¡ä»¶çš„ï¼Œåº”å½“å–æ¶ˆé¢„å¤‡å…šå‘˜èµ„æ ¼ã€‚é¢„å¤‡å…šå‘˜è½¬ä¸ºæ­£å¼å…šå‘˜ï¼Œæˆ–å»¶é•¿é¢„å¤‡æœŸï¼Œæˆ–å–æ¶ˆé¢„å¤‡å…šå‘˜èµ„æ ¼ï¼Œéƒ½åº”å½“ç»æ”¯éƒ¨å¤§ä¼šè®¨è®ºé€šè¿‡å’Œä¸Šçº§å…šç»„ç»‡æ‰¹å‡†ã€‚</p><p>ã€€ã€€é¢„å¤‡å…šå‘˜çš„é¢„å¤‡æœŸï¼Œä»æ”¯éƒ¨å¤§ä¼šé€šè¿‡ä»–ä¸ºé¢„å¤‡å…šå‘˜ä¹‹æ—¥ç®—èµ·ã€‚å…šå‘˜çš„å…šé¾„ï¼Œä»é¢„å¤‡æœŸæ»¡è½¬ä¸ºæ­£å¼å…šå‘˜ä¹‹æ—¥ç®—èµ·ã€‚</p><p>ã€€ã€€ç¬¬å…«æ¡ã€€æ¯ä¸ªå…šå‘˜ï¼Œä¸è®ºèŒåŠ¡é«˜ä½ï¼Œéƒ½å¿…é¡»ç¼–å…¥å…šçš„ä¸€ä¸ªæ”¯éƒ¨ã€å°ç»„æˆ–å…¶ä»–ç‰¹å®šç»„ç»‡ï¼Œå‚åŠ å…šçš„ç»„ç»‡ç”Ÿæ´»ï¼Œæ¥å—å…šå†…å¤–ç¾¤ä¼—çš„ç›‘ç£ã€‚å…šå‘˜é¢†å¯¼å¹²éƒ¨è¿˜å¿…é¡»å‚åŠ å…šå§”ã€å…šç»„çš„æ°‘ä¸»ç”Ÿæ´»ä¼šã€‚ä¸å…è®¸æœ‰ä»»ä½•ä¸å‚åŠ å…šçš„ç»„ç»‡ç”Ÿæ´»ã€ä¸æ¥å—å…šå†…å¤–ç¾¤ä¼—ç›‘ç£çš„ç‰¹æ®Šå…šå‘˜ã€‚</p><p>ã€€ã€€ç¬¬ä¹æ¡ã€€å…šå‘˜æœ‰é€€å…šçš„è‡ªç”±ã€‚å…šå‘˜è¦æ±‚é€€å…šï¼Œåº”å½“ç»æ”¯éƒ¨å¤§ä¼šè®¨è®ºåå®£å¸ƒé™¤åï¼Œå¹¶æŠ¥ä¸Šçº§å…šç»„ç»‡å¤‡æ¡ˆã€‚</p><p>ã€€ã€€å…šå‘˜ç¼ºä¹é©å‘½æ„å¿—ï¼Œä¸å±¥è¡Œå…šå‘˜ä¹‰åŠ¡ï¼Œä¸ç¬¦åˆå…šå‘˜æ¡ä»¶ï¼Œå…šçš„æ”¯éƒ¨åº”å½“å¯¹ä»–è¿›è¡Œæ•™è‚²ï¼Œè¦æ±‚ä»–é™æœŸæ”¹æ­£ï¼›ç»æ•™è‚²ä»æ— è½¬å˜çš„ï¼Œåº”å½“åŠä»–é€€å…šã€‚åŠå…šå‘˜é€€å…šï¼Œåº”å½“ç»æ”¯éƒ¨å¤§ä¼šè®¨è®ºå†³å®šï¼Œå¹¶æŠ¥ä¸Šçº§å…šç»„ç»‡æ‰¹å‡†ã€‚å¦‚è¢«åŠå‘Šé€€å…šçš„å…šå‘˜åšæŒä¸é€€ï¼Œåº”å½“æäº¤æ”¯éƒ¨å¤§ä¼šè®¨è®ºï¼Œå†³å®šæŠŠä»–é™¤åï¼Œå¹¶æŠ¥ä¸Šçº§å…šç»„ç»‡æ‰¹å‡†ã€‚</p><p>ã€€ã€€å…šå‘˜å¦‚æœæ²¡æœ‰æ­£å½“ç†ç”±ï¼Œè¿ç»­å…­ä¸ªæœˆä¸å‚åŠ å…šçš„ç»„ç»‡ç”Ÿæ´»ï¼Œæˆ–ä¸äº¤çº³å…šè´¹ï¼Œæˆ–ä¸åšå…šæ‰€åˆ†é…çš„å·¥ä½œï¼Œå°±è¢«è®¤ä¸ºæ˜¯è‡ªè¡Œè„±å…šã€‚æ”¯éƒ¨å¤§ä¼šåº”å½“å†³å®šæŠŠè¿™æ ·çš„å…šå‘˜é™¤åï¼Œå¹¶æŠ¥ä¸Šçº§å…šç»„ç»‡æ‰¹å‡†ã€‚</p><h2 id="x3D-x3D-ç¬¬äºŒç« -å…šçš„ç»„ç»‡åˆ¶åº¦-x3D-x3D"><a href="#x3D-x3D-ç¬¬äºŒç« -å…šçš„ç»„ç»‡åˆ¶åº¦-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;ç¬¬äºŒç« ã€€å…šçš„ç»„ç»‡åˆ¶åº¦&#x3D;&#x3D;"></a>&#x3D;&#x3D;ç¬¬äºŒç« ã€€å…šçš„ç»„ç»‡åˆ¶åº¦&#x3D;&#x3D;</h2><p>ã€€ã€€ç¬¬åæ¡ã€€å…šæ˜¯æ ¹æ®è‡ªå·±çš„çº²é¢†å’Œç« ç¨‹ï¼ŒæŒ‰ç…§æ°‘ä¸»é›†ä¸­åˆ¶ç»„ç»‡èµ·æ¥çš„ç»Ÿä¸€æ•´ä½“ã€‚å…šçš„æ°‘ä¸»é›†ä¸­åˆ¶çš„åŸºæœ¬åŸåˆ™æ˜¯ï¼š</p><p>ã€€ã€€ï¼ˆä¸€ï¼‰å…šå‘˜ä¸ªäººæœä»å…šçš„ç»„ç»‡ï¼Œå°‘æ•°æœä»å¤šæ•°ï¼Œä¸‹çº§ç»„ç»‡æœä»ä¸Šçº§ç»„ç»‡ï¼Œå…¨å…šå„ä¸ªç»„ç»‡å’Œå…¨ä½“å…šå‘˜æœä»å…šçš„å…¨å›½ä»£è¡¨å¤§ä¼šå’Œä¸­å¤®å§”å‘˜ä¼šã€‚</p><p>ã€€ã€€ï¼ˆäºŒï¼‰å…šçš„å„çº§é¢†å¯¼æœºå…³ï¼Œé™¤å®ƒä»¬æ´¾å‡ºçš„ä»£è¡¨æœºå…³å’Œåœ¨éå…šç»„ç»‡ä¸­çš„å…šç»„å¤–ï¼Œéƒ½ç”±é€‰ä¸¾äº§ç”Ÿã€‚</p><p>ã€€ã€€ï¼ˆä¸‰ï¼‰å…šçš„æœ€é«˜é¢†å¯¼æœºå…³ï¼Œæ˜¯å…šçš„å…¨å›½ä»£è¡¨å¤§ä¼šå’Œå®ƒæ‰€äº§ç”Ÿçš„ä¸­å¤®å§”å‘˜ä¼šã€‚å…šçš„åœ°æ–¹å„çº§é¢†å¯¼æœºå…³ï¼Œæ˜¯å…šçš„åœ°æ–¹å„çº§ä»£è¡¨å¤§ä¼šå’Œå®ƒä»¬æ‰€äº§ç”Ÿçš„å§”å‘˜ä¼šã€‚å…šçš„å„çº§å§”å‘˜ä¼šå‘åŒçº§çš„ä»£è¡¨å¤§ä¼šè´Ÿè´£å¹¶æŠ¥å‘Šå·¥ä½œã€‚</p><p>ã€€ã€€ï¼ˆå››ï¼‰å…šçš„ä¸Šçº§ç»„ç»‡è¦ç»å¸¸å¬å–ä¸‹çº§ç»„ç»‡å’Œå…šå‘˜ç¾¤ä¼—çš„æ„è§ï¼ŒåŠæ—¶è§£å†³ä»–ä»¬æå‡ºçš„é—®é¢˜ã€‚å…šçš„ä¸‹çº§ç»„ç»‡æ—¢è¦å‘ä¸Šçº§ç»„ç»‡è¯·ç¤ºå’ŒæŠ¥å‘Šå·¥ä½œï¼Œåˆè¦ç‹¬ç«‹è´Ÿè´£åœ°è§£å†³è‡ªå·±èŒè´£èŒƒå›´å†…çš„é—®é¢˜ã€‚ä¸Šä¸‹çº§ç»„ç»‡ä¹‹é—´è¦äº’é€šæƒ…æŠ¥ã€äº’ç›¸æ”¯æŒå’Œäº’ç›¸ç›‘ç£ã€‚å…šçš„å„çº§ç»„ç»‡è¦æŒ‰è§„å®šå®è¡Œå…šåŠ¡å…¬å¼€ï¼Œä½¿å…šå‘˜å¯¹å…šå†…äº‹åŠ¡æœ‰æ›´å¤šçš„äº†è§£å’Œå‚ä¸ã€‚</p><p>ã€€ã€€ï¼ˆäº”ï¼‰å…šçš„å„çº§å§”å‘˜ä¼šå®è¡Œé›†ä½“é¢†å¯¼å’Œä¸ªäººåˆ†å·¥è´Ÿè´£ç›¸ç»“åˆçš„åˆ¶åº¦ã€‚å‡¡å±é‡å¤§é—®é¢˜éƒ½è¦æŒ‰ç…§é›†ä½“é¢†å¯¼ã€æ°‘ä¸»é›†ä¸­ã€ä¸ªåˆ«é…é…¿ã€ä¼šè®®å†³å®šçš„åŸåˆ™ï¼Œç”±å…šçš„å§”å‘˜ä¼šé›†ä½“è®¨è®ºï¼Œä½œå‡ºå†³å®šï¼›å§”å‘˜ä¼šæˆå‘˜è¦æ ¹æ®é›†ä½“çš„å†³å®šå’Œåˆ†å·¥ï¼Œåˆ‡å®å±¥è¡Œè‡ªå·±çš„èŒè´£ã€‚</p><p>ã€€ã€€ï¼ˆå…­ï¼‰å…šç¦æ­¢ä»»ä½•å½¢å¼çš„ä¸ªäººå´‡æ‹œã€‚è¦ä¿è¯å…šçš„é¢†å¯¼äººçš„æ´»åŠ¨å¤„äºå…šå’Œäººæ°‘çš„ç›‘ç£ä¹‹ä¸‹ï¼ŒåŒæ—¶ç»´æŠ¤ä¸€åˆ‡ä»£è¡¨å…šå’Œäººæ°‘åˆ©ç›Šçš„é¢†å¯¼äººçš„å¨ä¿¡ã€‚</p><p>ã€€ã€€ç¬¬åä¸€æ¡ã€€å…šçš„å„çº§ä»£è¡¨å¤§ä¼šçš„ä»£è¡¨å’Œå§”å‘˜ä¼šçš„äº§ç”Ÿï¼Œè¦ä½“ç°é€‰ä¸¾äººçš„æ„å¿—ã€‚é€‰ä¸¾é‡‡ç”¨æ— è®°åæŠ•ç¥¨çš„æ–¹å¼ã€‚å€™é€‰äººåå•è¦ç”±å…šç»„ç»‡å’Œé€‰ä¸¾äººå……åˆ†é…é…¿è®¨è®ºã€‚å¯ä»¥ç›´æ¥é‡‡ç”¨å€™é€‰äººæ•°å¤šäºåº”é€‰äººæ•°çš„å·®é¢é€‰ä¸¾åŠæ³•è¿›è¡Œæ­£å¼é€‰ä¸¾ã€‚ä¹Ÿå¯ä»¥å…ˆé‡‡ç”¨å·®é¢é€‰ä¸¾åŠæ³•è¿›è¡Œé¢„é€‰ï¼Œäº§ç”Ÿå€™é€‰äººåå•ï¼Œç„¶åè¿›è¡Œæ­£å¼é€‰ä¸¾ã€‚é€‰ä¸¾äººæœ‰äº†è§£å€™é€‰äººæƒ…å†µã€è¦æ±‚æ”¹å˜å€™é€‰äººã€ä¸é€‰ä»»ä½•ä¸€ä¸ªå€™é€‰äººå’Œå¦é€‰ä»–äººçš„æƒåˆ©ã€‚ä»»ä½•ç»„ç»‡å’Œä¸ªäººä¸å¾—ä»¥ä»»ä½•æ–¹å¼å¼ºè¿«é€‰ä¸¾äººé€‰ä¸¾æˆ–ä¸é€‰ä¸¾æŸä¸ªäººã€‚</p><p>ã€€ã€€å…šçš„åœ°æ–¹å„çº§ä»£è¡¨å¤§ä¼šå’ŒåŸºå±‚ä»£è¡¨å¤§ä¼šçš„é€‰ä¸¾ï¼Œå¦‚æœå‘ç”Ÿè¿åå…šç« çš„æƒ…å†µï¼Œä¸Šä¸€çº§å…šçš„å§”å‘˜ä¼šåœ¨è°ƒæŸ¥æ ¸å®åï¼Œåº”ä½œå‡ºé€‰ä¸¾æ— æ•ˆå’Œé‡‡å–ç›¸åº”æªæ–½çš„å†³å®šï¼Œå¹¶æŠ¥å†ä¸Šä¸€çº§å…šçš„å§”å‘˜ä¼šå®¡æŸ¥æ‰¹å‡†ï¼Œæ­£å¼å®£å¸ƒæ‰§è¡Œã€‚</p><p>ã€€ã€€å…šçš„å„çº§ä»£è¡¨å¤§ä¼šä»£è¡¨å®è¡Œä»»æœŸåˆ¶ã€‚</p><p>ã€€ã€€ç¬¬åäºŒæ¡ã€€å…šçš„ä¸­å¤®å’Œåœ°æ–¹å„çº§å§”å‘˜ä¼šåœ¨å¿…è¦æ—¶å¬é›†ä»£è¡¨ä¼šè®®ï¼Œè®¨è®ºå’Œå†³å®šéœ€è¦åŠæ—¶è§£å†³çš„é‡å¤§é—®é¢˜ã€‚ä»£è¡¨ä¼šè®®ä»£è¡¨çš„åé¢å’Œäº§ç”ŸåŠæ³•ï¼Œç”±å¬é›†ä»£è¡¨ä¼šè®®çš„å§”å‘˜ä¼šå†³å®šã€‚</p><p>ã€€ã€€ç¬¬åä¸‰æ¡ã€€å‡¡æ˜¯æˆç«‹å…šçš„æ–°ç»„ç»‡ï¼Œæˆ–æ˜¯æ’¤é”€å…šçš„åŸæœ‰ç»„ç»‡ï¼Œå¿…é¡»ç”±ä¸Šçº§å…šç»„ç»‡å†³å®šã€‚</p><p>ã€€ã€€åœ¨å…šçš„åœ°æ–¹å„çº§ä»£è¡¨å¤§ä¼šå’ŒåŸºå±‚ä»£è¡¨å¤§ä¼šé—­ä¼šæœŸé—´ï¼Œä¸Šçº§å…šçš„ç»„ç»‡è®¤ä¸ºæœ‰å¿…è¦æ—¶ï¼Œå¯ä»¥è°ƒåŠ¨æˆ–è€…æŒ‡æ´¾ä¸‹çº§å…šç»„ç»‡çš„è´Ÿè´£äººã€‚</p><p>ã€€ã€€å…šçš„ä¸­å¤®å’Œåœ°æ–¹å„çº§å§”å‘˜ä¼šå¯ä»¥æ´¾å‡ºä»£è¡¨æœºå…³ã€‚</p><p>ã€€ã€€ç¬¬åå››æ¡ã€€å…šçš„ä¸­å¤®å’Œçœã€è‡ªæ²»åŒºã€ç›´è¾–å¸‚å§”å‘˜ä¼šå®è¡Œå·¡è§†åˆ¶åº¦ï¼Œåœ¨ä¸€å±Šä»»æœŸå†…ï¼Œå¯¹æ‰€ç®¡ç†çš„åœ°æ–¹ã€éƒ¨é—¨ã€ä¼äº‹ä¸šå•ä½å…šç»„ç»‡å®ç°å·¡è§†å…¨è¦†ç›–ã€‚</p><p>ã€€ã€€ä¸­å¤®æœ‰å…³éƒ¨å§”å’Œå›½å®¶æœºå…³éƒ¨é—¨å…šç»„ï¼ˆå…šå§”ï¼‰æ ¹æ®å·¥ä½œéœ€è¦ï¼Œå¼€å±•å·¡è§†å·¥ä½œã€‚</p><p>ã€€ã€€å…šçš„å¸‚ï¼ˆåœ°ã€å·ã€ç›Ÿï¼‰å’Œå¿ï¼ˆå¸‚ã€åŒºã€æ——ï¼‰å§”å‘˜ä¼šå»ºç«‹å·¡å¯Ÿåˆ¶åº¦ã€‚</p><p>ã€€ã€€ç¬¬åäº”æ¡ã€€å…šçš„å„çº§é¢†å¯¼æœºå…³ï¼Œå¯¹åŒä¸‹çº§ç»„ç»‡æœ‰å…³çš„é‡è¦é—®é¢˜ä½œå‡ºå†³å®šæ—¶ï¼Œåœ¨é€šå¸¸æƒ…å†µä¸‹ï¼Œè¦å¾æ±‚ä¸‹çº§ç»„ç»‡çš„æ„è§ã€‚è¦ä¿è¯ä¸‹çº§ç»„ç»‡èƒ½å¤Ÿæ­£å¸¸è¡Œä½¿ä»–ä»¬çš„èŒæƒã€‚å‡¡å±åº”ç”±ä¸‹çº§ç»„ç»‡å¤„ç†çš„é—®é¢˜ï¼Œå¦‚æ— ç‰¹æ®Šæƒ…å†µï¼Œä¸Šçº§é¢†å¯¼æœºå…³ä¸è¦å¹²é¢„ã€‚</p><p>ã€€ã€€ç¬¬åå…­æ¡ã€€æœ‰å…³å…¨å›½æ€§çš„é‡å¤§æ”¿ç­–é—®é¢˜ï¼Œåªæœ‰å…šä¸­å¤®æœ‰æƒä½œå‡ºå†³å®šï¼Œå„éƒ¨é—¨ã€å„åœ°æ–¹çš„å…šç»„ç»‡å¯ä»¥å‘ä¸­å¤®æå‡ºå»ºè®®ï¼Œä½†ä¸å¾—æ“…è‡ªä½œå‡ºå†³å®šå’Œå¯¹å¤–å‘è¡¨ä¸»å¼ ã€‚</p><p>ã€€ã€€å…šçš„ä¸‹çº§ç»„ç»‡å¿…é¡»åšå†³æ‰§è¡Œä¸Šçº§ç»„ç»‡çš„å†³å®šã€‚ä¸‹çº§ç»„ç»‡å¦‚æœè®¤ä¸ºä¸Šçº§ç»„ç»‡çš„å†³å®šä¸ç¬¦åˆæœ¬åœ°åŒºã€æœ¬éƒ¨é—¨çš„å®é™…æƒ…å†µï¼Œå¯ä»¥è¯·æ±‚æ”¹å˜ï¼›å¦‚æœä¸Šçº§ç»„ç»‡åšæŒåŸå†³å®šï¼Œä¸‹çº§ç»„ç»‡å¿…é¡»æ‰§è¡Œï¼Œå¹¶ä¸å¾—å…¬å¼€å‘è¡¨ä¸åŒæ„è§ï¼Œä½†æœ‰æƒå‘å†ä¸Šä¸€çº§ç»„ç»‡æŠ¥å‘Šã€‚</p><p>ã€€ã€€å…šçš„å„çº§ç»„ç»‡çš„æŠ¥åˆŠå’Œå…¶ä»–å®£ä¼ å·¥å…·ï¼Œå¿…é¡»å®£ä¼ å…šçš„è·¯çº¿ã€æ–¹é’ˆã€æ”¿ç­–å’Œå†³è®®ã€‚</p><p>ã€€ã€€ç¬¬åä¸ƒæ¡ã€€å…šç»„ç»‡è®¨è®ºå†³å®šé—®é¢˜ï¼Œå¿…é¡»æ‰§è¡Œå°‘æ•°æœä»å¤šæ•°çš„åŸåˆ™ã€‚å†³å®šé‡è¦é—®é¢˜ï¼Œè¦è¿›è¡Œè¡¨å†³ã€‚å¯¹äºå°‘æ•°äººçš„ä¸åŒæ„è§ï¼Œåº”å½“è®¤çœŸè€ƒè™‘ã€‚å¦‚å¯¹é‡è¦é—®é¢˜å‘ç”Ÿäº‰è®ºï¼ŒåŒæ–¹äººæ•°æ¥è¿‘ï¼Œé™¤äº†åœ¨ç´§æ€¥æƒ…å†µä¸‹å¿…é¡»æŒ‰å¤šæ•°æ„è§æ‰§è¡Œå¤–ï¼Œåº”å½“æš‚ç¼“ä½œå‡ºå†³å®šï¼Œè¿›ä¸€æ­¥è°ƒæŸ¥ç ”ç©¶ï¼Œäº¤æ¢æ„è§ï¼Œä¸‹æ¬¡å†è¡¨å†³ï¼›åœ¨ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œä¹Ÿå¯å°†äº‰è®ºæƒ…å†µå‘ä¸Šçº§ç»„ç»‡æŠ¥å‘Šï¼Œè¯·æ±‚è£å†³ã€‚</p><p>ã€€ã€€å…šå‘˜ä¸ªäººä»£è¡¨å…šç»„ç»‡å‘è¡¨é‡è¦ä¸»å¼ ï¼Œå¦‚æœè¶…å‡ºå…šç»„ç»‡å·²æœ‰å†³å®šçš„èŒƒå›´ï¼Œå¿…é¡»æäº¤æ‰€åœ¨çš„å…šç»„ç»‡è®¨è®ºå†³å®šï¼Œæˆ–å‘ä¸Šçº§å…šç»„ç»‡è¯·ç¤ºã€‚ä»»ä½•å…šå‘˜ä¸è®ºèŒåŠ¡é«˜ä½ï¼Œéƒ½ä¸èƒ½ä¸ªäººå†³å®šé‡å¤§é—®é¢˜ï¼›å¦‚é‡ç´§æ€¥æƒ…å†µï¼Œå¿…é¡»ç”±ä¸ªäººä½œå‡ºå†³å®šæ—¶ï¼Œäº‹åè¦è¿…é€Ÿå‘å…šç»„ç»‡æŠ¥å‘Šã€‚ä¸å…è®¸ä»»ä½•é¢†å¯¼äººå®è¡Œä¸ªäººä¸“æ–­å’ŒæŠŠä¸ªäººå‡Œé©¾äºç»„ç»‡ä¹‹ä¸Šã€‚</p><p>ã€€ã€€ç¬¬åå…«æ¡ã€€å…šçš„ä¸­å¤®ã€åœ°æ–¹å’ŒåŸºå±‚ç»„ç»‡ï¼Œéƒ½å¿…é¡»é‡è§†å…šçš„å»ºè®¾ï¼Œç»å¸¸è®¨è®ºå’Œæ£€æŸ¥å…šçš„å®£ä¼ å·¥ä½œã€æ•™è‚²å·¥ä½œã€ç»„ç»‡å·¥ä½œã€çºªå¾‹æ£€æŸ¥å·¥ä½œã€ç¾¤ä¼—å·¥ä½œã€ç»Ÿä¸€æˆ˜çº¿å·¥ä½œç­‰ï¼Œæ³¨æ„ç ”ç©¶å…šå†…å¤–çš„æ€æƒ³æ”¿æ²»çŠ¶å†µã€‚</p><h2 id="ç¬¬ä¸‰ç« -å…šçš„ä¸­å¤®ç»„ç»‡"><a href="#ç¬¬ä¸‰ç« -å…šçš„ä¸­å¤®ç»„ç»‡" class="headerlink" title="ç¬¬ä¸‰ç« ã€€å…šçš„ä¸­å¤®ç»„ç»‡"></a>ç¬¬ä¸‰ç« ã€€å…šçš„ä¸­å¤®ç»„ç»‡</h2><p>ã€€ã€€ç¬¬åä¹æ¡ã€€å…šçš„å…¨å›½ä»£è¡¨å¤§ä¼šæ¯äº”å¹´ä¸¾è¡Œä¸€æ¬¡ï¼Œç”±ä¸­å¤®å§”å‘˜ä¼šå¬é›†ã€‚ä¸­å¤®å§”å‘˜ä¼šè®¤ä¸ºæœ‰å¿…è¦ï¼Œæˆ–è€…æœ‰ä¸‰åˆ†ä¹‹ä¸€ä»¥ä¸Šçš„çœä¸€çº§ç»„ç»‡æå‡ºè¦æ±‚ï¼Œå…¨å›½ä»£è¡¨å¤§ä¼šå¯ä»¥æå‰ä¸¾è¡Œï¼›å¦‚æ— éå¸¸æƒ…å†µï¼Œä¸å¾—å»¶æœŸä¸¾è¡Œã€‚</p><p>ã€€ã€€å…¨å›½ä»£è¡¨å¤§ä¼šä»£è¡¨çš„åé¢å’Œé€‰ä¸¾åŠæ³•ï¼Œç”±ä¸­å¤®å§”å‘˜ä¼šå†³å®šã€‚</p><p>ã€€ã€€ç¬¬äºŒåæ¡ã€€å…šçš„å…¨å›½ä»£è¡¨å¤§ä¼šçš„èŒæƒæ˜¯ï¼š</p><p>ã€€ã€€ï¼ˆä¸€ï¼‰å¬å–å’Œå®¡æŸ¥ä¸­å¤®å§”å‘˜ä¼šçš„æŠ¥å‘Šï¼›</p><p>ã€€ã€€ï¼ˆäºŒï¼‰å®¡æŸ¥ä¸­å¤®çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šçš„æŠ¥å‘Šï¼›</p><p>ã€€ã€€ï¼ˆä¸‰ï¼‰è®¨è®ºå¹¶å†³å®šå…šçš„é‡å¤§é—®é¢˜ï¼›</p><p>ã€€ã€€ï¼ˆå››ï¼‰ä¿®æ”¹å…šçš„ç« ç¨‹ï¼›</p><p>ã€€ã€€ï¼ˆäº”ï¼‰é€‰ä¸¾ä¸­å¤®å§”å‘˜ä¼šï¼›</p><p>ã€€ã€€ï¼ˆå…­ï¼‰é€‰ä¸¾ä¸­å¤®çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šã€‚</p><p>ã€€ã€€ç¬¬äºŒåä¸€æ¡ã€€å…šçš„å…¨å›½ä»£è¡¨ä¼šè®®çš„èŒæƒæ˜¯ï¼šè®¨è®ºå’Œå†³å®šé‡å¤§é—®é¢˜ï¼›è°ƒæ•´å’Œå¢é€‰ä¸­å¤®å§”å‘˜ä¼šã€ä¸­å¤®çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šçš„éƒ¨åˆ†æˆå‘˜ã€‚è°ƒæ•´å’Œå¢é€‰ä¸­å¤®å§”å‘˜åŠå€™è¡¥ä¸­å¤®å§”å‘˜çš„æ•°é¢ï¼Œä¸å¾—è¶…è¿‡å…šçš„å…¨å›½ä»£è¡¨å¤§ä¼šé€‰å‡ºçš„ä¸­å¤®å§”å‘˜åŠå€™è¡¥ä¸­å¤®å§”å‘˜å„è‡ªæ€»æ•°çš„äº”åˆ†ä¹‹ä¸€ã€‚</p><p>ã€€ã€€ç¬¬äºŒåäºŒæ¡ã€€å…šçš„ä¸­å¤®å§”å‘˜ä¼šæ¯å±Šä»»æœŸäº”å¹´ã€‚å…¨å›½ä»£è¡¨å¤§ä¼šå¦‚æå‰æˆ–å»¶æœŸä¸¾è¡Œï¼Œå®ƒçš„ä»»æœŸç›¸åº”åœ°æ”¹å˜ã€‚ä¸­å¤®å§”å‘˜ä¼šå§”å‘˜å’Œå€™è¡¥å§”å‘˜å¿…é¡»æœ‰äº”å¹´ä»¥ä¸Šçš„å…šé¾„ã€‚ä¸­å¤®å§”å‘˜ä¼šå§”å‘˜å’Œå€™è¡¥å§”å‘˜çš„åé¢ï¼Œç”±å…¨å›½ä»£è¡¨å¤§ä¼šå†³å®šã€‚ä¸­å¤®å§”å‘˜ä¼šå§”å‘˜å‡ºç¼ºï¼Œç”±ä¸­å¤®å§”å‘˜ä¼šå€™è¡¥å§”å‘˜æŒ‰ç…§å¾—ç¥¨å¤šå°‘ä¾æ¬¡é€’è¡¥ã€‚</p><p>ã€€ã€€ä¸­å¤®å§”å‘˜ä¼šå…¨ä½“ä¼šè®®ç”±ä¸­å¤®æ”¿æ²»å±€å¬é›†ï¼Œæ¯å¹´è‡³å°‘ä¸¾è¡Œä¸€æ¬¡ã€‚ä¸­å¤®æ”¿æ²»å±€å‘ä¸­å¤®å§”å‘˜ä¼šå…¨ä½“ä¼šè®®æŠ¥å‘Šå·¥ä½œï¼Œæ¥å—ç›‘ç£ã€‚</p><p>ã€€ã€€åœ¨å…¨å›½ä»£è¡¨å¤§ä¼šé—­ä¼šæœŸé—´ï¼Œä¸­å¤®å§”å‘˜ä¼šæ‰§è¡Œå…¨å›½ä»£è¡¨å¤§ä¼šçš„å†³è®®ï¼Œé¢†å¯¼å…šçš„å…¨éƒ¨å·¥ä½œï¼Œå¯¹å¤–ä»£è¡¨ä¸­å›½å…±äº§å…šã€‚</p><p>ã€€ã€€ç¬¬äºŒåä¸‰æ¡ã€€å…šçš„ä¸­å¤®æ”¿æ²»å±€ã€ä¸­å¤®æ”¿æ²»å±€å¸¸åŠ¡å§”å‘˜ä¼šå’Œä¸­å¤®å§”å‘˜ä¼šæ€»ä¹¦è®°ï¼Œç”±ä¸­å¤®å§”å‘˜ä¼šå…¨ä½“ä¼šè®®é€‰ä¸¾ã€‚ä¸­å¤®å§”å‘˜ä¼šæ€»ä¹¦è®°å¿…é¡»ä»ä¸­å¤®æ”¿æ²»å±€å¸¸åŠ¡å§”å‘˜ä¼šå§”å‘˜ä¸­äº§ç”Ÿã€‚</p><p>ã€€ã€€ä¸­å¤®æ”¿æ²»å±€å’Œå®ƒçš„å¸¸åŠ¡å§”å‘˜ä¼šåœ¨ä¸­å¤®å§”å‘˜ä¼šå…¨ä½“ä¼šè®®é—­ä¼šæœŸé—´ï¼Œè¡Œä½¿ä¸­å¤®å§”å‘˜ä¼šçš„èŒæƒã€‚</p><p>ã€€ã€€ä¸­å¤®ä¹¦è®°å¤„æ˜¯ä¸­å¤®æ”¿æ²»å±€å’Œå®ƒçš„å¸¸åŠ¡å§”å‘˜ä¼šçš„åŠäº‹æœºæ„ï¼›æˆå‘˜ç”±ä¸­å¤®æ”¿æ²»å±€å¸¸åŠ¡å§”å‘˜ä¼šæåï¼Œä¸­å¤®å§”å‘˜ä¼šå…¨ä½“ä¼šè®®é€šè¿‡ã€‚</p><p>ã€€ã€€ä¸­å¤®å§”å‘˜ä¼šæ€»ä¹¦è®°è´Ÿè´£å¬é›†ä¸­å¤®æ”¿æ²»å±€ä¼šè®®å’Œä¸­å¤®æ”¿æ²»å±€å¸¸åŠ¡å§”å‘˜ä¼šä¼šè®®ï¼Œå¹¶ä¸»æŒä¸­å¤®ä¹¦è®°å¤„çš„å·¥ä½œã€‚</p><p>ã€€ã€€å…šçš„ä¸­å¤®å†›äº‹å§”å‘˜ä¼šç»„æˆäººå‘˜ç”±ä¸­å¤®å§”å‘˜ä¼šå†³å®šï¼Œä¸­å¤®å†›äº‹å§”å‘˜ä¼šå®è¡Œä¸»å¸­è´Ÿè´£åˆ¶ã€‚</p><p>ã€€ã€€æ¯å±Šä¸­å¤®å§”å‘˜ä¼šäº§ç”Ÿçš„ä¸­å¤®é¢†å¯¼æœºæ„å’Œä¸­å¤®é¢†å¯¼äººï¼Œåœ¨ä¸‹å±Šå…¨å›½ä»£è¡¨å¤§ä¼šå¼€ä¼šæœŸé—´ï¼Œç»§ç»­ä¸»æŒå…šçš„ç»å¸¸å·¥ä½œï¼Œç›´åˆ°ä¸‹å±Šä¸­å¤®å§”å‘˜ä¼šäº§ç”Ÿæ–°çš„ä¸­å¤®é¢†å¯¼æœºæ„å’Œä¸­å¤®é¢†å¯¼äººä¸ºæ­¢ã€‚</p><p>ã€€ã€€ç¬¬äºŒåå››æ¡ã€€ä¸­å›½äººæ°‘è§£æ”¾å†›çš„å…šç»„ç»‡ï¼Œæ ¹æ®ä¸­å¤®å§”å‘˜ä¼šçš„æŒ‡ç¤ºè¿›è¡Œå·¥ä½œã€‚ä¸­å¤®å†›äº‹å§”å‘˜ä¼šè´Ÿè´£å†›é˜Ÿä¸­å…šçš„å·¥ä½œå’Œæ”¿æ²»å·¥ä½œï¼Œå¯¹å†›é˜Ÿä¸­å…šçš„ç»„ç»‡ä½“åˆ¶å’Œæœºæ„ä½œå‡ºè§„å®šã€‚</p><h2 id="ç¬¬å››ç« -å…šçš„åœ°æ–¹ç»„ç»‡"><a href="#ç¬¬å››ç« -å…šçš„åœ°æ–¹ç»„ç»‡" class="headerlink" title="ç¬¬å››ç« ã€€å…šçš„åœ°æ–¹ç»„ç»‡"></a>ç¬¬å››ç« ã€€å…šçš„åœ°æ–¹ç»„ç»‡</h2><p>ã€€ã€€ç¬¬äºŒåäº”æ¡ã€€å…šçš„çœã€è‡ªæ²»åŒºã€ç›´è¾–å¸‚çš„ä»£è¡¨å¤§ä¼šï¼Œè®¾åŒºçš„å¸‚å’Œè‡ªæ²»å·çš„ä»£è¡¨å¤§ä¼šï¼Œå¿ï¼ˆæ——ï¼‰ã€è‡ªæ²»å¿ã€ä¸è®¾åŒºçš„å¸‚å’Œå¸‚è¾–åŒºçš„ä»£è¡¨å¤§ä¼šï¼Œæ¯äº”å¹´ä¸¾è¡Œä¸€æ¬¡ã€‚</p><p>ã€€ã€€å…šçš„åœ°æ–¹å„çº§ä»£è¡¨å¤§ä¼šç”±åŒçº§å…šçš„å§”å‘˜ä¼šå¬é›†ã€‚åœ¨ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œç»ä¸Šä¸€çº§å§”å‘˜ä¼šæ‰¹å‡†ï¼Œå¯ä»¥æå‰æˆ–å»¶æœŸä¸¾è¡Œã€‚</p><p>ã€€ã€€å…šçš„åœ°æ–¹å„çº§ä»£è¡¨å¤§ä¼šä»£è¡¨çš„åé¢å’Œé€‰ä¸¾åŠæ³•ï¼Œç”±åŒçº§å…šçš„å§”å‘˜ä¼šå†³å®šï¼Œå¹¶æŠ¥ä¸Šä¸€çº§å…šçš„å§”å‘˜ä¼šæ‰¹å‡†ã€‚</p><p>ã€€ã€€ç¬¬äºŒåå…­æ¡ã€€å…šçš„åœ°æ–¹å„çº§ä»£è¡¨å¤§ä¼šçš„èŒæƒæ˜¯ï¼š</p><p>ã€€ã€€ï¼ˆä¸€ï¼‰å¬å–å’Œå®¡æŸ¥åŒçº§å§”å‘˜ä¼šçš„æŠ¥å‘Šï¼›</p><p>ã€€ã€€ï¼ˆäºŒï¼‰å®¡æŸ¥åŒçº§çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šçš„æŠ¥å‘Šï¼›</p><p>ã€€ã€€ï¼ˆä¸‰ï¼‰è®¨è®ºæœ¬åœ°åŒºèŒƒå›´å†…çš„é‡å¤§é—®é¢˜å¹¶ä½œå‡ºå†³è®®ï¼›</p><p>ã€€ã€€ï¼ˆå››ï¼‰é€‰ä¸¾åŒçº§å…šçš„å§”å‘˜ä¼šï¼Œé€‰ä¸¾åŒçº§å…šçš„çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šã€‚</p><p>ã€€ã€€ç¬¬äºŒåä¸ƒæ¡ã€€å…šçš„çœã€è‡ªæ²»åŒºã€ç›´è¾–å¸‚ã€è®¾åŒºçš„å¸‚å’Œè‡ªæ²»å·çš„å§”å‘˜ä¼šï¼Œæ¯å±Šä»»æœŸäº”å¹´ã€‚è¿™äº›å§”å‘˜ä¼šçš„å§”å‘˜å’Œå€™è¡¥å§”å‘˜å¿…é¡»æœ‰äº”å¹´ä»¥ä¸Šçš„å…šé¾„ã€‚</p><p>ã€€ã€€å…šçš„å¿ï¼ˆæ——ï¼‰ã€è‡ªæ²»å¿ã€ä¸è®¾åŒºçš„å¸‚å’Œå¸‚è¾–åŒºçš„å§”å‘˜ä¼šï¼Œæ¯å±Šä»»æœŸäº”å¹´ã€‚è¿™äº›å§”å‘˜ä¼šçš„å§”å‘˜å’Œå€™è¡¥å§”å‘˜å¿…é¡»æœ‰ä¸‰å¹´ä»¥ä¸Šçš„å…šé¾„ã€‚</p><p>ã€€ã€€å…šçš„åœ°æ–¹å„çº§ä»£è¡¨å¤§ä¼šå¦‚æå‰æˆ–å»¶æœŸä¸¾è¡Œï¼Œç”±å®ƒé€‰ä¸¾çš„å§”å‘˜ä¼šçš„ä»»æœŸç›¸åº”åœ°æ”¹å˜ã€‚</p><p>ã€€ã€€å…šçš„åœ°æ–¹å„çº§å§”å‘˜ä¼šçš„å§”å‘˜å’Œå€™è¡¥å§”å‘˜çš„åé¢ï¼Œåˆ†åˆ«ç”±ä¸Šä¸€çº§å§”å‘˜ä¼šå†³å®šã€‚å…šçš„åœ°æ–¹å„çº§å§”å‘˜ä¼šå§”å‘˜å‡ºç¼ºï¼Œç”±å€™è¡¥å§”å‘˜æŒ‰ç…§å¾—ç¥¨å¤šå°‘ä¾æ¬¡é€’è¡¥ã€‚</p><p>ã€€ã€€å…šçš„åœ°æ–¹å„çº§å§”å‘˜ä¼šå…¨ä½“ä¼šè®®ï¼Œæ¯å¹´è‡³å°‘å¬å¼€ä¸¤æ¬¡ã€‚</p><p>ã€€ã€€å…šçš„åœ°æ–¹å„çº§å§”å‘˜ä¼šåœ¨ä»£è¡¨å¤§ä¼šé—­ä¼šæœŸé—´ï¼Œæ‰§è¡Œä¸Šçº§å…šç»„ç»‡çš„æŒ‡ç¤ºå’ŒåŒçº§å…šä»£è¡¨å¤§ä¼šçš„å†³è®®ï¼Œé¢†å¯¼æœ¬åœ°æ–¹çš„å·¥ä½œï¼Œå®šæœŸå‘ä¸Šçº§å…šçš„å§”å‘˜ä¼šæŠ¥å‘Šå·¥ä½œã€‚</p><p>ã€€ã€€ç¬¬äºŒåå…«æ¡ã€€å…šçš„åœ°æ–¹å„çº§å§”å‘˜ä¼šå…¨ä½“ä¼šè®®ï¼Œé€‰ä¸¾å¸¸åŠ¡å§”å‘˜ä¼šå’Œä¹¦è®°ã€å‰¯ä¹¦è®°ï¼Œå¹¶æŠ¥ä¸Šçº§å…šçš„å§”å‘˜ä¼šæ‰¹å‡†ã€‚å…šçš„åœ°æ–¹å„çº§å§”å‘˜ä¼šçš„å¸¸åŠ¡å§”å‘˜ä¼šï¼Œåœ¨å§”å‘˜ä¼šå…¨ä½“ä¼šè®®é—­ä¼šæœŸé—´ï¼Œè¡Œä½¿å§”å‘˜ä¼šèŒæƒï¼›åœ¨ä¸‹å±Šä»£è¡¨å¤§ä¼šå¼€ä¼šæœŸé—´ï¼Œç»§ç»­ä¸»æŒç»å¸¸å·¥ä½œï¼Œç›´åˆ°æ–°çš„å¸¸åŠ¡å§”å‘˜ä¼šäº§ç”Ÿä¸ºæ­¢ã€‚</p><p>ã€€ã€€å…šçš„åœ°æ–¹å„çº§å§”å‘˜ä¼šçš„å¸¸åŠ¡å§”å‘˜ä¼šå®šæœŸå‘å§”å‘˜ä¼šå…¨ä½“ä¼šè®®æŠ¥å‘Šå·¥ä½œï¼Œæ¥å—ç›‘ç£ã€‚</p><p>ã€€ã€€ç¬¬äºŒåä¹æ¡ã€€å…šçš„åœ°åŒºå§”å‘˜ä¼šå’Œç›¸å½“äºåœ°åŒºå§”å‘˜ä¼šçš„ç»„ç»‡ï¼Œæ˜¯å…šçš„çœã€è‡ªæ²»åŒºå§”å‘˜ä¼šåœ¨å‡ ä¸ªå¿ã€è‡ªæ²»å¿ã€å¸‚èŒƒå›´å†…æ´¾å‡ºçš„ä»£è¡¨æœºå…³ã€‚å®ƒæ ¹æ®çœã€è‡ªæ²»åŒºå§”å‘˜ä¼šçš„æˆæƒï¼Œé¢†å¯¼æœ¬åœ°åŒºçš„å·¥ä½œã€‚</p><h2 id="ç¬¬äº”ç« -å…šçš„åŸºå±‚ç»„ç»‡"><a href="#ç¬¬äº”ç« -å…šçš„åŸºå±‚ç»„ç»‡" class="headerlink" title="ç¬¬äº”ç« ã€€å…šçš„åŸºå±‚ç»„ç»‡"></a>ç¬¬äº”ç« ã€€å…šçš„åŸºå±‚ç»„ç»‡</h2><p>ã€€ã€€ç¬¬ä¸‰åæ¡ã€€ä¼ä¸šã€å†œæ‘ã€æœºå…³ã€å­¦æ ¡ã€åŒ»é™¢ã€ç§‘ç ”é™¢æ‰€ã€è¡—é“ç¤¾åŒºã€ç¤¾ä¼šç»„ç»‡ã€äººæ°‘è§£æ”¾å†›è¿é˜Ÿå’Œå…¶ä»–åŸºå±‚å•ä½ï¼Œå‡¡æ˜¯æœ‰æ­£å¼å…šå‘˜ä¸‰äººä»¥ä¸Šçš„ï¼Œéƒ½åº”å½“æˆç«‹å…šçš„åŸºå±‚ç»„ç»‡ã€‚</p><p>ã€€ã€€å…šçš„åŸºå±‚ç»„ç»‡ï¼Œæ ¹æ®å·¥ä½œéœ€è¦å’Œå…šå‘˜äººæ•°ï¼Œç»ä¸Šçº§å…šç»„ç»‡æ‰¹å‡†ï¼Œåˆ†åˆ«è®¾ç«‹å…šçš„åŸºå±‚å§”å‘˜ä¼šã€æ€»æ”¯éƒ¨å§”å‘˜ä¼šã€æ”¯éƒ¨å§”å‘˜ä¼šã€‚åŸºå±‚å§”å‘˜ä¼šç”±å…šå‘˜å¤§ä¼šæˆ–ä»£è¡¨å¤§ä¼šé€‰ä¸¾äº§ç”Ÿï¼Œæ€»æ”¯éƒ¨å§”å‘˜ä¼šå’Œæ”¯éƒ¨å§”å‘˜ä¼šç”±å…šå‘˜å¤§ä¼šé€‰ä¸¾äº§ç”Ÿï¼Œæå‡ºå§”å‘˜å€™é€‰äººè¦å¹¿æ³›å¾æ±‚å…šå‘˜å’Œç¾¤ä¼—çš„æ„è§ã€‚</p><p>ã€€ã€€ç¬¬ä¸‰åä¸€æ¡ã€€å…šçš„åŸºå±‚å§”å‘˜ä¼šã€æ€»æ”¯éƒ¨å§”å‘˜ä¼šã€æ”¯éƒ¨å§”å‘˜ä¼šæ¯å±Šä»»æœŸä¸‰å¹´è‡³äº”å¹´ã€‚åŸºå±‚å§”å‘˜ä¼šã€æ€»æ”¯éƒ¨å§”å‘˜ä¼šã€æ”¯éƒ¨å§”å‘˜ä¼šçš„ä¹¦è®°ã€å‰¯ä¹¦è®°é€‰ä¸¾äº§ç”Ÿåï¼Œåº”æŠ¥ä¸Šçº§å…šç»„ç»‡æ‰¹å‡†ã€‚</p><p>ã€€ã€€ç¬¬ä¸‰åäºŒæ¡ã€€å…šçš„åŸºå±‚ç»„ç»‡æ˜¯å…šåœ¨ç¤¾ä¼šåŸºå±‚ç»„ç»‡ä¸­çš„æˆ˜æ–—å ¡å’ï¼Œæ˜¯å…šçš„å…¨éƒ¨å·¥ä½œå’Œæˆ˜æ–—åŠ›çš„åŸºç¡€ã€‚å®ƒçš„åŸºæœ¬ä»»åŠ¡æ˜¯ï¼š</p><p>ã€€ã€€ï¼ˆä¸€ï¼‰å®£ä¼ å’Œæ‰§è¡Œå…šçš„è·¯çº¿ã€æ–¹é’ˆã€æ”¿ç­–ï¼Œå®£ä¼ å’Œæ‰§è¡Œå…šä¸­å¤®ã€ä¸Šçº§ç»„ç»‡å’Œæœ¬ç»„ç»‡çš„å†³è®®ï¼Œå……åˆ†å‘æŒ¥å…šå‘˜çš„å…ˆé”‹æ¨¡èŒƒä½œç”¨ï¼Œç§¯æåˆ›å…ˆäº‰ä¼˜ï¼Œå›¢ç»“ã€ç»„ç»‡å…šå†…å¤–çš„å¹²éƒ¨å’Œç¾¤ä¼—ï¼ŒåŠªåŠ›å®Œæˆæœ¬å•ä½æ‰€æ‹…è´Ÿçš„ä»»åŠ¡ã€‚</p><p>ã€€ã€€ï¼ˆäºŒï¼‰ç»„ç»‡å…šå‘˜è®¤çœŸå­¦ä¹ é©¬å…‹æ€åˆ—å®ä¸»ä¹‰ã€æ¯›æ³½ä¸œæ€æƒ³ã€é‚“å°å¹³ç†è®ºã€â€œä¸‰ä¸ªä»£è¡¨â€é‡è¦æ€æƒ³ã€ç§‘å­¦å‘å±•è§‚ã€ä¹ è¿‘å¹³æ–°æ—¶ä»£ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ€æƒ³ï¼Œæ¨è¿›â€œä¸¤å­¦ä¸€åšâ€å­¦ä¹ æ•™è‚²ã€å…šå²å­¦ä¹ æ•™è‚²å¸¸æ€åŒ–åˆ¶åº¦åŒ–ï¼Œå­¦ä¹ å…šçš„è·¯çº¿ã€æ–¹é’ˆã€æ”¿ç­–å’Œå†³è®®ï¼Œå­¦ä¹ å…šçš„åŸºæœ¬çŸ¥è¯†ï¼Œå­¦ä¹ ç§‘å­¦ã€æ–‡åŒ–ã€æ³•å¾‹å’Œä¸šåŠ¡çŸ¥è¯†ã€‚</p><p>ã€€ã€€ï¼ˆä¸‰ï¼‰å¯¹å…šå‘˜è¿›è¡Œæ•™è‚²ã€ç®¡ç†ã€ç›‘ç£å’ŒæœåŠ¡ï¼Œæé«˜å…šå‘˜ç´ è´¨ï¼Œåšå®šç†æƒ³ä¿¡å¿µï¼Œå¢å¼ºå…šæ€§ï¼Œä¸¥æ ¼å…šçš„ç»„ç»‡ç”Ÿæ´»ï¼Œå¼€å±•æ‰¹è¯„å’Œè‡ªæˆ‘æ‰¹è¯„ï¼Œç»´æŠ¤å’Œæ‰§è¡Œå…šçš„çºªå¾‹ï¼Œç›‘ç£å…šå‘˜åˆ‡å®å±¥è¡Œä¹‰åŠ¡ï¼Œä¿éšœå…šå‘˜çš„æƒåˆ©ä¸å—ä¾µçŠ¯ã€‚åŠ å¼ºå’Œæ”¹è¿›æµåŠ¨å…šå‘˜ç®¡ç†ã€‚</p><p>ã€€ã€€ï¼ˆå››ï¼‰å¯†åˆ‡è”ç³»ç¾¤ä¼—ï¼Œç»å¸¸äº†è§£ç¾¤ä¼—å¯¹å…šå‘˜ã€å…šçš„å·¥ä½œçš„æ‰¹è¯„å’Œæ„è§ï¼Œç»´æŠ¤ç¾¤ä¼—çš„æ­£å½“æƒåˆ©å’Œåˆ©ç›Šï¼Œåšå¥½ç¾¤ä¼—çš„æ€æƒ³æ”¿æ²»å·¥ä½œã€‚</p><p>ã€€ã€€ï¼ˆäº”ï¼‰å……åˆ†å‘æŒ¥å…šå‘˜å’Œç¾¤ä¼—çš„ç§¯ææ€§åˆ›é€ æ€§ï¼Œå‘ç°ã€åŸ¹å…»å’Œæ¨èä»–ä»¬ä¸­é—´çš„ä¼˜ç§€äººæ‰ï¼Œé¼“åŠ±å’Œæ”¯æŒä»–ä»¬åœ¨æ”¹é©å¼€æ”¾å’Œç¤¾ä¼šä¸»ä¹‰ç°ä»£åŒ–å»ºè®¾ä¸­è´¡çŒ®è‡ªå·±çš„èªæ˜æ‰æ™ºã€‚</p><p>ã€€ã€€ï¼ˆå…­ï¼‰å¯¹è¦æ±‚å…¥å…šçš„ç§¯æåˆ†å­è¿›è¡Œæ•™è‚²å’ŒåŸ¹å…»ï¼Œåšå¥½ç»å¸¸æ€§çš„å‘å±•å…šå‘˜å·¥ä½œï¼Œé‡è§†åœ¨ç”Ÿäº§ã€å·¥ä½œç¬¬ä¸€çº¿å’Œé’å¹´ä¸­å‘å±•å…šå‘˜ã€‚</p><p>ã€€ã€€ï¼ˆä¸ƒï¼‰ç›‘ç£å…šå‘˜å¹²éƒ¨å’Œå…¶ä»–ä»»ä½•å·¥ä½œäººå‘˜ä¸¥æ ¼éµå®ˆå›½å®¶æ³•å¾‹æ³•è§„ï¼Œä¸¥æ ¼éµå®ˆå›½å®¶çš„è´¢æ”¿ç»æµæ³•è§„å’Œäººäº‹åˆ¶åº¦ï¼Œä¸å¾—ä¾µå å›½å®¶ã€é›†ä½“å’Œç¾¤ä¼—çš„åˆ©ç›Šã€‚</p><p>ã€€ã€€ï¼ˆå…«ï¼‰æ•™è‚²å…šå‘˜å’Œç¾¤ä¼—è‡ªè§‰æŠµåˆ¶ä¸è‰¯å€¾å‘ï¼Œåšå†³åŒå„ç§è¿çºªè¿æ³•è¡Œä¸ºä½œæ–—äº‰ã€‚</p><p>ã€€ã€€ç¬¬ä¸‰åä¸‰æ¡ã€€è¡—é“ã€ä¹¡ã€é•‡å…šçš„åŸºå±‚å§”å‘˜ä¼šå’Œæ‘ã€ç¤¾åŒºå…šç»„ç»‡ï¼Œç»Ÿä¸€é¢†å¯¼æœ¬åœ°åŒºåŸºå±‚å„ç±»ç»„ç»‡å’Œå„é¡¹å·¥ä½œï¼ŒåŠ å¼ºåŸºå±‚ç¤¾ä¼šæ²»ç†ï¼Œæ”¯æŒå’Œä¿è¯è¡Œæ”¿ç»„ç»‡ã€ç»æµç»„ç»‡å’Œç¾¤ä¼—æ€§è‡ªæ²»ç»„ç»‡å……åˆ†è¡Œä½¿èŒæƒã€‚</p><p>ã€€ã€€å›½æœ‰ä¼ä¸šå…šå§”ï¼ˆå…šç»„ï¼‰å‘æŒ¥é¢†å¯¼ä½œç”¨ï¼ŒæŠŠæ–¹å‘ã€ç®¡å¤§å±€ã€ä¿è½å®ï¼Œä¾ç…§è§„å®šè®¨è®ºå’Œå†³å®šä¼ä¸šé‡å¤§äº‹é¡¹ã€‚å›½æœ‰ä¼ä¸šå’Œé›†ä½“ä¼ä¸šä¸­å…šçš„åŸºå±‚ç»„ç»‡ï¼Œå›´ç»•ä¼ä¸šç”Ÿäº§ç»è¥å¼€å±•å·¥ä½œã€‚ä¿è¯ç›‘ç£å…šå’Œå›½å®¶çš„æ–¹é’ˆã€æ”¿ç­–åœ¨æœ¬ä¼ä¸šçš„è´¯å½»æ‰§è¡Œï¼›æ”¯æŒè‚¡ä¸œä¼šã€è‘£äº‹ä¼šã€ç›‘äº‹ä¼šå’Œç»ç†ï¼ˆå‚é•¿ï¼‰ä¾æ³•è¡Œä½¿èŒæƒï¼›å…¨å¿ƒå…¨æ„ä¾é èŒå·¥ç¾¤ä¼—ï¼Œæ”¯æŒèŒå·¥ä»£è¡¨å¤§ä¼šå¼€å±•å·¥ä½œï¼›å‚ä¸ä¼ä¸šé‡å¤§é—®é¢˜çš„å†³ç­–ï¼›åŠ å¼ºå…šç»„ç»‡çš„è‡ªèº«å»ºè®¾ï¼Œé¢†å¯¼æ€æƒ³æ”¿æ²»å·¥ä½œã€ç²¾ç¥æ–‡æ˜å»ºè®¾ã€ç»Ÿä¸€æˆ˜çº¿å·¥ä½œå’Œå·¥ä¼šã€å…±é’å›¢ã€å¦‡å¥³ç»„ç»‡ç­‰ç¾¤å›¢ç»„ç»‡ã€‚</p><p>ã€€ã€€éå…¬æœ‰åˆ¶ç»æµç»„ç»‡ä¸­å…šçš„åŸºå±‚ç»„ç»‡ï¼Œè´¯å½»å…šçš„æ–¹é’ˆæ”¿ç­–ï¼Œå¼•å¯¼å’Œç›‘ç£ä¼ä¸šéµå®ˆå›½å®¶çš„æ³•å¾‹æ³•è§„ï¼Œé¢†å¯¼å·¥ä¼šã€å…±é’å›¢ç­‰ç¾¤å›¢ç»„ç»‡ï¼Œå›¢ç»“å‡èšèŒå·¥ç¾¤ä¼—ï¼Œç»´æŠ¤å„æ–¹çš„åˆæ³•æƒç›Šï¼Œä¿ƒè¿›ä¼ä¸šå¥åº·å‘å±•ã€‚</p><p>ã€€ã€€ç¤¾ä¼šç»„ç»‡ä¸­å…šçš„åŸºå±‚ç»„ç»‡ï¼Œå®£ä¼ å’Œæ‰§è¡Œå…šçš„è·¯çº¿ã€æ–¹é’ˆã€æ”¿ç­–ï¼Œé¢†å¯¼å·¥ä¼šã€å…±é’å›¢ç­‰ç¾¤å›¢ç»„ç»‡ï¼Œæ•™è‚²ç®¡ç†å…šå‘˜ï¼Œå¼•é¢†æœåŠ¡ç¾¤ä¼—ï¼Œæ¨åŠ¨äº‹ä¸šå‘å±•ã€‚</p><p>ã€€ã€€å®è¡Œè¡Œæ”¿é¢†å¯¼äººè´Ÿè´£åˆ¶çš„äº‹ä¸šå•ä½ä¸­å…šçš„åŸºå±‚ç»„ç»‡ï¼Œå‘æŒ¥æˆ˜æ–—å ¡å’ä½œç”¨ã€‚å®è¡Œå…šå§”é¢†å¯¼ä¸‹çš„è¡Œæ”¿é¢†å¯¼äººè´Ÿè´£åˆ¶çš„äº‹ä¸šå•ä½ä¸­å…šçš„åŸºå±‚ç»„ç»‡ï¼Œå¯¹é‡å¤§é—®é¢˜è¿›è¡Œè®¨è®ºå’Œä½œå‡ºå†³å®šï¼ŒåŒæ—¶ä¿è¯è¡Œæ”¿é¢†å¯¼äººå……åˆ†è¡Œä½¿è‡ªå·±çš„èŒæƒã€‚</p><p>ã€€ã€€å„çº§å…šå’Œå›½å®¶æœºå…³ä¸­å…šçš„åŸºå±‚ç»„ç»‡ï¼ŒååŠ©è¡Œæ”¿è´Ÿè´£äººå®Œæˆä»»åŠ¡ï¼Œæ”¹è¿›å·¥ä½œï¼Œå¯¹åŒ…æ‹¬è¡Œæ”¿è´Ÿè´£äººåœ¨å†…çš„æ¯ä¸ªå…šå‘˜è¿›è¡Œæ•™è‚²ã€ç®¡ç†ã€ç›‘ç£ï¼Œä¸é¢†å¯¼æœ¬å•ä½çš„ä¸šåŠ¡å·¥ä½œã€‚</p><p>ã€€ã€€ç¬¬ä¸‰åå››æ¡ã€€å…šæ”¯éƒ¨æ˜¯å…šçš„åŸºç¡€ç»„ç»‡ï¼Œæ‹…è´Ÿç›´æ¥æ•™è‚²å…šå‘˜ã€ç®¡ç†å…šå‘˜ã€ç›‘ç£å…šå‘˜å’Œç»„ç»‡ç¾¤ä¼—ã€å®£ä¼ ç¾¤ä¼—ã€å‡èšç¾¤ä¼—ã€æœåŠ¡ç¾¤ä¼—çš„èŒè´£ã€‚</p><h2 id="ç¬¬å…­ç« -å…šçš„å¹²éƒ¨"><a href="#ç¬¬å…­ç« -å…šçš„å¹²éƒ¨" class="headerlink" title="ç¬¬å…­ç« ã€€å…šçš„å¹²éƒ¨"></a>ç¬¬å…­ç« ã€€å…šçš„å¹²éƒ¨</h2><p>ã€€ã€€ç¬¬ä¸‰åäº”æ¡ã€€å…šçš„å¹²éƒ¨æ˜¯å…šçš„äº‹ä¸šçš„éª¨å¹²ï¼Œæ˜¯äººæ°‘çš„å…¬ä»†ï¼Œè¦åšåˆ°å¿ è¯šå¹²å‡€æ‹…å½“ã€‚å…šæŒ‰ç…§å¾·æ‰å…¼å¤‡ã€ä»¥å¾·ä¸ºå…ˆçš„åŸåˆ™é€‰æ‹”å¹²éƒ¨ï¼ŒåšæŒäº”æ¹–å››æµ·ã€ä»»äººå”¯è´¤ï¼ŒåšæŒäº‹ä¸šä¸ºä¸Šã€å…¬é“æ­£æ´¾ï¼Œåå¯¹ä»»äººå”¯äº²ï¼ŒåŠªåŠ›å®ç°å¹²éƒ¨é˜Ÿä¼çš„é©å‘½åŒ–ã€å¹´è½»åŒ–ã€çŸ¥è¯†åŒ–ã€ä¸“ä¸šåŒ–ã€‚</p><p>ã€€ã€€å…šé‡è§†æ•™è‚²ã€åŸ¹è®­ã€é€‰æ‹”ã€è€ƒæ ¸å’Œç›‘ç£å¹²éƒ¨ï¼Œç‰¹åˆ«æ˜¯åŸ¹å…»ã€é€‰æ‹”ä¼˜ç§€å¹´è½»å¹²éƒ¨ã€‚ç§¯ææ¨è¿›å¹²éƒ¨åˆ¶åº¦æ”¹é©ã€‚</p><p>ã€€ã€€å…šé‡è§†åŸ¹å…»ã€é€‰æ‹”å¥³å¹²éƒ¨å’Œå°‘æ•°æ°‘æ—å¹²éƒ¨ã€‚</p><p>ã€€ã€€ç¬¬ä¸‰åå…­æ¡ã€€å…šçš„å„çº§é¢†å¯¼å¹²éƒ¨å¿…é¡»ä¿¡å¿µåšå®šã€ä¸ºæ°‘æœåŠ¡ã€å‹¤æ”¿åŠ¡å®ã€æ•¢äºæ‹…å½“ã€æ¸…æ­£å»‰æ´ï¼Œæ¨¡èŒƒåœ°å±¥è¡Œæœ¬ç« ç¨‹ç¬¬ä¸‰æ¡æ‰€è§„å®šçš„å…šå‘˜çš„å„é¡¹ä¹‰åŠ¡ï¼Œå¹¶ä¸”å¿…é¡»å…·å¤‡ä»¥ä¸‹çš„åŸºæœ¬æ¡ä»¶ï¼š</p><p>ã€€ã€€ï¼ˆä¸€ï¼‰å…·æœ‰å±¥è¡ŒèŒè´£æ‰€éœ€è¦çš„é©¬å…‹æ€åˆ—å®ä¸»ä¹‰ã€æ¯›æ³½ä¸œæ€æƒ³ã€é‚“å°å¹³ç†è®ºã€â€œä¸‰ä¸ªä»£è¡¨â€é‡è¦æ€æƒ³ã€ç§‘å­¦å‘å±•è§‚çš„æ°´å¹³ï¼Œå¸¦å¤´è´¯å½»è½å®ä¹ è¿‘å¹³æ–°æ—¶ä»£ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ€æƒ³ï¼ŒåŠªåŠ›ç”¨é©¬å…‹æ€ä¸»ä¹‰çš„ç«‹åœºã€è§‚ç‚¹ã€æ–¹æ³•åˆ†æå’Œè§£å†³å®é™…é—®é¢˜ï¼ŒåšæŒè®²å­¦ä¹ ã€è®²æ”¿æ²»ã€è®²æ­£æ°”ï¼Œç»å¾—èµ·å„ç§é£æµªçš„è€ƒéªŒã€‚</p><p>ã€€ã€€ï¼ˆäºŒï¼‰å…·æœ‰å…±äº§ä¸»ä¹‰è¿œå¤§ç†æƒ³å’Œä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰åšå®šä¿¡å¿µï¼Œåšå†³æ‰§è¡Œå…šçš„åŸºæœ¬è·¯çº¿å’Œå„é¡¹æ–¹é’ˆã€æ”¿ç­–ï¼Œç«‹å¿—æ”¹é©å¼€æ”¾ï¼ŒçŒ®èº«ç°ä»£åŒ–äº‹ä¸šï¼Œåœ¨ç¤¾ä¼šä¸»ä¹‰å»ºè®¾ä¸­è‰°è‹¦åˆ›ä¸šï¼Œæ ‘ç«‹æ­£ç¡®æ”¿ç»©è§‚ï¼Œåšå‡ºç»å¾—èµ·å®è·µã€äººæ°‘ã€å†å²æ£€éªŒçš„å®ç»©ã€‚</p><p>ã€€ã€€ï¼ˆä¸‰ï¼‰åšæŒè§£æ”¾æ€æƒ³ï¼Œå®äº‹æ±‚æ˜¯ï¼Œä¸æ—¶ä¿±è¿›ï¼Œå¼€æ‹“åˆ›æ–°ï¼Œè®¤çœŸè°ƒæŸ¥ç ”ç©¶ï¼Œèƒ½å¤ŸæŠŠå…šçš„æ–¹é’ˆã€æ”¿ç­–åŒæœ¬åœ°åŒºã€æœ¬éƒ¨é—¨çš„å®é™…ç›¸ç»“åˆï¼Œå“æœ‰æˆæ•ˆåœ°å¼€å±•å·¥ä½œï¼Œè®²å®è¯ï¼ŒåŠå®äº‹ï¼Œæ±‚å®æ•ˆã€‚</p><p>ã€€ã€€ï¼ˆå››ï¼‰æœ‰å¼ºçƒˆçš„é©å‘½äº‹ä¸šå¿ƒå’Œæ”¿æ²»è´£ä»»æ„Ÿï¼Œæœ‰å®è·µç»éªŒï¼Œæœ‰èƒœä»»é¢†å¯¼å·¥ä½œçš„ç»„ç»‡èƒ½åŠ›ã€æ–‡åŒ–æ°´å¹³å’Œä¸“ä¸šçŸ¥è¯†ã€‚</p><p>ã€€ã€€ï¼ˆäº”ï¼‰æ­£ç¡®è¡Œä½¿äººæ°‘èµ‹äºˆçš„æƒåŠ›ï¼ŒåšæŒåŸåˆ™ï¼Œä¾æ³•åŠäº‹ï¼Œæ¸…æ­£å»‰æ´ï¼Œå‹¤æ”¿ä¸ºæ°‘ï¼Œä»¥èº«ä½œåˆ™ï¼Œè‰°è‹¦æœ´ç´ ï¼Œå¯†åˆ‡è”ç³»ç¾¤ä¼—ï¼ŒåšæŒå…šçš„ç¾¤ä¼—è·¯çº¿ï¼Œè‡ªè§‰åœ°æ¥å—å…šå’Œç¾¤ä¼—çš„æ‰¹è¯„å’Œç›‘ç£ï¼ŒåŠ å¼ºé“å¾·ä¿®å…»ï¼Œè®²å…šæ€§ã€é‡å“è¡Œã€ä½œè¡¨ç‡ï¼Œåšåˆ°è‡ªé‡ã€è‡ªçœã€è‡ªè­¦ã€è‡ªåŠ±ï¼Œåå¯¹å½¢å¼ä¸»ä¹‰ã€å®˜åƒšä¸»ä¹‰ã€äº«ä¹ä¸»ä¹‰å’Œå¥¢é¡ä¹‹é£ï¼Œåå¯¹ç‰¹æƒæ€æƒ³å’Œç‰¹æƒç°è±¡ï¼Œåå¯¹ä»»ä½•æ»¥ç”¨èŒæƒã€è°‹æ±‚ç§åˆ©çš„è¡Œä¸ºã€‚</p><p>ã€€ã€€ï¼ˆå…­ï¼‰åšæŒå’Œç»´æŠ¤å…šçš„æ°‘ä¸»é›†ä¸­åˆ¶ï¼Œæœ‰æ°‘ä¸»ä½œé£ï¼Œæœ‰å…¨å±€è§‚å¿µï¼Œå–„äºå›¢ç»“åŒå¿—ï¼ŒåŒ…æ‹¬å›¢ç»“åŒè‡ªå·±æœ‰ä¸åŒæ„è§çš„åŒå¿—ä¸€é“å·¥ä½œã€‚</p><p>ã€€ã€€ç¬¬ä¸‰åä¸ƒæ¡ã€€å…šå‘˜å¹²éƒ¨è¦å–„äºåŒå…šå¤–å¹²éƒ¨åˆä½œå…±äº‹ï¼Œå°Šé‡ä»–ä»¬ï¼Œè™šå¿ƒå­¦ä¹ ä»–ä»¬çš„é•¿å¤„ã€‚</p><p>ã€€ã€€å…šçš„å„çº§ç»„ç»‡è¦å–„äºå‘ç°å’Œæ¨èæœ‰çœŸæ‰å®å­¦çš„å…šå¤–å¹²éƒ¨æ‹…ä»»é¢†å¯¼å·¥ä½œï¼Œä¿è¯ä»–ä»¬æœ‰èŒæœ‰æƒï¼Œå……åˆ†å‘æŒ¥ä»–ä»¬çš„ä½œç”¨ã€‚</p><p>ã€€ã€€ç¬¬ä¸‰åå…«æ¡ã€€å…šçš„å„çº§é¢†å¯¼å¹²éƒ¨ï¼Œæ— è®ºæ˜¯ç”±æ°‘ä¸»é€‰ä¸¾äº§ç”Ÿçš„ï¼Œæˆ–æ˜¯ç”±é¢†å¯¼æœºå…³ä»»å‘½çš„ï¼Œä»–ä»¬çš„èŒåŠ¡éƒ½ä¸æ˜¯ç»ˆèº«çš„ï¼Œéƒ½å¯ä»¥å˜åŠ¨æˆ–è§£é™¤ã€‚</p><p>ã€€ã€€å¹´é¾„å’Œå¥åº·çŠ¶å†µä¸é€‚å®œäºç»§ç»­æ‹…ä»»å·¥ä½œçš„å¹²éƒ¨ï¼Œåº”å½“æŒ‰ç…§å›½å®¶çš„è§„å®šé€€ã€ç¦»ä¼‘ã€‚</p><h2 id="x3D-x3D-ç¬¬ä¸ƒç« -å…šçš„çºªå¾‹-x3D-x3D"><a href="#x3D-x3D-ç¬¬ä¸ƒç« -å…šçš„çºªå¾‹-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;ç¬¬ä¸ƒç« ã€€å…šçš„çºªå¾‹&#x3D;&#x3D;"></a>&#x3D;&#x3D;ç¬¬ä¸ƒç« ã€€å…šçš„çºªå¾‹&#x3D;&#x3D;</h2><p>ã€€ã€€ç¬¬ä¸‰åä¹æ¡ã€€å…šçš„çºªå¾‹æ˜¯å…šçš„å„çº§ç»„ç»‡å’Œå…¨ä½“å…šå‘˜å¿…é¡»éµå®ˆçš„è¡Œä¸ºè§„åˆ™ï¼Œæ˜¯ç»´æŠ¤å…šçš„å›¢ç»“ç»Ÿä¸€ã€å®Œæˆå…šçš„ä»»åŠ¡çš„ä¿è¯ã€‚å…šç»„ç»‡å¿…é¡»ä¸¥æ ¼æ‰§è¡Œå’Œç»´æŠ¤å…šçš„çºªå¾‹ï¼Œå…±äº§å…šå‘˜å¿…é¡»è‡ªè§‰æ¥å—å…šçš„çºªå¾‹çš„çº¦æŸã€‚</p><p>ã€€ã€€ç¬¬å››åæ¡ã€€å…šçš„çºªå¾‹ä¸»è¦åŒ…æ‹¬æ”¿æ²»çºªå¾‹ã€ç»„ç»‡çºªå¾‹ã€å»‰æ´çºªå¾‹ã€ç¾¤ä¼—çºªå¾‹ã€å·¥ä½œçºªå¾‹ã€ç”Ÿæ´»çºªå¾‹ã€‚</p><p>ã€€ã€€åšæŒæƒ©å‰æ¯–åã€æ²»ç—…æ•‘äººï¼Œæ‰§çºªå¿…ä¸¥ã€è¿çºªå¿…ç©¶ï¼ŒæŠ“æ—©æŠ“å°ã€é˜²å¾®æœæ¸ï¼ŒæŒ‰ç…§é”™è¯¯æ€§è´¨å’Œæƒ…èŠ‚è½»é‡ï¼Œç»™ä»¥æ‰¹è¯„æ•™è‚²ã€è´£ä»¤æ£€æŸ¥ã€è¯«å‹‰ç›´è‡³çºªå¾‹å¤„åˆ†ã€‚è¿ç”¨ç›‘ç£æ‰§çºªâ€œå››ç§å½¢æ€â€ï¼Œè®©â€œçº¢çº¢è„¸ã€å‡ºå‡ºæ±—â€æˆä¸ºå¸¸æ€ï¼Œå…šçºªå¤„åˆ†ã€ç»„ç»‡è°ƒæ•´æˆä¸ºç®¡å…šæ²»å…šçš„é‡è¦æ‰‹æ®µï¼Œä¸¥é‡è¿çºªã€ä¸¥é‡è§¦çŠ¯åˆ‘å¾‹çš„å…šå‘˜å¿…é¡»å¼€é™¤å…šç±ã€‚</p><p>ã€€ã€€å…šå†…ä¸¥æ ¼ç¦æ­¢ç”¨è¿åå…šç« å’Œå›½å®¶æ³•å¾‹çš„æ‰‹æ®µå¯¹å¾…å…šå‘˜ï¼Œä¸¥æ ¼ç¦æ­¢æ‰“å‡»æŠ¥å¤å’Œè¯¬å‘Šé™·å®³ã€‚è¿åè¿™äº›è§„å®šçš„ç»„ç»‡æˆ–ä¸ªäººå¿…é¡»å—åˆ°å…šçš„çºªå¾‹å’Œå›½å®¶æ³•å¾‹çš„è¿½ç©¶ã€‚</p><p>ã€€ã€€ç¬¬å››åä¸€æ¡ã€€å¯¹å…šå‘˜çš„çºªå¾‹å¤„åˆ†æœ‰äº”ç§ï¼šè­¦å‘Šã€ä¸¥é‡è­¦å‘Šã€æ’¤é”€å…šå†…èŒåŠ¡ã€ç•™å…šå¯Ÿçœ‹ã€å¼€é™¤å…šç±ã€‚</p><p>ã€€ã€€ç•™å…šå¯Ÿçœ‹æœ€é•¿ä¸è¶…è¿‡ä¸¤å¹´ã€‚å…šå‘˜åœ¨ç•™å…šå¯Ÿçœ‹æœŸé—´æ²¡æœ‰è¡¨å†³æƒã€é€‰ä¸¾æƒå’Œè¢«é€‰ä¸¾æƒã€‚å…šå‘˜ç»è¿‡ç•™å…šå¯Ÿçœ‹ï¼Œç¡®å·²æ”¹æ­£é”™è¯¯çš„ï¼Œåº”å½“æ¢å¤å…¶å…šå‘˜çš„æƒåˆ©ï¼›åšæŒé”™è¯¯ä¸æ”¹çš„ï¼Œåº”å½“å¼€é™¤å…šç±ã€‚</p><p>ã€€ã€€å¼€é™¤å…šç±æ˜¯å…šå†…çš„æœ€é«˜å¤„åˆ†ã€‚å„çº§å…šç»„ç»‡åœ¨å†³å®šæˆ–æ‰¹å‡†å¼€é™¤å…šå‘˜å…šç±çš„æ—¶å€™ï¼Œåº”å½“å…¨é¢ç ”ç©¶æœ‰å…³çš„ææ–™å’Œæ„è§ï¼Œé‡‡å–ååˆ†æ…é‡çš„æ€åº¦ã€‚</p><p>ã€€ã€€ç¬¬å››åäºŒæ¡ã€€å¯¹å…šå‘˜çš„çºªå¾‹å¤„åˆ†ï¼Œå¿…é¡»ç»è¿‡æ”¯éƒ¨å¤§ä¼šè®¨è®ºå†³å®šï¼ŒæŠ¥å…šçš„åŸºå±‚å§”å‘˜ä¼šæ‰¹å‡†ï¼›å¦‚æœæ¶‰åŠçš„é—®é¢˜æ¯”è¾ƒé‡è¦æˆ–å¤æ‚ï¼Œæˆ–ç»™å…šå‘˜ä»¥å¼€é™¤å…šç±çš„å¤„åˆ†ï¼Œåº”åˆ†åˆ«ä¸åŒæƒ…å†µï¼ŒæŠ¥å¿çº§æˆ–å¿çº§ä»¥ä¸Šå…šçš„çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šå®¡æŸ¥æ‰¹å‡†ã€‚åœ¨ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œå¿çº§å’Œå¿çº§ä»¥ä¸Šå„çº§å…šçš„å§”å‘˜ä¼šå’Œçºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šæœ‰æƒç›´æ¥å†³å®šç»™å…šå‘˜ä»¥çºªå¾‹å¤„åˆ†ã€‚</p><p>ã€€ã€€å¯¹å…šçš„ä¸­å¤®å§”å‘˜ä¼šå§”å‘˜ã€å€™è¡¥å§”å‘˜ï¼Œç»™ä»¥è­¦å‘Šã€ä¸¥é‡è­¦å‘Šå¤„åˆ†ï¼Œç”±ä¸­å¤®çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šå¸¸åŠ¡å§”å‘˜ä¼šå®¡è®®åï¼ŒæŠ¥å…šä¸­å¤®æ‰¹å‡†ã€‚å¯¹åœ°æ–¹å„çº§å…šçš„å§”å‘˜ä¼šå§”å‘˜ã€å€™è¡¥å§”å‘˜ï¼Œç»™ä»¥è­¦å‘Šã€ä¸¥é‡è­¦å‘Šå¤„åˆ†ï¼Œåº”ç”±ä¸Šä¸€çº§çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šæ‰¹å‡†ï¼Œå¹¶æŠ¥å®ƒçš„åŒçº§å…šçš„å§”å‘˜ä¼šå¤‡æ¡ˆã€‚</p><p>ã€€ã€€å¯¹å…šçš„ä¸­å¤®å§”å‘˜ä¼šå’Œåœ°æ–¹å„çº§å§”å‘˜ä¼šçš„å§”å‘˜ã€å€™è¡¥å§”å‘˜ï¼Œç»™ä»¥æ’¤é”€å…šå†…èŒåŠ¡ã€ç•™å…šå¯Ÿçœ‹æˆ–å¼€é™¤å…šç±çš„å¤„åˆ†ï¼Œå¿…é¡»ç”±æœ¬äººæ‰€åœ¨çš„å§”å‘˜ä¼šå…¨ä½“ä¼šè®®ä¸‰åˆ†ä¹‹äºŒä»¥ä¸Šçš„å¤šæ•°å†³å®šã€‚åœ¨å…¨ä½“ä¼šè®®é—­ä¼šæœŸé—´ï¼Œå¯ä»¥å…ˆç”±ä¸­å¤®æ”¿æ²»å±€å’Œåœ°æ–¹å„çº§å§”å‘˜ä¼šå¸¸åŠ¡å§”å‘˜ä¼šä½œå‡ºå¤„ç†å†³å®šï¼Œå¾…å¬å¼€å§”å‘˜ä¼šå…¨ä½“ä¼šè®®æ—¶äºˆä»¥è¿½è®¤ã€‚å¯¹åœ°æ–¹å„çº§å§”å‘˜ä¼šå§”å‘˜å’Œå€™è¡¥å§”å‘˜çš„ä¸Šè¿°å¤„åˆ†ï¼Œå¿…é¡»ç»è¿‡ä¸Šçº§çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šå¸¸åŠ¡å§”å‘˜ä¼šå®¡è®®ï¼Œç”±è¿™ä¸€çº§çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šæŠ¥åŒçº§å…šçš„å§”å‘˜ä¼šæ‰¹å‡†ã€‚</p><p>ã€€ã€€ä¸¥é‡è§¦çŠ¯åˆ‘å¾‹çš„ä¸­å¤®å§”å‘˜ä¼šå§”å‘˜ã€å€™è¡¥å§”å‘˜ï¼Œç”±ä¸­å¤®æ”¿æ²»å±€å†³å®šå¼€é™¤å…¶å…šç±ï¼›ä¸¥é‡è§¦çŠ¯åˆ‘å¾‹çš„åœ°æ–¹å„çº§å§”å‘˜ä¼šå§”å‘˜ã€å€™è¡¥å§”å‘˜ï¼Œç”±åŒçº§å§”å‘˜ä¼šå¸¸åŠ¡å§”å‘˜ä¼šå†³å®šå¼€é™¤å…¶å…šç±ã€‚</p><p>ã€€ã€€ç¬¬å››åä¸‰æ¡ã€€å…šç»„ç»‡å¯¹å…šå‘˜ä½œå‡ºå¤„åˆ†å†³å®šï¼Œåº”å½“å®äº‹æ±‚æ˜¯åœ°æŸ¥æ¸…äº‹å®ã€‚å¤„åˆ†å†³å®šæ‰€ä¾æ®çš„äº‹å®ææ–™å’Œå¤„åˆ†å†³å®šå¿…é¡»åŒæœ¬äººè§é¢ï¼Œå¬å–æœ¬äººè¯´æ˜æƒ…å†µå’Œç”³è¾©ã€‚å¦‚æœæœ¬äººå¯¹å¤„åˆ†å†³å®šä¸æœï¼Œå¯ä»¥æå‡ºç”³è¯‰ï¼Œæœ‰å…³å…šç»„ç»‡å¿…é¡»è´Ÿè´£å¤„ç†æˆ–è€…è¿…é€Ÿè½¬é€’ï¼Œä¸å¾—æ‰£å‹ã€‚å¯¹äºç¡®å±åšæŒé”™è¯¯æ„è§å’Œæ— ç†è¦æ±‚çš„äººï¼Œè¦ç»™ä»¥æ‰¹è¯„æ•™è‚²ã€‚</p><p>ã€€ã€€ç¬¬å››åå››æ¡ã€€å…šç»„ç»‡å¦‚æœåœ¨ç»´æŠ¤å…šçš„çºªå¾‹æ–¹é¢å¤±èŒï¼Œå¿…é¡»é—®è´£ã€‚</p><p>ã€€ã€€å¯¹äºä¸¥é‡è¿çŠ¯å…šçš„çºªå¾‹ã€æœ¬èº«åˆä¸èƒ½çº æ­£çš„å…šç»„ç»‡ï¼Œä¸Šä¸€çº§å…šçš„å§”å‘˜ä¼šåœ¨æŸ¥æ˜æ ¸å®åï¼Œåº”æ ¹æ®æƒ…èŠ‚ä¸¥é‡çš„ç¨‹åº¦ï¼Œä½œå‡ºè¿›è¡Œæ”¹ç»„æˆ–äºˆä»¥è§£æ•£çš„å†³å®šï¼Œå¹¶æŠ¥å†ä¸Šä¸€çº§å…šçš„å§”å‘˜ä¼šå®¡æŸ¥æ‰¹å‡†ï¼Œæ­£å¼å®£å¸ƒæ‰§è¡Œã€‚</p><h2 id="ç¬¬å…«ç« -å…šçš„çºªå¾‹æ£€æŸ¥æœºå…³"><a href="#ç¬¬å…«ç« -å…šçš„çºªå¾‹æ£€æŸ¥æœºå…³" class="headerlink" title="ç¬¬å…«ç« ã€€å…šçš„çºªå¾‹æ£€æŸ¥æœºå…³"></a>ç¬¬å…«ç« ã€€å…šçš„çºªå¾‹æ£€æŸ¥æœºå…³</h2><p>ã€€ã€€ç¬¬å››åäº”æ¡ã€€å…šçš„ä¸­å¤®çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šåœ¨å…šçš„ä¸­å¤®å§”å‘˜ä¼šé¢†å¯¼ä¸‹è¿›è¡Œå·¥ä½œã€‚å…šçš„åœ°æ–¹å„çº§çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šå’ŒåŸºå±‚çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šåœ¨åŒçº§å…šçš„å§”å‘˜ä¼šå’Œä¸Šçº§çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šåŒé‡é¢†å¯¼ä¸‹è¿›è¡Œå·¥ä½œã€‚ä¸Šçº§å…šçš„çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šåŠ å¼ºå¯¹ä¸‹çº§çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šçš„é¢†å¯¼ã€‚</p><p>ã€€ã€€å…šçš„å„çº§çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šæ¯å±Šä»»æœŸå’ŒåŒçº§å…šçš„å§”å‘˜ä¼šç›¸åŒã€‚</p><p>ã€€ã€€å…šçš„ä¸­å¤®çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šå…¨ä½“ä¼šè®®ï¼Œé€‰ä¸¾å¸¸åŠ¡å§”å‘˜ä¼šå’Œä¹¦è®°ã€å‰¯ä¹¦è®°ï¼Œå¹¶æŠ¥å…šçš„ä¸­å¤®å§”å‘˜ä¼šæ‰¹å‡†ã€‚å…šçš„åœ°æ–¹å„çº§çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šå…¨ä½“ä¼šè®®ï¼Œé€‰ä¸¾å¸¸åŠ¡å§”å‘˜ä¼šå’Œä¹¦è®°ã€å‰¯ä¹¦è®°ï¼Œå¹¶ç”±åŒçº§å…šçš„å§”å‘˜ä¼šé€šè¿‡ï¼ŒæŠ¥ä¸Šçº§å…šçš„å§”å‘˜ä¼šæ‰¹å‡†ã€‚å…šçš„åŸºå±‚å§”å‘˜ä¼šæ˜¯è®¾ç«‹çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šï¼Œè¿˜æ˜¯è®¾ç«‹çºªå¾‹æ£€æŸ¥å§”å‘˜ï¼Œç”±å®ƒçš„ä¸Šä¸€çº§å…šç»„ç»‡æ ¹æ®å…·ä½“æƒ…å†µå†³å®šã€‚å…šçš„æ€»æ”¯éƒ¨å§”å‘˜ä¼šå’Œæ”¯éƒ¨å§”å‘˜ä¼šè®¾çºªå¾‹æ£€æŸ¥å§”å‘˜ã€‚</p><p>ã€€ã€€å…šçš„ä¸­å¤®å’Œåœ°æ–¹çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šå‘åŒçº§å…šå’Œå›½å®¶æœºå…³å…¨é¢æ´¾é©»å…šçš„çºªå¾‹æ£€æŸ¥ç»„ï¼ŒæŒ‰ç…§è§„å®šå‘æœ‰å…³å›½æœ‰ä¼ä¸šã€äº‹ä¸šå•ä½æ´¾é©»å…šçš„çºªå¾‹æ£€æŸ¥ç»„ã€‚çºªå¾‹æ£€æŸ¥ç»„ç»„é•¿å‚åŠ é©»åœ¨å•ä½å…šçš„é¢†å¯¼ç»„ç»‡çš„æœ‰å…³ä¼šè®®ã€‚ä»–ä»¬çš„å·¥ä½œå¿…é¡»å—åˆ°è¯¥å•ä½å…šçš„é¢†å¯¼ç»„ç»‡çš„æ”¯æŒã€‚</p><p>ã€€ã€€ç¬¬å››åå…­æ¡ã€€å…šçš„å„çº§çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šæ˜¯å…šå†…ç›‘ç£ä¸“è´£æœºå…³ï¼Œä¸»è¦ä»»åŠ¡æ˜¯ï¼šç»´æŠ¤å…šçš„ç« ç¨‹å’Œå…¶ä»–å…šå†…æ³•è§„ï¼Œæ£€æŸ¥å…šçš„è·¯çº¿ã€æ–¹é’ˆã€æ”¿ç­–å’Œå†³è®®çš„æ‰§è¡Œæƒ…å†µï¼ŒååŠ©å…šçš„å§”å‘˜ä¼šæ¨è¿›å…¨é¢ä»ä¸¥æ²»å…šã€åŠ å¼ºå…šé£å»ºè®¾å’Œç»„ç»‡åè°ƒåè…è´¥å·¥ä½œï¼Œæ¨åŠ¨å®Œå–„å…šå’Œå›½å®¶ç›‘ç£ä½“ç³»ã€‚</p><p>ã€€ã€€å…šçš„å„çº§çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šçš„èŒè´£æ˜¯ç›‘ç£ã€æ‰§çºªã€é—®è´£ï¼Œè¦ç»å¸¸å¯¹å…šå‘˜è¿›è¡Œéµå®ˆçºªå¾‹çš„æ•™è‚²ï¼Œä½œå‡ºå…³äºç»´æŠ¤å…šçºªçš„å†³å®šï¼›å¯¹å…šçš„ç»„ç»‡å’Œå…šå‘˜é¢†å¯¼å¹²éƒ¨å±¥è¡ŒèŒè´£ã€è¡Œä½¿æƒåŠ›è¿›è¡Œç›‘ç£ï¼Œå—ç†å¤„ç½®å…šå‘˜ç¾¤ä¼—æ£€ä¸¾ä¸¾æŠ¥ï¼Œå¼€å±•è°ˆè¯æé†’ã€çº¦è°ˆå‡½è¯¢ï¼›æ£€æŸ¥å’Œå¤„ç†å…šçš„ç»„ç»‡å’Œå…šå‘˜è¿åå…šçš„ç« ç¨‹å’Œå…¶ä»–å…šå†…æ³•è§„çš„æ¯”è¾ƒé‡è¦æˆ–å¤æ‚çš„æ¡ˆä»¶ï¼Œå†³å®šæˆ–å–æ¶ˆå¯¹è¿™äº›æ¡ˆä»¶ä¸­çš„å…šå‘˜çš„å¤„åˆ†ï¼›è¿›è¡Œé—®è´£æˆ–æå‡ºè´£ä»»è¿½ç©¶çš„å»ºè®®ï¼›å—ç†å…šå‘˜çš„æ§å‘Šå’Œç”³è¯‰ï¼›ä¿éšœå…šå‘˜çš„æƒåˆ©ã€‚</p><p>ã€€ã€€å„çº§çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šè¦æŠŠå¤„ç†ç‰¹åˆ«é‡è¦æˆ–å¤æ‚çš„æ¡ˆä»¶ä¸­çš„é—®é¢˜å’Œå¤„ç†çš„ç»“æœï¼Œå‘åŒçº§å…šçš„å§”å‘˜ä¼šæŠ¥å‘Šã€‚å…šçš„åœ°æ–¹å„çº§çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šå’ŒåŸºå±‚çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šè¦åŒæ—¶å‘ä¸Šçº§çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šæŠ¥å‘Šã€‚</p><p>ã€€ã€€å„çº§çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šå‘ç°åŒçº§å…šçš„å§”å‘˜ä¼šå§”å‘˜æœ‰è¿çŠ¯å…šçš„çºªå¾‹çš„è¡Œä¸ºï¼Œå¯ä»¥å…ˆè¿›è¡Œåˆæ­¥æ ¸å®ï¼Œå¦‚æœéœ€è¦ç«‹æ¡ˆæ£€æŸ¥çš„ï¼Œåº”å½“åœ¨å‘åŒçº§å…šçš„å§”å‘˜ä¼šæŠ¥å‘Šçš„åŒæ—¶å‘ä¸Šä¸€çº§çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šæŠ¥å‘Šï¼›æ¶‰åŠå¸¸åŠ¡å§”å‘˜çš„ï¼ŒæŠ¥å‘Šä¸Šä¸€çº§çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šï¼Œç”±ä¸Šä¸€çº§çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šè¿›è¡Œåˆæ­¥æ ¸å®ï¼Œéœ€è¦å®¡æŸ¥çš„ï¼Œç”±ä¸Šä¸€çº§çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šæŠ¥å®ƒçš„åŒçº§å…šçš„å§”å‘˜ä¼šæ‰¹å‡†ã€‚</p><p>ã€€ã€€ç¬¬å››åä¸ƒæ¡ã€€ä¸Šçº§çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šæœ‰æƒæ£€æŸ¥ä¸‹çº§çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šçš„å·¥ä½œï¼Œå¹¶ä¸”æœ‰æƒæ‰¹å‡†å’Œæ”¹å˜ä¸‹çº§çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šå¯¹äºæ¡ˆä»¶æ‰€ä½œçš„å†³å®šã€‚å¦‚æœæ‰€è¦æ”¹å˜çš„è¯¥ä¸‹çº§çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šçš„å†³å®šï¼Œå·²ç»å¾—åˆ°å®ƒçš„åŒçº§å…šçš„å§”å‘˜ä¼šçš„æ‰¹å‡†ï¼Œè¿™ç§æ”¹å˜å¿…é¡»ç»è¿‡å®ƒçš„ä¸Šä¸€çº§å…šçš„å§”å‘˜ä¼šæ‰¹å‡†ã€‚</p><p>ã€€ã€€å…šçš„åœ°æ–¹å„çº§çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šå’ŒåŸºå±‚çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šå¦‚æœå¯¹åŒçº§å…šçš„å§”å‘˜ä¼šå¤„ç†æ¡ˆä»¶çš„å†³å®šæœ‰ä¸åŒæ„è§ï¼Œå¯ä»¥è¯·æ±‚ä¸Šä¸€çº§çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šäºˆä»¥å¤æŸ¥ï¼›å¦‚æœå‘ç°åŒçº§å…šçš„å§”å‘˜ä¼šæˆ–å®ƒçš„æˆå‘˜æœ‰è¿çŠ¯å…šçš„çºªå¾‹çš„æƒ…å†µï¼Œåœ¨åŒçº§å…šçš„å§”å‘˜ä¼šä¸ç»™äºˆè§£å†³æˆ–ä¸ç»™äºˆæ­£ç¡®è§£å†³çš„æ—¶å€™ï¼Œæœ‰æƒå‘ä¸Šçº§çºªå¾‹æ£€æŸ¥å§”å‘˜ä¼šæå‡ºç”³è¯‰ï¼Œè¯·æ±‚ååŠ©å¤„ç†ã€‚</p><h2 id="ç¬¬ä¹ç« -å…š-ç»„"><a href="#ç¬¬ä¹ç« -å…š-ç»„" class="headerlink" title="ç¬¬ä¹ç« ã€€å…šã€€ç»„"></a>ç¬¬ä¹ç« ã€€å…šã€€ç»„</h2><p>ã€€ã€€ç¬¬å››åå…«æ¡ã€€åœ¨ä¸­å¤®å’Œåœ°æ–¹å›½å®¶æœºå…³ã€äººæ°‘å›¢ä½“ã€ç»æµç»„ç»‡ã€æ–‡åŒ–ç»„ç»‡å’Œå…¶ä»–éå…šç»„ç»‡çš„é¢†å¯¼æœºå…³ä¸­ï¼Œå¯ä»¥æˆç«‹å…šç»„ã€‚å…šç»„å‘æŒ¥é¢†å¯¼ä½œç”¨ã€‚å…šç»„çš„ä»»åŠ¡ï¼Œä¸»è¦æ˜¯è´Ÿè´£è´¯å½»æ‰§è¡Œå…šçš„è·¯çº¿ã€æ–¹é’ˆã€æ”¿ç­–ï¼›åŠ å¼ºå¯¹æœ¬å•ä½å…šçš„å»ºè®¾çš„é¢†å¯¼ï¼Œå±¥è¡Œå…¨é¢ä»ä¸¥æ²»å…šè´£ä»»ï¼›è®¨è®ºå’Œå†³å®šæœ¬å•ä½çš„é‡å¤§é—®é¢˜ï¼›åšå¥½å¹²éƒ¨ç®¡ç†å·¥ä½œï¼›è®¨è®ºå’Œå†³å®šåŸºå±‚å…šç»„ç»‡è®¾ç½®è°ƒæ•´å’Œå‘å±•å…šå‘˜ã€å¤„åˆ†å…šå‘˜ç­‰é‡è¦äº‹é¡¹ï¼›å›¢ç»“å…šå¤–å¹²éƒ¨å’Œç¾¤ä¼—ï¼Œå®Œæˆå…šå’Œå›½å®¶äº¤ç»™çš„ä»»åŠ¡ï¼›é¢†å¯¼æœºå…³å’Œç›´å±å•ä½å…šç»„ç»‡çš„å·¥ä½œã€‚</p><p>ã€€ã€€ç¬¬å››åä¹æ¡ã€€å…šç»„çš„æˆå‘˜ï¼Œç”±æ‰¹å‡†æˆç«‹å…šç»„çš„å…šç»„ç»‡å†³å®šã€‚å…šç»„è®¾ä¹¦è®°ï¼Œå¿…è¦æ—¶è¿˜å¯ä»¥è®¾å‰¯ä¹¦è®°ã€‚</p><p>ã€€ã€€å…šç»„å¿…é¡»æœä»æ‰¹å‡†å®ƒæˆç«‹çš„å…šç»„ç»‡é¢†å¯¼ã€‚</p><p>ã€€ã€€ç¬¬äº”åæ¡ã€€åœ¨å¯¹ä¸‹å±å•ä½å®è¡Œé›†ä¸­ç»Ÿä¸€é¢†å¯¼çš„å›½å®¶å·¥ä½œéƒ¨é—¨å’Œæœ‰å…³å•ä½çš„é¢†å¯¼æœºå…³ä¸­ï¼Œå¯ä»¥å»ºç«‹å…šå§”ï¼Œå…šå§”çš„äº§ç”ŸåŠæ³•ã€èŒæƒå’Œå·¥ä½œä»»åŠ¡ï¼Œç”±ä¸­å¤®å¦è¡Œè§„å®šã€‚</p><h2 id="x3D-x3D-ç¬¬åç« -å…šå’Œå…±äº§ä¸»ä¹‰é’å¹´å›¢çš„å…³ç³»-x3D-x3D"><a href="#x3D-x3D-ç¬¬åç« -å…šå’Œå…±äº§ä¸»ä¹‰é’å¹´å›¢çš„å…³ç³»-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;ç¬¬åç« ã€€å…šå’Œå…±äº§ä¸»ä¹‰é’å¹´å›¢çš„å…³ç³»&#x3D;&#x3D;"></a>&#x3D;&#x3D;ç¬¬åç« ã€€å…šå’Œå…±äº§ä¸»ä¹‰é’å¹´å›¢çš„å…³ç³»&#x3D;&#x3D;</h2><p>ã€€ã€€ç¬¬äº”åä¸€æ¡ã€€ä¸­å›½å…±äº§ä¸»ä¹‰é’å¹´å›¢æ˜¯ä¸­å›½å…±äº§å…šé¢†å¯¼çš„å…ˆè¿›é’å¹´çš„ç¾¤å›¢ç»„ç»‡ï¼Œæ˜¯å¹¿å¤§é’å¹´åœ¨å®è·µä¸­å­¦ä¹ ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰å’Œå…±äº§ä¸»ä¹‰çš„å­¦æ ¡ï¼Œæ˜¯å…šçš„åŠ©æ‰‹å’Œåå¤‡å†›ã€‚å…±é’å›¢ä¸­å¤®å§”å‘˜ä¼šå—å…šä¸­å¤®å§”å‘˜ä¼šé¢†å¯¼ã€‚å…±é’å›¢çš„åœ°æ–¹å„çº§ç»„ç»‡å—åŒçº§å…šçš„å§”å‘˜ä¼šé¢†å¯¼ï¼ŒåŒæ—¶å—å…±é’å›¢ä¸Šçº§ç»„ç»‡é¢†å¯¼ã€‚</p><p>ã€€ã€€ç¬¬äº”åäºŒæ¡ã€€å…šçš„å„çº§å§”å‘˜ä¼šè¦åŠ å¼ºå¯¹å…±é’å›¢çš„é¢†å¯¼ï¼Œæ³¨æ„å›¢çš„å¹²éƒ¨çš„é€‰æ‹”å’ŒåŸ¹è®­ã€‚å…šè¦åšå†³æ”¯æŒå…±é’å›¢æ ¹æ®å¹¿å¤§é’å¹´çš„ç‰¹ç‚¹å’Œéœ€è¦ï¼Œç”ŸåŠ¨æ´»æ³¼åœ°ã€å¯Œäºåˆ›é€ æ€§åœ°è¿›è¡Œå·¥ä½œï¼Œå……åˆ†å‘æŒ¥å›¢çš„çªå‡»é˜Ÿä½œç”¨å’Œè”ç³»å¹¿å¤§é’å¹´çš„æ¡¥æ¢ä½œç”¨ã€‚</p><p>ã€€ã€€å›¢çš„å¿çº§å’Œå¿çº§ä»¥ä¸‹å„çº§å§”å‘˜ä¼šä¹¦è®°ï¼Œä¼ä¸šäº‹ä¸šå•ä½çš„å›¢å§”å‘˜ä¼šä¹¦è®°ï¼Œæ˜¯å…šå‘˜çš„ï¼Œå¯ä»¥åˆ—å¸­åŒçº§å…šçš„å§”å‘˜ä¼šå’Œå¸¸åŠ¡å§”å‘˜ä¼šçš„ä¼šè®®ã€‚</p><h2 id="x3D-x3D-ç¬¬åä¸€ç« -å…šå¾½å…šæ——-x3D-x3D"><a href="#x3D-x3D-ç¬¬åä¸€ç« -å…šå¾½å…šæ——-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;ç¬¬åä¸€ç« ã€€å…šå¾½å…šæ——&#x3D;&#x3D;"></a>&#x3D;&#x3D;ç¬¬åä¸€ç« ã€€å…šå¾½å…šæ——&#x3D;&#x3D;</h2><p>ã€€ã€€ç¬¬äº”åä¸‰æ¡ã€€ä¸­å›½å…±äº§å…šå…šå¾½ä¸ºé•°åˆ€å’Œé”¤å¤´ç»„æˆçš„å›¾æ¡ˆã€‚</p><p>ã€€ã€€ç¬¬äº”åå››æ¡ã€€ä¸­å›½å…±äº§å…šå…šæ——ä¸ºæ——é¢ç¼€æœ‰é‡‘é»„è‰²å…šå¾½å›¾æ¡ˆçš„çº¢æ——ã€‚</p><p>ã€€ã€€ç¬¬äº”åäº”æ¡ã€€ä¸­å›½å…±äº§å…šçš„å…šå¾½å…šæ——æ˜¯ä¸­å›½å…±äº§å…šçš„è±¡å¾å’Œæ ‡å¿—ã€‚å…šçš„å„çº§ç»„ç»‡å’Œæ¯ä¸€ä¸ªå…šå‘˜éƒ½è¦ç»´æŠ¤å…šå¾½å…šæ——çš„å°Šä¸¥ã€‚è¦æŒ‰ç…§è§„å®šåˆ¶ä½œå’Œä½¿ç”¨å…šå¾½å…šæ——ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>å…š</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å…š</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>gitå¸¸ç”¨æ“ä½œ</title>
    <link href="/blog/2022/11/09/git/"/>
    <url>/blog/2022/11/09/git/</url>
    
    <content type="html"><![CDATA[<h1 id="gitå¸¸ç”¨æ“ä½œ"><a href="#gitå¸¸ç”¨æ“ä½œ" class="headerlink" title="gitå¸¸ç”¨æ“ä½œ"></a>gitå¸¸ç”¨æ“ä½œ</h1><p><img src="https://cdn.jsdelivr.net/gh/Yoonalis/img@master/blog/1391668002121_.pic-20221109%2022:00:14.jpg" alt="1391668002121_.pic"></p><h3 id="1-gité…ç½®"><a href="#1-gité…ç½®" class="headerlink" title="1 gité…ç½®"></a>1 gité…ç½®</h3><ol><li>å®‰è£…Gitï¼š<a href="https://link.zhihu.com/?target=https://git-scm.com/">https://git-scm.com/</a></li><li>æœ¬åœ°å‘½ä»¤è¡Œç”Ÿæˆå¯†é’¥ç»‘å®šGitHubè´¦å·</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># è¾“å…¥å‘½ä»¤ç”Ÿæˆå¯†é’¥å¯¹ï¼Œæ›¿æ¢æˆè‡ªå·±é‚®ç®±ï¼Œç„¶åä¸€è·¯å›è½¦</span><br>ssh-keygen -t rsa -C <span class="hljs-string">&quot;youremail@example.com&quot;</span><br><br><span class="hljs-comment"># å°†ç”Ÿæˆçš„å…¬é’¥æ‰“å°å‡ºæ¥å¤åˆ¶ï¼Œå°†è¿™ä¸²æ–‡æœ¬å¤åˆ¶ç²˜è´´åˆ°GitHubçš„Setting-&gt;SSH and GPG keysä¸­</span><br><span class="hljs-built_in">cat</span> ~/.ssh/id_rsa.pub<br><br><span class="hljs-comment"># è¾“å…¥å‘½ä»¤æ£€æŸ¥æ˜¯å¦ç»‘å®šæˆåŠŸ,è¾“å…¥yesåï¼Œå¦‚æœå‡ºç°Hi,xxx!åˆ™ç»‘å®šæˆåŠŸ</span><br>ssh -T git@github.com<br></code></pre></td></tr></table></figure><p>\3. é…ç½®ç”¨æˆ·åå’Œé‚®ç®±ä¿¡æ¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æŸ¥çœ‹é…ç½®ä¿¡æ¯ï¼Œä¸€å¼€å§‹ä¸ºç©º</span><br>git config --list<br><br><span class="hljs-comment"># å…¨å±€é…ç½®ï¼Œå¯¹æ‰€æœ‰ä»£ç åº“ç”Ÿæ•ˆ</span><br>git config --global user.name <span class="hljs-string">&quot;ä½ çš„åå­—&quot;</span><br>git config --global user.email <span class="hljs-string">&quot;ä½ çš„é‚®ç®±&quot;</span><br><br><br><span class="hljs-comment"># å±€éƒ¨é…ç½®ï¼Œåªå¯¹å½“å‰çš„ä»£ç åº“æœ‰æ•ˆ</span><br>git config --<span class="hljs-built_in">local</span> user.name <span class="hljs-string">&quot;ä½ çš„åå­—&quot;</span><br>git config --<span class="hljs-built_in">local</span> user.email <span class="hljs-string">&quot;ä½ çš„é‚®ç®±&quot;</span><br><br><span class="hljs-comment"># é…ç½®åï¼Œè¿œç¨‹ä»“åº“æäº¤çš„commité‡Œå¯¹åº”çš„ç”¨æˆ·å³ä¸º user.name</span><br></code></pre></td></tr></table></figure><h3 id="2-gitåŸºæœ¬æ¦‚å¿µ"><a href="#2-gitåŸºæœ¬æ¦‚å¿µ" class="headerlink" title="2 gitåŸºæœ¬æ¦‚å¿µ"></a>2 gitåŸºæœ¬æ¦‚å¿µ</h3><ol><li>æœ¬åœ°ä»“åº“ï¼šæœ¬åœ°ä»“åº“ä¸Šå­˜æ”¾æ‰€æœ‰ç›¸å…³çš„æ–‡ä»¶ï¼Œå…·ä½“å¯åˆ†ä¸ºå·¥ä½œåŒºã€æš‚å­˜åŒºå’Œä»“åº“åŒºï¼Œå·¥ä½œåŒºå³é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹ä¸åŒ…å«<code>.git</code>æ–‡ä»¶å¤¹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œæš‚å­˜åŒºå’Œä»“åº“åŒºåˆ™åœ¨<code>.git</code>æ–‡ä»¶å¤¹ä¸‹</li><li>å·¥ä½œåŒºï¼šå³æˆ‘ä»¬å·¥ä½œçš„æ–‡ä»¶å¤¹ï¼Œåœ¨é‡Œé¢è¿›è¡Œæ–‡ä»¶çš„å¢åˆ æ”¹æ“ä½œ</li><li>æš‚å­˜åŒºï¼šä¸´æ—¶ä¿å­˜å·¥ä½œåŒºä¸Šçš„æ”¹åŠ¨ï¼Œé€šè¿‡<code>git add</code>æ“ä½œå°†å·¥ä½œåŒºçš„ä¿®æ”¹åŒæ­¥åˆ°æš‚å­˜åŒº</li><li>ä»“åº“åŒºï¼šå½“æ‰§è¡Œ<code>git commit</code>æ“ä½œæ—¶ï¼Œå°†æš‚å­˜åŒºä¸Šçš„æ‰€æœ‰å˜åŠ¨åŒæ­¥åˆ°æœ¬åœ°ä»“åº“</li><li>è¿œç¨‹ä»“åº“ï¼šGitHub&#x2F;GitLabä¸Šä¿å­˜çš„ä»“åº“ï¼Œé€šè¿‡<code>git push</code>å°†æœ¬åœ°ä»“åº“åŒæ­¥åˆ°è¿œç¨‹ä»“åº“ï¼Œä¹Ÿå¯ä»¥é€šè¿‡<code>git fetch/pull</code>å°†è¿œç¨‹ä»“åº“åŒæ­¥åˆ°æœ¬åœ°ä»“åº“</li></ol><p><img src="https://cdn.jsdelivr.net/gh/Yoonalis/img@master/blog/1411668002121_.pic-20221109%2022:00:35.jpg" alt="1411668002121_.pic"></p><h3 id="3-gitåŸºæœ¬æ“ä½œ"><a href="#3-gitåŸºæœ¬æ“ä½œ" class="headerlink" title="3 gitåŸºæœ¬æ“ä½œ"></a>3 gitåŸºæœ¬æ“ä½œ</h3><p><strong>åˆ›å»ºç‰ˆæœ¬åº“</strong></p><p>åˆ›å»ºç‰ˆæœ¬åº“æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯å°†æœ¬åœ°çš„æ–‡ä»¶å¤¹ç›´æ¥å˜æˆä¸€ä¸ªgitä»“åº“ï¼Œå¦ä¸€ç§æ˜¯ç›´æ¥å°†è¿œç¨‹çš„ä»“åº“å…‹éš†åˆ°æœ¬åœ°</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">git init <span class="hljs-comment"># å°†æœ¬åœ°æ–‡ä»¶å¤¹å˜ä¸ºä¸€ä¸ªgitä»“åº“</span><br>git <span class="hljs-built_in">clone</span> &lt;url&gt; <span class="hljs-comment">#å°†è¿œç¨‹ä»“åº“å…‹éš†åˆ°æœ¬åœ°</span><br></code></pre></td></tr></table></figure><p><strong>ä¿®æ”¹ä¸æäº¤æ“ä½œ</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">git add &lt;file&gt; <span class="hljs-comment"># å°†å•ä¸ªæ–‡ä»¶ä»å·¥ä½œåŒºæ·»åŠ åˆ°æš‚å­˜åŒº</span><br>git add . <span class="hljs-comment"># å°†æ‰€æœ‰æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº</span><br>git commit -m <span class="hljs-string">&quot;messenge&quot;</span> <span class="hljs-comment"># å°†æš‚å­˜åŒºæ–‡ä»¶æäº¤åˆ°æœ¬åœ°ä»“åº“</span><br>git status <span class="hljs-comment"># æŸ¥çœ‹å·¥ä½œåŒºçŠ¶æ€ï¼Œæ˜¾ç¤ºæœ‰å˜æ›´çš„æ–‡ä»¶ã€‚</span><br>git diff <span class="hljs-comment"># æ¯”è¾ƒæ–‡ä»¶çš„ä¸åŒï¼Œå³æš‚å­˜åŒºå’Œå·¥ä½œåŒºçš„å·®å¼‚ã€‚</span><br></code></pre></td></tr></table></figure><p><strong>è¿œç¨‹æ“ä½œ</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">git push origin master <span class="hljs-comment"># å°†æœ¬åœ°çš„masteråˆ†æ”¯æ¨é€åˆ°è¿œç¨‹å¯¹åº”çš„åˆ†æ”¯</span><br>git pull  <span class="hljs-comment"># ä¸‹è½½è¿œç¨‹ä»£ç å¹¶åˆå¹¶ï¼Œç›¸å½“äºgit fetch + git pull</span><br>git fetch   <span class="hljs-comment"># ä»è¿œç¨‹è·å–ä»£ç åº“ï¼Œä½†ä¸è¿›è¡Œåˆå¹¶æ“ä½œ</span><br><br>git remote add origin &lt;url&gt; <span class="hljs-comment"># å°†è¿œç¨‹ä»“åº“ä¸æœ¬åœ°ä»“åº“å…³è”èµ·æ¥</span><br>git remote -v <span class="hljs-comment"># æŸ¥çœ‹è¿œç¨‹åº“ä¿¡æ¯</span><br></code></pre></td></tr></table></figure><p><strong>æ’¤é”€ä¸å›é€€æ“ä½œ</strong></p><p>æ’¤é”€æ“ä½œï¼šå½“ä¿®æ”¹äº†å·¥ä½œåŒº&#x2F;æš‚å­˜åŒºçš„æ–‡ä»¶ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰commitæ—¶ï¼Œæƒ³è¦æ’¤é”€ä¹‹å‰çš„æ“ä½œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># åœºæ™¯1ï¼šå½“ä½ æ”¹ä¹±äº†å·¥ä½œåŒºæŸä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œä½†è¿˜æ²¡æœ‰addåˆ°æš‚å­˜åŒº</span><br>git checkout &lt;file&gt; <span class="hljs-comment"># æ’¤é”€å·¥ä½œåŒºçš„æŸä¸ªæ–‡ä»¶åˆ°å’Œæš‚å­˜åŒºä¸€æ ·çš„çŠ¶æ€</span><br><br><span class="hljs-comment"># åœºæ™¯2ï¼šå½“ä¹±æ”¹äº†å·¥ä½œåŒºæŸä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œå¹¶ä¸”git addåˆ°äº†æš‚å­˜åŒº</span><br>git reset HEAD &lt;file&gt; <span class="hljs-comment"># ç¬¬1æ­¥ï¼Œå°†æš‚å­˜åŒºçš„æ–‡ä»¶ä¿®æ”¹æ’¤é”€æ‰</span><br>git checkout &lt;file&gt; <span class="hljs-comment"># ç¬¬2æ­¥ï¼Œå°†å·¥ä½œåŒºçš„æ–‡ä»¶ä¿®æ”¹æ’¤é”€æ‰</span><br><br><span class="hljs-comment"># åœºæ™¯3ï¼šä¹±æ”¹äº†å¾ˆå¤šæ–‡ä»¶ï¼Œæƒ³å›åˆ°æœ€æ–°ä¸€æ¬¡æäº¤æ—¶çš„çŠ¶æ€</span><br>git reset --hard HEAD <span class="hljs-comment"># æ’¤é”€å·¥ä½œåŒºä¸­æ‰€æœ‰æœªæäº¤æ–‡ä»¶çš„ä¿®æ”¹å†…å®¹</span><br></code></pre></td></tr></table></figure><p>å›é€€æ“ä½œï¼šå½“å·²ç»è¿›è¡Œäº†commitæ“ä½œï¼Œéœ€è¦å›é€€åˆ°ä¹‹å‰çš„ç‰ˆæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">git reset --hard HEAD^ <span class="hljs-comment"># å›é€€åˆ°ä¸Šæ¬¡æäº¤çš„çŠ¶æ€</span><br>git reset --hard HEAD~n <span class="hljs-comment"># å›é€€åˆ°nä¸ªç‰ˆæœ¬å‰çš„çŠ¶æ€</span><br>git reset --hard HEAD commitid <span class="hljs-comment"># å›é€€åˆ°æŸä¸€ä¸ªcommitidçš„çŠ¶æ€</span><br>git reset --soft HEAD commitid <span class="hljs-comment"># å›é€€åˆ°æŸä¸€ä¸ªcommitidçš„çŠ¶æ€ï¼Œå¹¶ä¸”ä¿ç•™æš‚å­˜åŒºçš„å†…å®¹</span><br>git reset --mixed(é»˜è®¤) HEAD commitid <span class="hljs-comment"># å›é€€åˆ°æŸä¸€ä¸ªcommitidçš„çŠ¶æ€ï¼Œå¹¶ä¸”ä¿ç•™å·¥ä½œåŒºçš„å†…å®¹</span><br></code></pre></td></tr></table></figure><p>å…³äºresetä¸‰ç§æ¨¡å¼çš„è¯´æ˜ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Yoonalis/img@master/blog/1421668002121_.pic-20221109%2022:00:46.jpg" alt="1421668002121_.pic"></p><h3 id="4-gitåˆ†æ”¯ç®¡ç†"><a href="#4-gitåˆ†æ”¯ç®¡ç†" class="headerlink" title="4 gitåˆ†æ”¯ç®¡ç†"></a>4 gitåˆ†æ”¯ç®¡ç†</h3><p>gitçš„æœ€å¼ºå¤§ä¹‹å¤„å°±åœ¨äºåˆ†æ”¯ç®¡ç†äº†ï¼Œå…·ä½“æœ‰ä¸¤ç§åº”ç”¨åœºæ™¯ï¼š</p><ol><li>å¤šäººåä½œï¼šæ¯ä¸ªäººéƒ½åŸºäºä¸»åˆ†æ”¯åˆ›å»ºä¸€ä¸ªè‡ªå·±çš„åˆ†æ”¯ï¼Œåœ¨åˆ†æ”¯ä¸Šè¿›è¡Œå¼€å‘ï¼Œç„¶åå†ä¸æ–­å°†å†™å¥½çš„ä»£ç åˆå¹¶åˆ°ä¸»åˆ†æ”¯</li><li>è‡ªå·±ä¿®å¤bug&#x2F;å¢åŠ featureï¼šåˆ›å»ºä¸€ä¸ªbugåˆ†æ”¯æˆ–è€…featureåˆ†æ”¯ï¼Œå†™å¥½ä»£ç ååˆå¹¶åˆ°è‡ªå·±çš„åˆ†æ”¯ç„¶ååˆ é™¤bug&#x2F;featureåˆ†æ”¯</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">git branch &lt;name&gt; <span class="hljs-comment"># åˆ›å»ºåˆ†æ”¯</span><br>git checkout &lt;name&gt; <span class="hljs-comment"># åˆ‡æ¢åˆ°æŸä¸ªåˆ†æ”¯</span><br>git checkout -b &lt;name&gt; <span class="hljs-comment"># åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æ–°åˆ†æ”¯ï¼Œç›¸å½“äºåŒæ—¶æ‰§è¡Œäº†ä»¥ä¸Šä¸¤ä¸ªå‘½ä»¤</span><br>git merge &lt;name&gt; <span class="hljs-comment"># åˆå¹¶æŸä¸ªåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ä¸­ï¼Œé»˜è®¤fast forward</span><br>git branch -a <span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯</span><br>git branch -d &lt;name&gt; <span class="hljs-comment"># åˆ é™¤åˆ†æ”¯</span><br></code></pre></td></tr></table></figure><h3 id="5-gitå¤šäººåä½œ"><a href="#5-gitå¤šäººåä½œ" class="headerlink" title="5 gitå¤šäººåä½œ"></a>5 gitå¤šäººåä½œ</h3><p>å¤šäººåä½œåœ¨åŒä¸€ä¸ªåˆ†æ”¯ä¸Šè¿›è¡Œå¼€å‘çš„å·¥ä½œæ¨¡å¼ï¼š</p><ol><li>é¦–å…ˆï¼Œå¯ä»¥è¯•å›¾ç”¨<code>git push origin &lt;branch-name&gt;</code>æ¨é€è‡ªå·±çš„ä¿®æ”¹ï¼›</li><li>å¦‚æœæ¨é€å¤±è´¥ï¼Œåˆ™å› ä¸ºè¿œç¨‹åˆ†æ”¯æ¯”ä½ çš„æœ¬åœ°æ›´æ–°ï¼Œéœ€è¦å…ˆç”¨<code>git pull</code>è¯•å›¾åˆå¹¶ï¼›</li><li>å¦‚æœåˆå¹¶æœ‰å†²çªï¼Œåˆ™è§£å†³å†²çªï¼Œå¹¶åœ¨æœ¬åœ°æäº¤ï¼›</li><li>æ²¡æœ‰å†²çªæˆ–è€…è§£å†³æ‰å†²çªåï¼Œå†ç”¨<code>git push origin &lt;branch-name&gt;</code>æ¨é€å°±èƒ½æˆåŠŸï¼</li><li>å¦‚æœ<code>git pull</code>æç¤º<code>no tracking information</code>ï¼Œåˆ™è¯´æ˜æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯çš„é“¾æ¥å…³ç³»æ²¡æœ‰åˆ›å»ºï¼Œç”¨å‘½ä»¤<code>git branch --set-upstream-to &lt;branch-name&gt; origin/&lt;branch-name&gt;</code>ã€‚</li></ol><h3 id="6-gitæœåŠ¡å™¨æ­å»º"><a href="#6-gitæœåŠ¡å™¨æ­å»º" class="headerlink" title="6 gitæœåŠ¡å™¨æ­å»º"></a>6 gitæœåŠ¡å™¨æ­å»º</h3><p>è‡ªå·±æ­å»ºä¸€å° Git æœåŠ¡å™¨ä½œä¸ºç§æœ‰ä»“åº“ä½¿ç”¨ï¼Œä»¥ Centos ä¸ºä¾‹æ­å»º Git æœåŠ¡å™¨</p><p>å®‰è£…git</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cmake">yum <span class="hljs-keyword">install</span> curl-devel expat-devel gettext-devel openssl-devel zlib-devel perl-devel<br>yum <span class="hljs-keyword">install</span> git<br></code></pre></td></tr></table></figure><p>åˆ›å»ºä¸€ä¸ªgitç”¨æˆ·ç»„å’Œç”¨æˆ·ï¼Œç”¨æ¥è¿è¡ŒgitæœåŠ¡ï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">groupadd git</span><br><span class="hljs-attribute">useradd git -g git</span><br></code></pre></td></tr></table></figure><p>æ”¶é›†æ‰€æœ‰éœ€è¦ç™»å½•çš„ç”¨æˆ·çš„å…¬é’¥ï¼Œå…¬é’¥ä½äºid_rsa.pubæ–‡ä»¶ä¸­ï¼ŒæŠŠæˆ‘ä»¬çš„å…¬é’¥å¯¼å…¥åˆ°&#x2F;home&#x2F;git&#x2F;.ssh&#x2F;authorized_keysæ–‡ä»¶é‡Œï¼Œä¸€è¡Œä¸€ä¸ªã€‚</p><p>å¦‚æœæ²¡æœ‰è¯¥æ–‡ä»¶åˆ›å»ºå®ƒï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> /home/git/<br><span class="hljs-built_in">mkdir</span> .ssh<br><span class="hljs-built_in">chmod</span> 755 .ssh<br><span class="hljs-built_in">touch</span> .ssh/authorized_keys<br><span class="hljs-built_in">chmod</span> 644 .ssh/authorized_keys<br></code></pre></td></tr></table></figure><p>é¦–å…ˆæˆ‘ä»¬é€‰å®šä¸€ä¸ªç›®å½•ä½œä¸ºGitä»“åº“ï¼Œå‡å®šæ˜¯&#x2F;home&#x2F;gitrepo&#x2F;runoob.gitï¼Œåœ¨&#x2F;home&#x2F;gitrepoç›®å½•ä¸‹è¾“å…¥å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">cd</span> /home</span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">mkdir</span> gitrepo</span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">chown</span> git:git gitrepo/</span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">cd</span> gitrepo</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash">git init --bare runoob.git</span><br>Initialized empty Git repository in /home/gitrepo/runoob.git/<br></code></pre></td></tr></table></figure><p>ä»¥ä¸Šå‘½ä»¤Gitåˆ›å»ºä¸€ä¸ªç©ºä»“åº“ï¼ŒæœåŠ¡å™¨ä¸Šçš„Gitä»“åº“é€šå¸¸éƒ½ä»¥.gitç»“å°¾ã€‚ç„¶åï¼ŒæŠŠä»“åº“æ‰€å±ç”¨æˆ·æ”¹ä¸ºgitï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">chown</span> -R git:git runoob.git</span><br></code></pre></td></tr></table></figure><p>å…‹éš†ä»“åº“</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>git clone git<span class="hljs-variable">@192</span>.<span class="hljs-number">168.45</span>.<span class="hljs-number">4</span><span class="hljs-symbol">:/home/gitrepo/runoob</span>.git<br><span class="hljs-title class_">Cloning</span> into <span class="hljs-string">&#x27;runoob&#x27;</span>...<br><span class="hljs-symbol">warning:</span> <span class="hljs-title class_">You</span> appear to have cloned an empty repository.<br><span class="hljs-title class_">Checking</span> connectivity... done.<br></code></pre></td></tr></table></figure><p>192.168.45.4 ä¸º Git æ‰€åœ¨æœåŠ¡å™¨ ip ï¼Œä½ éœ€è¦å°†å…¶ä¿®æ”¹ä¸ºä½ è‡ªå·±çš„ Git æœåŠ¡ ipã€‚</p><p>è¿™æ ·æˆ‘ä»¬çš„ Git æœåŠ¡å™¨å®‰è£…å°±å®Œæˆã€‚</p>]]></content>
    
    
    <categories>
      
      <category>git</category>
      
    </categories>
    
    
    <tags>
      
      <tag>git</tag>
      
      <tag>github</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Typescript</title>
    <link href="/blog/2022/11/04/Typescript/"/>
    <url>/blog/2022/11/04/Typescript/</url>
    
    <content type="html"><![CDATA[<h1 id="Typescript"><a href="#Typescript" class="headerlink" title="Typescript"></a>Typescript</h1><p>è¾…åŠ©Reactï¼ˆï¼Ÿï¼‰</p><h3 id="1-å°è¯•ts"><a href="#1-å°è¯•ts" class="headerlink" title="1 å°è¯•ts"></a>1 å°è¯•ts</h3><p><code>npm i -g typescript</code>ï¼šå…¨å±€å®‰è£…typescript</p><p><code>tsc --init</code>ï¼šåˆå§‹åŒ–ï¼Œç”Ÿæˆtsconfig.json</p><p><code>tsc</code>ï¼šå°†tsæ–‡ä»¶è½¬æ¢ä¸ºjsæ–‡ä»¶</p><p><code>tsc -w</code>ï¼šè‡ªåŠ¨ç¼–è¯‘ï¼šæ¯å½“æ–‡ä»¶ä¿å­˜å°±ä¼šè‡ªåŠ¨ç¼–è¯‘æˆjsæ–‡ä»¶</p><h3 id="2-å˜é‡å£°æ˜"><a href="#2-å˜é‡å£°æ˜" class="headerlink" title="2 å˜é‡å£°æ˜"></a>2 å˜é‡å£°æ˜</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">const</span> url : <span class="hljs-built_in">string</span> = <span class="hljs-string">&#x27;https://api.thecatapi.com/v1/images/search&#x27;</span>;<br><span class="hljs-keyword">const</span> <span class="hljs-attr">button</span>: <span class="hljs-title class_">HTMLButtonElement</span> | <span class="hljs-literal">null</span>  = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;button&#x27;</span>);<br></code></pre></td></tr></table></figure><h3 id="3-æ¥å£å’Œå®ç°"><a href="#3-æ¥å£å’Œå®ç°" class="headerlink" title="3 æ¥å£å’Œå®ç°"></a>3 æ¥å£å’Œå®ç°</h3><p>å®šä¹‰ä»»ä½•ä¸œè¥¿çš„æ—¶å€™è¦æ³¨æ˜ç±»å‹ï¼Œè°ƒç”¨ä»»ä½•ä¸œè¥¿çš„æ—¶å€™è¦æ£€æŸ¥ç±»å‹</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">CatType</span> &#123;<br>    id : <span class="hljs-built_in">string</span>;<br>    url : <span class="hljs-built_in">string</span>;<br>    height : <span class="hljs-built_in">number</span>;<br>    width : <span class="hljs-built_in">number</span>;<br>    test? : <span class="hljs-built_in">boolean</span>;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">CatType</span> &#123;<br>    id : <span class="hljs-built_in">string</span>;<br>    url : <span class="hljs-built_in">string</span>;<br>    <span class="hljs-attr">height</span>: <span class="hljs-built_in">number</span>;<br>    <span class="hljs-attr">width</span>: <span class="hljs-built_in">number</span>;<br>    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">id: <span class="hljs-built_in">string</span>, url: <span class="hljs-built_in">string</span>, height: <span class="hljs-built_in">number</span>, width: <span class="hljs-built_in">number</span></span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span> = id;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">url</span> = url;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span> = height;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span> = width;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-ä¿®é¥°ç¬¦ã€å‡½æ•°ç±»å‹"><a href="#4-ä¿®é¥°ç¬¦ã€å‡½æ•°ç±»å‹" class="headerlink" title="4 ä¿®é¥°ç¬¦ã€å‡½æ•°ç±»å‹"></a>4 ä¿®é¥°ç¬¦ã€å‡½æ•°ç±»å‹</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">WebDisplay</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-title function_">addData</span>(<span class="hljs-attr">data</span>:<span class="hljs-title class_">CatType</span>): <span class="hljs-built_in">void</span> &#123;<br>        <span class="hljs-keyword">const</span> <span class="hljs-attr">cat</span>: <span class="hljs-title class_">Cat</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cat</span>(data.<span class="hljs-property">id</span>, data.<span class="hljs-property">url</span>, data.<span class="hljs-property">height</span>, data.<span class="hljs-property">width</span>);<br>        <span class="hljs-keyword">const</span> tableRow : <span class="hljs-title class_">HTMLTableRowElement</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;tr&#x27;</span>);<br>        tableRow.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">`</span><br><span class="hljs-string">            &lt;td&gt;<span class="hljs-subst">$&#123;cat.id&#125;</span>&lt;/td&gt;</span><br><span class="hljs-string">            &lt;td&gt;&lt;img src=&quot;<span class="hljs-subst">$&#123;cat.url&#125;</span>&quot; alt=&quot;cat&quot;&gt;&lt;/td&gt;</span><br><span class="hljs-string">            &lt;td&gt;<span class="hljs-subst">$&#123;cat.height.toString()&#125;</span>&lt;/td&gt;</span><br><span class="hljs-string">            &lt;td&gt;<span class="hljs-subst">$&#123;cat.width.toString()&#125;</span>&lt;/td&gt;</span><br><span class="hljs-string">            &lt;td&gt;<span class="hljs-subst">$&#123;cat.url&#125;</span>&lt;/td&gt;</span><br><span class="hljs-string">            &lt;td&gt;&lt;a href=&quot;#&quot;&gt;X&lt;/a&gt;&lt;/td&gt;</span><br><span class="hljs-string">        `</span>;<br>        tableBody?.<span class="hljs-title function_">appendChild</span>(tableRow);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-title function_">deleteData</span>(<span class="hljs-attr">deleteButton</span>: <span class="hljs-title class_">HTMLAnchorElement</span>): <span class="hljs-built_in">void</span> &#123;<br>        <span class="hljs-keyword">const</span> td = deleteButton.<span class="hljs-property">parentElement</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">HTMLTableCellElement</span>;<br>        <span class="hljs-keyword">const</span> tr = td.<span class="hljs-property">parentElement</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">HTMLTableRowElement</span>;<br>        tr.<span class="hljs-title function_">remove</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-fetchå…¥é—¨ï¼šæ¥æ”¶apiçš„æ•°æ®"><a href="#5-fetchå…¥é—¨ï¼šæ¥æ”¶apiçš„æ•°æ®" class="headerlink" title="5 fetchå…¥é—¨ï¼šæ¥æ”¶apiçš„æ•°æ®"></a>5 fetchå…¥é—¨ï¼šæ¥æ”¶apiçš„æ•°æ®</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> getJSON&lt;T&gt;(<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;T&gt; &#123;<br>    <span class="hljs-keyword">const</span> <span class="hljs-attr">response</span>: <span class="hljs-title class_">Response</span> = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url);<br>    <span class="hljs-keyword">const</span> <span class="hljs-attr">json</span>: <span class="hljs-title class_">Promise</span>&lt;T&gt; = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();<br>    <span class="hljs-keyword">return</span> json;<br>&#125;<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getData</span>(<span class="hljs-params"></span>):<span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-keyword">const</span> json : <span class="hljs-title class_">CatType</span>[] = <span class="hljs-keyword">await</span> getJSON&lt;<span class="hljs-title class_">CatType</span>[]&gt;(url);<br>        <span class="hljs-keyword">const</span> data : <span class="hljs-title class_">CatType</span> = json[<span class="hljs-number">0</span>];<br>        <span class="hljs-title class_">WebDisplay</span>.<span class="hljs-title function_">addData</span>(data);<br>    &#125;<br>    <span class="hljs-keyword">catch</span> (<span class="hljs-attr">error</span>: <span class="hljs-title class_">Error</span> | <span class="hljs-built_in">unknown</span>) &#123;<br>        <span class="hljs-keyword">let</span> message : <span class="hljs-built_in">string</span>;<br>        <span class="hljs-keyword">if</span> (error <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Error</span>) &#123;<br>            message = error.<span class="hljs-property">message</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            message = <span class="hljs-title class_">String</span>(error);<br>        &#125;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(message)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="6-åˆ©ç”¨äº‹ä»¶å†’æ³¡æ·»åŠ äº‹ä»¶ç›‘å¬"><a href="#6-åˆ©ç”¨äº‹ä»¶å†’æ³¡æ·»åŠ äº‹ä»¶ç›‘å¬" class="headerlink" title="6 åˆ©ç”¨äº‹ä»¶å†’æ³¡æ·»åŠ äº‹ä»¶ç›‘å¬"></a>6 åˆ©ç”¨äº‹ä»¶å†’æ³¡æ·»åŠ äº‹ä»¶ç›‘å¬</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript">button?.<span class="hljs-property">addEventListener</span>&lt;<span class="hljs-string">&#x27;click&#x27;</span>&gt;(<span class="hljs-string">&#x27;click&#x27;</span>, getData);<br><br>tableBody?.<span class="hljs-property">addEventListener</span>&lt;<span class="hljs-string">&#x27;click&#x27;</span>&gt;(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">ev: MouseEvent</span>) =&gt;</span> &#123;<br>    <span class="hljs-title class_">WebDisplay</span>.<span class="hljs-title function_">deleteData</span>(&lt;<span class="hljs-title class_">HTMLAnchorElement</span>&gt;ev.<span class="hljs-property">target</span>);<br>&#125;);<br></code></pre></td></tr></table></figure><h3 id="7-é™å®šå›è°ƒå‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼"><a href="#7-é™å®šå›è°ƒå‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼" class="headerlink" title="7 é™å®šå›è°ƒå‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼"></a>7 é™å®šå›è°ƒå‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getUserName</span>(<span class="hljs-params">callback: (data: <span class="hljs-built_in">string</span>) =&gt; <span class="hljs-built_in">void</span></span>) &#123;<br>    <span class="hljs-comment">//...</span><br>&#125;<br><br><span class="hljs-title function_">getUserName</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;<br>    <span class="hljs-title function_">alert</span>(data);<br>&#125;);<br><br><span class="hljs-comment">// æŠ¥é”™</span><br><span class="hljs-title function_">getUserName</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;<br>    <span class="hljs-title function_">alert</span>(data*<span class="hljs-number">2</span>);<br>&#125;);<br></code></pre></td></tr></table></figure><h3 id="8-ç±»å‹åˆ«å"><a href="#8-ç±»å‹åˆ«å" class="headerlink" title="8 ç±»å‹åˆ«å"></a>8 ç±»å‹åˆ«å</h3><p>é’ˆå¯¹å¤æ‚çš„ç±»å‹</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">UserID</span> = <span class="hljs-built_in">number</span> | <span class="hljs-built_in">string</span>;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">getUserInfo</span>(<span class="hljs-params">userId: UserID</span>) &#123;<br>    <span class="hljs-comment">// ...</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="9-å°æŠ€å·§"><a href="#9-å°æŠ€å·§" class="headerlink" title="9 å°æŠ€å·§"></a>9 å°æŠ€å·§</h3><ol><li>åœ¨tsconfigä¸­é…ç½®ä¸€ä¸ªé¢å¤–çš„é€‰é¡¹ï¼š<code>&quot;noImplicitAny&quot;: true</code>ï¼Œè®©ç¼–è¯‘å™¨å¯¹ç±»å‹åšæ›´åŠ ä¸¥æ ¼çš„éªŒè¯</li><li>åœ¨tsconfigä¸­é…ç½®ä¸€ä¸ªé¢å¤–çš„é€‰é¡¹ï¼š<code>&quot;strictNullChecks&quot;: true</code>ï¼Œé™¤éæ˜ç¡®æŒ‡å®šå€¼å¯ä»¥ä¸ºç©ºï¼Œå¦åˆ™èµ‹äºˆç©ºå€¼æ˜¯éæ³•çš„</li></ol><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æŒ‡å®š</span><br><span class="hljs-keyword">let</span> <span class="hljs-attr">s</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span>;<br><span class="hljs-comment">// ä¸æŒ‡å®š</span><br><span class="hljs-keyword">let</span> s : <span class="hljs-built_in">string</span>;<br>s = <span class="hljs-string">&#x27;azure&#x27;</span>;<br>s = <span class="hljs-literal">null</span>;<br>s = undefine;<br></code></pre></td></tr></table></figure><ol start="3"><li>åœ¨ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œå¯èƒ½åº“æœ¬èº«ä¸æ˜¯ç”¨tsç¼–å†™çš„ï¼Œä½†åˆæƒ³ä½¿ç”¨tsæä¾›æ›´å®Œå–„çš„ç±»å‹æ”¯æŒï¼Œå¯ä»¥å®‰è£…ç”±ç¤¾åŒºç»´æŠ¤çš„ç±»å‹å®šä¹‰åŒ…ï¼ˆDefinitelyTyped&#x2F;DefinitelyTypedï¼‰ï¼Œä¾‹å¦‚ä½¿ç”¨<code>npm install --save-dev @types/three</code>&#x2F;<code>npm install three --save</code></li></ol><h3 id="10-å¸¸ç”¨æ•°æ®ç±»å‹"><a href="#10-å¸¸ç”¨æ•°æ®ç±»å‹" class="headerlink" title="10 å¸¸ç”¨æ•°æ®ç±»å‹"></a>10 å¸¸ç”¨æ•°æ®ç±»å‹</h3><p>åŸºç¡€ç±»å‹</p><ul><li>å¸¸ç”¨ï¼šbooleanã€numberã€stringã€arrayã€enumã€anyã€void</li><li>ä¸å¸¸ç”¨ï¼štupleã€nullã€undefinedã€never</li></ul><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">const</span> <span class="hljs-attr">count</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">20210701</span>;<br></code></pre></td></tr></table></figure><p>å¯¹è±¡ç±»å‹</p><p>ç®€å•ç†è§£interface å’Œ type çš„åŒºåˆ«ï¼štype æ›´å¼ºå¤§ï¼Œinterface å¯ä»¥è¿›è¡Œ<code>å£°æ˜åˆå¹¶</code>ï¼Œtype ä¸è¡Œï¼›ä¸€èˆ¬å£°æ˜éƒ½ç”¨interfaceï¼Œéœ€è¦ç”¨åˆ°å…¶ä»–å˜é‡ç±»å‹ï¼Œtypeå¤šä¸€äº›ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Hero</span> &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>;<br>  <span class="hljs-attr">skill</span>: <span class="hljs-built_in">string</span>;<br>  skinNum?: <span class="hljs-built_in">number</span>;<br>  <span class="hljs-title function_">say</span>(): <span class="hljs-built_in">string</span>; <span class="hljs-comment">// sayå‡½æ•°è¿”å›å€¼ä¸ºstring</span><br>  [<span class="hljs-attr">propname</span>: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">any</span>; <span class="hljs-comment">// å½“å‰Heroå¯å®šä¹‰ä»»æ„å­—ç¬¦ä¸²ç±»å‹çš„key</span><br>&#125;<br><span class="hljs-comment">// ç»§æ‰¿</span><br><span class="hljs-keyword">interface</span> littleSoldier <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Hero</span> &#123;<br>  <span class="hljs-title function_">rush</span>(): <span class="hljs-built_in">string</span>;<br>&#125;<br><span class="hljs-comment">// ä»»æ„ç±»å‹</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IAnyObject</span> &#123;<br>  [<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">any</span>;<br>&#125;<br><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Hero</span> = &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>,<br>  <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>,<br>  <span class="hljs-attr">skill</span>: <span class="hljs-built_in">string</span>,<br>  skinNum?: <span class="hljs-built_in">number</span>,<br>&#125;;<br></code></pre></td></tr></table></figure><p>æ•°ç»„ç±»å‹</p><p>é¡¹ç›®ä¸­å¸¸è§çš„å†™æ³•ï¼Œéœ€è¦å£°æ˜<code>åˆ—è¡¨æ•°æ®</code>ç±»å‹ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IItem</span> &#123;<br>  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>;<br>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-attr">isGod</span>: <span class="hljs-built_in">boolean</span>;<br>&#125;<br><span class="hljs-keyword">const</span> <span class="hljs-attr">objectArr</span>: <span class="hljs-title class_">IItem</span>[] = [&#123; <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;az&#x27;</span>, <span class="hljs-attr">isGod</span>: <span class="hljs-literal">true</span> &#125;];<br><span class="hljs-comment">// or</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">objectArr</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">IItem</span>&gt; = [&#123; <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;az&#x27;</span>, <span class="hljs-attr">isGod</span>: <span class="hljs-literal">true</span> &#125;];<br><br><span class="hljs-keyword">const</span> <span class="hljs-attr">numberArr</span>: <span class="hljs-built_in">number</span>[] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br><br><span class="hljs-keyword">const</span> <span class="hljs-attr">arr</span>: (<span class="hljs-built_in">number</span> | <span class="hljs-built_in">string</span>)[] = [<span class="hljs-number">1</span>, <span class="hljs-string">&quot;string&quot;</span>, <span class="hljs-number">2</span>];<br></code></pre></td></tr></table></figure><p>å…ƒç»„tuple</p><p>å…ƒç»„å’Œæ•°ç»„ç±»ä¼¼ï¼Œä½†æ˜¯ç±»å‹æ³¨è§£æ—¶ä¼šä¸ä¸€æ ·ï¼Œèµ‹å€¼çš„ç±»å‹ã€ä½ç½®ã€ä¸ªæ•°éœ€è¦å’Œå®šä¹‰ï¼ˆç”Ÿæ˜ï¼‰çš„ç±»å‹ã€ä½ç½®ã€ä¸ªæ•°ä¸€è‡´ã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-comment">// æ•°ç»„ æŸä¸ªä½ç½®çš„å€¼å¯ä»¥æ˜¯æ³¨è§£ä¸­çš„ä»»ä½•ä¸€ä¸ª</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">LOL</span>: (<span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>)[] = [<span class="hljs-string">&quot;zed&quot;</span>, <span class="hljs-number">25</span>, <span class="hljs-string">&quot;darts&quot;</span>];<br><br><span class="hljs-comment">// å…ƒç¥– æ¯ä¸€é¡¹æ•°æ®ç±»å‹å¿…é¡»ä¸€è‡´</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">LOL</span>: [<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>] = [<span class="hljs-string">&quot;zed&quot;</span>, <span class="hljs-string">&quot;darts&quot;</span>, <span class="hljs-number">25</span>];<br></code></pre></td></tr></table></figure><p>è”åˆ | or äº¤å‰&amp;ç±»å‹</p><ul><li>è”åˆç±»å‹ï¼šæŸä¸ªå˜é‡å¯èƒ½æ˜¯å¤šä¸ª interface ä¸­çš„å…¶ä¸­ä¸€ä¸ªï¼Œç”¨ <code>|</code> åˆ†å‰²</li><li>äº¤å‰ç±»å‹ï¼šç”±å¤šä¸ªç±»å‹ç»„æˆï¼Œç”¨ <code>&amp;</code> è¿æ¥</li></ul><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Waiter</span> &#123;<br>  <span class="hljs-attr">anjiao</span>: <span class="hljs-built_in">boolean</span>;<br>  <span class="hljs-attr">say</span>: <span class="hljs-function">() =&gt;</span> &#123;&#125;;<br>&#125;<br><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Teacher</span> &#123;<br>  <span class="hljs-attr">anjiao</span>: <span class="hljs-built_in">boolean</span>;<br>  <span class="hljs-attr">skill</span>: <span class="hljs-function">() =&gt;</span> &#123;&#125;;<br>&#125;<br><br><span class="hljs-comment">// è”åˆç±»å‹</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">judgeWho</span>(<span class="hljs-params">animal: Waiter | Teacher</span>) &#123;&#125;<br><span class="hljs-comment">// äº¤å‰ç±»å‹ </span><br><span class="hljs-comment">// åŒåç±»å‹ä¼šè¿›è¡Œåˆå¹¶ï¼ŒåŒååŸºç¡€ç±»å‹å±æ€§çš„åˆå¹¶è¿”å›ï¼šnever</span><br><span class="hljs-comment">// åŒåéåŸºç¡€ç±»å‹å±æ€§å¯ä»¥æ­£å¸¸åˆå¹¶</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">judgeWho</span>(<span class="hljs-params">jishi: Waiter &amp; Teacher</span>) &#123;&#125;<br></code></pre></td></tr></table></figure><p>enumæšä¸¾</p><p>æé«˜ä»£ç å¯ç»´æŠ¤æ€§ï¼Œç»Ÿä¸€ç»´æŠ¤æŸäº›æšä¸¾å€¼ï¼Œé¿å… <code>JiShi === 1</code>è¿™ç§é­”æ³•æ•°å­—ã€‚<code>JiShi === JiShiEnum.BLUEJ</code>è¿™æ ·å†™ï¼Œè€æ¿ä¸€çœ¼å°±çŸ¥é“æˆ‘æƒ³æ‰¾è°ã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-comment">// åˆå§‹å€¼é»˜è®¤ä¸º 0</span><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">JiShiEnum</span> &#123;<br>     <span class="hljs-variable constant_">REDJ</span>,<br>     <span class="hljs-variable constant_">BLUEJ</span>,<br>     <span class="hljs-variable constant_">GREENJ</span>,<br>&#125;<br><span class="hljs-comment">// è®¾ç½®åˆå§‹å€¼</span><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">JiShiEnum</span> &#123;<br>     <span class="hljs-variable constant_">REDJ</span> = <span class="hljs-number">8</span>,<br>     <span class="hljs-variable constant_">BLUEJ</span>,<br>     <span class="hljs-variable constant_">GREENJ</span>,<br>&#125;<br><span class="hljs-keyword">const</span> <span class="hljs-attr">jishi</span>: <span class="hljs-title class_">JiShiEnum</span> = <span class="hljs-title class_">JiShiENUM</span>.<span class="hljs-property">BLUE</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(jishi) <span class="hljs-comment">// 9</span><br><span class="hljs-comment">// å­—ç¬¦ä¸²æšä¸¾ï¼Œæ¯ä¸ªéƒ½éœ€è¦å£°æ˜</span><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">JiShiEnum</span> &#123;<br>     <span class="hljs-variable constant_">REDJ</span> = <span class="hljs-string">&quot;8å·&quot;</span>,<br>     <span class="hljs-variable constant_">BLUEJ</span> = <span class="hljs-string">&quot;9å·&quot;</span>,<br>     <span class="hljs-variable constant_">GREENJ</span> = <span class="hljs-string">&quot;10å·&quot;</span>,<br>&#125;<br></code></pre></td></tr></table></figure><p>æ³›å‹T(Type)</p><p>ç®€å•è¯´å°±æ˜¯ï¼šæ³›æŒ‡çš„ç±»å‹ï¼Œä¸ç¡®å®šçš„ç±»å‹ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ª<code>å ä½ç¬¦</code>ï¼ˆä½¿ç”¨Tåªæ˜¯ä¹ æƒ¯ï¼Œä½¿ç”¨ä»»ä½•å­—æ¯éƒ½è¡Œï¼‰</p><ul><li>Kï¼ˆKeyï¼‰ï¼šè¡¨ç¤ºå¯¹è±¡ä¸­çš„é”®ç±»å‹ï¼›</li><li>Vï¼ˆValueï¼‰ï¼šè¡¨ç¤ºå¯¹è±¡ä¸­çš„å€¼ç±»å‹ï¼›</li><li>Eï¼ˆElementï¼‰ï¼šè¡¨ç¤ºå…ƒç´ ç±»å‹ã€‚</li></ul><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-comment">// T è‡ªå®šä¹‰åç§°</span><br><span class="hljs-keyword">function</span> myFun&lt;T&gt;(<span class="hljs-attr">params</span>: T[]) &#123;<br>  <span class="hljs-keyword">return</span> params;<br>&#125;<br>myFun &lt;<span class="hljs-built_in">string</span>&gt; ([<span class="hljs-string">&quot;123&quot;</span>, <span class="hljs-string">&quot;456&quot;</span>]);<br><br><span class="hljs-comment">// å®šä¹‰å¤šä¸ªæ³›å‹</span><br><span class="hljs-keyword">function</span> join&lt;T, P&gt;(<span class="hljs-attr">first</span>: T, <span class="hljs-attr">second</span>: P) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;first&#125;</span><span class="hljs-subst">$&#123;second&#125;</span>`</span>;<br>&#125;<br>join &lt;<span class="hljs-built_in">number</span>, <span class="hljs-built_in">string</span>&gt; (<span class="hljs-number">1</span>, <span class="hljs-string">&quot;2&quot;</span>);<br></code></pre></td></tr></table></figure><p>æ–­è¨€</p><p>æ–­è¨€ç”¨æ¥æ‰‹åŠ¨æŒ‡å®šä¸€ä¸ªå€¼çš„ç±»å‹ã€‚<code>å€¼ as ç±»å‹</code> or <code>&lt;ç±»å‹&gt;å€¼</code></p><p>æ³¨æ„åœ¨ tsx è¯­æ³•ä¸­å¿…é¡»ä½¿ç”¨å‰è€…ï¼Œå³ å€¼ as ç±»å‹ã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">judgeWho</span>(<span class="hljs-params">animal: Waiter | Teacher</span>) &#123;<br>  <span class="hljs-keyword">if</span> (animal.<span class="hljs-property">anjiao</span>) &#123;<br>    (animal <span class="hljs-keyword">as</span> <span class="hljs-title class_">Teacher</span>).<span class="hljs-title function_">skill</span>();<br>  &#125;<span class="hljs-keyword">else</span>&#123;<br>    (animal <span class="hljs-keyword">as</span> <span class="hljs-title class_">Waiter</span>).<span class="hljs-title function_">say</span>();<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>in</p><p>åœ¨åšç±»å‹ä¿æŠ¤äº‹ä»¶ï¼Œç±»ä¼¼äºæ•°ç»„å’Œå­—ç¬¦ä¸²çš„ <code>includes</code> æ–¹æ³•</p><p>ä¹Ÿæœ‰éå†çš„ä½œç”¨ï¼Œæ‹¿åˆ°tsç±»å‹å®šä¹‰çš„Keyï¼Œè·å–Keyè¿˜æœ‰ä¸ªæ–¹æ³•ï¼škeyofæ˜¯å–ç±»å‹çš„keyçš„è”åˆç±»å‹ , inæ˜¯éå†ç±»å‹çš„key</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">judgeWhoTwo</span>(<span class="hljs-params">animal: Waiter | Teacher</span>) &#123;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;skill&quot;</span> <span class="hljs-keyword">in</span> animal) &#123;<br>    animal.<span class="hljs-title function_">skill</span>();<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    animal.<span class="hljs-title function_">say</span>();<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>voidå’Œnever</p><p>è¿”å›å€¼ç±»å‹ï¼Œä¹Ÿç®—æ˜¯åŸºç¡€ç±»å‹ã€‚æ²¡æœ‰è¿”å›å€¼çš„å‡½æ•°: void</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">sayHello</span>(<span class="hljs-params"></span>): <span class="hljs-built_in">void</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;hello world&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>å¦‚æœä¸€ä¸ªå‡½æ•°æ˜¯æ°¸è¿œä¹Ÿæ‰§è¡Œä¸å®Œçš„ï¼Œå°±å¯ä»¥å®šä¹‰è¿”å›å€¼ä¸º never</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">errorFuntion</span>(<span class="hljs-params"></span>): <span class="hljs-built_in">never</span> &#123;<br>  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>();<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Hello World&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸€ä¸ªå‡½æ•°æœ‰å…¥å‚ï¼Œä¹Ÿæœ‰å‡ºå‚ï¼Œé¡¹ç›®ä¸­çš„å¸¸è§„å†™æ³•ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªå°å§å§</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IGirl</span> &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>,<br>  <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>,<br>  <span class="hljs-attr">skill</span>: <span class="hljs-built_in">string</span>,<br>  <span class="hljs-attr">isAnMo</span>: <span class="hljs-built_in">boolean</span>;<br>  <span class="hljs-attr">number</span>: <span class="hljs-title class_">JiShiEnum</span>;<br>&#125;;<br><span class="hljs-comment">// å®šä¹‰æœç´¢å°å§å§çš„å…¥å‚</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ISearchParams</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">IGirl</span>&#123;<br>  <span class="hljs-attr">serviceTime</span>: <span class="hljs-built_in">string</span>;<br>&#125;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IGetGirls</span> &#123;<br>  <span class="hljs-attr">data</span>: <span class="hljs-title class_">IGirl</span>[];<br>&#125;<br><span class="hljs-comment">// å‡½æ•°ä¸»ä½“</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getGirls</span>(<span class="hljs-params">data: ISearchParams</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">IGetGirls</span>&gt; &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">axios</span>(&#123;<br>    <span class="hljs-attr">url</span>: <span class="hljs-string">`/dabaojian/getGirls`</span>,<br>    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;GET&#x27;</span>,<br>    data,<br>  &#125;);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="11-ç±»å‹æ£€æµ‹"><a href="#11-ç±»å‹æ£€æµ‹" class="headerlink" title="11 ç±»å‹æ£€æµ‹"></a>11 ç±»å‹æ£€æµ‹</h3><p>typeof</p><p>typeof æ“ä½œç¬¦å¯ä»¥ç”¨æ¥è·å–ä¸€ä¸ªå˜é‡æˆ–å¯¹è±¡çš„ç±»å‹</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Hero</span> &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-attr">skill</span>: <span class="hljs-built_in">string</span>;<br>&#125;<br><br><span class="hljs-keyword">const</span> <span class="hljs-attr">zed</span>: <span class="hljs-title class_">Hero</span> = &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;å½±æµä¹‹ä¸»&quot;</span>, <span class="hljs-attr">skill</span>: <span class="hljs-string">&quot;å½±å­&quot;</span> &#125;;<br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">LOL</span> = <span class="hljs-keyword">typeof</span> zed; <span class="hljs-comment">// type LOL = Hero</span><br></code></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ typeof æ“ä½œç¬¦è·å– zed å˜é‡çš„ç±»å‹å¹¶èµ‹å€¼ç»™ LOL ç±»å‹å˜é‡ï¼Œä¹‹åæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ LOL ç±»å‹</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">const</span> <span class="hljs-attr">ahri</span>: <span class="hljs-variable constant_">LOL</span> = &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;é˜¿ç‹¸&quot;</span>, <span class="hljs-attr">skill</span>: <span class="hljs-string">&quot;é­…æƒ‘&quot;</span> &#125;;<br></code></pre></td></tr></table></figure><p>instanceof</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">NumberObj</span> &#123;<br>  <span class="hljs-attr">count</span>: <span class="hljs-built_in">number</span>;<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">addObj</span>(<span class="hljs-params">first: <span class="hljs-built_in">object</span> | NumberObj, second: <span class="hljs-built_in">object</span> | NumberObj</span>) &#123;<br>  <span class="hljs-keyword">if</span> (first <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">NumberObj</span> &amp;&amp; second <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">NumberObj</span>) &#123;<br>    <span class="hljs-keyword">return</span> first.<span class="hljs-property">count</span> + second.<span class="hljs-property">count</span>;<br>  &#125;<br>  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>keyof</p><p>keyof ä¸ Object.keys ç•¥æœ‰ç›¸ä¼¼ï¼Œåªä¸è¿‡ keyof å– interface çš„é”®</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Point</span> &#123;<br>    <span class="hljs-attr">x</span>: <span class="hljs-built_in">number</span>;<br>    <span class="hljs-attr">y</span>: <span class="hljs-built_in">number</span>;<br>&#125;<br><br><span class="hljs-comment">// type keys = &quot;x&quot; | &quot;y&quot;</span><br><span class="hljs-keyword">type</span> keys = keyof <span class="hljs-title class_">Point</span>;<br></code></pre></td></tr></table></figure><p>ç”¨keyofå¯ä»¥æ›´å¥½çš„å®šä¹‰æ•°æ®ç±»å‹</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">function</span> get&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">object</span>, K <span class="hljs-keyword">extends</span> keyof T&gt;(<span class="hljs-attr">o</span>: T, <span class="hljs-attr">name</span>: K): T[K] &#123;<br>  <span class="hljs-keyword">return</span> o[name]<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="12-tsç±»é‡Œçš„å…³é”®å­—"><a href="#12-tsç±»é‡Œçš„å…³é”®å­—" class="headerlink" title="12 tsç±»é‡Œçš„å…³é”®å­—"></a>12 tsç±»é‡Œçš„å…³é”®å­—</h3><p>public</p><p>private ç±»çš„å¤–éƒ¨ä¸å¯ç”¨ï¼Œç»§æ‰¿ä¹Ÿä¸è¡Œ</p><p>protected ç±»çš„å¤–éƒ¨ä¸å¯ç”¨ï¼Œç»§æ‰¿å¯ä»¥</p><p>public readOnly xxx åªè¯»å±æ€§</p><p>static funcXXX é™æ€æ–¹æ³•ï¼Œä¸éœ€è¦ new å°±å¯ä»¥è°ƒç”¨</p><p>abstract funcXXX æŠ½è±¡ç±»ï¼Œæ‰€æœ‰å­ç±»éƒ½å¿…é¡»è¦å®ç° funcXXX</p><h3 id="13-Utility-Type"><a href="#13-Utility-Type" class="headerlink" title="13 Utility Type"></a>13 Utility Type</h3><p><code>Partial&lt;T&gt;</code>ï¼šå°†Tä¸­æ‰€æœ‰å±æ€§è½¬æ¢ä¸ºå¯é€‰å±æ€§ã€‚è¿”å›çš„ç±»å‹å¯ä»¥æ˜¯Tçš„ä»»æ„å­é›†</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserModel</span> &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;<br>  age?: <span class="hljs-built_in">number</span>;<br>  <span class="hljs-attr">sex</span>: <span class="hljs-built_in">number</span>;<br>&#125;<br><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">JUserModel</span> = <span class="hljs-title class_">Partial</span>&lt;<span class="hljs-title class_">UserModel</span>&gt;<br><span class="hljs-comment">// =</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">JUserModel</span> = &#123;<br>    name?: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span>;<br>    age?: <span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span>;<br>    sex?: <span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-comment">// æºç è§£æ</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Partial</span>&lt;T&gt; = &#123; [P <span class="hljs-keyword">in</span> keyof T]?: T[P]; &#125;;<br></code></pre></td></tr></table></figure><p><code>Required&lt;T&gt;</code>ï¼šé€šè¿‡å°†Tçš„æ‰€æœ‰å±æ€§è®¾ç½®ä¸ºå¿…é€‰å±æ€§æ¥æ„é€ ä¸€ä¸ªæ–°çš„ç±»å‹ã€‚ä¸Partialç›¸å</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">type</span> <span class="hljs-title class_">JUserModel2</span> = <span class="hljs-title class_">Required</span>&lt;<span class="hljs-title class_">UserModel</span>&gt;<br><span class="hljs-comment">// =</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">JUserModel2</span> = &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;<br>    <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>;<br>    <span class="hljs-attr">sex</span>: <span class="hljs-built_in">number</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>Readonly&lt;T&gt;</code>ï¼šå°†Tä¸­æ‰€æœ‰å±æ€§è®¾ç½®ä¸ºåªè¯»</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">type</span> <span class="hljs-title class_">JUserModel3</span> = <span class="hljs-title class_">Readonly</span>&lt;<span class="hljs-title class_">UserModel</span>&gt;<br><br><span class="hljs-comment">// =</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">JUserModel3</span> = &#123;<br>    <span class="hljs-keyword">readonly</span> <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;<br>    <span class="hljs-keyword">readonly</span> age?: <span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span>;<br>    <span class="hljs-keyword">readonly</span> <span class="hljs-attr">sex</span>: <span class="hljs-built_in">number</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>Record&lt;K,T&gt;</code>ï¼šæ„é€ ä¸€ä¸ªç±»å‹ï¼Œè¯¥ç±»å‹å…·æœ‰ä¸€ç»„å±æ€§Kï¼Œæ¯ä¸ªå±æ€§çš„ç±»å‹ä¸ºTã€‚å¯ç”¨äºå°†ä¸€ä¸ªç±»å‹çš„å±æ€§æ˜ å°„ä¸ºå¦ä¸€ä¸ªç±»å‹ã€‚Record åé¢çš„æ³›å‹å°±æ˜¯å¯¹è±¡é”®å’Œå€¼çš„ç±»å‹ã€‚</p><p>ç®€å•ç†è§£ï¼šKå¯¹åº”å¯¹åº”çš„keyï¼ŒTå¯¹åº”å¯¹è±¡çš„valueï¼Œè¿”å›çš„å°±æ˜¯ä¸€ä¸ªå£°æ˜å¥½çš„å¯¹è±¡</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">type</span> <span class="hljs-title class_">TodoProperty</span> = <span class="hljs-string">&#x27;title&#x27;</span> | <span class="hljs-string">&#x27;description&#x27;</span>;<br><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Todo</span> = <span class="hljs-title class_">Record</span>&lt;<span class="hljs-title class_">TodoProperty</span>, <span class="hljs-built_in">string</span>&gt;;<br><span class="hljs-comment">// =</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Todo</span> = &#123;<br>    <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span>;<br>    <span class="hljs-attr">description</span>: <span class="hljs-built_in">string</span>;<br>&#125;<br><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IGirl</span> &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>;<br>&#125;<br><br><span class="hljs-keyword">type</span> allGirls = <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">IGirl</span>&gt;<br></code></pre></td></tr></table></figure><p><code>Pick&lt;T,K&gt;</code>ï¼šåœ¨ä¸€ä¸ªå£°æ˜å¥½çš„å¯¹è±¡ä¸­ï¼ŒæŒ‘é€‰ä¸€éƒ¨åˆ†å‡ºæ¥ç»„æˆä¸€ä¸ªæ–°çš„å£°æ˜å¯¹è±¡</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Todo</span> &#123;<br>  <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-attr">description</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-attr">done</span>: <span class="hljs-built_in">boolean</span>;<br>&#125;<br><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">TodoBase</span> = <span class="hljs-title class_">Pick</span>&lt;<span class="hljs-title class_">Todo</span>, <span class="hljs-string">&quot;title&quot;</span> | <span class="hljs-string">&quot;done&quot;</span>&gt;;<br><br><span class="hljs-comment">// =</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">TodoBase</span> = &#123;<br>    <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span>;<br>    <span class="hljs-attr">done</span>: <span class="hljs-built_in">boolean</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>Omit&lt;T,K&gt;</code>ï¼šä»Tä¸­å–å‡ºé™¤å»Kçš„å…¶ä»–æ‰€æœ‰å±æ€§ã€‚ä¸Pickç›¸å¯¹ã€‚</p><p><code>Exclude&lt;T,U&gt;</code>ï¼šä»Tä¸­æ’é™¤å¯åˆ†é…ç»™Uçš„å±æ€§ï¼Œå‰©ä½™çš„å±æ€§æ„æˆæ–°çš„ç±»å‹</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T0</span> = <span class="hljs-title class_">Exclude</span>&lt;<span class="hljs-string">&#x27;a&#x27;</span> | <span class="hljs-string">&#x27;b&#x27;</span> | <span class="hljs-string">&#x27;c&#x27;</span>, <span class="hljs-string">&#x27;a&#x27;</span>&gt;; <br><br><span class="hljs-comment">// = </span><br><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T0</span> = <span class="hljs-string">&quot;b&quot;</span> | <span class="hljs-string">&quot;c&quot;</span><br></code></pre></td></tr></table></figure><p><code>Extract&lt;T,U&gt;</code>ï¼šä»Tä¸­æŠ½å‡ºå¯åˆ†é…ç»™Uçš„å±æ€§æ„æˆæ–°çš„ç±»å‹ã€‚ä¸Excludeç›¸å</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T0</span> = <span class="hljs-title class_">Extract</span>&lt;<span class="hljs-string">&#x27;a&#x27;</span> | <span class="hljs-string">&#x27;b&#x27;</span> | <span class="hljs-string">&#x27;c&#x27;</span>, <span class="hljs-string">&#x27;a&#x27;</span>&gt;; <br><br><span class="hljs-comment">// = </span><br><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T0</span> = <span class="hljs-string">&#x27;a&#x27;</span><br></code></pre></td></tr></table></figure><p><code>NonNullable&lt;T&gt;</code>ï¼šå»é™¤Tä¸­çš„ null å’Œ undefined ç±»å‹</p><p><code>Parameters&lt;T&gt;</code>ï¼šè¿”å›ç±»å‹ä¸ºTçš„å‡½æ•°çš„å‚æ•°ç±»å‹æ‰€ç»„æˆçš„æ•°ç»„</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T0</span> = <span class="hljs-title class_">Parameters</span>&lt;<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">string</span>&gt;;  <span class="hljs-comment">// []</span><br><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T1</span> = <span class="hljs-title class_">Parameters</span>&lt;<span class="hljs-function">(<span class="hljs-params">s: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>&gt;;  <span class="hljs-comment">// [string]</span><br></code></pre></td></tr></table></figure><p><code>ReturnType&lt;T&gt;</code></p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T0</span> = <span class="hljs-title class_">ReturnType</span>&lt;<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">string</span>&gt;;  <span class="hljs-comment">// string</span><br><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T1</span> = <span class="hljs-title class_">ReturnType</span>&lt;<span class="hljs-function">(<span class="hljs-params">s: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>&gt;;  <span class="hljs-comment">// void</span><br></code></pre></td></tr></table></figure><p><code>InstanceType&lt;T&gt;</code>ï¼šè¿”å›æ„é€ å‡½æ•°ç±»å‹Tçš„å®ä¾‹ç±»å‹</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span> &#123;<br>  x = <span class="hljs-number">0</span>;<br>  y = <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T0</span> = <span class="hljs-title class_">InstanceType</span>&lt;<span class="hljs-keyword">typeof</span> C&gt;;  <span class="hljs-comment">// C</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰ç«¯</tag>
      
      <tag>typescript</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>React + Typescript(2)</title>
    <link href="/blog/2022/11/04/react+typescript/"/>
    <url>/blog/2022/11/04/react+typescript/</url>
    
    <content type="html"><![CDATA[<h1 id="React-Typescript"><a href="#React-Typescript" class="headerlink" title="React + Typescript"></a>React + Typescript</h1><p>ç»“åˆé¡¹ç›®çš„ä¸€äº›ç–‘æƒ‘ä¸è§£ç­”</p><h3 id="1-ä¸‰ç‚¹è¿ç®—ç¬¦ä¸å…¶ä»–å¸¸è§"><a href="#1-ä¸‰ç‚¹è¿ç®—ç¬¦ä¸å…¶ä»–å¸¸è§" class="headerlink" title="1 ä¸‰ç‚¹è¿ç®—ç¬¦ä¸å…¶ä»–å¸¸è§"></a>1 ä¸‰ç‚¹è¿ç®—ç¬¦ä¸å…¶ä»–å¸¸è§</h3><p>ä¸‰ç‚¹è¿ç®—ç¬¦ï¼šâ€¦</p><p>ç”¨æ¥å£°æ˜ä»»æ„æ•°é‡çš„æ–¹æ³•å‚æ•°ï¼Œåœ¨ä¸‹ä¾‹ä¸­ï¼Œå¯ä»¥ä¼ ä»»æ„å‚æ•°ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">func1</span>(<span class="hljs-params"> ...args </span>)&#123;<br>args.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">arg</span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arg)<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><p>éç©ºæ–­è¨€æ“ä½œç¬¦ï¼š!</p><p>åœ¨ä¸Šä¸‹â½‚ä¸­å½“ç±»å‹æ£€æŸ¥å™¨â½†æ³•æ–­å®šç±»å‹æ—¶ï¼Œâ¼€ä¸ªæ–°çš„åç¼€è¡¨è¾¾å¼æ“ä½œç¬¦ ! å¯ä»¥â½¤äºæ–­â¾”æ“ä½œå¯¹è±¡æ˜¯â¾® <strong>null</strong> å’Œâ¾® <strong>undefined</strong> ç±»å‹ã€‚</p><p>å¯é€‰é“¾æ“ä½œç¬¦ï¼š?.</p><p>å…è®¸è¯»å–ä½äºè¿æ¥å¯¹è±¡é“¾æ·±å¤„çš„å±æ€§çš„å€¼ï¼Œè€Œä¸å¿…æ˜ç¡®éªŒè¯é“¾ä¸­çš„æ¯ä¸ªå¼•ç”¨æ˜¯å¦æœ‰æ•ˆã€‚<code>?.</code> æ“ä½œç¬¦çš„åŠŸèƒ½ç±»ä¼¼äº <code>.</code> é“¾å¼æ“ä½œç¬¦ï¼Œä¸åŒä¹‹å¤„åœ¨äºï¼Œåœ¨å¼•ç”¨ä¸ºç©º(<a href="https://link.juejin.cn/?target=https://developer.mozilla.org/zh-CN/docs/Glossary/Nullish">nullish</a> ) (<a href="https://link.juejin.cn/?target=https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/null"><code>null</code></a> æˆ–è€… <a href="https://link.juejin.cn/?target=https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/undefined"><code>undefined</code></a>) çš„æƒ…å†µä¸‹ä¸ä¼šå¼•èµ·é”™è¯¯ï¼Œè¯¥è¡¨è¾¾å¼çŸ­è·¯è¿”å›å€¼æ˜¯ <code>undefined</code>ã€‚ä¸å‡½æ•°è°ƒç”¨ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œå¦‚æœç»™å®šçš„å‡½æ•°ä¸å­˜åœ¨ï¼Œåˆ™è¿”å› <code>undefined</code>ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">const</span> baz = obj?.<span class="hljs-property">foo</span>?.<span class="hljs-property">bar</span>?.<span class="hljs-property">baz</span>; <span class="hljs-comment">// 42</span><br><span class="hljs-keyword">const</span> safe = obj?.<span class="hljs-property">qux</span>?.<span class="hljs-property">baz</span>; <span class="hljs-comment">// undefined</span><br></code></pre></td></tr></table></figure><p>ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ï¼š??</p><p>å½“å·¦ä¾§æ“ä½œæ•°ä¸º <strong>null</strong> æˆ– <strong>undefined</strong> æ—¶ï¼Œå…¶è¿”å›å³ä¾§çš„æ“ä½œæ•°ï¼Œå¦åˆ™è¿”å›å·¦ä¾§çš„æ“ä½œæ•°ã€‚</p><p>ä¸é€»è¾‘æˆ– || è¿ç®—ç¬¦ä¸åŒï¼Œé€»è¾‘æˆ–ä¼šåœ¨å·¦æ“ä½œæ•°ä¸º falsy å€¼æ—¶è¿”å›å³ä¾§æ“ä½œæ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ ä½¿â½¤|| æ¥ä¸ºæŸäº›å˜é‡è®¾ç½®é»˜è®¤çš„å€¼æ—¶ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°æ„æ–™ä¹‹å¤–çš„â¾ä¸ºã€‚â½å¦‚ä¸º falsy å€¼ï¼ˆâ€™â€™ã€NaN æˆ– 0ï¼‰æ—¶</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">const</span> name = <span class="hljs-literal">null</span> ?? <span class="hljs-string">&#x27;nordon&#x27;</span>; <span class="hljs-comment">// è¿”å›nodedon</span><br><span class="hljs-keyword">const</span> age = <span class="hljs-number">0</span> ?? <span class="hljs-number">18</span>; <span class="hljs-comment">// è¿”å› 0</span><br><span class="hljs-keyword">const</span> age2 = <span class="hljs-number">0</span> || <span class="hljs-number">18</span>; <span class="hljs-comment">// è¿”å› 18</span><br></code></pre></td></tr></table></figure><p>å¯é€‰å±æ€§ï¼š ?:</p><p>åœ¨â¾¯å‘å¯¹è±¡è¯­â¾”ä¸­ï¼Œæ¥â¼æ˜¯â¼€ä¸ªå¾ˆé‡è¦çš„æ¦‚å¿µï¼Œå®ƒæ˜¯å¯¹â¾ä¸ºçš„æŠ½è±¡ï¼Œâ½½å…·ä½“å¦‚ä½•â¾åŠ¨éœ€è¦ç”±ç±»å»å®ç°ã€‚<strong>TypeScript</strong> ä¸­çš„æ¥â¼æ˜¯â¼€ä¸ªâ¾®å¸¸çµæ´»çš„æ¦‚å¿µï¼Œé™¤äº†å¯â½¤äºå¯¹ç±»çš„â¼€éƒ¨åˆ†â¾ä¸ºè¿›â¾æŠ½è±¡ä»¥å¤–ï¼Œä¹Ÿå¸¸â½¤äºå¯¹ã€Œå¯¹è±¡çš„å½¢çŠ¶ï¼ˆ<strong>Shape</strong>ï¼‰ã€è¿›â¾æè¿°ã€‚</p><p>åœ¨ TypeScript ä¸­ä½¿â½¤ interface å…³é”®å­—å°±å¯ä»¥å£°æ˜â¼€ä¸ªæ¥â¼ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Person</span> &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;<br>    age?: <span class="hljs-built_in">number</span>; <br>&#125;<br></code></pre></td></tr></table></figure><p>è¿ç®—ç¬¦ï¼š&amp;</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">PartialPointX</span> = &#123; <span class="hljs-attr">x</span>: <span class="hljs-built_in">number</span>; &#125;;<br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Point</span> = <span class="hljs-title class_">PartialPointX</span> &amp; &#123; <span class="hljs-attr">y</span>: <span class="hljs-built_in">number</span>; &#125;;<br><span class="hljs-keyword">let</span> <span class="hljs-attr">point</span>: <span class="hljs-title class_">Point</span> = &#123;<br>  <span class="hljs-attr">x</span>: <span class="hljs-number">1</span>, <br>  <span class="hljs-attr">y</span>: <span class="hljs-number">1</span> <br>&#125;<br></code></pre></td></tr></table></figure><p>è¿ç®—ç¬¦ï¼š|</p><p>åœ¨ TypeScript ä¸­è”åˆç±»å‹ï¼ˆUnion Typesï¼‰è¡¨ç¤ºå–å€¼å¯ä»¥ä¸ºå¤šç§ç±»å‹ä¸­çš„â¼€ç§ï¼Œè”åˆç±»å‹ä½¿â½¤ | åˆ†éš”æ¯ä¸ªç±»å‹ã€‚è”åˆç±»å‹é€šå¸¸ä¸ null æˆ– undefined â¼€èµ·ä½¿â½¤</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">fn</span> = (<span class="hljs-params">info: strong | <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span></span>) =&gt; &#123;&#125;<br></code></pre></td></tr></table></figure><p>æ•°å­—åˆ†å‰²ç¬¦ï¼š_</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">const</span> num1 = <span class="hljs-number">1_234_567</span>;<br><span class="hljs-comment">// ç­‰ä»·</span><br><span class="hljs-keyword">const</span> num1 = <span class="hljs-number">1234567</span>;<br></code></pre></td></tr></table></figure><h3 id="2-Promise"><a href="#2-Promise" class="headerlink" title="2 Promise"></a>2 Promise</h3><p>Promise è¡¨ç¤ºä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„æœ€ç»ˆç»“æœï¼Œä¸ä¹‹è¿›è¡Œäº¤äº’çš„æ–¹å¼ä¸»è¦æ˜¯ then æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ³¨å†Œäº†ä¸¤ä¸ªå›è°ƒå‡½æ•°ï¼Œç”¨äºæ¥æ”¶ promise çš„ç»ˆå€¼æˆ–æœ¬ promise ä¸èƒ½æ‰§è¡Œçš„åŸå› ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Yoonalis/img@master/blog/1551668316202_.pic-20221113%2020:35:29.jpg" alt="1551668316202_.pic"></p><p>ç‰¹æ€§ï¼šé“¾å¼è°ƒç”¨ã€å†…éƒ¨ä¸‰ç§çŠ¶æ€ï¼ˆPendingï¼ˆè¿›è¡Œä¸­ï¼‰ï¼ŒResolved(å®Œæˆ)ï¼ŒRejected (å¤±è´¥)ã€‚Promiseä»PendingçŠ¶æ€å¼€å§‹ï¼Œå¦‚æœæˆåŠŸå°±è½¬åˆ°æˆåŠŸæ€ï¼Œå¹¶æ‰§è¡Œresolveå›è°ƒå‡½æ•°ï¼›å¦‚æœå¤±è´¥å°±è½¬åˆ°å¤±è´¥çŠ¶æ€å¹¶æ‰§è¡Œrejectå›è°ƒå‡½æ•°ã€‚ Promiseä¸€æ—¦çŠ¶æ€æ”¹å˜ï¼Œå°±ä¸ä¼šå†å˜ï¼Œä»»ä½•æ—¶å€™éƒ½å¯ä»¥å¾—åˆ°è¿™ä¸ªç»“æœã€‚ï¼‰</p><p>ä¾‹å¦‚ä¸€ä¸ª<code>createAudioFileAsync</code>æ–¹æ³•ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-title function_">createAudioFileAsync</span>(audioSettings).<span class="hljs-title function_">then</span>(successCallback, failureCallback);<br></code></pre></td></tr></table></figure><p>å‡ºç°çš„èƒŒæ™¯ï¼šè§£å†³ajaxå›è°ƒåœ°ç‹±ï¼ˆå½“åµŒå¥—å±‚æ•°å¾ˆå¤šæ—¶ï¼Œä¼šå˜å¾—éš¾ä»¥ç»´æŠ¤ï¼‰</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-title function_">doSomething</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>) &#123;<br>  <span class="hljs-title function_">doSomethingElse</span>(result, <span class="hljs-keyword">function</span>(<span class="hljs-params">newResult</span>) &#123;<br>    <span class="hljs-title function_">doThirdThing</span>(newResult, <span class="hljs-keyword">function</span>(<span class="hljs-params">finalResult</span>) &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Got the final result: &#x27;</span> + finalResult);<br>    &#125;, failureCallback);<br>  &#125;, failureCallback);<br>&#125;, failureCallback);<br></code></pre></td></tr></table></figure><p>è¿ç»­æ‰§è¡Œä¸¤ä¸ªæˆ–è€…å¤šä¸ªå¼‚æ­¥æ“ä½œæ˜¯ä¸€ä¸ªå¸¸è§çš„éœ€æ±‚ï¼Œåœ¨ä¸Šä¸€ä¸ªæ“ä½œæ‰§è¡ŒæˆåŠŸä¹‹åï¼Œå¼€å§‹ä¸‹ä¸€ä¸ªçš„æ“ä½œï¼Œå¹¶å¸¦ç€ä¸Šä¸€æ­¥æ“ä½œæ‰€è¿”å›çš„ç»“æœã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ›é€ ä¸€ä¸ª <strong>Promise é“¾</strong>æ¥å®ç°è¿™ç§éœ€æ±‚ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-title function_">doSomething</span>().<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">doSomethingElse</span>(result);<br>&#125;)<br>.<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">newResult</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">doThirdThing</span>(newResult);<br>&#125;)<br>.<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">finalResult</span>) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Got the final result: &#x27;</span> + finalResult);<br>&#125;)<br>.<span class="hljs-title function_">catch</span>(failureCallback);<br></code></pre></td></tr></table></figure><h3 id="3-React-hook"><a href="#3-React-hook" class="headerlink" title="3 React hook"></a>3 React hook</h3><h5 id="1-useState"><a href="#1-useState" class="headerlink" title="1 useState"></a>1 useState</h5><blockquote><p>ç”¨æ¥æ›´æ–°å€¼ä»¥åŠé‡æ–°æ¸²æŸ“</p></blockquote><p>ä½¿ç”¨æ–¹æ³•ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">const</span> [state, setState] = <span class="hljs-title function_">useState</span>(initialState)<br></code></pre></td></tr></table></figure><p>è¿™è¡Œä»£ç è¿”å›ä¸€ä¸ª stateï¼Œä»¥åŠæ›´æ–° state çš„å‡½æ•°ã€‚</p><p>setState å‡½æ•°ç”¨äºæ›´æ–° stateã€‚å®ƒæ¥æ”¶ä¸€ä¸ªæ–°çš„ state å€¼å¹¶å°†ç»„ä»¶çš„ä¸€æ¬¡é‡æ–°æ¸²æŸ“åŠ å…¥é˜Ÿåˆ—ã€‚</p><p>åœ¨åˆå§‹æ¸²æŸ“æœŸé—´ï¼Œè¿”å›çš„çŠ¶æ€ (state) ä¸ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•° (initialState) å€¼ç›¸åŒã€‚</p><p>è°ƒç”¨ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">HookCounter</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>)<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">        setCount(count + 1)</span><br><span class="language-xml">      &#125;&#125;&gt;Count &#123;count&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">HookCounter</span><br></code></pre></td></tr></table></figure><blockquote><p>ä½¿ç”¨è§„åˆ™ï¼š</p><p>åªèƒ½åœ¨é¡¶å±‚åŸŸè°ƒç”¨hooksï¼Œä¸èƒ½åœ¨å†…éƒ¨çš„å¾ªç¯ã€æ¡ä»¶åˆ¤æ–­ã€åµŒå¥—çš„æ–¹æ³•ä¸­ä½¿ç”¨</p><p>åªèƒ½åœ¨React functionä¸­ä½¿ç”¨hooksï¼Œä¸èƒ½åœ¨å…¶ä»–æ™®é€šfunctionä¸­ä½¿ç”¨hooks</p></blockquote><hr><p>å½“ä½ çš„ state å€¼ä¾èµ–ä¸Šä¸€ä¸ªçŠ¶æ€å€¼æ—¶ï¼Œå°±ä¼šç”¨åˆ° previous stateã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">HookCounter</span>(<span class="hljs-params"></span>) &#123;<br><br>  <span class="hljs-keyword">const</span> initialCount = <span class="hljs-number">0</span><br>  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(initialCount)<br><br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">increment5</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) &#123;<br>      <span class="hljs-title function_">setCount</span>(<span class="hljs-function"><span class="hljs-params">prevCount</span> =&gt;</span> prevCount + <span class="hljs-number">1</span>)<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      Count: &#123;count&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">        setCount(initialCount)</span><br><span class="language-xml">      &#125;&#125;&gt;Reset<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">        setCount(prevCount =&gt; prevCount + 1)</span><br><span class="language-xml">      &#125;&#125;&gt; + 1 <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">        setCount(prevCount =&gt; prevCount - 1)</span><br><span class="language-xml">      &#125;&#125;&gt; - 1 <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;increment5&#125;</span>&gt;</span> + 5 <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">HookCounter</span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ previousState æ—¶ï¼Œè¦ä½¿ç”¨ setter function çš„æ–¹å¼ï¼Œä¼ å‚ç»™ setState æ–¹æ³•ã€‚æ¥ç¡®ä¿æ‹¿åˆ°çš„æ˜¯å‡†ç¡®çš„ previous stateã€‚</p><p>åœ¨é‡æ–°æ¸²æŸ“ä¸­ï¼ŒuseState è¿”å›çš„ç¬¬ä¸€ä¸ªå€¼å°†å§‹ç»ˆæ˜¯æ›´æ–°åæœ€æ–°çš„ stateã€‚</p><hr><p>å½“useStateä¸­çš„stateä¸ºå¯¹è±¡æ—¶ï¼Œè°ƒç”¨ç›¸åº”çš„setStateæœ‰ä¸€äº›è¦æ³¨æ„çš„åœ°æ–¹ï¼ŒuseStateä¸ä¼šè‡ªåŠ¨åˆå¹¶æ›´æ–°å¯¹è±¡ï¼Œå¯ä»¥ç”¨å‡½æ•°å¼çš„setStateç»“åˆå±•å¼€è¿ç®—ç¬¦æ¥è¾¾åˆ°åˆå¹¶æ›´æ–°å¯¹è±¡çš„æ•ˆæœã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">HookCounter</span>(<span class="hljs-params"></span>) &#123;<br><br>  <span class="hljs-keyword">const</span> [name, setName] = <span class="hljs-title function_">useState</span>(&#123;<br>    <span class="hljs-attr">firstName</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>    <span class="hljs-attr">lastName</span>: <span class="hljs-string">&#x27;&#x27;</span><br>  &#125;)<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;name.firstName&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;e</span> =&gt;</span> &#123;</span><br><span class="language-xml">          setName(&#123;</span><br><span class="language-xml">            ...name,</span><br><span class="language-xml">            firstName: e.target.value</span><br><span class="language-xml">          &#125;)</span><br><span class="language-xml">        &#125;&#125;</span><br><span class="language-xml">      /&gt;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;name.lastName&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;e</span> =&gt;</span> &#123;</span><br><span class="language-xml">          setName(&#123;</span><br><span class="language-xml">            ...name,</span><br><span class="language-xml">            lastName: e.target.value</span><br><span class="language-xml">          &#125;)</span><br><span class="language-xml">        &#125;&#125;</span><br><span class="language-xml">      /&gt;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Your first name is &#123;name.firstName&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Your last name is &#123;name.lastName&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;JSON.stringify(name)&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">HookCounter</span><br></code></pre></td></tr></table></figure><hr><p>useState with Array</p><p>ç‚¹å‡»æŒ‰é’®ï¼Œåˆ—è¡¨å¢åŠ ä¸€ä¸ª1-10çš„éšæœºæ•°</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ItemType</span> &#123;<br>  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span><br>  <span class="hljs-attr">value</span>: <span class="hljs-built_in">number</span><br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">UseStateWithArray</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [items, setItems] = useState&lt;<span class="hljs-title class_">ItemType</span>[]&gt;([])<br><br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">addItem</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-title function_">setItems</span>([<br>      ...items,<br>      &#123;<br>        <span class="hljs-attr">id</span>: items.<span class="hljs-property">length</span>,<br>        <span class="hljs-attr">value</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">10</span>)<br>      &#125;<br>    ])<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;addItem&#125;</span>&gt;</span>add a number<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">        &#123;</span><br><span class="language-xml">          items.length &gt; 0 &amp;&amp; items.map((item: ItemType) =&gt; (</span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;item.id&#125;</span>&gt;</span>&#123;item.id&#125; : &#123;item.value&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">          ))</span><br><span class="language-xml">        &#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">UseStateWithArray</span><br></code></pre></td></tr></table></figure><p>æ³¨æ„ state ä¸­ä¸ä¼šè‡ªåŠ¨è¡¥å…¨æ—§çš„å˜é‡ï¼Œéœ€è¦ä½¿ç”¨å±•å¼€è¿ç®—ç¬¦è‡ªå·±æ‰‹åŠ¨è¡¥å……</p><h5 id="2-useEffect"><a href="#2-useEffect" class="headerlink" title="2 useEffect"></a>2 useEffect</h5><blockquote><p>é¡µé¢åˆ·æ–°æ—¶å’Œé”€æ¯æ—¶è°ƒç”¨</p></blockquote><p>useEffect api çš„ç”¨æ³•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºåŒ¿åå‡½æ•°ï¼Œä½œä¸º effect è¦æ‰§è¡Œçš„å†…å®¹ã€‚ç¬¬äºŒä¸ªå‚æ•°ä¸ºæ•°ç»„ï¼Œç”¨äºè§‚å¯Ÿæ”¹å˜çš„ props æˆ– state è¿›è¡Œæœ‰æ¡ä»¶çš„è§¦å‘ effectï¼Œæˆ–è€…ä¼ å…¥ç©ºæ•°ç»„ï¼Œè®© effect åªæ‰§è¡Œä¸€æ¬¡ã€‚useEffect è¿”å›ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œåœ¨ç»„ä»¶é”€æ¯æ˜¯æ‰§è¡Œï¼Œå¯ä»¥æœ‰æ•ˆé¿å…å†…å­˜æ³„éœ²çš„é£é™©ã€‚</p><p>å¯ä»¥è®¤ä¸ºæ˜¯ componentDidMount, componentDidUpdate, componentWillUnmount çš„æ›¿ä»£å“ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState, useEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">HookCounter</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>)<br><br>  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-variable language_">document</span>.<span class="hljs-property">title</span> = <span class="hljs-string">`<span class="hljs-subst">$&#123;count&#125;</span> times`</span><br>  &#125;)<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">        setCount(prevCount =&gt; prevCount + 1)</span><br><span class="language-xml">      &#125;&#125; &gt;Clicked &#123;count&#125; times<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">HookCounter</span><br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ° useEffect çš„ç¬¬ä¸€ä¸ªå…¥å‚æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œå®ƒä¼šåœ¨æ¯æ¬¡ render åè°ƒç”¨ã€‚åœ¨ç¬¬ä¸€æ¬¡ render å’Œåç»­çš„æ›´æ–° render éƒ½ä¼šè¢«è°ƒç”¨ã€‚</p><p>å¦å¤–ï¼ŒuseEffect å†™åœ¨å‡½æ•°å¼ç»„ä»¶å†…ï¼Œè¿™æ ·å°±å¯ä»¥ç›´æ¥æ‹¿åˆ° props å’Œ state çš„å€¼ï¼Œä¸ç”¨å†™ this ä¹‹ç±»çš„ä»£ç ã€‚</p><hr><p>æœ‰æ¡ä»¶çš„æ‰§è¡ŒuseEffect</p><p>ä¸Šä¸€èŠ‚äº†è§£åˆ° useEffect ä¼šåœ¨æ¯æ¬¡ render åæ‰§è¡Œé‡Œé¢çš„å‡½æ•°ï¼Œè¿™å¯èƒ½ä¼šæœ‰ä¸€äº›æ€§èƒ½é—®é¢˜ï¼Œæ¥ä¸‹æ¥å°±è®²ä¸€è®²å¦‚ä½•æœ‰æ¡ä»¶åœ°æ‰§è¡Œ useEffect ä¸­çš„åŒ¿åå‡½æ•°ã€‚</p><p>åœ¨ä¸Šä¸€èŠ‚çš„ç¤ºä¾‹ä¸Šè¿›è¡Œæ‰©å±•ä¸€ä¸ªè¾“å…¥ name çš„åŠŸèƒ½ï¼Œé€šè¿‡åˆ¤æ–­åªæ‰§è¡Œ count å˜åŒ–å¸¦æ¥çš„é€»è¾‘ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState, useEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">HookCounter</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>)<br>  <span class="hljs-keyword">const</span> [name, setName] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&#x27;&#x27;</span>)<br><br>  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;useEffect - update title&#x27;</span>)<br>    <span class="hljs-variable language_">document</span>.<span class="hljs-property">title</span> = <span class="hljs-string">`You clicked <span class="hljs-subst">$&#123;count&#125;</span> times`</span><br>  &#125;, [count])<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;name&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;(e)</span> =&gt;</span> &#123;</span><br><span class="language-xml">          setName(e.target.value)</span><br><span class="language-xml">        &#125;&#125;</span><br><span class="language-xml">      /&gt;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">        setCount(prevCount =&gt; prevCount + 1)</span><br><span class="language-xml">      &#125;&#125; &gt;Clicked &#123;count&#125; times<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">HookCounter</span><br></code></pre></td></tr></table></figure><p>æ³¨æ„åˆ° useEffect çš„ç¬¬äºŒä¸ªå‚æ•° <code>[count]</code>ï¼Œè¿™ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå…ƒç´ æ˜¯è¦è¢«è§‚å¯Ÿçš„ state æˆ– propsï¼Œåªæœ‰æŒ‡å®šçš„è¿™ä¸ªå˜é‡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰ä¼šè§¦å‘ useEffect ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°åŒ¿åå‡½æ•°çš„æ‰§è¡Œã€‚è¿™æœ‰åˆ©äºæ€§èƒ½çš„ä¿è¯ã€‚</p><hr><p>åªæ‰§è¡Œä¸€æ¬¡useEffect</p><p>é€šè¿‡ä¸€ä¸ªè®°å½•é¼ æ ‡åæ ‡çš„ç¤ºä¾‹ç ”ç©¶ä¸€ä¸‹å¦‚ä½•åªæ‰§è¡Œä¸€æ¬¡ useEffect</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState, useEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">RunEffectsOnlyOnce</span>(<span class="hljs-params"></span>) &#123;<br><br>  <span class="hljs-keyword">const</span> [x, setX] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>)<br>  <span class="hljs-keyword">const</span> [y, setY] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>)<br><br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">logMousePos</span> = (<span class="hljs-params">e: MouseEvent</span>) =&gt; &#123;<br>    <span class="hljs-title function_">setX</span>(e.<span class="hljs-property">clientX</span>)<br>    <span class="hljs-title function_">setY</span>(e.<span class="hljs-property">clientY</span>)<br>  &#125;<br><br>  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;addEventListener&#x27;</span>)<br>    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;mousemove&#x27;</span>, logMousePos)<br>  &#125;, [])<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      Y - &#123;y&#125;, X - &#123;x&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">RunEffectsOnlyOnce</span><br></code></pre></td></tr></table></figure><p>æ³¨æ„åˆ° useEffect æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ä¸€ä¸ªç©ºæ•°ç»„ï¼Œæœ‰æ•ˆçš„é¿å…äº†å¤šæ¬¡è°ƒç”¨çš„é—®é¢˜ã€‚</p><p>å¦‚æœæƒ³æ‰§è¡Œåªè¿è¡Œä¸€æ¬¡çš„ effectï¼ˆä»…åœ¨ç»„ä»¶æŒ‚è½½å’Œå¸è½½æ—¶æ‰§è¡Œï¼‰ï¼Œå¯ä»¥ä¼ é€’ä¸€ä¸ªç©ºæ•°ç»„ï¼ˆ[]ï¼‰ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ã€‚è¿™å°±å‘Šè¯‰ React ä½ çš„ effect ä¸ä¾èµ–äº props æˆ– state ä¸­çš„ä»»ä½•å€¼ï¼Œæ‰€ä»¥å®ƒæ°¸è¿œéƒ½ä¸éœ€è¦é‡å¤æ‰§è¡Œã€‚è¿™å¹¶ä¸å±äºç‰¹æ®Šæƒ…å†µ â€”â€” å®ƒä¾ç„¶éµå¾ªä¾èµ–æ•°ç»„çš„å·¥ä½œæ–¹å¼ã€‚</p><p>å¦‚æœä½ ä¼ å…¥äº†ä¸€ä¸ªç©ºæ•°ç»„ï¼ˆ[]ï¼‰ï¼Œeffect å†…éƒ¨çš„ props å’Œ state å°±ä¼šä¸€ç›´æ‹¥æœ‰å…¶åˆå§‹å€¼ã€‚å°½ç®¡ä¼ å…¥ [] ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°æ›´æ¥è¿‘å¤§å®¶æ›´ç†Ÿæ‚‰çš„ <code>componentDidMount</code> å’Œ <code>componentWillUnmount</code> æ€ç»´æ¨¡å¼ï¼Œä½†æˆ‘ä»¬æœ‰æ›´å¥½çš„æ–¹å¼æ¥é¿å…è¿‡äºé¢‘ç¹çš„é‡å¤è°ƒç”¨ effectã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¯·è®°å¾— React ä¼šç­‰å¾…æµè§ˆå™¨å®Œæˆç”»é¢æ¸²æŸ“ä¹‹åæ‰ä¼šå»¶è¿Ÿè°ƒç”¨ <code>useEffect</code>ï¼Œå› æ­¤ä¼šä½¿å¾—é¢å¤–æ“ä½œå¾ˆæ–¹ä¾¿ã€‚</p><hr><p>éœ€è¦æ¸…é™¤çš„Effect<br>åœ¨ useEffect çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸­æ·»åŠ ä¸€ä¸ª return åŒ¿åå‡½æ•°ï¼Œè¿™ä¸ªåŒ¿åå‡½æ•°å°†åœ¨ç»„ä»¶å¸è½½çš„æ—¶å€™æ‰§è¡Œã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;addEventListener&#x27;</span>)<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;mousemove&#x27;</span>, logMousePos)<br>  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">&#x27;mousemove&#x27;</span>, logMousePos)<br>  &#125;<br>&#125;, [])<br></code></pre></td></tr></table></figure><hr><p>useEffectä¸­ä¾èµ–é”™è¯¯å¯¼è‡´çš„bug</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState, useEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">IntervalCouterHooks</span>(<span class="hljs-params"></span>) &#123;<br><br>  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>)<br><br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">tick</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-title function_">setCount</span>(count + <span class="hljs-number">1</span>)<br>  &#125;<br><br>  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> interval = <span class="hljs-built_in">setInterval</span>(tick, <span class="hljs-number">1000</span>)<br>    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-built_in">clearInterval</span>(interval)<br>    &#125;<br>  &#125;, [])<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      &#123;count&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">IntervalCouterHooks</span><br></code></pre></td></tr></table></figure><p>ä¼ å…¥ç©ºçš„ä¾èµ–æ•°ç»„ <code>[]</code>ï¼Œæ„å‘³ç€è¯¥ hook åªåœ¨ç»„ä»¶æŒ‚è½½æ—¶è¿è¡Œä¸€æ¬¡ï¼Œå¹¶éé‡æ–°æ¸²æŸ“æ—¶ã€‚ä½†å¦‚æ­¤ä¼šæœ‰é—®é¢˜ï¼Œåœ¨ <code>setInterval</code> <code>çš„å›è°ƒä¸­ï¼Œcount</code> çš„å€¼ä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚å› ä¸ºå½“ effect æ‰§è¡Œæ—¶ï¼Œæˆ‘ä»¬ä¼šåˆ›å»ºä¸€ä¸ªé—­åŒ…ï¼Œå¹¶å°† <code>count</code> çš„å€¼è¢«ä¿å­˜åœ¨è¯¥é—­åŒ…å½“ä¸­ï¼Œä¸”åˆå€¼ä¸º 0ã€‚æ¯éš”ä¸€ç§’ï¼Œå›è°ƒå°±ä¼šæ‰§è¡Œ <code>setCount(0 + 1)</code>ï¼Œå› æ­¤ï¼Œ<code>count</code> æ°¸è¿œä¸ä¼šè¶…è¿‡ 1ã€‚</p><p>è§£æ³•ä¸€ï¼šè¿™é‡Œæˆ‘ä»¬ä¸èƒ½å°† useEffect çš„ç¬¬äºŒä¸ªå‚æ•°è®¾ç½®ä¸ºç©ºæ•°ç»„ï¼Œè€Œæ˜¯ <code>[count]</code>ã€‚</p><p>æŒ‡å®š <code>[count]</code> ä½œä¸ºä¾èµ–åˆ—è¡¨å°±èƒ½ä¿®å¤è¿™ä¸ª Bugï¼Œä½†ä¼šå¯¼è‡´æ¯æ¬¡æ”¹å˜å‘ç”Ÿæ—¶å®šæ—¶å™¨éƒ½è¢«é‡ç½®ã€‚äº‹å®ä¸Šï¼Œæ¯ä¸ª <code>setInterval</code> åœ¨è¢«æ¸…é™¤å‰ï¼ˆç±»ä¼¼äº setTimeoutï¼‰éƒ½ä¼šè°ƒç”¨ä¸€æ¬¡ã€‚ä½†è¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ setState çš„å‡½æ•°å¼æ›´æ–°å½¢å¼ã€‚å®ƒå…è®¸æˆ‘ä»¬æŒ‡å®š state è¯¥å¦‚ä½•æ”¹å˜è€Œä¸ç”¨å¼•ç”¨å½“å‰ stateï¼Œå³ä¸‹é¢çš„è§£æ³•äºŒ</p><p>è§£æ³•äºŒï¼šå°†<code>setCount(count + 1)</code>æ”¹ä¸º<code>setCount((prevCount) =&gt; preCount + 1)</code></p><p>useEffect çš„ä¾èµ–æ•°ç»„é‡Œä¾ç„¶ä½¿ç”¨ç©ºæ•°ç»„ã€‚è¿™é‡Œè®¾ç½®äº† count çš„å€¼æ˜¯å’Œä¸Šä¸€ä¸ªå€¼æœ‰å…³ï¼Œä¹Ÿè§£å†³äº†é—®é¢˜ã€‚æ­¤æ—¶ï¼Œ<code>setInterval</code> çš„å›è°ƒä¾æ—§æ¯ç§’è°ƒç”¨ä¸€æ¬¡ï¼Œä½†æ¯æ¬¡ setCount å†…éƒ¨çš„å›è°ƒå–åˆ°çš„ <code>count</code> æ˜¯æœ€æ–°å€¼ï¼ˆåœ¨å›è°ƒä¸­å˜é‡å‘½åä¸º cï¼‰ã€‚</p><hr><p>å¤šä¸ªuseEffect</p><p>å¦‚æœä»£ç ä¸­æœ‰å¤šä¸ªä¸šåŠ¡é€»è¾‘ï¼Œå¯ä»¥å°†ä»–ä»¬å†™åœ¨ä¸åŒçš„ useEffect ä¸­ï¼Œå¹¶ä¸”å¯ä»¥å†™å¤šä¸ª useState å’Œä»–ä»¬åŒ¹é…åˆ†ç»„ä½¿ç”¨ï¼Œä¼šè®©ä¸šåŠ¡é€»è¾‘æ›´åŠ æ¸…æ™°ã€‚</p><hr><p>Fetch Data with Effect Hookï¼šä½¿ç”¨ useEffect æ¥è·å–æ•°æ®ï¼Œä½¿ç”¨ axios åº“ç¤ºä¾‹ï¼Œ<a href="https://link.juejin.cn/?target=https://jsonplaceholder.typicode.com/">jsonplaceholder.typicode.com&#x2F;</a> ç½‘ç«™æä¾›äº†ç¤ºä¾‹çš„è¯·æ±‚ï¼Œè¿”å›äº†ä¸€äº› json æ•°æ®ã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState, useEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span><br><br><span class="hljs-keyword">interface</span> postType &#123;<br>  <span class="hljs-attr">userId</span>: <span class="hljs-built_in">number</span><br>  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span><br>  <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span><br>  <span class="hljs-attr">body</span>: <span class="hljs-built_in">string</span><br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">FetchData</span>(<span class="hljs-params"></span>) &#123;<br><br>  <span class="hljs-keyword">const</span> [posts, setPosts] = useState&lt;postType[]&gt;([])<br><br>  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;https://jsonplaceholder.typicode.com/posts&#x27;</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">const</span> <span class="hljs-attr">data</span>: postType[] = res.<span class="hljs-property">data</span><br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data)<br>      <span class="hljs-title function_">setPosts</span>(data)<br>    &#125;).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">rej</span>) =&gt;</span> &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(rej)<br>    &#125;)<br>  &#125;, [])<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">        &#123;</span><br><span class="language-xml">          posts.map((item) =&gt; (</span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">li</span></span></span><br><span class="hljs-tag"><span class="language-xml">              <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;item.id&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">            &gt;</span></span><br><span class="language-xml">              &#123;item.title&#125;</span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">          ))</span><br><span class="language-xml">        &#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">FetchData</span><br></code></pre></td></tr></table></figure><p>æ³¨æ„ useEffect ç¬¬äºŒä¸ªä¾èµ–å‚æ•°ä¼ å…¥ç©ºæ•°ç»„ï¼Œä¿è¯äº† useEffect åªæ‰§è¡Œä¸€æ¬¡ã€‚</p><p>è¾“å…¥idè·å–ä¸åŒæ•°æ®</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState, useEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span><br><br><span class="hljs-keyword">interface</span> postType &#123;<br>  <span class="hljs-attr">userId</span>: <span class="hljs-built_in">number</span><br>  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span><br>  <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span><br>  <span class="hljs-attr">body</span>: <span class="hljs-built_in">string</span><br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">FetchData</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [post, setPost] = useState&lt;postType&gt;()<br>  <span class="hljs-keyword">const</span> [id, setId] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&#x27;1&#x27;</span>)<br><br>  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (id) &#123;<br>      axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">`https://jsonplaceholder.typicode.com/posts/<span class="hljs-subst">$&#123;id&#125;</span>`</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">const</span> <span class="hljs-attr">data</span>: postType = res.<span class="hljs-property">data</span><br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data)<br>        <span class="hljs-title function_">setPost</span>(data)<br>      &#125;).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err)<br>      &#125;)<br>    &#125;<br>  &#125;, [id])<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;id&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;(e)</span> =&gt;</span> &#123;</span><br><span class="language-xml">          setId(e.target.value)</span><br><span class="language-xml">        &#125;&#125;</span><br><span class="language-xml">      /&gt;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        &#123;</span><br><span class="language-xml">          post &amp;&amp; post.title</span><br><span class="language-xml">        &#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">FetchData</span><br></code></pre></td></tr></table></figure><p>ç‚¹å‡»Buttonè§¦å‘effectï¼šç›‘å¬æŒ‰é’®ç‚¹å‡»è§¦å‘å˜åŒ–ï¼Œæ‰§è¡Œ effect æ–¹æ³•</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState, useEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span><br><br><span class="hljs-keyword">interface</span> postType &#123;<br>  <span class="hljs-attr">userId</span>: <span class="hljs-built_in">number</span><br>  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span><br>  <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span><br>  <span class="hljs-attr">body</span>: <span class="hljs-built_in">string</span><br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">FetchData</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [post, setPost] = useState&lt;postType&gt;()<br>  <span class="hljs-keyword">const</span> [id, setId] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&#x27;1&#x27;</span>)<br>  <span class="hljs-keyword">const</span> [idFromBtnClick, setIdFromBtnClick] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&#x27;1&#x27;</span>)<br><br>  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (idFromBtnClick) &#123;<br>      axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">`https://jsonplaceholder.typicode.com/posts/<span class="hljs-subst">$&#123;idFromBtnClick&#125;</span>`</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">const</span> <span class="hljs-attr">data</span>: postType = res.<span class="hljs-property">data</span><br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data)<br>        <span class="hljs-title function_">setPost</span>(data)<br>      &#125;).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err)<br>      &#125;)<br>    &#125;<br>  &#125;, [idFromBtnClick])<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;id&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;(e)</span> =&gt;</span> &#123;</span><br><span class="language-xml">          setId(e.target.value)</span><br><span class="language-xml">        &#125;&#125;</span><br><span class="language-xml">      /&gt;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">          setIdFromBtnClick(id)</span><br><span class="language-xml">        &#125;&#125;</span><br><span class="language-xml">      &gt;Fetch Post<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        &#123;</span><br><span class="language-xml">          post &amp;&amp; post.title</span><br><span class="language-xml">        &#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">FetchData</span><br></code></pre></td></tr></table></figure><h5 id="3-useContext"><a href="#3-useContext" class="headerlink" title="3 useContext"></a>3 useContext</h5><blockquote><p>ç»„ä»¶é—´ä¼ å€¼</p></blockquote><p>Context api æ˜¯åœ¨ç»„ä»¶æ ‘ä¸­ä¼ é€’æ•°æ®ä½†ä¸ç”¨æ¯å±‚éƒ½ç»è¿‡çš„ä¸€ç§ apiã€‚</p><p>ä½¿ç”¨Context</p><ol><li>åœ¨æ ¹èŠ‚ç‚¹ App.tsx ä¸­ä½¿ç”¨ <code>createContext()</code> æ¥åˆ›å»ºä¸€ä¸ª context</li></ol><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">UserContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>(<span class="hljs-string">&#x27;&#x27;</span>)<br></code></pre></td></tr></table></figure><p>åˆ›å»ºä¸€ä¸ª Context å¯¹è±¡ã€‚å½“ React æ¸²æŸ“ä¸€ä¸ªè®¢é˜…äº†è¿™ä¸ª Context å¯¹è±¡çš„ç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶ä¼šä»ç»„ä»¶æ ‘ä¸­ç¦»è‡ªèº«æœ€è¿‘çš„é‚£ä¸ªåŒ¹é…çš„ Provider ä¸­è¯»å–åˆ°å½“å‰çš„ context å€¼ã€‚</p><p>åªæœ‰å½“ç»„ä»¶æ‰€å¤„çš„æ ‘ä¸­æ²¡æœ‰åŒ¹é…åˆ° Provider æ—¶ï¼Œå…¶ defaultValue å‚æ•°æ‰ä¼šç”Ÿæ•ˆã€‚è¿™æœ‰åŠ©äºåœ¨ä¸ä½¿ç”¨ Provider åŒ…è£…ç»„ä»¶çš„æƒ…å†µä¸‹å¯¹ç»„ä»¶è¿›è¡Œæµ‹è¯•ã€‚æ³¨æ„ï¼šå°† undefined ä¼ é€’ç»™ Provider çš„ value æ—¶ï¼Œæ¶ˆè´¹ç»„ä»¶çš„ defaultValue ä¸ä¼šç”Ÿæ•ˆã€‚</p><ol start="2"><li>æä¾›Provider</li></ol><p>åœ¨æ ¹èŠ‚ç‚¹ä¸­ä½¿ç”¨ Provider åŒ…è£¹å­èŠ‚ç‚¹ï¼Œå°† context æä¾›ç»™å­èŠ‚ç‚¹</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript">&lt;<span class="hljs-title class_">UserContext</span>.<span class="hljs-property">Provider</span> value=&#123;<span class="hljs-string">&#x27;chuanshi&#x27;</span>&#125;&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ComponentC</span> /&gt;</span></span><br>&lt;/<span class="hljs-title class_">UserContext</span>.<span class="hljs-property">Provider</span>&gt;<br></code></pre></td></tr></table></figure><p>æ¯ä¸ª Context å¯¹è±¡éƒ½ä¼šè¿”å›ä¸€ä¸ª Provider React ç»„ä»¶ï¼Œå®ƒå…è®¸æ¶ˆè´¹ç»„ä»¶è®¢é˜… context çš„å˜åŒ–ã€‚</p><p>Provider æ¥æ”¶ä¸€ä¸ª <code>value</code> å±æ€§ï¼Œä¼ é€’ç»™æ¶ˆè´¹ç»„ä»¶ã€‚ä¸€ä¸ª Provider å¯ä»¥å’Œå¤šä¸ªæ¶ˆè´¹ç»„ä»¶æœ‰å¯¹åº”å…³ç³»ã€‚å¤šä¸ª Provider ä¹Ÿå¯ä»¥åµŒå¥—ä½¿ç”¨ï¼Œé‡Œå±‚çš„ä¼šè¦†ç›–å¤–å±‚çš„æ•°æ®ã€‚</p><p>å½“ Provider çš„ <code>value</code> å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒå†…éƒ¨çš„æ‰€æœ‰æ¶ˆè´¹ç»„ä»¶éƒ½ä¼šé‡æ–°æ¸²æŸ“ã€‚Provider åŠå…¶å†…éƒ¨ consumer ç»„ä»¶éƒ½ä¸å—åˆ¶äº <code>shouldComponentUpdate</code> å‡½æ•°ï¼Œå› æ­¤å½“ consumer ç»„ä»¶åœ¨å…¶ç¥–å…ˆç»„ä»¶é€€å‡ºæ›´æ–°çš„æƒ…å†µä¸‹ä¹Ÿèƒ½æ›´æ–°ã€‚</p><p>é€šè¿‡æ–°æ—§å€¼æ£€æµ‹æ¥ç¡®å®šå˜åŒ–ï¼Œä½¿ç”¨äº†ä¸ Object.is ç›¸åŒçš„ç®—æ³•ã€‚</p><p>åˆ«å¿˜äº†å°†ä¹‹å‰å®šä¹‰å¥½çš„ Context export å‡ºå»ï¼Œä»¥ä¾¿åœ¨å­å­™èŠ‚ç‚¹ä¸­å¼•å…¥</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">UserContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>(<span class="hljs-string">&#x27;&#x27;</span>)<br></code></pre></td></tr></table></figure><p>å®Œæ•´å†™åœ¨app.tsxçš„ä»£ç ä¸ºï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./App.css&#x27;</span><br><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">ComponentC</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/16ComponentC&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">UserContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>(<span class="hljs-string">&#x27;&#x27;</span>)<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;App&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">UserContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;</span>&#x27;<span class="hljs-attr">chuanshi</span>&#x27;&#125;&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">ComponentC</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">UserContext.Provider</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure><ol start="3"><li>åœ¨ä½¿ç”¨çš„èŠ‚ç‚¹å¤„æ¶ˆè´¹Context</li></ol><p>import context å¯¹è±¡</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">UserContext</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../App&#x27;</span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ Consumer è¿›è¡Œæ¶ˆè´¹</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs tsx">&lt;<span class="hljs-title class_">UserContext</span>.<span class="hljs-property">Consumer</span>&gt;<br>  &#123;<br>    <span class="hljs-function">(<span class="hljs-params">user</span>) =&gt;</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        User context value &#123;user&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&lt;/<span class="hljs-title class_">UserContext</span>.<span class="hljs-property">Consumer</span>&gt;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œï¼ŒReact ç»„ä»¶ä¹Ÿå¯ä»¥è®¢é˜…åˆ° context å˜æ›´ã€‚è¿™èƒ½è®©ä½ åœ¨å‡½æ•°å¼ç»„ä»¶ä¸­å®Œæˆè®¢é˜… contextã€‚</p><p>è¿™éœ€è¦å‡½æ•°ä½œä¸ºå­å…ƒç´ ï¼ˆfunction as a childï¼‰è¿™ç§åšæ³•ã€‚è¿™ä¸ªå‡½æ•°æ¥æ”¶å½“å‰çš„ context å€¼ï¼Œè¿”å›ä¸€ä¸ª React èŠ‚ç‚¹ã€‚ä¼ é€’ç»™å‡½æ•°çš„ value å€¼ç­‰åŒäºå¾€ä¸Šç»„ä»¶æ ‘ç¦»è¿™ä¸ª context æœ€è¿‘çš„ Provider æä¾›çš„ value å€¼ã€‚å¦‚æœæ²¡æœ‰å¯¹åº”çš„ Providerï¼Œvalue å‚æ•°ç­‰åŒäºä¼ é€’ç»™ createContext() çš„ defaultValueã€‚</p><hr><p>å¤šä¸ªContextæƒ…å†µ</p><p>åœ¨app.tsxä¸­å¢åŠ ä¸€ä¸ªContextï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./App.css&#x27;</span><br><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">ComponentC</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/16ComponentC&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">UserContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>(<span class="hljs-string">&#x27;&#x27;</span>)<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">ChannelContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>(<span class="hljs-string">&#x27;&#x27;</span>)<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;App&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">UserContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;</span>&#x27;<span class="hljs-attr">chuanshi</span>&#x27;&#125;&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">ChannelContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;</span>&#x27;<span class="hljs-attr">code</span> <span class="hljs-attr">volution</span>&#x27;&#125;&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">ComponentC</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">ChannelContext.Provider</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">UserContext.Provider</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥åœ¨ component F ä¸­æ¶ˆè´¹å®ƒä»¬</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">UserContext</span>, <span class="hljs-title class_">ChannelContext</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../App&#x27;</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">ComponentF</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">UserContext.Consumer</span>&gt;</span></span><br><span class="language-xml">        &#123;</span><br><span class="language-xml">          (user) =&gt; (</span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">ChannelContext.Consumer</span>&gt;</span></span><br><span class="language-xml">              &#123;</span><br><span class="language-xml">                (channel) =&gt; (</span><br><span class="language-xml">                  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">                    User context value &#123;user&#125;, channel value &#123;channel&#125;</span><br><span class="language-xml">                  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">                )</span><br><span class="language-xml">              &#125;</span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">ChannelContext.Consumer</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">          )</span><br><span class="language-xml">        &#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">UserContext.Consumer</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">ComponentF</span><br></code></pre></td></tr></table></figure><p>æ›´å¥½çš„æ–¹å¼ï¼šä½¿ç”¨useContext hook api</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useContext &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">ComponentF</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./16ComponentF&#x27;</span><br><span class="hljs-keyword">import</span> &#123;<span class="hljs-title class_">UserContext</span>, <span class="hljs-title class_">ChannelContext</span>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../App&#x27;</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">ComponentE</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> user = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">UserContext</span>)<br>  <span class="hljs-keyword">const</span> channel = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">ChannelContext</span>)<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      &#123;user&#125; - &#123;channel&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">ComponentE</span><br></code></pre></td></tr></table></figure><p>å…³é”®çš„ä»£ç ï¼š<code>const value = useContext(MyContext)</code></p><p>useContext æ–¹æ³•æ¥æ”¶ä¸€ä¸ª context å¯¹è±¡ï¼ˆ<code>React.createContext</code> çš„è¿”å›å€¼ï¼‰å¹¶è¿”å›è¯¥ context çš„å½“å‰å€¼ã€‚å½“å‰çš„ context å€¼ç”±ä¸Šå±‚ç»„ä»¶ä¸­è·ç¦»å½“å‰ç»„ä»¶æœ€è¿‘çš„ <code>&lt;MyContext.Provider&gt;</code> çš„ <code>value</code> prop å†³å®šã€‚</p><p>å½“ç»„ä»¶ä¸Šå±‚æœ€è¿‘çš„ <code>&lt;MyContext.Provider&gt;</code> æ›´æ–°æ—¶ï¼Œè¯¥ Hook ä¼šè§¦å‘é‡æ¸²æŸ“ï¼Œå¹¶ä½¿ç”¨æœ€æ–°ä¼ é€’ç»™ <code>MyContext</code> provider çš„ context <code>value</code> å€¼ã€‚å³ä½¿ç¥–å…ˆä½¿ç”¨ <code>React.memo</code> æˆ– <code>shouldComponentUpdate</code>ï¼Œä¹Ÿä¼šåœ¨ç»„ä»¶æœ¬èº«ä½¿ç”¨ <code>useContext</code> æ—¶é‡æ–°æ¸²æŸ“ã€‚</p><p>å¯ä»¥ç†è§£ä¸ºï¼Œ<code>useContext(MyContext)</code> ç›¸å½“äº class ç»„ä»¶ä¸­çš„ <code>static contextType = MyContext</code> æˆ–è€… <code>&lt;MyContext.Consumer&gt;</code>ã€‚</p><p><code>useContext(MyContext)</code> åªæ˜¯è®©ä½ èƒ½å¤Ÿè¯»å– context çš„å€¼ä»¥åŠè®¢é˜… context çš„å˜åŒ–ã€‚ä½ ä»ç„¶éœ€è¦åœ¨ä¸Šå±‚ç»„ä»¶æ ‘ä¸­ä½¿ç”¨ <code>&lt;MyContext.Provider&gt;</code> æ¥ä¸ºä¸‹å±‚ç»„ä»¶æä¾› contextã€‚</p><h5 id="4-useReducer"><a href="#4-useReducer" class="headerlink" title="4 useReducer"></a>4 useReducer</h5><blockquote><p>å¯¹å€¼æˆ–å¯¹è±¡çš„å¤æ‚å˜åŒ–ç»Ÿä¸€ç®¡ç†</p></blockquote><p><code>useReducer</code> æ˜¯ä¸€ä¸ªç”¨äºçŠ¶æ€ç®¡ç†çš„ hook apiã€‚æ˜¯ <code>useState</code> çš„æ›¿ä»£æ–¹æ¡ˆã€‚</p><p>é‚£ä¹ˆ <code>useReducer</code> å’Œ <code>useState</code> çš„åŒºåˆ«æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿç­”æ¡ˆæ˜¯<code>useState</code> æ˜¯ä½¿ç”¨ <code>useReducer</code> æ„å»ºçš„ã€‚</p><p>ä½¿ç”¨ï¼š<code>[newState, dispatch] = useReducer(reducer, initialState)</code></p><hr><p>ä¸€ä¸ªç®€å•ä¾‹å­ï¼šCounterOne.tsx</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useReducer &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">const</span> initialState = <span class="hljs-number">0</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">reducer</span> = (<span class="hljs-params">state: <span class="hljs-built_in">number</span>, action: <span class="hljs-built_in">string</span></span>) =&gt; &#123;<br>  <span class="hljs-keyword">switch</span> (action) &#123;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;increment&#x27;</span>:<br>      <span class="hljs-keyword">return</span> state + <span class="hljs-number">1</span><br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;decrement&#x27;</span>:<br>      <span class="hljs-keyword">return</span> state - <span class="hljs-number">1</span><br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;reset&#x27;</span>:<br>      <span class="hljs-keyword">return</span> initialState<br>    <span class="hljs-attr">default</span>:<br>      <span class="hljs-keyword">return</span> state<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">CounterOne</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [count, dispatch] = <span class="hljs-title function_">useReducer</span>(reducer, initialState)<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Count - &#123;count&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> dispatch(&#x27;increment&#x27;)&#125;</span><br><span class="language-xml">      &gt;Increment<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> dispatch(&#x27;decrement&#x27;)&#125;</span><br><span class="language-xml">      &gt;Decrement<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> dispatch(&#x27;reset&#x27;)&#125;</span><br><span class="language-xml">      &gt;Reset<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">CounterOne</span><br></code></pre></td></tr></table></figure><p>reducer function çš„2ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä¸ºå½“å‰ state å’Œ actionï¼Œ å¹¶æ ¹æ®ä¸åŒçš„ action è¿”å›ä¸åŒçš„æ–°çš„ stateã€‚</p><p>useReducer è¿”å›äº†ä¸€ä¸ªæ•°ç»„ï¼Œ2ä¸ªå…ƒç´ åˆ†åˆ«ä¸º state å’Œ dispatch æ–¹æ³•ã€‚å…¶ä¸­ state åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­å°±æ˜¯å½“å‰çš„ count å€¼ï¼Œdispatch æ–¹æ³•æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œæ‰§è¡Œå¯¹åº”çš„ actionã€‚dispatch æ‰§è¡Œåï¼Œå¯¹åº”çš„ state ä¼šæ”¹å˜ï¼Œç»„ä»¶ä¼š rerenderï¼Œæ¥å±•ç¤ºæœ€æ–°çš„çŠ¶æ€ã€‚</p><p>App.tsx</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./App.css&#x27;</span><br><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">CounterOne</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/19CounterOne&#x27;</span><br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;App&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">CounterOne</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure><hr><p>complex state &amp; action</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useReducer &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">const</span> initialState = &#123;<br>  <span class="hljs-attr">firstCounter</span>: <span class="hljs-number">0</span><br>&#125;<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">reducer</span> = (<span class="hljs-params"></span><br><span class="hljs-params">  state: &#123;</span><br><span class="hljs-params">    firstCounter: <span class="hljs-built_in">number</span></span><br><span class="hljs-params">  &#125;,</span><br><span class="hljs-params">  action: &#123;</span><br><span class="hljs-params">    <span class="hljs-keyword">type</span>: <span class="hljs-built_in">string</span></span><br><span class="hljs-params">  &#125;</span><br><span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">switch</span> (action.<span class="hljs-property">type</span>) &#123;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;increment&#x27;</span>:<br>      <span class="hljs-keyword">return</span> &#123;<br>        <span class="hljs-attr">firstCounter</span>: state.<span class="hljs-property">firstCounter</span> + <span class="hljs-number">1</span><br>      &#125;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;decrement&#x27;</span>:<br>      <span class="hljs-keyword">return</span> &#123;<br>        <span class="hljs-attr">firstCounter</span>: state.<span class="hljs-property">firstCounter</span> - <span class="hljs-number">1</span><br>      &#125;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;reset&#x27;</span>:<br>      <span class="hljs-keyword">return</span> initialState<br>    <span class="hljs-attr">default</span>:<br>      <span class="hljs-keyword">return</span> state<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">CounterTwo</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [count, dispatch] = <span class="hljs-title function_">useReducer</span>(reducer, initialState)<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Count - &#123;count.firstCounter&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &#x27;increment&#x27; &#125;)&#125;</span><br><span class="language-xml">      &gt;Increment<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &#x27;decrement&#x27; &#125;)&#125;</span><br><span class="language-xml">      &gt;Decrement<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &#x27;reset&#x27; &#125;)&#125;</span><br><span class="language-xml">      &gt;Reset<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">CounterTwo</span><br></code></pre></td></tr></table></figure><p>ä¸ä¸Šä¸€èŠ‚çš„ç¤ºä¾‹æ•ˆæœç›¸åŒã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»å°† state å’Œ action éƒ½æ”¹å†™ä¸ºå¯¹è±¡äº†ï¼Œé‚£ä¹ˆè¿™æ ·å†™æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿ</p><p>å…¶ä¸€çš„å¥½å¤„æ˜¯ action ç°åœ¨æ˜¯ä¸€ä¸ªå¯¹è±¡äº†ï¼Œå¯ä»¥æœ‰å¤šä¸ªå±æ€§å†³å®š action çš„æ•ˆæœã€‚ä¾‹å¦‚æˆ‘ä»¬å†æ·»åŠ ä¸€ä¸ª +5 çš„é€»è¾‘ã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useReducer &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">const</span> initialState = &#123;<br>  <span class="hljs-attr">firstCounter</span>: <span class="hljs-number">0</span><br>&#125;<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">reducer</span> = (<span class="hljs-params"></span><br><span class="hljs-params">  state: &#123;</span><br><span class="hljs-params">    firstCounter: <span class="hljs-built_in">number</span></span><br><span class="hljs-params">  &#125;,</span><br><span class="hljs-params">  action: &#123;</span><br><span class="hljs-params">    <span class="hljs-keyword">type</span>: <span class="hljs-built_in">string</span></span><br><span class="hljs-params">    value: <span class="hljs-built_in">number</span></span><br><span class="hljs-params">  &#125;</span><br><span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">switch</span> (action.<span class="hljs-property">type</span>) &#123;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;increment&#x27;</span>:<br>      <span class="hljs-keyword">return</span> &#123;<br>        <span class="hljs-attr">firstCounter</span>: state.<span class="hljs-property">firstCounter</span> + action.<span class="hljs-property">value</span><br>      &#125;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;decrement&#x27;</span>:<br>      <span class="hljs-keyword">return</span> &#123;<br>        <span class="hljs-attr">firstCounter</span>: state.<span class="hljs-property">firstCounter</span> - action.<span class="hljs-property">value</span><br>      &#125;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;reset&#x27;</span>:<br>      <span class="hljs-keyword">return</span> initialState<br>    <span class="hljs-attr">default</span>:<br>      <span class="hljs-keyword">return</span> state<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">CounterTwo</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [count, dispatch] = <span class="hljs-title function_">useReducer</span>(reducer, initialState)<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Count - &#123;count.firstCounter&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> dispatch(&#123;</span><br><span class="language-xml">          type: &#x27;increment&#x27;,</span><br><span class="language-xml">          value: 1</span><br><span class="language-xml">        &#125;)&#125;</span><br><span class="language-xml">      &gt;Increment<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> dispatch(&#123;</span><br><span class="language-xml">          type: &#x27;decrement&#x27;,</span><br><span class="language-xml">          value: 1</span><br><span class="language-xml">        &#125;)&#125;</span><br><span class="language-xml">      &gt;Decrement<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> dispatch(&#123;</span><br><span class="language-xml">          type: &#x27;increment&#x27;,</span><br><span class="language-xml">          value: 5</span><br><span class="language-xml">        &#125;)&#125;</span><br><span class="language-xml">      &gt;Increment 5<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> dispatch(&#123;</span><br><span class="language-xml">          type: &#x27;decrement&#x27;,</span><br><span class="language-xml">          value: 5</span><br><span class="language-xml">        &#125;)&#125;</span><br><span class="language-xml">      &gt;Decrement 5<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &#x27;reset&#x27;, value: 0&#125;)&#125;</span><br><span class="language-xml">      &gt;Reset<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">CounterTwo</span><br></code></pre></td></tr></table></figure><p>å¯ä»¥æ³¨æ„åˆ°ç»™ action å¢åŠ äº†ä¸€ä¸ª value å±æ€§ï¼Œå®ç°äº†åŠ å‡ 5 çš„é€»è¾‘ã€‚</p><p>ç¬¬äºŒä¸ªå¥½å¤„æ˜¯ state ä½œä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå°±å¯ä»¥æ·»åŠ æ›´å¤šçš„ state å±æ€§ï¼Œä¾‹å¦‚æˆ‘ä»¬åœ¨å¢åŠ ä¸€ä¸ªè®¡æ•°å™¨2ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useReducer &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">const</span> initialState = &#123;<br>  <span class="hljs-attr">firstCounter</span>: <span class="hljs-number">0</span>,<br>  <span class="hljs-attr">secondCounter</span>: <span class="hljs-number">10</span>,<br>&#125;<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">reducer</span> = (<span class="hljs-params"></span><br><span class="hljs-params">  state: &#123;</span><br><span class="hljs-params">    firstCounter: <span class="hljs-built_in">number</span></span><br><span class="hljs-params">    secondCounter: <span class="hljs-built_in">number</span></span><br><span class="hljs-params">  &#125;,</span><br><span class="hljs-params">  action: &#123;</span><br><span class="hljs-params">    <span class="hljs-keyword">type</span>: <span class="hljs-built_in">string</span></span><br><span class="hljs-params">    value: <span class="hljs-built_in">number</span></span><br><span class="hljs-params">  &#125;</span><br><span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">switch</span> (action.<span class="hljs-property">type</span>) &#123;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;increment&#x27;</span>:<br>      <span class="hljs-keyword">return</span> &#123;<br>        ...state,<br>        <span class="hljs-attr">firstCounter</span>: state.<span class="hljs-property">firstCounter</span> + action.<span class="hljs-property">value</span><br>      &#125;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;decrement&#x27;</span>:<br>      <span class="hljs-keyword">return</span> &#123;<br>        ...state,<br>        <span class="hljs-attr">firstCounter</span>: state.<span class="hljs-property">firstCounter</span> - action.<span class="hljs-property">value</span><br>      &#125;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;increment2&#x27;</span>:<br>      <span class="hljs-keyword">return</span> &#123;<br>        ...state,<br>        <span class="hljs-attr">secondCounter</span>: state.<span class="hljs-property">secondCounter</span> + action.<span class="hljs-property">value</span><br>      &#125;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;decrement2&#x27;</span>:<br>      <span class="hljs-keyword">return</span> &#123;<br>        ...state,<br>        <span class="hljs-attr">secondCounter</span>: state.<span class="hljs-property">secondCounter</span> - action.<span class="hljs-property">value</span><br>      &#125;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;reset&#x27;</span>:<br>      <span class="hljs-keyword">return</span> initialState<br>    <span class="hljs-attr">default</span>:<br>      <span class="hljs-keyword">return</span> state<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">CounterTwo</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [count, dispatch] = <span class="hljs-title function_">useReducer</span>(reducer, initialState)<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>First Count - &#123;count.firstCounter&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Second Count - &#123;count.secondCounter&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> dispatch(&#123;</span><br><span class="language-xml">          type: &#x27;increment&#x27;,</span><br><span class="language-xml">          value: 1</span><br><span class="language-xml">        &#125;)&#125;</span><br><span class="language-xml">      &gt;Increment<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> dispatch(&#123;</span><br><span class="language-xml">          type: &#x27;decrement&#x27;,</span><br><span class="language-xml">          value: 1</span><br><span class="language-xml">        &#125;)&#125;</span><br><span class="language-xml">      &gt;Decrement<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> dispatch(&#123;</span><br><span class="language-xml">          type: &#x27;increment&#x27;,</span><br><span class="language-xml">          value: 5</span><br><span class="language-xml">        &#125;)&#125;</span><br><span class="language-xml">      &gt;Increment 5<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> dispatch(&#123;</span><br><span class="language-xml">          type: &#x27;decrement&#x27;,</span><br><span class="language-xml">          value: 5</span><br><span class="language-xml">        &#125;)&#125;</span><br><span class="language-xml">      &gt;Decrement 5<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> dispatch(&#123;</span><br><span class="language-xml">            type: &#x27;increment2&#x27;,</span><br><span class="language-xml">            value: 1</span><br><span class="language-xml">          &#125;)&#125;</span><br><span class="language-xml">        &gt;Increment second<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> dispatch(&#123;</span><br><span class="language-xml">            type: &#x27;decrement2&#x27;,</span><br><span class="language-xml">            value: 1</span><br><span class="language-xml">          &#125;)&#125;</span><br><span class="language-xml">        &gt;Decrement second<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &#x27;reset&#x27;, value: 0 &#125;)&#125;</span><br><span class="language-xml">      &gt;Reset<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">CounterTwo</span><br></code></pre></td></tr></table></figure><p>è¿™æ ·æˆ‘ä»¬å°±èƒ½åŒæ—¶ç»´æŠ¤ 2 ä¸ªè®¡æ—¶å™¨ã€‚</p><hr><p>multiple useReducersï¼šå¦‚æœæœ‰å¤šä¸ª stateï¼Œä½† state å˜åŒ–çš„æ–¹å¼åˆæ˜¯ç›¸åŒçš„æ—¶å€™ï¼Œå¯ä»¥å¤šæ¬¡ä½¿ç”¨ useReducerã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useReducer &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">const</span> initialState = <span class="hljs-number">0</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">reducer</span> = (<span class="hljs-params">state: <span class="hljs-built_in">number</span>, action: <span class="hljs-built_in">string</span></span>) =&gt; &#123;<br>  <span class="hljs-keyword">switch</span> (action) &#123;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;increment&#x27;</span>:<br>      <span class="hljs-keyword">return</span> state + <span class="hljs-number">1</span><br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;decrement&#x27;</span>:<br>      <span class="hljs-keyword">return</span> state - <span class="hljs-number">1</span><br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;reset&#x27;</span>:<br>      <span class="hljs-keyword">return</span> initialState<br>    <span class="hljs-attr">default</span>:<br>      <span class="hljs-keyword">return</span> state<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">CounterThree</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [count, dispatch] = <span class="hljs-title function_">useReducer</span>(reducer, initialState)<br>  <span class="hljs-keyword">const</span> [countTwo, dispatchTwo] = <span class="hljs-title function_">useReducer</span>(reducer, initialState)<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Count - &#123;count&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> dispatch(&#x27;increment&#x27;)&#125;</span><br><span class="language-xml">      &gt;Increment<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> dispatch(&#x27;decrement&#x27;)&#125;</span><br><span class="language-xml">      &gt;Decrement<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> dispatch(&#x27;reset&#x27;)&#125;</span><br><span class="language-xml">      &gt;Reset<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>CountTwo - &#123;countTwo&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> dispatchTwo(&#x27;increment&#x27;)&#125;</span><br><span class="language-xml">      &gt;Increment<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> dispatchTwo(&#x27;decrement&#x27;)&#125;</span><br><span class="language-xml">      &gt;Decrement<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> dispatchTwo(&#x27;reset&#x27;)&#125;</span><br><span class="language-xml">      &gt;Reset<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">CounterThree</span><br></code></pre></td></tr></table></figure><p>è¿™ä¸ªä¾‹å­ä¸­ä½¿ç”¨äº†å¤šä¸ª useReducerï¼Œä½†å…±ç”¨äº†ä¸€ä¸ª reducer functionã€‚è¿™æœ‰æ•ˆçš„é¿å…äº†åˆå¹¶å¯¹è±¡çš„éº»çƒ¦ï¼ˆå¯ä»¥å¯¹æ¯”ä¸Šä¸€èŠ‚ä½¿ç”¨å±•å¼€è¿ç®—æ³•åˆå¹¶ stateï¼‰ã€‚ä¹Ÿæé«˜äº†ä»£ç çš„å¤ç”¨æ€§ã€‚</p><hr><p>useReducer with useContext</p><p>å¦‚æœåœ¨æŸäº›åœºæ™¯æƒ³å†ç»„ä»¶ä¹‹é—´åˆ†äº« stateï¼Œè¿›è¡Œå…¨å±€çš„ state ç®¡ç†æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ useReducer åŠ  useContextã€‚</p><p>è¦å®Œæˆè¿™ä¸ªéœ€æ±‚åˆ†ä¸º 2 æ­¥</p><ol><li>ä½¿ç”¨ useReducer åœ¨æ ¹èŠ‚ç‚¹åˆ›å»ºä¸€ä¸ª counter æ–¹æ³•</li><li>é€šè¿‡ useContext ä¸ºå­ç»„ä»¶æä¾›å’Œæ¶ˆè´¹ context</li></ol><p>åœ¨app.tsx</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useReducer &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./App.css&#x27;</span><br><span class="hljs-keyword">import</span> A <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/22A&#x27;</span><br><span class="hljs-keyword">import</span> B <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/22B&#x27;</span><br><span class="hljs-keyword">import</span> C <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/22C&#x27;</span><br><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">CountContextType</span> &#123;<br>  <span class="hljs-attr">countState</span>: <span class="hljs-built_in">number</span><br>  <span class="hljs-attr">countDispatch</span>: <span class="hljs-function">(<span class="hljs-params">action: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">void</span><br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">CountContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>(&#123;&#125; <span class="hljs-keyword">as</span> <span class="hljs-title class_">CountContextType</span>)<br><br><span class="hljs-keyword">const</span> initialState = <span class="hljs-number">0</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">reducer</span> = (<span class="hljs-params">state: <span class="hljs-built_in">number</span>, action: <span class="hljs-built_in">string</span></span>) =&gt; &#123;<br>  <span class="hljs-keyword">switch</span> (action) &#123;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;increment&#x27;</span>:<br>      <span class="hljs-keyword">return</span> state + <span class="hljs-number">1</span><br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;decrement&#x27;</span>:<br>      <span class="hljs-keyword">return</span> state - <span class="hljs-number">1</span><br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;reset&#x27;</span>:<br>      <span class="hljs-keyword">return</span> initialState<br>    <span class="hljs-attr">default</span>:<br>      <span class="hljs-keyword">return</span> state<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">const</span> [count, dispatch] = <span class="hljs-title function_">useReducer</span>(reducer, initialState)<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">CountContext.Provider</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;&#123;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">countState:</span> <span class="hljs-attr">count</span>,</span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">countDispatch:</span> <span class="hljs-attr">dispatch</span>,</span></span><br><span class="hljs-tag"><span class="language-xml">      &#125;&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">    &gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;App&quot;</span>&gt;</span></span><br><span class="language-xml">        Count - &#123;count&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">A</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">B</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">C</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">CountContext.Provider</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure><p>A.tsx</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useContext &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">CountContext</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../App&#x27;</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">A</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> countContext = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">CountContext</span>)<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      A - &#123;countContext.countState&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> countContext.countDispatch(&#x27;increment&#x27;)&#125;</span><br><span class="language-xml">      &gt;Increment<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> countContext.countDispatch(&#x27;decrement&#x27;)&#125;</span><br><span class="language-xml">      &gt;Decrement<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> countContext.countDispatch(&#x27;reset&#x27;)&#125;</span><br><span class="language-xml">      &gt;Reset<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> A<br></code></pre></td></tr></table></figure><p>B.tsx</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> D <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./22D&#x27;</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">B</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">D</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> B<br></code></pre></td></tr></table></figure><p>C.tsx</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> E <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./22E&#x27;</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">C</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">E</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> C<br></code></pre></td></tr></table></figure><p>D.tsx</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useContext &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">CountContext</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../App&#x27;</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">D</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> countContext = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">CountContext</span>)<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      D - &#123;countContext.countState&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> countContext.countDispatch(&#x27;increment&#x27;)&#125;</span><br><span class="language-xml">      &gt;Increment<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> countContext.countDispatch(&#x27;decrement&#x27;)&#125;</span><br><span class="language-xml">      &gt;Decrement<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> countContext.countDispatch(&#x27;reset&#x27;)&#125;</span><br><span class="language-xml">      &gt;Reset<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> D<br></code></pre></td></tr></table></figure><p>E.tsx</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">import</span> F <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./22F&#x27;</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">E</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">F</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> E<br></code></pre></td></tr></table></figure><p>F.tsx</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useContext &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">CountContext</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../App&#x27;</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">F</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> countContext = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">CountContext</span>)<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      F - &#123;countContext.countState&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> countContext.countDispatch(&#x27;increment&#x27;)&#125;</span><br><span class="language-xml">      &gt;Increment<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> countContext.countDispatch(&#x27;decrement&#x27;)&#125;</span><br><span class="language-xml">      &gt;Decrement<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> countContext.countDispatch(&#x27;reset&#x27;)&#125;</span><br><span class="language-xml">      &gt;Reset<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> F<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬å†ä¸€èµ·å›é¡¾ä¸€ä¸‹</p><ol><li>åœ¨ App.tsx ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ useReducer åˆ›å»ºäº†ä¸€ä¸ª counterï¼Œå£°æ˜äº†åˆå§‹å€¼ï¼Œåˆ›å»ºäº† reducer å‡½æ•°ï¼ŒuseReducer è¿”å›äº†çŠ¶æ€ count å’Œ dispatch æ–¹æ³•ã€‚</li><li>ä¸ºäº†èƒ½è®©å…¶ä»–ç»„ä»¶è®¿é—®åˆ° count å’Œ dispatchï¼Œæˆ‘ä»¬é€šè¿‡ React.createContext åˆ›å»ºäº† CountContextï¼Œå¹¶ç”¨ <code>&lt;CountContext.Provider&gt;</code> åŒ…è£¹æ ¹èŠ‚ç‚¹ã€‚å°† count å’Œ dispatch ä½œä¸º value ä¼ ç»™ Providerã€‚</li><li>åœ¨å­èŠ‚ç‚¹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ useContext è·å–åˆ° count å’Œ dispatch æ–¹æ³•ï¼Œé€šè¿‡è°ƒç”¨ dispatch å®ç°å¯¹ count çš„æ”¹å˜ã€‚</li></ol><hr><p>Fetching Data with useReducer</p><p>å¦‚ä½•ä½¿ç”¨ useReducer å»è¯·æ±‚è¿œç¨‹æ•°æ®ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬åšè¿™æ ·ä¸€ä¸ªå°éœ€æ±‚ï¼š</p><ol><li>é¡µé¢è½½å…¥æ—¶è¯·æ±‚æ•°æ®</li><li>è¯·æ±‚æ•°æ®ä¸­å±•ç¤º loading çŠ¶æ€</li><li>è¯·æ±‚è¿”å›åç§»é™¤ loading æ ·å¼ï¼Œå±•ç¤ºè¯·æ±‚çš„æ•°æ®ï¼›è‹¥è¯·æ±‚å¤±è´¥ï¼Œä¹Ÿç§»é™¤ loading å±•ç¤ºé”™è¯¯æç¤º</li></ol><p>useStateå®ç°è¯·æ±‚</p><p>app.tsx</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./App.css&#x27;</span><br><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">DataFetchingOne</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/23DataFetchingOne&#x27;</span><br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;App&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">DataFetchingOne</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure><p>DataFetchingOne.tsx</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState, useEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span><br><br><span class="hljs-keyword">interface</span> postType &#123;<br>  <span class="hljs-attr">userId</span>: <span class="hljs-built_in">number</span><br>  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span><br>  <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span><br>  <span class="hljs-attr">body</span>: <span class="hljs-built_in">string</span><br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">DataFetchingOne</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [loading, setLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">true</span>)<br>  <span class="hljs-keyword">const</span> [error, setError] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&#x27;&#x27;</span>)<br>  <span class="hljs-keyword">const</span> [post, setPost] = <span class="hljs-title function_">useState</span>(&#123;&#125; <span class="hljs-keyword">as</span> postType)<br><br>  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;https://jsonplaceholder.typicode.com/posts/1&#x27;</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br>      <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">false</span>)<br>      <span class="hljs-title function_">setPost</span>(res.<span class="hljs-property">data</span>)<br>      <span class="hljs-title function_">setError</span>(<span class="hljs-string">&#x27;&#x27;</span>)<br>    &#125;).<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">false</span>)<br>      <span class="hljs-title function_">setPost</span>(&#123;&#125; <span class="hljs-keyword">as</span> postType)<br>      <span class="hljs-title function_">setError</span>(<span class="hljs-string">&#x27;something went wrong&#x27;</span>)<br>    &#125;)<br>  &#125;, [])<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      &#123;</span><br><span class="language-xml">        loading</span><br><span class="language-xml">          ? &#x27;Loading...&#x27;</span><br><span class="language-xml">          : post.title</span><br><span class="language-xml">      &#125;</span><br><span class="language-xml">      &#123;</span><br><span class="language-xml">        error</span><br><span class="language-xml">          ? error</span><br><span class="language-xml">          : null</span><br><span class="language-xml">      &#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">DataFetchingOne</span><br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªå®ç°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†3ä¸ªuseStateå»æ§åˆ¶ loading, post å’Œ errorï¼Œæ¥ä¸‹æ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ useReducer å®ç°ã€‚</p><p>useReducerå®ç°è¯·æ±‚</p><p>app.tsx</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./App.css&#x27;</span><br><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">DataFetchingOne</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/23DataFetchingOne&#x27;</span><br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;App&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">DataFetchingOne</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure><p>DataFetchingTwo.tsx</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useEffect, useReducer &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span><br><br><span class="hljs-keyword">interface</span> postType &#123;<br>  <span class="hljs-attr">userId</span>: <span class="hljs-built_in">number</span><br>  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span><br>  <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span><br>  <span class="hljs-attr">body</span>: <span class="hljs-built_in">string</span><br>&#125;<br><br><span class="hljs-keyword">type</span> stateType = &#123;<br>  <span class="hljs-attr">loading</span>: <span class="hljs-built_in">boolean</span><br>  <span class="hljs-attr">error</span>: <span class="hljs-built_in">string</span><br>  post?: postType | &#123;&#125;<br>&#125;<br><br><span class="hljs-keyword">type</span> actionType = &#123;<br>  <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;FETCH_SUCCESS&#x27;</span> | <span class="hljs-string">&#x27;FETCH_ERROR&#x27;</span><br>  payload?: postType | &#123;&#125;<br>&#125;<br><br><span class="hljs-keyword">const</span> initialState = &#123;<br>  <span class="hljs-attr">loading</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-attr">error</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>  <span class="hljs-attr">post</span>: &#123;&#125;,<br>&#125;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">reducer</span> = (<span class="hljs-params">state: stateType, action: actionType</span>) =&gt; &#123;<br>  <span class="hljs-keyword">switch</span> (action.<span class="hljs-property">type</span>) &#123;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;FETCH_SUCCESS&#x27;</span>:<br>      <span class="hljs-keyword">return</span> &#123;<br>        <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>,<br>        <span class="hljs-attr">error</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>        <span class="hljs-attr">post</span>: action.<span class="hljs-property">payload</span>,<br>      &#125;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;FETCH_ERROR&#x27;</span>:<br>      <span class="hljs-keyword">return</span> &#123;<br>        <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>,<br>        <span class="hljs-attr">error</span>: <span class="hljs-string">&#x27;something went wrong&#x27;</span>,<br>        <span class="hljs-attr">post</span>: &#123;&#125;,<br>      &#125;<br>    <span class="hljs-attr">default</span>:<br>      <span class="hljs-keyword">return</span> state<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">DataFetchingTwo</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [state, dispatch] = <span class="hljs-title function_">useReducer</span>(reducer, initialState)<br><br>  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;https://jsonplaceholder.typicode.com/posts/1&#x27;</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br>      <span class="hljs-title function_">dispatch</span>(&#123;<br>        <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;FETCH_SUCCESS&#x27;</span>,<br>        <span class="hljs-attr">payload</span>: res.<span class="hljs-property">data</span>,<br>      &#125;)<br>    &#125;).<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-title function_">dispatch</span>(&#123;<br>        <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;FETCH_ERROR&#x27;</span><br>      &#125;)<br>    &#125;)<br>  &#125;, [])<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      &#123;</span><br><span class="language-xml">        state.loading</span><br><span class="language-xml">          ? &#x27;Loading...&#x27;</span><br><span class="language-xml">          // @ts-ignore</span><br><span class="language-xml">          : state.post.title</span><br><span class="language-xml">      &#125;</span><br><span class="language-xml">      &#123;</span><br><span class="language-xml">        state.error</span><br><span class="language-xml">          ? state.error</span><br><span class="language-xml">          : null</span><br><span class="language-xml">      &#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">DataFetchingTwo</span><br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å°† state é›†åˆåœ¨äº†ä¸€èµ·ï¼Œåœ¨åŒä¸€ä¸ªå¯¹è±¡ï¼Œä¿®æ”¹ state çš„é€»è¾‘ä¹Ÿèšåˆåœ¨äº†ä¸€èµ·ï¼Œå³ reducer å‡½æ•°ä¸­çš„ switch éƒ¨åˆ†ã€‚</p><hr><p>useState vs useReducer</p><ul><li><p>å¦‚æœ state çš„ç±»å‹ä¸º Number, String, Boolean å»ºè®®ä½¿ç”¨ useStateï¼Œå¦‚æœ state çš„ç±»å‹ ä¸º Object æˆ– Arrayï¼Œå»ºè®®ä½¿ç”¨ useReducer</p></li><li><p>å¦‚æœ state å˜åŒ–éå¸¸å¤šï¼Œä¹Ÿæ˜¯å»ºè®®ä½¿ç”¨ useReducerï¼Œé›†ä¸­ç®¡ç† state å˜åŒ–ï¼Œä¾¿äºç»´æŠ¤</p></li><li><p>å¦‚æœ state å…³è”å˜åŒ–ï¼Œå»ºè®®ä½¿ç”¨ useReducer</p></li><li><p>ä¸šåŠ¡é€»è¾‘å¦‚æœå¾ˆå¤æ‚ï¼Œä¹Ÿå»ºè®®ä½¿ç”¨ useReducer</p></li><li><p>å¦‚æœ state åªæƒ³ç”¨åœ¨ ç»„ä»¶å†…éƒ¨ï¼Œå»ºè®®ä½¿ç”¨ useStateï¼Œå¦‚æœæƒ³ç»´æŠ¤å…¨å±€ state å»ºè®®ä½¿ç”¨ useReducer</p></li></ul><h5 id="5-useCallbackå’ŒuseMemo"><a href="#5-useCallbackå’ŒuseMemo" class="headerlink" title="5 useCallbackå’ŒuseMemo"></a>5 useCallbackå’ŒuseMemo</h5><blockquote><p>è‡ªå®šä¹‰é‚£å‡ ä¸ªå˜é‡å˜åŒ–æ‰æ›´æ–°ï¼Œé˜»æ­¢äº†å­ç»„ä»¶ä¸å¿…è¦çš„render</p><p>useCallback æ˜¯ç¼“å­˜äº†å‡½æ•°è‡ªèº«ï¼Œè€Œ useMemo æ˜¯ç¼“å­˜äº†å‡½æ•°çš„è¿”å›å€¼ã€‚</p></blockquote><p>ç»„ä»¶å¤šæ¬¡è¢«å¤ç”¨çš„åœºæ™¯</p><p>æœ‰ä¸€ä¸ªç»„ä»¶æ ‘ç»“æ„ã€‚ParentWrap åŒ…å« Title ç»„ä»¶ã€2æ¬¡ä½¿ç”¨ Count ç»„ä»¶ã€2æ¬¡ä½¿ç”¨ Button ç»„ä»¶ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Yoonalis/img@master/blog/1571668332118_.pic-20221113%2020:36:13.jpg" alt="1571668332118_.pic"></p><p>App.tsx</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./App.css&#x27;</span><br><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">ParentComponent</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/26ParentComponenet&#x27;</span><br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;App&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">ParentComponent</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure><p>ParentComponent.tsx</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Title</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./26Title&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Count</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./26Count&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Button</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./26Button&#x27;</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">ParentComponenet</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [age, setAge] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">29</span>)<br>  <span class="hljs-keyword">const</span> [salary, setSalary] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">50000</span>)<br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">incrementAge</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-title function_">setAge</span>(age + <span class="hljs-number">1</span>)<br>  &#125;<br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">incrementSalary</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-title function_">setSalary</span>(salary + <span class="hljs-number">1000</span>)<br>  &#125;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Title</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Count</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">text</span>=<span class="hljs-string">&quot;Age&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">count</span>=<span class="hljs-string">&#123;age&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">handleClick</span>=<span class="hljs-string">&#123;incrementAge&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      &gt;</span>Increment age<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Count</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">text</span>=<span class="hljs-string">&quot;Salary&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">count</span>=<span class="hljs-string">&#123;salary&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">handleClick</span>=<span class="hljs-string">&#123;incrementSalary&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      &gt;</span>Increment salary<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">ParentComponenet</span><br></code></pre></td></tr></table></figure><p>Title.tsx</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Title</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Rendering Title&#x27;</span>)<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>useCallback<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Title</span><br></code></pre></td></tr></table></figure><p>Count.tsx</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Count</span>(<span class="hljs-params">props: &#123;</span><br><span class="hljs-params">  text: <span class="hljs-built_in">string</span></span><br><span class="hljs-params">  count: <span class="hljs-built_in">number</span></span><br><span class="hljs-params">&#125;</span>) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Rendering <span class="hljs-subst">$&#123;props.text&#125;</span>`</span>)<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      &#123;props.text&#125; - &#123;props.count&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Count</span><br></code></pre></td></tr></table></figure><p>Button.tsx</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Button</span>(<span class="hljs-params">props: &#123;</span><br><span class="hljs-params">  handleClick: () =&gt; <span class="hljs-built_in">void</span></span><br><span class="hljs-params">  children: <span class="hljs-built_in">string</span></span><br><span class="hljs-params">&#125;</span>) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Rendering button&#x27;</span>, props.<span class="hljs-property">children</span>)<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;props.handleClick&#125;</span>&gt;</span></span><br><span class="language-xml">      &#123;props.children&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Button</span><br></code></pre></td></tr></table></figure><p>æ¯æ¬¡ç‚¹å‡»ï¼Œå¯ä»¥çœ‹åˆ°ä»¥ä¸‹æ—¥å¿—ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css">Rendering Title<br>Rendering Age<br>Rendering <span class="hljs-selector-tag">button</span> Increment age<br>Rendering Salary<br>Rendering <span class="hljs-selector-tag">button</span> Increment salary<br></code></pre></td></tr></table></figure><p>æ¯æ¬¡çŠ¶æ€æ”¹å˜éƒ½è§¦å‘äº†æ‰€æœ‰ç»„ä»¶çš„ rerenderï¼Œè¿™ä¸ªç¤ºä¾‹æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯å‡å¦‚æœªæ¥é‡åˆ°20ã€30ã€ç”šè‡³50ä¸ªç»„ä»¶ rerender çš„æ—¶å€™ï¼Œå°±ä¸€å®šè¦è€ƒè™‘åˆ°æ€§èƒ½é—®é¢˜äº†ã€‚ä¸‹é¢è®²è®²åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­æ€ä¹ˆè¿›è¡Œä¼˜åŒ–ã€‚</p><hr><p>useMemo</p><p>ä½¿ç”¨ï¼š<code>const memoizedValue = useMemo(() =&gt; computeExpensiveValue(a, b), [a, b]);</code></p><p>è¿”å›ä¸€ä¸ª memoized å€¼ã€‚ æŠŠâ€œåˆ›å»ºâ€å‡½æ•°å’Œä¾èµ–é¡¹æ•°ç»„ä½œä¸ºå‚æ•°ä¼ å…¥ <code>useMemo</code>ï¼Œå®ƒä»…ä¼šåœ¨æŸä¸ªä¾èµ–é¡¹æ”¹å˜æ—¶æ‰é‡æ–°è®¡ç®— memoized å€¼ã€‚è¿™ç§ä¼˜åŒ–æœ‰åŠ©äºé¿å…åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½è¿›è¡Œé«˜å¼€é”€çš„è®¡ç®—ã€‚</p><p>è®°ä½ï¼Œä¼ å…¥ <code>useMemo</code> çš„å‡½æ•°ä¼šåœ¨æ¸²æŸ“æœŸé—´æ‰§è¡Œã€‚è¯·ä¸è¦åœ¨è¿™ä¸ªå‡½æ•°å†…éƒ¨æ‰§è¡Œä¸æ¸²æŸ“æ— å…³çš„æ“ä½œï¼Œè¯¸å¦‚å‰¯ä½œç”¨è¿™ç±»çš„æ“ä½œå±äº <code>useEffect</code> çš„é€‚ç”¨èŒƒç•´ï¼Œè€Œä¸æ˜¯ <code>useMemo</code>ã€‚</p><p>å¦‚æœæ²¡æœ‰æä¾›ä¾èµ–é¡¹æ•°ç»„ï¼Œ<code>useMemo</code> åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½ä¼šè®¡ç®—æ–°çš„å€¼ã€‚</p><p><strong>ä½ å¯ä»¥æŠŠ useMemo ä½œä¸ºæ€§èƒ½ä¼˜åŒ–çš„æ‰‹æ®µï¼Œä½†ä¸è¦æŠŠå®ƒå½“æˆè¯­ä¹‰ä¸Šçš„ä¿è¯ã€‚</strong> å°†æ¥ï¼ŒReact å¯èƒ½ä¼šé€‰æ‹©â€œé—å¿˜â€ä»¥å‰çš„ä¸€äº› memoized å€¼ï¼Œå¹¶åœ¨ä¸‹æ¬¡æ¸²æŸ“æ—¶é‡æ–°è®¡ç®—å®ƒä»¬ï¼Œæ¯”å¦‚ä¸ºç¦»å±ç»„ä»¶é‡Šæ”¾å†…å­˜ã€‚å…ˆç¼–å†™åœ¨æ²¡æœ‰ useMemo çš„æƒ…å†µä¸‹ä¹Ÿå¯ä»¥æ‰§è¡Œçš„ä»£ç  â€”â€” ä¹‹åå†åœ¨ä½ çš„ä»£ç ä¸­æ·»åŠ  useMemoï¼Œä»¥è¾¾åˆ°ä¼˜åŒ–æ€§èƒ½çš„ç›®çš„ã€‚</p><p>ä¾‹ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">const</span> isEven = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span><br>  <span class="hljs-keyword">while</span> (i &lt; <span class="hljs-number">1000000000</span>) i += <span class="hljs-number">1</span><br>  <span class="hljs-keyword">return</span> counterOne % <span class="hljs-number">2</span> === <span class="hljs-number">0</span><br>&#125;, [counterOne])<br></code></pre></td></tr></table></figure><p>åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å½“ç„¶å¸Œæœ›ç‚¹å‡»å¢åŠ å¹´é¾„çš„æŒ‰é’®æ—¶ï¼Œåªæœ‰å…³äºå¹´é¾„çš„ Count å’Œ Button è¿›è¡Œ rerenderï¼Œè€Œå…¶ä»–ç»„ä»¶ä¸å‘ç”Ÿ rerenderï¼Œç‚¹å‡»å¢åŠ  salary æ—¶ä¹Ÿä¸€æ ·ã€‚å¦‚ä½•æ‰èƒ½åšåˆ°å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ <code>React.memo</code>ã€‚</p><p>æˆ‘ä»¬ç»™ Title.tsx, Count.tsx, Button.tsx æ·»åŠ  <code>React.memo()</code>ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><p>Title.tsx</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Title</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Rendering Title&#x27;</span>)<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>useCallback<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">React</span>.<span class="hljs-title function_">memo</span>(<span class="hljs-title class_">Title</span>)<br></code></pre></td></tr></table></figure><p>Count.tsx</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Count</span>(<span class="hljs-params">props: &#123;</span><br><span class="hljs-params">  text: string</span><br><span class="hljs-params">  count: number</span><br><span class="hljs-params">&#125;</span>) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Rendering <span class="hljs-subst">$&#123;props.text&#125;</span>`</span>)<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      &#123;props.text&#125; - &#123;props.count&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">React</span>.<span class="hljs-title function_">memo</span>(<span class="hljs-title class_">Count</span>)<br></code></pre></td></tr></table></figure><p>Button.tsx</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Button</span>(<span class="hljs-params">props: &#123;</span><br><span class="hljs-params">  handleClick: () =&gt; <span class="hljs-keyword">void</span></span><br><span class="hljs-params">  children: string</span><br><span class="hljs-params">&#125;</span>) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Rendering button&#x27;</span>, props.<span class="hljs-property">children</span>)<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;props.handleClick&#125;</span>&gt;</span></span><br><span class="language-xml">      &#123;props.children&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">React</span>.<span class="hljs-title function_">memo</span>(<span class="hljs-title class_">Button</span>)<br></code></pre></td></tr></table></figure><p>React.memo ä¸ºé«˜é˜¶ç»„ä»¶ã€‚å®ƒä¸ React.PureComponent éå¸¸ç›¸ä¼¼ï¼Œä½†åªé€‚ç”¨äºå‡½æ•°ç»„ä»¶ï¼Œè€Œä¸é€‚ç”¨ class ç»„ä»¶ã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">MyComponent</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">memo</span>(<span class="hljs-keyword">function</span> <span class="hljs-title function_">MyComponent</span>(<span class="hljs-params">props</span>) &#123;<br>  <span class="hljs-comment">/* ä½¿ç”¨ props æ¸²æŸ“ */</span><br>&#125;);<br></code></pre></td></tr></table></figure><p>å¦‚æœä½ çš„å‡½æ•°ç»„ä»¶åœ¨ç»™å®šç›¸åŒ props çš„æƒ…å†µä¸‹æ¸²æŸ“ç›¸åŒçš„ç»“æœï¼Œé‚£ä¹ˆä½ å¯ä»¥é€šè¿‡å°†å…¶åŒ…è£…åœ¨ React.memo ä¸­è°ƒç”¨ï¼Œä»¥æ­¤é€šè¿‡è®°å¿†ç»„ä»¶æ¸²æŸ“ç»“æœçš„æ–¹å¼æ¥æé«˜ç»„ä»¶çš„æ€§èƒ½è¡¨ç°ã€‚è¿™æ„å‘³ç€åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒReact å°†è·³è¿‡æ¸²æŸ“ç»„ä»¶çš„æ“ä½œå¹¶ç›´æ¥å¤ç”¨æœ€è¿‘ä¸€æ¬¡æ¸²æŸ“çš„ç»“æœã€‚</p><p>React.memo ä»…æ£€æŸ¥ props å˜æ›´ã€‚å¦‚æœå‡½æ•°ç»„ä»¶è¢« React.memo åŒ…è£¹ï¼Œä¸”å…¶å®ç°ä¸­æ‹¥æœ‰ useState æˆ– useContext çš„ Hookï¼Œå½“ context å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒä»ä¼šé‡æ–°æ¸²æŸ“ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹å…¶åªä¼šå¯¹å¤æ‚å¯¹è±¡åšæµ…å±‚å¯¹æ¯”ï¼Œå¦‚æœä½ æƒ³è¦æ§åˆ¶å¯¹æ¯”è¿‡ç¨‹ï¼Œé‚£ä¹ˆè¯·å°†è‡ªå®šä¹‰çš„æ¯”è¾ƒå‡½æ•°é€šè¿‡ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥æ¥å®ç°ã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">MyComponent</span>(<span class="hljs-params">props</span>) &#123;<br>  <span class="hljs-comment">/* ä½¿ç”¨ props æ¸²æŸ“ */</span><br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">areEqual</span>(<span class="hljs-params">prevProps, nextProps</span>) &#123;<br>  <span class="hljs-comment">/*</span><br><span class="hljs-comment">  å¦‚æœæŠŠ nextProps ä¼ å…¥ render æ–¹æ³•çš„è¿”å›ç»“æœä¸</span><br><span class="hljs-comment">  å°† prevProps ä¼ å…¥ render æ–¹æ³•çš„è¿”å›ç»“æœä¸€è‡´åˆ™è¿”å› trueï¼Œ</span><br><span class="hljs-comment">  å¦åˆ™è¿”å› false</span><br><span class="hljs-comment">  */</span><br>&#125;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">React</span>.<span class="hljs-title function_">memo</span>(<span class="hljs-title class_">MyComponent</span>, areEqual);<br></code></pre></td></tr></table></figure><p>æ­¤æ–¹æ³•ä»…ä½œä¸ºæ€§èƒ½ä¼˜åŒ–çš„æ–¹å¼è€Œå­˜åœ¨ã€‚ä½†è¯·ä¸è¦ä¾èµ–å®ƒæ¥â€œé˜»æ­¢â€æ¸²æŸ“ï¼Œå› ä¸ºè¿™ä¼šäº§ç”Ÿ bugã€‚</p><p>ä½†æ˜¯ï¼Œä½¿ç”¨äº† React.memo åï¼Œä¾ç„¶æœ‰ä¸ç›¸å…³çš„ rerenderï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css">Rendering Age<br>Rendering <span class="hljs-selector-tag">button</span> Increment age<br>Rendering <span class="hljs-selector-tag">button</span> Increment salary<br></code></pre></td></tr></table></figure><p>åœ¨ ParentComponenet.tsx ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°ç‚¹å‡» Increment age æŒ‰é’®æ—¶ï¼Œå¯¼è‡´äº† state å˜åŒ–ï¼ŒParentComponenet è¿›è¡Œäº† rerenderã€‚<code>&lt;Title /&gt;</code> æ²¡æœ‰ä¼ å…¥å±æ€§ï¼ŒReact.memo åˆ¤æ–­å‡ºä¸éœ€è¦ rerenderï¼Œä½†æ˜¯ Increment salary æŒ‰é’®ä¸Šçš„å±æ€§ incrementSalary æ–¹æ³•ï¼Œå®é™…ä¸Šè¢«é‡æ–°åˆ›å»ºäº†ï¼Œå¯¼è‡´äº†è¿™ä¸ª Button ä¼ å…¥çš„ props å‘ç”Ÿäº†å˜åŒ–ï¼Œå› æ­¤ React.memo æ²¡æœ‰é˜»æ­¢ rerenderã€‚ç‚¹å‡»æŒ‰é’® Increment salary å¯¼è‡´çš„ç›¸åŒçš„ç°è±¡ä¹Ÿæ˜¯åŒç†ã€‚é‚£ä¹ˆå¦‚ä½•è§£å†³å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ä½¿ç”¨ useCallback hookã€‚</p><hr><p>useCallback</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">const</span> memoizedCallback = <span class="hljs-title function_">useCallback</span>(<br>  <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-title function_">doSomething</span>(a, b);<br>  &#125;,<br>  [a, b],<br>);<br></code></pre></td></tr></table></figure><p>è¿”å›ä¸€ä¸ª memoized å›è°ƒå‡½æ•°ã€‚</p><p>æŠŠå†…è”å›è°ƒå‡½æ•°åŠä¾èµ–é¡¹æ•°ç»„ä½œä¸ºå‚æ•°ä¼ å…¥ <code>useCallback</code>ï¼Œå®ƒå°†è¿”å›è¯¥å›è°ƒå‡½æ•°çš„ memoized ç‰ˆæœ¬ï¼Œè¯¥å›è°ƒå‡½æ•°ä»…åœ¨æŸä¸ªä¾èµ–é¡¹æ”¹å˜æ—¶æ‰ä¼šæ›´æ–°ã€‚å½“ä½ æŠŠå›è°ƒå‡½æ•°ä¼ é€’ç»™ç»è¿‡ä¼˜åŒ–çš„å¹¶ä½¿ç”¨å¼•ç”¨ç›¸ç­‰æ€§å»é¿å…éå¿…è¦æ¸²æŸ“ï¼ˆä¾‹å¦‚ shouldComponentUpdateï¼‰çš„å­ç»„ä»¶æ—¶ï¼Œå®ƒå°†éå¸¸æœ‰ç”¨ã€‚</p><p>ç±»æ¯”åˆ°æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼ŒuseCallback ä¼šç¼“å­˜æˆ‘ä»¬çš„ <code>incrementSalary()</code> å¦‚æœ salary æ²¡æœ‰å˜åŒ–ï¼Œç›´æ¥è¿”å›ç¼“å­˜çš„å€¼ï¼Œå¦‚æœ salary å‘ç”Ÿå˜åŒ–ï¼Œä¹Ÿå°±æ˜¯ useCallback çš„ä¾èµ–å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆä¸€ä¸ªæ–°çš„æ–¹æ³•å°†è¢«è¿”å›ã€‚è¿™å°±å¯ä»¥å¸®åŠ©æˆ‘ä»¬è§£å†³åªä¾èµ–æŸä¸ªå˜é‡çš„å­ç»„ä»¶é¿å…ä¸å¿…è¦çš„ render é—®é¢˜ã€‚</p><p>å¦‚ä½•ä½¿ç”¨ï¼š</p><ol><li>import useCallback</li><li>è°ƒç”¨useCallback</li></ol><p>æˆ‘ä»¬å°† ParentComponenet.tsx ä¸­çš„ incrementAge å’Œ incrementSalary ä½¿ç”¨ useCallback æ”¹å†™å¦‚ä¸‹ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">const</span> incrementAge = <span class="hljs-title function_">useCallback</span>(<br>  <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-title function_">setAge</span>(age + <span class="hljs-number">1</span>)<br>  &#125;,<br>  [age],<br>)<br><br><span class="hljs-keyword">const</span> incrementSalary = <span class="hljs-title function_">useCallback</span>(<br>  <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-title function_">setSalary</span>(salary + <span class="hljs-number">1000</span>)<br>  &#125;,<br>  [salary],<br>)<br></code></pre></td></tr></table></figure><h5 id="6-useRef"><a href="#6-useRef" class="headerlink" title="6 useRef"></a>6 useRef</h5><p>é¡µé¢è½½å…¥è·å–ç„¦ç‚¹ç¤ºä¾‹</p><p>FocusInput.tsx</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useEffect, useRef&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">FocusInput</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> inputRef = useRef&lt;<span class="hljs-title class_">HTMLInputElement</span>&gt;(<span class="hljs-literal">null</span>)<br>  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    inputRef.<span class="hljs-property">current</span> &amp;&amp; inputRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">focus</span>()<br>  &#125;, [])<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;inputRef&#125;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">FocusInput</span><br></code></pre></td></tr></table></figure><p>App.tsx</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./App.css&#x27;</span><br><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">FocusInput</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/28FocusInput&#x27;</span><br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;App&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">FocusInput</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure><p>æ³¨æ„ä¸ TypeScript ç»“åˆä½¿ç”¨æ—¶çš„æ–¹å¼ï¼Œéœ€è¦å…ˆå£°æ˜å¥½æ³›å‹</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> inputRef = useRef&lt;<span class="hljs-title class_">HTMLInputElement</span>&gt;(<span class="hljs-literal">null</span>)<br>å¤åˆ¶ä»£ç <br></code></pre></td></tr></table></figure><p>åŒæ—¶ä½¿ç”¨æ—¶éœ€è¦åˆ¤ç©º</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jsx">inputRef.<span class="hljs-property">current</span> &amp;&amp; inputRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">focus</span>()<br>å¤åˆ¶ä»£ç <br></code></pre></td></tr></table></figure><p><code>useRef</code> è¿”å›ä¸€ä¸ªå¯å˜çš„ ref å¯¹è±¡ï¼Œå…¶ <code>.current</code> å±æ€§è¢«åˆå§‹åŒ–ä¸ºä¼ å…¥çš„å‚æ•°ï¼ˆinitialValueï¼‰ã€‚è¿”å›çš„ ref å¯¹è±¡åœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…ä¿æŒä¸å˜ã€‚</p><p>Refs æä¾›äº†ä¸€ç§æ–¹å¼ï¼Œå…è®¸æˆ‘ä»¬è®¿é—® DOM èŠ‚ç‚¹æˆ–åœ¨ render æ–¹æ³•ä¸­åˆ›å»ºçš„ React å…ƒç´ ã€‚</p><p>åœ¨å…¸å‹çš„ React æ•°æ®æµä¸­ï¼Œprops æ˜¯çˆ¶ç»„ä»¶ä¸å­ç»„ä»¶äº¤äº’çš„å”¯ä¸€æ–¹å¼ã€‚è¦ä¿®æ”¹ä¸€ä¸ªå­ç»„ä»¶ï¼Œä½ éœ€è¦ä½¿ç”¨æ–°çš„ props æ¥é‡æ–°æ¸²æŸ“å®ƒã€‚ä½†æ˜¯ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ éœ€è¦åœ¨å…¸å‹æ•°æ®æµä¹‹å¤–å¼ºåˆ¶ä¿®æ”¹å­ç»„ä»¶ã€‚è¢«ä¿®æ”¹çš„å­ç»„ä»¶å¯èƒ½æ˜¯ä¸€ä¸ª React ç»„ä»¶çš„å®ä¾‹ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ª DOM å…ƒç´ ã€‚å¯¹äºè¿™ä¸¤ç§æƒ…å†µï¼ŒReact éƒ½æä¾›äº†è§£å†³åŠæ³•ã€‚</p><p>ä¸‹é¢æ˜¯å‡ ä¸ªé€‚åˆä½¿ç”¨ refs çš„æƒ…å†µ</p><ul><li>ç®¡ç†ç„¦ç‚¹ï¼Œæ–‡æœ¬é€‰æ‹©æˆ–åª’ä½“æ’­æ”¾ã€‚</li><li>è§¦å‘å¼ºåˆ¶åŠ¨ç”»ã€‚</li><li>é›†æˆç¬¬ä¸‰æ–¹ DOM åº“ã€‚</li></ul><p>é¿å…ä½¿ç”¨ refs æ¥åšä»»ä½•å¯ä»¥é€šè¿‡å£°æ˜å¼å®ç°æ¥å®Œæˆçš„äº‹æƒ…ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œé¿å…åœ¨ Dialog ç»„ä»¶é‡Œæš´éœ² open() å’Œ close() æ–¹æ³•ï¼Œæœ€å¥½ä¼ é€’ isOpen å±æ€§ã€‚</p><p>å‹¿è¿‡åº¦ä½¿ç”¨ Refs</p><p>ä½ å¯èƒ½é¦–å…ˆä¼šæƒ³åˆ°ä½¿ç”¨ refs åœ¨ä½ çš„ app ä¸­â€œè®©äº‹æƒ…å‘ç”Ÿâ€ã€‚å¦‚æœæ˜¯è¿™ç§æƒ…å†µï¼Œè¯·èŠ±ä¸€ç‚¹æ—¶é—´ï¼Œè®¤çœŸå†è€ƒè™‘ä¸€ä¸‹ state å±æ€§åº”è¯¥è¢«å®‰æ’åœ¨å“ªä¸ªç»„ä»¶å±‚ä¸­ã€‚é€šå¸¸ä½ ä¼šæƒ³æ˜ç™½ï¼Œè®©æ›´é«˜çš„ç»„ä»¶å±‚çº§æ‹¥æœ‰è¿™ä¸ª stateï¼Œæ˜¯æ›´æ°å½“çš„ã€‚æŸ¥çœ‹ çŠ¶æ€æå‡ ä»¥è·å–æ›´å¤šæœ‰å…³ç¤ºä¾‹ã€‚</p><hr><p>å¯ä»¥åœæ­¢çš„è®¡æ—¶å™¨ç¤ºä¾‹ï¼š</p><p>éœ€æ±‚æ˜¯é¡µé¢ä¸Šæœ‰ä¸€ä¸ªæ¯éš”1ç§’è‡ªåŠ¨åŠ ä¸€çš„è®¡æ—¶å™¨ï¼Œå¹¶ä¸”æœ‰ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»åè®¡æ—¶å™¨åœæ­¢ï¼Œå…ˆä½¿ç”¨ Class ç»„ä»¶å®Œæˆè¿™æ ·çš„éœ€æ±‚</p><p>ClassTimer.tsx</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ClassTimer</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span>&lt;&#123;&#125;, &#123; <span class="hljs-attr">timer</span>: number &#125;&gt; &#123;<br>  interval!: number<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props: Readonly&lt;&#123;&#125;&gt;</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(props)<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>      <span class="hljs-attr">timer</span>: <span class="hljs-number">0</span><br>    &#125;<br>  &#125;<br><br>  <span class="hljs-title function_">componentDidMount</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">interval</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(<span class="hljs-function"><span class="hljs-params">prevState</span> =&gt;</span> (&#123;<br>        <span class="hljs-attr">timer</span>: prevState.<span class="hljs-property">timer</span> + <span class="hljs-number">1</span><br>      &#125;))<br>    &#125;, <span class="hljs-number">1000</span>)<br>  &#125;<br><br>  <span class="hljs-title function_">componentWillUnmount</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-built_in">clearInterval</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">interval</span>)<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        Timer - &#123;this.state.timer&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">            clearInterval(this.interval)</span><br><span class="language-xml">          &#125;&#125;</span><br><span class="language-xml">        &gt;Clear Timer<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>App.tsx</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./App.css&#x27;</span><br><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">ClassTimer</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/29ClassTimer&#x27;</span><br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;App&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">ClassTimer</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure><p>Function ç»„ä»¶ç¤ºä¾‹</p><p>HookTimer.tsx</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState, useEffect, useRef &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">HookTimer</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [timer, setTimer] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>)<br><br>  <span class="hljs-comment">//  @ts-ignore</span><br>  <span class="hljs-keyword">const</span> intervalRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>) <span class="hljs-keyword">as</span> &#123; <span class="hljs-attr">current</span>: number &#125;<br><br>  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    intervalRef.<span class="hljs-property">current</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-title function_">setTimer</span>(<span class="hljs-function"><span class="hljs-params">pre</span> =&gt;</span> pre + <span class="hljs-number">1</span>)<br>    &#125;, <span class="hljs-number">1000</span>)<br>    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-built_in">clearInterval</span>(intervalRef.<span class="hljs-property">current</span>)<br>    &#125;<br>  &#125;, [])<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      HookTimer - &#123;timer&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">          clearInterval(intervalRef.current)</span><br><span class="language-xml">        &#125;&#125;</span><br><span class="language-xml">      &gt;Clear Hook Timer<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">HookTimer</span><br></code></pre></td></tr></table></figure><p>App.tsx</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./App.css&#x27;</span><br><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">ClassTimer</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/29ClassTimer&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">HookTimer</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/29HookTimer&#x27;</span><br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;App&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">ClassTimer</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">HookTimer</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span><br></code></pre></td></tr></table></figure><p>è¿™å°±æ˜¯ useRef çš„ç¬¬äºŒç§ç”¨æ³•ï¼Œå¯ä»¥ç”¨å®ƒåˆ›å»ºä¸€ä¸ªé€šç”¨çš„å®¹å™¨ï¼Œç”¨æ¥ä¿å­˜å˜é‡ã€‚</p><h3 id="4-React-router"><a href="#4-React-router" class="headerlink" title="4 React router"></a>4 React router</h3><p>ä¸¾ä¾‹</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../App14&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../pages/Home&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">List</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../pages/List&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Detail</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../pages/Detail&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Error</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../pages/Error&#x27;</span><br><br><span class="hljs-comment">// BrowserRouterï¼ˆhistoryæ¨¡å¼ï¼‰ä¸å¸¦#éœ€è¦é…ç½®ï¼ŒHashRouterï¼ˆHashæ¨¡å¼ï¼‰å¸¦#æ‰“åŒ…åå³å¯</span><br><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">BrowserRouter</span>, <span class="hljs-title class_">Routes</span>, <span class="hljs-title class_">Route</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-router-dom&#x27;</span><br><br><span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªè·¯ç”±</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">BaseRouter</span> = (<span class="hljs-params"></span>) =&gt; (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">BrowserRouter</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Routes</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/&quot;</span> <span class="hljs-attr">element</span>=<span class="hljs-string">&#123;</span>&lt;<span class="hljs-attr">App</span> /&gt;</span>&#125;&gt;</span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/home&quot;</span> <span class="hljs-attr">element</span>=<span class="hljs-string">&#123;</span>&lt;<span class="hljs-attr">Home</span> /&gt;</span>&#125;&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">Route</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/list/:id&quot;</span> <span class="hljs-attr">element</span>=<span class="hljs-string">&#123;</span>&lt;<span class="hljs-attr">List</span> /&gt;</span>&#125;&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">Route</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/detail&quot;</span> <span class="hljs-attr">element</span>=<span class="hljs-string">&#123;</span>&lt;<span class="hljs-attr">Detail</span> /&gt;</span>&#125;&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">Route</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">Route</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;*&quot;</span> <span class="hljs-attr">element</span>=<span class="hljs-string">&#123;</span>&lt;<span class="hljs-attr">Error</span> /&gt;</span>&#125;&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">Route</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">Routes</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">BrowserRouter</span>&gt;</span></span><br>)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">BaseRouter</span>;<br></code></pre></td></tr></table></figure><h3 id="5-axios"><a href="#5-axios" class="headerlink" title="5 axios"></a>5 axios</h3><p>åœ¨Reacté¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä½¿ç”¨Axiosåº“è¿›è¡Œæ•°æ®è¯·æ±‚ï¼ŒAxios æ˜¯åŸºäº Promise çš„ HTTP åº“ï¼Œå¯ä»¥åœ¨æµè§ˆå™¨å’Œ node.js ä¸­ä½¿ç”¨ã€‚Axios å…·å¤‡ä»¥ä¸‹ç‰¹æ€§ï¼š</p><ul><li>ä»æµè§ˆå™¨ä¸­åˆ›å»º XMLHttpRequestsï¼›</li><li>ä» node.js åˆ›å»º HTTP è¯·æ±‚ï¼›</li><li>æ”¯æŒ Promise APIï¼›</li><li>æ‹¦æˆªè¯·æ±‚å’Œå“åº”ï¼›</li><li>è½¬æ¢è¯·æ±‚æ•°æ®å’Œå“åº”æ•°æ®ï¼›</li><li>å–æ¶ˆè¯·æ±‚ï¼›</li><li>è‡ªåŠ¨è½¬æ¢ JSON æ•°æ®ï¼›</li><li>å®¢æˆ·ç«¯æ”¯æŒé˜²å¾¡ XSRFã€‚</li></ul><p>Axiosçš„åŸºæœ¬ä½¿ç”¨å°±ä¸å†å¤šä»‹ç»äº†ã€‚ä¸ºäº†æ›´å¥½åœ°è°ƒç”¨ï¼Œåšä¸€äº›å…¨å±€çš„æ‹¦æˆªï¼Œé€šå¸¸ä¼šå¯¹Axiosè¿›è¡Œå°è£…ï¼Œä¸‹é¢å°±ä½¿ç”¨TypeScriptå¯¹Axiosè¿›è¡Œç®€å•å°è£…ï¼Œä½¿å…¶åŒæ—¶èƒ½å¤Ÿæœ‰å¾ˆå¥½çš„ç±»å‹æ”¯æŒã€‚Axiosæ˜¯è‡ªå¸¦å£°æ˜æ–‡ä»¶çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ— éœ€é¢å¤–çš„æ“ä½œã€‚ </p><p>ä¸‹é¢æ¥çœ‹åŸºæœ¬çš„å°è£…ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> axios, &#123; <span class="hljs-title class_">AxiosInstance</span>, <span class="hljs-title class_">AxiosRequestConfig</span>, <span class="hljs-title class_">AxiosPromise</span>,<span class="hljs-title class_">AxiosResponse</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span>; <span class="hljs-comment">// å¼•å…¥axioså’Œå®šä¹‰åœ¨node_modules/axios/index.tsæ–‡ä»¶é‡Œçš„ç±»å‹å£°æ˜</span><br><br> <span class="hljs-comment">// å®šä¹‰æ¥å£è¯·æ±‚ç±»ï¼Œç”¨äºåˆ›å»ºaxiosè¯·æ±‚å®ä¾‹</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">HttpRequest</span> &#123;<br>  <span class="hljs-comment">// æ¥æ”¶æ¥å£è¯·æ±‚çš„åŸºæœ¬è·¯å¾„</span><br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">public</span> baseUrl: <span class="hljs-built_in">string</span></span>) &#123; <br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">baseUrl</span> = baseUrl;<br>  &#125;<br>  <br>  <span class="hljs-comment">// è°ƒç”¨æ¥å£æ—¶è°ƒç”¨å®ä¾‹çš„è¿™ä¸ªæ–¹æ³•ï¼Œè¿”å›AxiosPromise</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">request</span>(<span class="hljs-attr">options</span>: <span class="hljs-title class_">AxiosRequestConfig</span>): <span class="hljs-title class_">AxiosPromise</span> &#123; <br>    <span class="hljs-comment">// åˆ›å»ºaxioså®ä¾‹ï¼Œå®ƒæ˜¯å‡½æ•°ï¼ŒåŒæ—¶è¿™ä¸ªå‡½æ•°åŒ…å«å¤šä¸ªå±æ€§</span><br>    <span class="hljs-keyword">const</span> <span class="hljs-attr">instance</span>: <span class="hljs-title class_">AxiosInstance</span> = axios.<span class="hljs-title function_">create</span>() <br>    <span class="hljs-comment">// åˆå¹¶åŸºç¡€è·¯å¾„å’Œæ¯ä¸ªæ¥å£å•ç‹¬ä¼ å…¥çš„é…ç½®ï¼Œæ¯”å¦‚urlã€å‚æ•°ç­‰</span><br>    options = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">mergeConfig</span>(options) <br>    <span class="hljs-comment">// è°ƒç”¨interceptorsæ–¹æ³•ä½¿æ‹¦æˆªå™¨ç”Ÿæ•ˆ</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">interceptors</span>(instance, options.<span class="hljs-property">url</span>) <br>    <span class="hljs-comment">// è¿”å›AxiosPromise</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">instance</span>(options) <br>  &#125;<br>  <br>  <span class="hljs-comment">// ç”¨äºæ·»åŠ å…¨å±€è¯·æ±‚å’Œå“åº”æ‹¦æˆª</span><br>  <span class="hljs-keyword">private</span> <span class="hljs-title function_">interceptors</span>(<span class="hljs-params">instance: AxiosInstance, url?: <span class="hljs-built_in">string</span></span>) &#123; <br>    <span class="hljs-comment">// è¯·æ±‚å’Œå“åº”æ‹¦æˆª</span><br>  &#125;<br>  <br>  <span class="hljs-comment">// ç”¨äºåˆå¹¶åŸºç¡€è·¯å¾„é…ç½®å’Œæ¥å£å•ç‹¬é…ç½®</span><br>  <span class="hljs-keyword">private</span> <span class="hljs-title function_">mergeConfig</span>(<span class="hljs-attr">options</span>: <span class="hljs-title class_">AxiosRequestConfig</span>): <span class="hljs-title class_">AxiosRequestConfig</span> &#123; <br>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(&#123; <span class="hljs-attr">baseURL</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">baseUrl</span> &#125;, options);<br>  &#125;<br>&#125;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">HttpRequest</span>;<br></code></pre></td></tr></table></figure><p>é€šå¸¸baseUrlåœ¨å¼€å‘ç¯å¢ƒçš„å’Œç”Ÿäº§ç¯å¢ƒçš„è·¯å¾„æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥å¯ä»¥æ ¹æ®å½“å‰æ˜¯å¼€å‘ç¯å¢ƒè¿˜æ˜¯ç”Ÿäº§ç¯å¢ƒåšåˆ¤æ–­ï¼Œåº”ç”¨ä¸åŒçš„åŸºç¡€è·¯å¾„ã€‚è¿™é‡Œè¦å†™åœ¨ä¸€ä¸ªé…ç½®æ–‡ä»¶é‡Œï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>    <span class="hljs-attr">api</span>: &#123;<br>        <span class="hljs-attr">devApiBaseUrl</span>: <span class="hljs-string">&#x27;/test/api/xxx&#x27;</span>,<br>        <span class="hljs-attr">proApiBaseUrl</span>: <span class="hljs-string">&#x27;/api/xxx&#x27;</span>,<br>    &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„æ–‡ä»¶ä¸­å¼•å…¥è¿™ä¸ªé…ç½®ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; <span class="hljs-attr">api</span>: &#123; devApiBaseUrl, proApiBaseUrl &#125; &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/config&#x27;</span>;<br><span class="hljs-keyword">const</span> apiBaseUrl = env.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">&#x27;production&#x27;</span> ? proApiBaseUrl : devApiBaseUrl;<br></code></pre></td></tr></table></figure><p>ä¹‹åå°±å¯ä»¥å°†apiBaseUrlä½œä¸ºé»˜è®¤å€¼ä¼ å…¥HttpRequestçš„å‚æ•°ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">HttpRequest</span> &#123; <br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">public</span> baseUrl: <span class="hljs-built_in">string</span> = apiBaseUrl</span>) &#123; <br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">baseUrl</span> = baseUrl;<br>  &#125;<br></code></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å¯ä»¥å®Œå–„ä¸€ä¸‹æ‹¦æˆªå™¨ç±»ï¼Œåœ¨ç±»ä¸­interceptorsæ–¹æ³•å†…æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨å’Œå“åº”æ‹¦æˆªå™¨ï¼Œå®ç°å¯¹æ‰€æœ‰æ¥å£è¯·æ±‚çš„ç»Ÿä¸€å¤„ç†ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">private</span> <span class="hljs-title function_">interceptors</span>(<span class="hljs-params">instance: AxiosInstance, url?: <span class="hljs-built_in">string</span></span>) &#123;<br>  <span class="hljs-comment">// è¯·æ±‚æ‹¦æˆª</span><br>    instance.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(<span class="hljs-function">(<span class="hljs-params">config: AxiosRequestConfig</span>) =&gt;</span> &#123;<br>      <span class="hljs-comment">// æ¥å£è¯·æ±‚çš„æ‰€æœ‰é…ç½®ï¼Œå¯ä»¥åœ¨axios.defaultsä¿®æ”¹é…ç½®</span><br>      <span class="hljs-keyword">return</span> config<br>    &#125;,<br>    <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error)<br>    &#125;)<br> <br>  <span class="hljs-comment">// å“åº”æ‹¦æˆª</span><br>    instance.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(<span class="hljs-function">(<span class="hljs-params">res: AxiosResponse</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">const</span> &#123; data &#125; = res <br>      <span class="hljs-keyword">const</span> &#123; code, msg &#125; = data<br>      <span class="hljs-keyword">if</span> (code !== <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(msg) <br>      &#125;<br>      <span class="hljs-keyword">return</span> res<br>    &#125;,<br>    <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> &#123; <br>      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error)<br>    &#125;)<br>  &#125;<br></code></pre></td></tr></table></figure><p>åˆ°è¿™é‡Œå°è£…çš„å°±å·®ä¸å¤šäº†ï¼Œä¸€èˆ¬æœåŠ¡ç«¯ä¼šå°†çŠ¶æ€ç ã€æç¤ºä¿¡æ¯å’Œæ•°æ®å°è£…åœ¨ä¸€èµ·ï¼Œç„¶åä½œä¸ºæ•°æ®è¿”å›ï¼Œæ‰€ä»¥æ‰€æœ‰è¯·æ±‚è¿”å›çš„æ•°æ®æ ¼å¼éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥å°±å¯ä»¥å®šä¹‰ä¸€ä¸ªæ¥å£æ¥æŒ‡å®šè¿”å›çš„æ•°æ®ç»“æ„ï¼Œå¯ä»¥å®šä¹‰ä¸€ä¸ªæ¥å£ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ResponseData</span> &#123;<br>  <span class="hljs-attr">code</span>: <span class="hljs-built_in">number</span><br>  data?: <span class="hljs-built_in">any</span><br>  <span class="hljs-attr">msg</span>: <span class="hljs-built_in">string</span><br>&#125;<br></code></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥çœ‹çœ‹ä½¿ç”¨TypeScriptå°è£…çš„Axiosè¯¥å¦‚ä½•ä½¿ç”¨ã€‚å¯ä»¥å…ˆå®šä¹‰ä¸€ä¸ªè¯·æ±‚å®ä¾‹ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">HttpRequest</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/utils/axios&#x27;</span><br><span class="hljs-keyword">export</span> * <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/utils/axios&#x27;</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpRequest</span>()<br></code></pre></td></tr></table></figure><p>è¿™é‡ŒæŠŠè¯·æ±‚ç±»å¯¼å…¥è¿›æ¥ï¼Œé»˜è®¤å¯¼å‡ºè¿™ä¸ªç±»çš„å®ä¾‹ã€‚ä¹‹ååˆ›å»ºä¸€ä¸ªç™»é™†æ¥å£è¯·æ±‚æ–¹æ³•ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> axios, &#123; <span class="hljs-title class_">ResponseData</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./index&#x27;</span><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">AxiosPromise</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span><br><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ILogin</span> &#123;<br>  <span class="hljs-attr">user</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-attr">password</span>: <span class="hljs-built_in">number</span> | <span class="hljs-built_in">string</span><br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> loginReq = (<span class="hljs-attr">data</span>: <span class="hljs-title class_">ILogin</span>): <span class="hljs-title class_">AxiosPromise</span>&lt;<span class="hljs-title class_">ResponseData</span>&gt; =&gt; &#123;<br>  <span class="hljs-keyword">return</span> axios.<span class="hljs-title function_">request</span>(&#123;<br>    <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/api/user/login&#x27;</span>,<br>    data,<br>    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span><br>  &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œå°è£…ç™»å½•è¯·æ±‚æ–¹æ³•loginReqï¼Œä»–çš„å‚æ•°å¿…é¡»æ˜¯æˆ‘ä»¬å®šä¹‰çš„ILoginæ¥å£çš„ç±»å‹ã€‚è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªç±»å‹ä¸º<code>AxiosPromise</code>çš„Promiseï¼ŒAxiosPromiseæ˜¯axioså£°æ˜æ–‡ä»¶å†…ç½®çš„ç±»å‹ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ªæ³›å‹å˜é‡å‚æ•°ï¼Œç”¨äºæŒ‡å®šè¿”å›çš„ç»“æœä¸­dataå­—æ®µçš„ç±»å‹ã€‚ </p><p>æ¥ä¸‹æ¥å¯ä»¥è°ƒç”¨ä¸€ä¸‹è¿™ä¸ªç™»å½•çš„æ¥å£ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; loginReq &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/api/user&#x27;</span><br><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">Home</span>: <span class="hljs-variable constant_">FC</span> = <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">login</span> = (<span class="hljs-params">params</span>) =&gt; &#123;<br>  <span class="hljs-title function_">loginReq</span>(params).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res.<span class="hljs-property">data</span>.<span class="hljs-property">code</span>)<br>  &#125;)<br>  &#125;  <br>&#125;<br></code></pre></td></tr></table></figure><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå½“æˆ‘ä»¬è°ƒç”¨loginReqæ¥å£æ—¶ï¼Œå°±ä¼šæç¤ºæˆ‘ä»¬ï¼Œå‚æ•°çš„ç±»å‹æ˜¯ILoginï¼Œéœ€è¦ä¼ å…¥å‡ ä¸ªå‚æ•°ã€‚è¿™æ ·ç¼–å†™ä»£ç çš„ä½“éªŒå°±ä¼šå¥½å¾ˆå¤šã€‚</p><h3 id="6-Types-or-Interfacesï¼Ÿ"><a href="#6-Types-or-Interfacesï¼Ÿ" class="headerlink" title="6 Types or Interfacesï¼Ÿ"></a>6 Types or Interfacesï¼Ÿ</h3><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨typesæˆ–è€…Interfacesæ¥å®šä¹‰ç±»å‹å—ï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•é€‰æ‹©ä»–ä¿©å‘¢ï¼Ÿå»ºè®®å¦‚ä¸‹ï¼š</p><ul><li>åœ¨å®šä¹‰å…¬å…± API æ—¶(æ¯”å¦‚ç¼–è¾‘ä¸€ä¸ªåº“ï¼‰ä½¿ç”¨ interfaceï¼Œè¿™æ ·å¯ä»¥æ–¹ä¾¿ä½¿ç”¨è€…ç»§æ‰¿æ¥å£ï¼Œè¿™æ ·å…è®¸ä½¿ç”¨æœ€é€šè¿‡å£°æ˜åˆå¹¶æ¥æ‰©å±•å®ƒä»¬ï¼›</li><li>åœ¨å®šä¹‰ç»„ä»¶å±æ€§ï¼ˆPropsï¼‰å’ŒçŠ¶æ€ï¼ˆStateï¼‰æ—¶ï¼Œå»ºè®®ä½¿ç”¨ typeï¼Œå› ä¸º type çš„çº¦æŸæ€§æ›´å¼ºã€‚</li></ul><p>interface å’Œ type åœ¨ ts ä¸­æ˜¯ä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µï¼Œä½†åœ¨ React å¤§éƒ¨åˆ†ä½¿ç”¨çš„ case ä¸­ï¼Œinterface å’Œ type å¯ä»¥è¾¾åˆ°ç›¸åŒçš„åŠŸèƒ½æ•ˆæœï¼Œtype å’Œ interface æœ€å¤§çš„åŒºåˆ«æ˜¯ï¼štype ç±»å‹ä¸èƒ½äºŒæ¬¡ç¼–è¾‘ï¼Œè€Œ interface å¯ä»¥éšæ—¶æ‰©å±•ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Animal</span> &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span><br>&#125;<br><br><span class="hljs-comment">// å¯ä»¥ç»§ç»­åœ¨åŸå±æ€§åŸºç¡€ä¸Šï¼Œæ·»åŠ æ–°å±æ€§ï¼šcolor</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Animal</span> &#123;<br>  <span class="hljs-attr">color</span>: <span class="hljs-built_in">string</span><br>&#125;<br><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Animal</span> = &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span><br>&#125;<br><span class="hljs-comment">// typeç±»å‹ä¸æ”¯æŒå±æ€§æ‰©å±•</span><br><span class="hljs-comment">// Error: Duplicate identifier &#x27;Animal&#x27;</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Animal</span> = &#123;<br>  <span class="hljs-attr">color</span>: <span class="hljs-built_in">string</span><br>&#125;<br></code></pre></td></tr></table></figure><p>typeå¯¹äºè”åˆç±»å‹æ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œæ¯”å¦‚ï¼štype Type &#x3D; TypeA | TypeBã€‚è€Œinterfaceæ›´é€‚åˆå£°æ˜å­—å…¸ç±»è¡Œï¼Œç„¶åå®šä¹‰æˆ–è€…æ‰©å±•å®ƒã€‚</p><h3 id="7-æ‡’åŠ è½½ç±»å‹"><a href="#7-æ‡’åŠ è½½ç±»å‹" class="headerlink" title="7 æ‡’åŠ è½½ç±»å‹"></a>7 æ‡’åŠ è½½ç±»å‹</h3><p>å¦‚æœæˆ‘ä»¬æƒ³åœ¨React routerä¸­ä½¿ç”¨æ‡’åŠ è½½ï¼ŒReactä¹Ÿä¸ºæˆ‘ä»¬æä¾›äº†æ‡’åŠ è½½æ–¹æ³•çš„ç±»å‹ï¼Œæ¥çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">RouteType</span> &#123;<br>    <span class="hljs-attr">pathname</span>: <span class="hljs-built_in">string</span>;<br>    <span class="hljs-attr">component</span>: <span class="hljs-title class_">LazyExoticComponent</span>&lt;<span class="hljs-built_in">any</span>&gt;;<br>    <span class="hljs-attr">exact</span>: <span class="hljs-built_in">boolean</span>;<br>    title?: <span class="hljs-built_in">string</span>;<br>    icon?: <span class="hljs-built_in">string</span>;<br>    children?: <span class="hljs-title class_">RouteType</span>[];<br>&#125;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">AppRoutes</span>: <span class="hljs-title class_">RouteType</span>[] = [<br>    &#123;<br>        <span class="hljs-attr">pathname</span>: <span class="hljs-string">&#x27;/login&#x27;</span>,<br>        <span class="hljs-attr">component</span>: <span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">import</span>(<span class="hljs-string">&#x27;../views/Login/Login&#x27;</span>)),<br>        <span class="hljs-attr">exact</span>: <span class="hljs-literal">true</span><br>    &#125;,<br>    &#123;<br>        <span class="hljs-attr">pathname</span>: <span class="hljs-string">&#x27;/404&#x27;</span>,<br>        <span class="hljs-attr">component</span>: <span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">import</span>(<span class="hljs-string">&#x27;../views/404/404&#x27;</span>)),<br>        <span class="hljs-attr">exact</span>: <span class="hljs-literal">true</span>,<br>    &#125;,<br>    &#123;<br>        <span class="hljs-attr">pathname</span>: <span class="hljs-string">&#x27;/&#x27;</span>,<br>        <span class="hljs-attr">exact</span>: <span class="hljs-literal">false</span>,<br>        <span class="hljs-attr">component</span>: <span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">import</span>(<span class="hljs-string">&#x27;../views/Admin/Admin&#x27;</span>))<br>    &#125;<br>]<br></code></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯æ‡’åŠ è½½ç±»å‹å’Œlazyæ–¹æ³•åœ¨å£°æ˜æ–‡ä»¶ä¸­çš„å®šä¹‰ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">LazyExoticComponent</span>&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ComponentType</span>&lt;<span class="hljs-built_in">any</span>&gt;&gt; = <span class="hljs-title class_">ExoticComponent</span>&lt;<span class="hljs-title class_">ComponentPropsWithRef</span>&lt;T&gt;&gt; &amp; &#123;<br>  <span class="hljs-keyword">readonly</span> <span class="hljs-attr">_result</span>: T;<br>&#125;;<br><br><span class="hljs-keyword">function</span> lazy&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ComponentType</span>&lt;<span class="hljs-built_in">any</span>&gt;&gt;(<br><span class="hljs-attr">factory</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;&#123; <span class="hljs-attr">default</span>: T &#125;&gt;<br>): <span class="hljs-title class_">LazyExoticComponent</span>&lt;T&gt;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰ç«¯</tag>
      
      <tag>typescript</tag>
      
      <tag>react</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç®—æ³•å¯¼è®ºç¬”è®°</title>
    <link href="/blog/2022/11/03/%E7%AE%97%E6%B3%95%E5%AF%BC%E8%AE%BA/"/>
    <url>/blog/2022/11/03/%E7%AE%97%E6%B3%95%E5%AF%BC%E8%AE%BA/</url>
    
    <content type="html"><![CDATA[<h2 id="ç®—æ³•å¯¼è®º"><a href="#ç®—æ³•å¯¼è®º" class="headerlink" title="ç®—æ³•å¯¼è®º"></a>ç®—æ³•å¯¼è®º</h2><h3 id="ä¸€ï¼šåŸºç¡€çŸ¥è¯†"><a href="#ä¸€ï¼šåŸºç¡€çŸ¥è¯†" class="headerlink" title="ä¸€ï¼šåŸºç¡€çŸ¥è¯†"></a>ä¸€ï¼šåŸºç¡€çŸ¥è¯†</h3><h4 id="1-ç®—æ³•åŸºç¡€"><a href="#1-ç®—æ³•åŸºç¡€" class="headerlink" title="1 ç®—æ³•åŸºç¡€"></a>1 ç®—æ³•åŸºç¡€</h4><h5 id="1-1-æ’å…¥æ’åºï¼ˆå¢é‡ï¼‰"><a href="#1-1-æ’å…¥æ’åºï¼ˆå¢é‡ï¼‰" class="headerlink" title="1.1 æ’å…¥æ’åºï¼ˆå¢é‡ï¼‰"></a>1.1 æ’å…¥æ’åºï¼ˆå¢é‡ï¼‰</h5><p>å¾ªç¯ä¸å˜æ€§</p><h5 id="1-2-åˆ†æç®—æ³•"><a href="#1-2-åˆ†æç®—æ³•" class="headerlink" title="1.2 åˆ†æç®—æ³•"></a>1.2 åˆ†æç®—æ³•</h5><p>è¾“å…¥è§„æ¨¡</p><p>æœ€åæƒ…å†µä¸å¹³å‡æƒ…å†µåˆ†æ</p><p>å¢é•¿é‡çº§</p><h5 id="1-3-è®¾è®¡ç®—æ³•"><a href="#1-3-è®¾è®¡ç®—æ³•" class="headerlink" title="1.3 è®¾è®¡ç®—æ³•"></a>1.3 è®¾è®¡ç®—æ³•</h5><p><strong>åˆ†æ²»æ³•</strong></p><p>è®¸å¤šæœ‰ç”¨çš„ç®—æ³•åœ¨ç»“æ„ä¸Šæ˜¯é€’å½’çš„ï¼šä¸ºäº†è§£å†³ä¸€ä¸ªç»™å®šçš„é—®é¢˜ï¼Œç®—æ³•ä¸€æ¬¡æˆ–å¤šæ¬¡é€’å½’åœ°è°ƒç”¨å…¶è‡ªèº«ä»¥è§£å†³ç´§å¯†ç›¸å…³çš„è‹¥å¹²å­é—®é¢˜ã€‚è¿™äº›ç®—æ³•éƒ½å…¸å‹åœ°éµå¾ªåˆ†æ²»æ³•çš„æ€æƒ³ï¼šå°†åŸé—®é¢˜åˆ†è§£æˆè§„æ¨¡è¾ƒå°ä½†ç±»ä¼¼äºåŸé—®é¢˜çš„å­é—®é¢˜ï¼Œé€’å½’åœ°è§£å†³è¿™äº›å­é—®é¢˜ï¼Œç„¶åå†åˆå¹¶è¿™äº›å­é—®é¢˜çš„è§£æ¥å»ºç«‹åŸé—®é¢˜çš„è§£ã€‚</p><p>åˆ†æ²»ç®—æ³•åœ¨æ¯å±‚é€’å½’æ—¶éƒ½æœ‰ä¸‰ä¸ªæ­¥éª¤ï¼šåˆ†è§£ã€è§£å†³ã€åˆå¹¶</p><p>&#x3D;&#x3D;ä¸¾ä¾‹ï¼šå½’å¹¶æ’åºç®—æ³•&#x3D;&#x3D;</p><h4 id="2-å‡½æ•°çš„å¢é•¿"><a href="#2-å‡½æ•°çš„å¢é•¿" class="headerlink" title="2 å‡½æ•°çš„å¢é•¿"></a>2 å‡½æ•°çš„å¢é•¿</h4><h5 id="2-1-æ¸è¿›è®°å·"><a href="#2-1-æ¸è¿›è®°å·" class="headerlink" title="2.1 æ¸è¿›è®°å·"></a>2.1 æ¸è¿›è®°å·</h5><h5 id="2-2-æ ‡å‡†è®°å·å’Œå¸¸ç”¨å‡½æ•°"><a href="#2-2-æ ‡å‡†è®°å·å’Œå¸¸ç”¨å‡½æ•°" class="headerlink" title="2.2 æ ‡å‡†è®°å·å’Œå¸¸ç”¨å‡½æ•°"></a>2.2 æ ‡å‡†è®°å·å’Œå¸¸ç”¨å‡½æ•°</h5><h4 id="3-åˆ†æ²»ç­–ç•¥"><a href="#3-åˆ†æ²»ç­–ç•¥" class="headerlink" title="3 åˆ†æ²»ç­–ç•¥"></a>3 åˆ†æ²»ç­–ç•¥</h4><h5 id="3-1-é€’å½’å¼"><a href="#3-1-é€’å½’å¼" class="headerlink" title="3.1 é€’å½’å¼"></a>3.1 é€’å½’å¼</h5><p>æ±‚è§£é€’å½’å¼çš„æ–¹æ³•ï¼šä»£å…¥æ³•ã€é€’å½’æ ‘æ³•ã€ä¸»æ–¹æ³•</p><h5 id="x3D-x3D-3-2-æœ€å¤§å­æ•°ç»„é—®é¢˜-x3D-x3D"><a href="#x3D-x3D-3-2-æœ€å¤§å­æ•°ç»„é—®é¢˜-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;3.2 æœ€å¤§å­æ•°ç»„é—®é¢˜&#x3D;&#x3D;"></a>&#x3D;&#x3D;3.2 æœ€å¤§å­æ•°ç»„é—®é¢˜&#x3D;&#x3D;</h5><p>è‚¡ç¥¨ä¹°å–</p><p>ä½¿ç”¨åˆ†æ²»ç­–ç•¥çš„æ±‚è§£æ–¹æ³•</p><p>åˆ†æ²»ç®—æ³•çš„åˆ†æ</p><h5 id="x3D-x3D-3-3-çŸ©é˜µä¹˜æ³•çš„Strassenç®—æ³•-x3D-x3D"><a href="#x3D-x3D-3-3-çŸ©é˜µä¹˜æ³•çš„Strassenç®—æ³•-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;3.3 çŸ©é˜µä¹˜æ³•çš„Strassenç®—æ³•&#x3D;&#x3D;"></a>&#x3D;&#x3D;3.3 çŸ©é˜µä¹˜æ³•çš„Strassenç®—æ³•&#x3D;&#x3D;</h5><h5 id="3-4-ç”¨ä»£å…¥æ³•æ±‚è§£é€’å½’å¼"><a href="#3-4-ç”¨ä»£å…¥æ³•æ±‚è§£é€’å½’å¼" class="headerlink" title="3.4 ç”¨ä»£å…¥æ³•æ±‚è§£é€’å½’å¼"></a>3.4 ç”¨ä»£å…¥æ³•æ±‚è§£é€’å½’å¼</h5><ol><li>çŒœæµ‹è§£çš„å½¢å¼</li><li>ç”¨æ•°å­¦å½’çº³æ³•æ±‚å‡ºè§£ä¸­çš„å¸¸æ•°ï¼Œå¹¶è¯æ˜è§£æ˜¯æ­£ç¡®çš„</li></ol><h5 id="3-5-ç”¨é€’å½’æ ‘æ–¹æ³•æ±‚è§£é€’å½’å¼"><a href="#3-5-ç”¨é€’å½’æ ‘æ–¹æ³•æ±‚è§£é€’å½’å¼" class="headerlink" title="3.5 ç”¨é€’å½’æ ‘æ–¹æ³•æ±‚è§£é€’å½’å¼"></a>3.5 ç”¨é€’å½’æ ‘æ–¹æ³•æ±‚è§£é€’å½’å¼</h5><h5 id="3-6-ç”¨ä¸»æ–¹æ³•æ±‚è§£é€’å½’å¼"><a href="#3-6-ç”¨ä¸»æ–¹æ³•æ±‚è§£é€’å½’å¼" class="headerlink" title="3.6 ç”¨ä¸»æ–¹æ³•æ±‚è§£é€’å½’å¼"></a>3.6 ç”¨ä¸»æ–¹æ³•æ±‚è§£é€’å½’å¼</h5><p>è¯æ˜ä¸»å®šç†</p><h4 id="4-æ¦‚ç‡åˆ†æå’Œéšæœºç®—æ³•"><a href="#4-æ¦‚ç‡åˆ†æå’Œéšæœºç®—æ³•" class="headerlink" title="4 æ¦‚ç‡åˆ†æå’Œéšæœºç®—æ³•"></a>4 æ¦‚ç‡åˆ†æå’Œéšæœºç®—æ³•</h4><p>&#x3D;&#x3D;4.1 é›‡ç”¨é—®é¢˜&#x3D;&#x3D;</p><p>åœ¨ä»»ä½•æ—¶å€™é›‡ä½£æ›´å¥½çš„åŠå…¬åŠ©ç†å¹¶ä¸ºæ­¤æ”¯ä»˜è´¹ç”¨</p><p>æœ€åæƒ…å†µåˆ†æ</p><p>æ¦‚ç‡åˆ†æ</p><p>éšæœºç®—æ³•</p><p>æŒ‡ç¤ºå™¨éšæœºå˜é‡</p><p>éšæœºç®—æ³•</p><p>éšæœºæ’åˆ—æ•°ç»„</p><p>4.2 æ¦‚ç‡åˆ†æå’ŒæŒ‡ç¤ºå™¨éšæœºå˜é‡çš„è¿›ä¸€æ­¥ä½¿ç”¨</p><p>ç”Ÿæ—¥æ‚–è®º</p><p>çƒä¸ç®±å­&#x2F;ç¤¼åˆ¸æ”¶é›†è€…é—®é¢˜</p><p>ç‰¹å¾åºåˆ—</p><p>åœ¨çº¿é›‡ä½£é—®é¢˜</p><h3 id="äºŒï¼šæ’åºå’Œé¡ºåºç»Ÿè®¡é‡"><a href="#äºŒï¼šæ’åºå’Œé¡ºåºç»Ÿè®¡é‡" class="headerlink" title="äºŒï¼šæ’åºå’Œé¡ºåºç»Ÿè®¡é‡"></a>äºŒï¼šæ’åºå’Œé¡ºåºç»Ÿè®¡é‡</h3><h4 id="x3D-x3D-1-å †æ’åº-x3D-x3D"><a href="#x3D-x3D-1-å †æ’åº-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;1 å †æ’åº&#x3D;&#x3D;"></a>&#x3D;&#x3D;1 å †æ’åº&#x3D;&#x3D;</h4><p>å †</p><p>ç»´æŠ¤å †çš„æ€§è´¨</p><p>å»ºå †</p><p>å †æ’åºç®—æ³•</p><p>ä¼˜å…ˆé˜Ÿåˆ—</p><h4 id="x3D-x3D-2-å¿«é€Ÿæ’åº-x3D-x3D"><a href="#x3D-x3D-2-å¿«é€Ÿæ’åº-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;2 å¿«é€Ÿæ’åº&#x3D;&#x3D;"></a>&#x3D;&#x3D;2 å¿«é€Ÿæ’åº&#x3D;&#x3D;</h4><p>åˆ†æ²»æ€æƒ³</p><p>å¿«é€Ÿæ’åºæ€§èƒ½</p><p>å¿«é€Ÿæ’åºçš„éšæœºåŒ–ç‰ˆæœ¬</p><p>å¿«é€Ÿæ’åºåˆ†æ</p><h4 id="3-çº¿æ€§æ—¶é—´æ’åº"><a href="#3-çº¿æ€§æ—¶é—´æ’åº" class="headerlink" title="3 çº¿æ€§æ—¶é—´æ’åº"></a>3 çº¿æ€§æ—¶é—´æ’åº</h4><p>æ’åºç®—æ³•çš„ä¸‹ç•Œï¼š&#x3D;&#x3D;å†³ç­–æ ‘æ¨¡å‹&#x3D;&#x3D;</p><p>æœ€åæƒ…å†µçš„ä¸‹ç•Œ</p><p>&#x3D;&#x3D;è®¡æ•°æ’åº&#x3D;&#x3D;</p><p>&#x3D;&#x3D;åŸºæ•°æ’åº&#x3D;&#x3D;</p><p>&#x3D;&#x3D;æ¡¶æ’åº&#x3D;&#x3D;</p><h4 id="4-ä¸­ä½æ•°å’Œé¡ºåºç»Ÿè®¡é‡"><a href="#4-ä¸­ä½æ•°å’Œé¡ºåºç»Ÿè®¡é‡" class="headerlink" title="4 ä¸­ä½æ•°å’Œé¡ºåºç»Ÿè®¡é‡"></a>4 ä¸­ä½æ•°å’Œé¡ºåºç»Ÿè®¡é‡</h4><p>æœ€å¤§å€¼å’Œæœ€å°å€¼</p><p>&#x3D;&#x3D;æœŸæœ›ä¸ºçº¿æ€§æ—¶é—´çš„é€‰æ‹©ç®—æ³•&#x3D;&#x3D;</p><p>&#x3D;&#x3D;æœ€åæƒ…å†µä¸ºçº¿æ€§æ—¶é—´çš„é€‰æ‹©ç®—æ³•&#x3D;&#x3D;</p><h3 id="ä¸‰ï¼šæ•°æ®ç»“æ„"><a href="#ä¸‰ï¼šæ•°æ®ç»“æ„" class="headerlink" title="ä¸‰ï¼šæ•°æ®ç»“æ„"></a>ä¸‰ï¼šæ•°æ®ç»“æ„</h3><h4 id="1-åŸºæœ¬æ•°æ®ç»“æ„"><a href="#1-åŸºæœ¬æ•°æ®ç»“æ„" class="headerlink" title="1 åŸºæœ¬æ•°æ®ç»“æ„"></a>1 åŸºæœ¬æ•°æ®ç»“æ„</h4><p>æ ˆå’Œé˜Ÿåˆ—</p><p>é“¾è¡¨</p><p>æŒ‡é’ˆå’Œå¯¹è±¡çš„å®ç°</p><p>æœ‰æ ¹æ ‘çš„è¡¨ç¤ºï¼šäºŒå‰æ ‘ã€åˆ†æ”¯æ— é™åˆ¶çš„æœ‰æ ¹æ ‘</p><h4 id="2-æ•£åˆ—è¡¨"><a href="#2-æ•£åˆ—è¡¨" class="headerlink" title="2 æ•£åˆ—è¡¨"></a>2 æ•£åˆ—è¡¨</h4><p>ç›´æ¥å¯»å€è¡¨</p><p>æ•£åˆ—è¡¨ï¼šé“¾æ¥æ³•ã€å¼€æ”¾å¯»å€æ³•</p><h4 id="3-æ•£åˆ—å‡½æ•°"><a href="#3-æ•£åˆ—å‡½æ•°" class="headerlink" title="3 æ•£åˆ—å‡½æ•°"></a>3 æ•£åˆ—å‡½æ•°</h4><p>é™¤æ³•æ•£åˆ—æ³•</p><p>ä¹˜æ³•æ•£åˆ—æ³•</p><p>å…¨åŸŸæ•£åˆ—æ³•</p><p>å¼€æ”¾å¯»å€æ³•ï¼šçº¿æ€§æ¢æŸ¥ã€äºŒæ¬¡æ¢æŸ¥ã€åŒé‡æ•£åˆ—ã€å¼€æ”¾å¯»å€æ³•çš„åˆ†æ</p><p>å®Œå…¨æ•£åˆ—</p><h4 id="4-äºŒå‰æœç´¢æ ‘"><a href="#4-äºŒå‰æœç´¢æ ‘" class="headerlink" title="4 äºŒå‰æœç´¢æ ‘"></a>4 äºŒå‰æœç´¢æ ‘</h4><p>ä»€ä¹ˆæ˜¯äºŒå‰æœç´¢æ ‘</p><p>æŸ¥è¯¢äºŒå‰æœç´¢æ ‘ï¼šæœ€å¤§å…³é”®å­—å…ƒç´ å’Œæœ€å°å…³é”®å­—å…ƒç´ ã€åç»§å’Œå‰é©±</p><p>æ’å…¥å’Œåˆ é™¤</p><p>éšæœºæ„å»ºäºŒå‰æœç´¢æ ‘</p><h4 id="5-çº¢é»‘æ ‘"><a href="#5-çº¢é»‘æ ‘" class="headerlink" title="5 çº¢é»‘æ ‘"></a>5 çº¢é»‘æ ‘</h4><p>çº¢é»‘æ ‘çš„æ€§è´¨</p><p>æ—‹è½¬</p><p>æ’å…¥</p><h4 id="6-æ•°æ®ç»“æ„çš„æ‰©å¼ "><a href="#6-æ•°æ®ç»“æ„çš„æ‰©å¼ " class="headerlink" title="6 æ•°æ®ç»“æ„çš„æ‰©å¼ "></a>6 æ•°æ®ç»“æ„çš„æ‰©å¼ </h4><p>åŠ¨æ€é¡ºåºç»Ÿè®¡</p><p>å¦‚ä½•æ‰©å¼ æ•°æ®ç»“æ„</p><p>åŒºé—´æ ‘</p><h3 id="å››ï¼šé«˜çº§è®¾è®¡å’Œåˆ†ææŠ€æœ¯"><a href="#å››ï¼šé«˜çº§è®¾è®¡å’Œåˆ†ææŠ€æœ¯" class="headerlink" title="å››ï¼šé«˜çº§è®¾è®¡å’Œåˆ†ææŠ€æœ¯"></a>å››ï¼šé«˜çº§è®¾è®¡å’Œåˆ†ææŠ€æœ¯</h3><h4 id="1-åŠ¨æ€è§„åˆ’"><a href="#1-åŠ¨æ€è§„åˆ’" class="headerlink" title="1 åŠ¨æ€è§„åˆ’"></a>1 åŠ¨æ€è§„åˆ’</h4><p>ç”¨äºæ±‚è§£æœ€ä¼˜åŒ–é—®é¢˜</p><p>&#x3D;&#x3D;é’¢æ¡åˆ‡å‰²&#x3D;&#x3D;</p><p>&#x3D;&#x3D;çŸ©é˜µé“¾ä¹˜æ³•&#x3D;&#x3D;</p><p>åŠ¨æ€è§„åˆ’åŸç†ï¼šæœ€ä¼˜å­ç»“æ„ã€å­é—®é¢˜é‡å </p><p>é‡æ„æœ€ä¼˜è§£ã€å¤‡å¿˜</p><p>&#x3D;&#x3D;æœ€é•¿å…¬å…±å­åºåˆ—&#x3D;&#x3D;</p><p>&#x3D;&#x3D;æœ€ä¼˜äºŒå‰æœç´¢æ ‘&#x3D;&#x3D;</p><h4 id="2-è´ªå¿ƒç®—æ³•"><a href="#2-è´ªå¿ƒç®—æ³•" class="headerlink" title="2 è´ªå¿ƒç®—æ³•"></a>2 è´ªå¿ƒç®—æ³•</h4><p>&#x3D;&#x3D;æ´»åŠ¨é€‰æ‹©é—®é¢˜&#x3D;&#x3D;ï¼šè°ƒåº¦ç«äº‰å…±äº«èµ„æºçš„å¤šä¸ªæ´»åŠ¨</p><p>è´ªå¿ƒç®—æ³•åŸç†ï¼šè´ªå¿ƒé€‰æ‹©æ€§è´¨ã€æœ€æœ‰å­ç»“æ„ã€è´ªå¿ƒå¯¹åŠ¨æ€è§„åˆ’ï¼ˆ0-1èƒŒåŒ…ã€åˆ†æ•°èƒŒåŒ…ï¼‰</p><p>&#x3D;&#x3D;èµ«å¤«æ›¼ç¼–ç &#x3D;&#x3D;ï¼šå˜é•¿ç¼–ç ã€å‰ç¼€ç ã€æ„é€ èµ«å¤«æ›¼ç¼–ç ã€èµ«å¤«æ›¼ç®—æ³•çš„æ­£ç¡®æ€§</p><p>æ‹Ÿé˜µå’Œè´ªå¿ƒç®—æ³•ï¼šçŸ©é˜µæ‹Ÿé˜µã€å›¾æ‹Ÿé˜µã€åŠ æƒæ‹Ÿé˜µä¸Šçš„è´ªå¿ƒç®—æ³•</p><p>ç”¨æ‹Ÿé˜µæ±‚è§£ä»»åŠ¡è°ƒåº¦é—®é¢˜</p><h4 id="3-æ‘Šè¿˜åˆ†æ"><a href="#3-æ‘Šè¿˜åˆ†æ" class="headerlink" title="3 æ‘Šè¿˜åˆ†æ"></a>3 æ‘Šè¿˜åˆ†æ</h4><p>èšåˆåˆ†æï¼šæ ˆæ“ä½œã€äºŒè¿›åˆ¶è®¡æ•°å™¨é€’å¢</p><p>æ ¸ç®—æ³•ï¼šæ ˆæ“ä½œã€äºŒè¿›åˆ¶è®¡æ•°å™¨é€’å¢</p><p>åŠ¿èƒ½æ³•ï¼šæ ˆæ“ä½œã€äºŒè¿›åˆ¶è®¡æ•°å™¨é€’å¢</p><p>åŠ¨æ€è¡¨ï¼šè¡¨æ‰©å¼ ã€è¡¨æ‰©å¼ å’Œæ”¶ç¼©</p><h3 id="äº”ï¼šé«˜çº§æ•°æ®ç»“æ„"><a href="#äº”ï¼šé«˜çº§æ•°æ®ç»“æ„" class="headerlink" title="äº”ï¼šé«˜çº§æ•°æ®ç»“æ„"></a>äº”ï¼šé«˜çº§æ•°æ®ç»“æ„</h3><h4 id="1-Bæ ‘"><a href="#1-Bæ ‘" class="headerlink" title="1 Bæ ‘"></a>1 Bæ ‘</h4><p>è¾…å­˜ä¸Šçš„æ•°æ®ç»“æ„</p><p>Bæ ‘çš„å®šä¹‰</p><p>Bæ ‘ä¸Šçš„åŸºæœ¬æ“ä½œï¼šåˆ›å»ºä¸€ä¸ªç©ºçš„Bæ ‘ã€å‘Bæ ‘ä¸­æ’å…¥ä¸€ä¸ªå…³é”®å­—ã€åˆ†è£‚Bæ ‘ä¸­çš„ç»“ç‚¹ã€ä»¥æ²¿æ ‘å•ç¨‹ä¸‹è¡Œæ–¹å¼å‘Bæ ‘æ’å…¥å…³é”®å­—</p><p>ä»Bæ ‘ä¸­åˆ é™¤å…³é”®å­—</p><h4 id="2-æ–æ³¢é‚£å¥‘å †"><a href="#2-æ–æ³¢é‚£å¥‘å †" class="headerlink" title="2 æ–æ³¢é‚£å¥‘å †"></a>2 æ–æ³¢é‚£å¥‘å †</h4><p>å¯åˆå¹¶å †</p><p>ç†è®ºä¸Šçš„æ–æ³¢é‚£å¥‘å †ä¸å®é™…ä¸­çš„æ–æ³¢é‚£å¥‘å †</p><p>æ–æ³¢é‚£å¥‘å †ç»“æ„ï¼šåŠ¿å‡½æ•°ã€æœ€å¤§åº¦æ•°</p><h5 id="2-2-å¯åˆå¹¶å †æ“ä½œï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ–æ³¢é‚£å¥‘å †ã€æ’å…¥ä¸€ä¸ªç»“ç‚¹ã€å¯»æ‰¾æœ€å°ç»“ç‚¹ã€ä¸¤ä¸ªæ–æ³¢é‚£å¥‘å †çš„åˆå¹¶ã€æŠ½å–æœ€å°ç»“ç‚¹"><a href="#2-2-å¯åˆå¹¶å †æ“ä½œï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ–æ³¢é‚£å¥‘å †ã€æ’å…¥ä¸€ä¸ªç»“ç‚¹ã€å¯»æ‰¾æœ€å°ç»“ç‚¹ã€ä¸¤ä¸ªæ–æ³¢é‚£å¥‘å †çš„åˆå¹¶ã€æŠ½å–æœ€å°ç»“ç‚¹" class="headerlink" title="2.2 å¯åˆå¹¶å †æ“ä½œï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ–æ³¢é‚£å¥‘å †ã€æ’å…¥ä¸€ä¸ªç»“ç‚¹ã€å¯»æ‰¾æœ€å°ç»“ç‚¹ã€ä¸¤ä¸ªæ–æ³¢é‚£å¥‘å †çš„åˆå¹¶ã€æŠ½å–æœ€å°ç»“ç‚¹"></a>2.2 å¯åˆå¹¶å †æ“ä½œï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ–æ³¢é‚£å¥‘å †ã€æ’å…¥ä¸€ä¸ªç»“ç‚¹ã€å¯»æ‰¾æœ€å°ç»“ç‚¹ã€ä¸¤ä¸ªæ–æ³¢é‚£å¥‘å †çš„åˆå¹¶ã€æŠ½å–æœ€å°ç»“ç‚¹</h5><h5 id="2-3-å…³é”®å­—å‡å€¼å’Œåˆ é™¤ä¸€ä¸ªç»“ç‚¹"><a href="#2-3-å…³é”®å­—å‡å€¼å’Œåˆ é™¤ä¸€ä¸ªç»“ç‚¹" class="headerlink" title="2.3 å…³é”®å­—å‡å€¼å’Œåˆ é™¤ä¸€ä¸ªç»“ç‚¹"></a>2.3 å…³é”®å­—å‡å€¼å’Œåˆ é™¤ä¸€ä¸ªç»“ç‚¹</h5><h5 id="2-4-æœ€å¤§åº¦æ•°çš„ç•Œ"><a href="#2-4-æœ€å¤§åº¦æ•°çš„ç•Œ" class="headerlink" title="2.4 æœ€å¤§åº¦æ•°çš„ç•Œ"></a>2.4 æœ€å¤§åº¦æ•°çš„ç•Œ</h5><h4 id="3-van-Emde-Boasæ ‘"><a href="#3-van-Emde-Boasæ ‘" class="headerlink" title="3 van Emde Boasæ ‘"></a>3 van Emde Boasæ ‘</h4><h5 id="3-1-åŸºæœ¬æ–¹æ³•"><a href="#3-1-åŸºæœ¬æ–¹æ³•" class="headerlink" title="3.1 åŸºæœ¬æ–¹æ³•"></a>3.1 åŸºæœ¬æ–¹æ³•</h5><p>ç›´æ¥å¯»å€</p><p>å åŠ çš„äºŒå‰æ ‘ç»“æ„</p><p>å åŠ çš„ä¸€é¢—é«˜åº¦æ’å®šçš„æ ‘</p><h5 id="3-2-é€’å½’ç»“æ„"><a href="#3-2-é€’å½’ç»“æ„" class="headerlink" title="3.2 é€’å½’ç»“æ„"></a>3.2 é€’å½’ç»“æ„</h5><p>åŸå‹van Emde Boasç»“æ„</p><p>åŸå‹van Emde Boasç»“æ„ä¸Šçš„æ“ä½œï¼šåˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦åœ¨é›†åˆä¸­ã€æŸ¥æ‰¾æœ€å°å…ƒç´ ã€æŸ¥æ‰¾åç»§ã€æ’å…¥å…ƒç´ ã€åˆ é™¤å…ƒç´ </p><p>van Emde Boasæ ‘åŠå…¶æ“ä½œï¼šæŸ¥æ‰¾æœ€å°å…ƒç´ å’Œæœ€å¤§å…ƒç´ ã€åˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦åœ¨é›†åˆä¸­ã€æŸ¥æ‰¾å‰é©±å’Œåç»§ã€æ’å…¥ä¸€ä¸ªå…ƒç´ ã€åˆ é™¤ä¸€ä¸ªå…ƒç´ </p><h4 id="4-ç”¨äºä¸ç›¸äº¤é›†åˆçš„æ•°æ®ç»“æ„"><a href="#4-ç”¨äºä¸ç›¸äº¤é›†åˆçš„æ•°æ®ç»“æ„" class="headerlink" title="4 ç”¨äºä¸ç›¸äº¤é›†åˆçš„æ•°æ®ç»“æ„"></a>4 ç”¨äºä¸ç›¸äº¤é›†åˆçš„æ•°æ®ç»“æ„</h4><p>ä¸ç›¸äº¤é›†åˆçš„æ“ä½œ</p><p>ä¸ç›¸äº¤é›†åˆçš„é“¾è¡¨è¡¨ç¤ºï¼šåˆå¹¶çš„ä¸€ä¸ªç®€å•å®ç°ã€ä¸€ç§åŠ æƒåˆå¹¶çš„å¯å‘å¼ç­–ç•¥</p><p>ä¸ç›¸äº¤é›†åˆæ£®æ—ï¼šæ”¹è¿›è¿è¡Œæ—¶é—´çš„å¯å‘å¼ç­–ç•¥ã€å®ç°ä¸ç›¸äº¤é›†åˆæ£®æ—çš„ä¼ªä»£ç ã€å¯å‘å¼ç­–ç•¥å¯¹è¿è¡Œæ—¶é—´çš„å½±å“</p><p>å¸¦è·¯å¾„å‹ç¼©çš„æŒ‰ç§©åˆå¹¶çš„åˆ†æï¼šä¸€ä¸ªå¢é•¿éå¸¸æ…¢çš„å‡½æ•°ä¸å…¶å¢é•¿éå¸¸æ…¢çš„é€†å‡½æ•°ã€ç§©çš„æ€§è´¨ã€æ—¶é—´ç•Œçš„è¯æ˜ã€åŠ¿å‡½æ•°ã€åŠ¿çš„å˜åŒ–ä¸æ“ä½œçš„æ‘Šè¿˜åˆ†æ</p><h3 id="å…­ï¼šå›¾ç®—æ³•"><a href="#å…­ï¼šå›¾ç®—æ³•" class="headerlink" title="å…­ï¼šå›¾ç®—æ³•"></a>å…­ï¼šå›¾ç®—æ³•</h3><h4 id="1-åŸºæœ¬çš„å›¾ç®—æ³•"><a href="#1-åŸºæœ¬çš„å›¾ç®—æ³•" class="headerlink" title="1 åŸºæœ¬çš„å›¾ç®—æ³•"></a>1 åŸºæœ¬çš„å›¾ç®—æ³•</h4><p>å›¾çš„è¡¨ç¤º</p><p>å¹¿åº¦ä¼˜å…ˆæœç´¢</p><p>&#x3D;&#x3D;æœ€çŸ­è·¯å¾„&#x3D;&#x3D;</p><p>å¹¿åº¦ä¼˜å…ˆæ ‘</p><p>æ·±åº¦ä¼˜å…ˆæœç´¢</p><p>æ‹“æ‰‘æ’åº</p><p>å¼ºè¿é€šåˆ†é‡</p><h4 id="2-x3D-x3D-æœ€å°ç”Ÿæˆæ ‘-x3D-x3D"><a href="#2-x3D-x3D-æœ€å°ç”Ÿæˆæ ‘-x3D-x3D" class="headerlink" title="2 &#x3D;&#x3D;æœ€å°ç”Ÿæˆæ ‘&#x3D;&#x3D;"></a>2 &#x3D;&#x3D;æœ€å°ç”Ÿæˆæ ‘&#x3D;&#x3D;</h4><p>æœ€å°ç”Ÿæˆæ ‘çš„å½¢æˆ</p><p>&#x3D;&#x3D;Kruskalç®—æ³•å’ŒPrimç®—æ³•&#x3D;&#x3D;</p><h4 id="3-x3D-x3D-å•æºæœ€çŸ­è·¯å¾„-x3D-x3D"><a href="#3-x3D-x3D-å•æºæœ€çŸ­è·¯å¾„-x3D-x3D" class="headerlink" title="3 &#x3D;&#x3D;å•æºæœ€çŸ­è·¯å¾„&#x3D;&#x3D;"></a>3 &#x3D;&#x3D;å•æºæœ€çŸ­è·¯å¾„&#x3D;&#x3D;</h4><p>æœ€çŸ­è·¯å¾„çš„å‡ ä¸ªå˜ä½“</p><p>è´Ÿæƒé‡çš„è¾¹</p><p>ç¯è·¯</p><p>æœ€çŸ­è·¯å¾„çš„è¡¨ç¤º</p><p>æ¾å¼›æ“ä½œ</p><p>æœ€çŸ­è·¯å¾„å’Œæ¾å¼›æ“ä½œçš„æ€§è´¨</p><p>&#x3D;&#x3D;Bellman-Fordç®—æ³•&#x3D;&#x3D;</p><p>æœ‰å‘æ— ç¯å›¾ä¸­çš„å•æºæœ€çŸ­è·¯å¾„é—®é¢˜</p><p>&#x3D;&#x3D;Dijkstraç®—æ³•&#x3D;&#x3D;</p><p>å·®åˆ†çº¦æŸç³»ç»Ÿ</p><p>æœ€çŸ­è·¯å¾„æ€§è´¨çš„è¯æ˜</p><p>æ¾å¼›æ“ä½œä¸æœ€çŸ­è·¯å¾„æ ‘</p><h4 id="4-æ‰€æœ‰ç»“ç‚¹å¯¹çš„æœ€çŸ­è·¯å¾„é—®é¢˜"><a href="#4-æ‰€æœ‰ç»“ç‚¹å¯¹çš„æœ€çŸ­è·¯å¾„é—®é¢˜" class="headerlink" title="4 æ‰€æœ‰ç»“ç‚¹å¯¹çš„æœ€çŸ­è·¯å¾„é—®é¢˜"></a>4 æ‰€æœ‰ç»“ç‚¹å¯¹çš„æœ€çŸ­è·¯å¾„é—®é¢˜</h4><p>æœ€çŸ­è·¯å¾„å’ŒçŸ©é˜µä¹˜æ³•ï¼šæœ€çŸ­è·¯å¾„çš„ç»“æ„ã€æ‰€æœ‰ç»“ç‚¹å¯¹æœ€çŸ­è·¯å¾„çš„é€’å½’è§£ã€è‡ªåº•å‘ä¸Šè®¡ç®—æœ€çŸ­è·¯å¾„æƒé‡ã€æ”¹è¿›ç®—æ³•çš„è¿è¡Œæ—¶é—´</p><p>&#x3D;&#x3D;Floyd-Warshallç®—æ³•&#x3D;&#x3D;</p><p>è‡ªåº•å‘ä¸Šè®¡ç®—æœ€çŸ­è·¯å¾„æƒé‡ã€æ„å»ºä¸€æ¡æœ€çŸ­è·¯å¾„ã€æœ‰å‘å›¾çš„ä¼ é€’é—­åŒ…</p><p>&#x3D;&#x3D;ç”¨äºç¨€ç–å›¾çš„Johnsonç®—æ³•&#x3D;&#x3D;</p><p>é€šè¿‡é‡æ–°å¤åˆ¶æ¥ç”Ÿæˆéè´Ÿæƒé‡ã€è®¡ç®—æ‰€æœ‰ç»“ç‚¹å¯¹ä¹‹é—´çš„æœ€çŸ­è·¯å¾„</p><h4 id="5-æœ€å¤§æµ"><a href="#5-æœ€å¤§æµ" class="headerlink" title="5 æœ€å¤§æµ"></a>5 æœ€å¤§æµ</h4><p>æµç½‘ç»œï¼šå®¹é‡é™åˆ¶ã€æµé‡å®ˆæ’ã€ç”¨åå¹³è¡Œè¾¹æ¥æ¨¡æ‹Ÿé—®é¢˜ã€å…·æœ‰å¤šä¸ªæºç»“ç‚¹å’Œå¤šä¸ªæ±‡ç‚¹çš„ç½‘ç»œ</p><p>&#x3D;&#x3D;Frod-Fulkersonæ–¹æ³•&#x3D;&#x3D;</p><p>æ®‹å­˜ç½‘ç»œã€å¢å¹¿è·¯å¾„ã€æµç½‘ç»œçš„åˆ‡å‰²</p><p>Edmonds-Karpç®—æ³•</p><p>&#x3D;&#x3D;æ¨é€-é‡è´´æ ‡ç­¾ç®—æ³•&#x3D;&#x3D;</p><p>&#x3D;&#x3D;å‰ç½®é‡è´´æ ‡ç­¾ç®—æ³•&#x3D;&#x3D;</p><h3 id="ä¸ƒï¼šç®—æ³•é—®é¢˜é€‰ç¼–"><a href="#ä¸ƒï¼šç®—æ³•é—®é¢˜é€‰ç¼–" class="headerlink" title="ä¸ƒï¼šç®—æ³•é—®é¢˜é€‰ç¼–"></a>ä¸ƒï¼šç®—æ³•é—®é¢˜é€‰ç¼–</h3><h4 id="1-å¤šçº¿ç¨‹ç®—æ³•"><a href="#1-å¤šçº¿ç¨‹ç®—æ³•" class="headerlink" title="1 å¤šçº¿ç¨‹ç®—æ³•"></a>1 å¤šçº¿ç¨‹ç®—æ³•</h4><h5 id="1-1-åŠ¨æ€å¤šçº¿ç¨‹åŸºç¡€"><a href="#1-1-åŠ¨æ€å¤šçº¿ç¨‹åŸºç¡€" class="headerlink" title="1.1 åŠ¨æ€å¤šçº¿ç¨‹åŸºç¡€"></a>1.1 åŠ¨æ€å¤šçº¿ç¨‹åŸºç¡€</h5><p>å¤šçº¿ç¨‹æ‰§è¡Œçš„æ¨¡å‹</p><p>æ€§èƒ½åº¦é‡</p><p>è°ƒåº¦</p><p>å¤šçº¿ç¨‹ç®—æ³•çš„åˆ†æ</p><p>å¹¶è¡Œå¾ªç¯</p><p>ç«äº‰æ¡ä»¶</p><p>&#x3D;&#x3D;å›½é™…è±¡æ£‹&#x3D;&#x3D;</p><h5 id="1-2-å¤šçº¿ç¨‹çŸ©é˜µç®—æ³•"><a href="#1-2-å¤šçº¿ç¨‹çŸ©é˜µç®—æ³•" class="headerlink" title="1.2 å¤šçº¿ç¨‹çŸ©é˜µç®—æ³•"></a>1.2 å¤šçº¿ç¨‹çŸ©é˜µç®—æ³•</h5><p>çŸ©é˜µç®—æ³•çš„å¤šçº¿ç¨‹ç®—æ³•</p><p>çŸ©é˜µç®—æ³•çš„åˆ†æ²»å¤šçº¿ç¨‹ç®—æ³•</p><p>å¤šçº¿ç¨‹Strassenç®—æ³•</p><h5 id="1-3-å¤šçº¿ç¨‹å½’å¹¶æ’åº"><a href="#1-3-å¤šçº¿ç¨‹å½’å¹¶æ’åº" class="headerlink" title="1.3 å¤šçº¿ç¨‹å½’å¹¶æ’åº"></a>1.3 å¤šçº¿ç¨‹å½’å¹¶æ’åº</h5><p>å¤šçº¿ç¨‹å½’å¹¶æ’åºåˆ†æ</p><h4 id="2-çŸ©é˜µè¿ç®—"><a href="#2-çŸ©é˜µè¿ç®—" class="headerlink" title="2 çŸ©é˜µè¿ç®—"></a>2 çŸ©é˜µè¿ç®—</h4><h5 id="2-1-æ±‚è§£çº¿æ€§æ–¹ç¨‹ç»„"><a href="#2-1-æ±‚è§£çº¿æ€§æ–¹ç¨‹ç»„" class="headerlink" title="2.1 æ±‚è§£çº¿æ€§æ–¹ç¨‹ç»„"></a>2.1 æ±‚è§£çº¿æ€§æ–¹ç¨‹ç»„</h5><p>LUPåˆ†è§£</p><p>æ­£å‘æ›¿æ¢å’Œåå‘æ›¿æ¢</p><p>è®¡ç®—ä¸€ä¸ªLUåˆ†è§£</p><p>è®¡ç®—ä¸€ä¸ªLUPåˆ†è§£</p><h5 id="2-2-çŸ©é˜µæ±‚é€†"><a href="#2-2-çŸ©é˜µæ±‚é€†" class="headerlink" title="2.2 çŸ©é˜µæ±‚é€†"></a>2.2 çŸ©é˜µæ±‚é€†</h5><p>é€šè¿‡LUPåˆ†è§£è®¡ç®—é€†çŸ©é˜µ</p><p>çŸ©é˜µç®—æ³•å’ŒçŸ©é˜µæ±‚é€†</p><h5 id="2-3-å¯¹ç§°æ­£å®šçŸ©é˜µå’Œæœ€å°äºŒä¹˜é€¼è¿‘"><a href="#2-3-å¯¹ç§°æ­£å®šçŸ©é˜µå’Œæœ€å°äºŒä¹˜é€¼è¿‘" class="headerlink" title="2.3 å¯¹ç§°æ­£å®šçŸ©é˜µå’Œæœ€å°äºŒä¹˜é€¼è¿‘"></a>2.3 å¯¹ç§°æ­£å®šçŸ©é˜µå’Œæœ€å°äºŒä¹˜é€¼è¿‘</h5><h4 id="3-çº¿æ€§è§„åˆ’"><a href="#3-çº¿æ€§è§„åˆ’" class="headerlink" title="3 çº¿æ€§è§„åˆ’"></a>3 çº¿æ€§è§„åˆ’</h4><p>ä¸€ä¸ªæ”¿æ²»é—®é¢˜</p><p>ä¸€èˆ¬çº¿æ€§è§„åˆ’</p><p>çº¿æ€§è§„åˆ’ç»¼è¿°</p><p>å•çº¯å½¢æ³•</p><p>çº¿æ€§è§„åˆ’ç®—æ³•</p><h5 id="3-1-æ¾å¼›å‹å’Œæ ‡å‡†å‹"><a href="#3-1-æ¾å¼›å‹å’Œæ ‡å‡†å‹" class="headerlink" title="3.1 æ¾å¼›å‹å’Œæ ‡å‡†å‹"></a>3.1 æ¾å¼›å‹å’Œæ ‡å‡†å‹</h5><p>è½¬æ¢çº¿æ€§è§„åˆ’ä¸ºæ ‡å‡†å‹</p><p>è½¬æ¢çº¿æ€§è§„åˆ’ä¸ºæ¾å¼›å‹</p><h5 id="3-2-å°†é—®é¢˜è¡¨è¾¾ä¸ºçº¿æ€§è§„åˆ’"><a href="#3-2-å°†é—®é¢˜è¡¨è¾¾ä¸ºçº¿æ€§è§„åˆ’" class="headerlink" title="3.2 å°†é—®é¢˜è¡¨è¾¾ä¸ºçº¿æ€§è§„åˆ’"></a>3.2 å°†é—®é¢˜è¡¨è¾¾ä¸ºçº¿æ€§è§„åˆ’</h5><p>æœ€çŸ­è·¯å¾„</p><p>æœ€å¤§æµ</p><p>æœ€å°è´¹ç”¨æµ</p><p>å¤šå•†å“æµ</p><h5 id="3-3-å•çº¯å½¢ç®—æ³•"><a href="#3-3-å•çº¯å½¢ç®—æ³•" class="headerlink" title="3.3 å•çº¯å½¢ç®—æ³•"></a>3.3 å•çº¯å½¢ç®—æ³•</h5><h5 id="3-4-å¯¹å¶æ€§"><a href="#3-4-å¯¹å¶æ€§" class="headerlink" title="3.4 å¯¹å¶æ€§"></a>3.4 å¯¹å¶æ€§</h5><h5 id="3-5-åˆå§‹åŸºæœ¬å¯è¡Œè§£"><a href="#3-5-åˆå§‹åŸºæœ¬å¯è¡Œè§£" class="headerlink" title="3.5 åˆå§‹åŸºæœ¬å¯è¡Œè§£"></a>3.5 åˆå§‹åŸºæœ¬å¯è¡Œè§£</h5><h4 id="4-å¤šé¡¹å¼ä¸å¿«é€Ÿå‚…ç«‹å¶å˜åŒ–"><a href="#4-å¤šé¡¹å¼ä¸å¿«é€Ÿå‚…ç«‹å¶å˜åŒ–" class="headerlink" title="4 å¤šé¡¹å¼ä¸å¿«é€Ÿå‚…ç«‹å¶å˜åŒ–"></a>4 å¤šé¡¹å¼ä¸å¿«é€Ÿå‚…ç«‹å¶å˜åŒ–</h4><h5 id="4-1-å¤šé¡¹å¼çš„è¡¨ç¤º"><a href="#4-1-å¤šé¡¹å¼çš„è¡¨ç¤º" class="headerlink" title="4.1 å¤šé¡¹å¼çš„è¡¨ç¤º"></a>4.1 å¤šé¡¹å¼çš„è¡¨ç¤º</h5><p>ç³»æ•°è¡¨ç¤º</p><p>ç‚¹å€¼è¡¨ç¤º</p><p>ç³»æ•°å½¢å¼è¡¨ç¤ºçš„å¤šé¡¹å¼çš„å¿«é€Ÿä¹˜æ³•</p><h5 id="4-2-DFTä¸FFT"><a href="#4-2-DFTä¸FFT" class="headerlink" title="4.2 DFTä¸FFT"></a>4.2 DFTä¸FFT</h5><p>å•ä½å¤æ•°æ ¹</p><p>åœ¨å•ä½å¤æ•°æ ¹å¤„æ’å€¼</p><h5 id="4-3-é«˜æ•ˆFFTå®ç°"><a href="#4-3-é«˜æ•ˆFFTå®ç°" class="headerlink" title="4.3 é«˜æ•ˆFFTå®ç°"></a>4.3 é«˜æ•ˆFFTå®ç°</h5><p>FFTçš„ä¸€ç§è¿­ä»£å®ç°</p><p>å¹¶è¡ŒFFTç”µè·¯</p><h4 id="5-æ•°è®ºç®—æ³•"><a href="#5-æ•°è®ºç®—æ³•" class="headerlink" title="5 æ•°è®ºç®—æ³•"></a>5 æ•°è®ºç®—æ³•</h4><p>è¾“å…¥è§„æ¨¡ä¸ç®—æ•°è®¡ç®—çš„ä»£ä»·</p><h5 id="5-1-åŸºç¡€æ•°è®ºæ¦‚å¿µ"><a href="#5-1-åŸºç¡€æ•°è®ºæ¦‚å¿µ" class="headerlink" title="5.1 åŸºç¡€æ•°è®ºæ¦‚å¿µ"></a>5.1 åŸºç¡€æ•°è®ºæ¦‚å¿µ</h5><h5 id="5-2-æœ€å¤§å…¬çº¦æ•°"><a href="#5-2-æœ€å¤§å…¬çº¦æ•°" class="headerlink" title="5.2 æœ€å¤§å…¬çº¦æ•°"></a>5.2 æœ€å¤§å…¬çº¦æ•°</h5><p>æ¬§å‡ é‡Œå¾—ç®—æ³•</p><p>è¿è¡Œæ—¶é—´</p><h5 id="5-3-æ¨¡è¿ç®—"><a href="#5-3-æ¨¡è¿ç®—" class="headerlink" title="5.3 æ¨¡è¿ç®—"></a>5.3 æ¨¡è¿ç®—</h5><h5 id="5-4-æ±‚è§£æ¨¡çº¿æ€§æ–¹ç¨‹"><a href="#5-4-æ±‚è§£æ¨¡çº¿æ€§æ–¹ç¨‹" class="headerlink" title="5.4 æ±‚è§£æ¨¡çº¿æ€§æ–¹ç¨‹"></a>5.4 æ±‚è§£æ¨¡çº¿æ€§æ–¹ç¨‹</h5><h5 id="5-5-ä¸­å›½ä½™æ•°å®šç†"><a href="#5-5-ä¸­å›½ä½™æ•°å®šç†" class="headerlink" title="5.5 ä¸­å›½ä½™æ•°å®šç†"></a>5.5 ä¸­å›½ä½™æ•°å®šç†</h5><h5 id="5-6-å…ƒç´ çš„å¹‚"><a href="#5-6-å…ƒç´ çš„å¹‚" class="headerlink" title="5.6 å…ƒç´ çš„å¹‚"></a>5.6 å…ƒç´ çš„å¹‚</h5><h5 id="5-7-RSAå…¬é’¥åŠ å¯†ç³»ç»Ÿ"><a href="#5-7-RSAå…¬é’¥åŠ å¯†ç³»ç»Ÿ" class="headerlink" title="5.7 RSAå…¬é’¥åŠ å¯†ç³»ç»Ÿ"></a>5.7 RSAå…¬é’¥åŠ å¯†ç³»ç»Ÿ</h5><h5 id="5-8-ç´ æ•°çš„æµ‹è¯•"><a href="#5-8-ç´ æ•°çš„æµ‹è¯•" class="headerlink" title="5.8 ç´ æ•°çš„æµ‹è¯•"></a>5.8 ç´ æ•°çš„æµ‹è¯•</h5><p>ç´ æ•°çš„å¯†åº¦</p><p>ä¼ªç´ æ ‘æµ‹è¯•è¿‡ç¨‹</p><p>Miller-Rabinéšæœºæ€§ç´ æ ‘æµ‹è¯•æ–¹æ³•</p><h5 id="5-9-æ•´æ•°çš„å› å­åˆ†è§£"><a href="#5-9-æ•´æ•°çš„å› å­åˆ†è§£" class="headerlink" title="5.9 æ•´æ•°çš„å› å­åˆ†è§£"></a>5.9 æ•´æ•°çš„å› å­åˆ†è§£</h5><h4 id="6-å­—ç¬¦ä¸²åŒ¹é…"><a href="#6-å­—ç¬¦ä¸²åŒ¹é…" class="headerlink" title="6 å­—ç¬¦ä¸²åŒ¹é…"></a>6 å­—ç¬¦ä¸²åŒ¹é…</h4><h5 id="6-1-æœ´ç´ å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•"><a href="#6-1-æœ´ç´ å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•" class="headerlink" title="6.1 æœ´ç´ å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•"></a>6.1 æœ´ç´ å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•</h5><h5 id="6-2-Rabin-Karpç®—æ³•"><a href="#6-2-Rabin-Karpç®—æ³•" class="headerlink" title="6.2 Rabin-Karpç®—æ³•"></a>6.2 Rabin-Karpç®—æ³•</h5><h5 id="6-3-åˆ©ç”¨æœ‰é™è‡ªåŠ¨æœºè¿›è¡Œå­—ç¬¦ä¸²åŒ¹é…"><a href="#6-3-åˆ©ç”¨æœ‰é™è‡ªåŠ¨æœºè¿›è¡Œå­—ç¬¦ä¸²åŒ¹é…" class="headerlink" title="6.3 åˆ©ç”¨æœ‰é™è‡ªåŠ¨æœºè¿›è¡Œå­—ç¬¦ä¸²åŒ¹é…"></a>6.3 åˆ©ç”¨æœ‰é™è‡ªåŠ¨æœºè¿›è¡Œå­—ç¬¦ä¸²åŒ¹é…</h5><h5 id="6-4-Knuth-Morris-Prattç®—æ³•"><a href="#6-4-Knuth-Morris-Prattç®—æ³•" class="headerlink" title="6.4 Knuth-Morris-Prattç®—æ³•"></a>6.4 Knuth-Morris-Prattç®—æ³•</h5><p>å…³äºæ¨¡å¼çš„å‰ç¼€å‡½æ•°</p><p>è¿è¡Œæ—¶é—´åˆ†æ</p><p>å‰ç¼€å‡½æ•°è®¡ç®—çš„æ­£ç¡®æ€§</p><p>KMPç®—æ³•çš„æ­£ç¡®æ€§</p><h4 id="7-è®¡ç®—å‡ ä½•å­¦"><a href="#7-è®¡ç®—å‡ ä½•å­¦" class="headerlink" title="7 è®¡ç®—å‡ ä½•å­¦"></a>7 è®¡ç®—å‡ ä½•å­¦</h4><h5 id="7-1-çº¿æ®µçš„æ€§è´¨"><a href="#7-1-çº¿æ®µçš„æ€§è´¨" class="headerlink" title="7.1 çº¿æ®µçš„æ€§è´¨"></a>7.1 çº¿æ®µçš„æ€§è´¨</h5><p>å‰ç§¯ã€ç¡®å®šè¿ç»­çº¿æ®µæ˜¯å‘å·¦è½¬è¿˜æ˜¯å‘å³è½¬ã€åˆ¤å®šä¸¤æ¡çº¿æ®µæ˜¯å¦ç›¸äº¤</p><h5 id="7-2-ç¡®å®šä»»æ„ä¸€å¯¹çº¿æ®µæ˜¯å¦ç›¸äº¤"><a href="#7-2-ç¡®å®šä»»æ„ä¸€å¯¹çº¿æ®µæ˜¯å¦ç›¸äº¤" class="headerlink" title="7.2 ç¡®å®šä»»æ„ä¸€å¯¹çº¿æ®µæ˜¯å¦ç›¸äº¤"></a>7.2 ç¡®å®šä»»æ„ä¸€å¯¹çº¿æ®µæ˜¯å¦ç›¸äº¤</h5><p>çº¿æ®µæ’åº</p><p>ç§»åŠ¨æ‰«é™¤çº¿</p><h5 id="7-3-å¯»æ‰¾å‡¸åŒ…"><a href="#7-3-å¯»æ‰¾å‡¸åŒ…" class="headerlink" title="7.3 å¯»æ‰¾å‡¸åŒ…"></a>7.3 å¯»æ‰¾å‡¸åŒ…</h5><p>å¢é‡æ³•ã€åˆ†æ²»æ³•ã€å‰ªçº¸-æœç´¢æ³•</p><p>Grahamæ‰«ææ³•</p><h4 id="8-NPå®Œå…¨æ€§"><a href="#8-NPå®Œå…¨æ€§" class="headerlink" title="8 NPå®Œå…¨æ€§"></a>8 NPå®Œå…¨æ€§</h4><p>æœ€çŸ­ä¸æœ€é•¿è·¯å¾„</p><p>æ¬§æ‹‰å›è·¯ä¸å“ˆå¯†é¡¿åœˆ</p><p>2CNFå¯æ»¡è¶³æ€§é—®é¢˜ä¸3-CNFå¯æ»¡è¶³æ€§é—®é¢˜</p><p>NPå®Œå…¨æ€§ä¸Pç±»é—®é¢˜å’ŒNPç±»é—®é¢˜</p><p>è¯æ˜NPå®Œå…¨é—®é¢˜æ¦‚è¿°</p><p>åˆ¤å®šé—®é¢˜ä¸æœ€ä¼˜åŒ–é—®é¢˜</p><p>å½’çº¦</p><h5 id="8-1-å¤šé¡¹å¼æ—¶é—´"><a href="#8-1-å¤šé¡¹å¼æ—¶é—´" class="headerlink" title="8.1 å¤šé¡¹å¼æ—¶é—´"></a>8.1 å¤šé¡¹å¼æ—¶é—´</h5><p>æŠ½è±¡é—®é¢˜</p><p>ç¼–ç </p><p>å½¢å¼è¯­è¨€ä½“ç³»</p><h5 id="8-2-å¤šé¡¹å¼æ—¶é—´çš„éªŒè¯"><a href="#8-2-å¤šé¡¹å¼æ—¶é—´çš„éªŒè¯" class="headerlink" title="8.2 å¤šé¡¹å¼æ—¶é—´çš„éªŒè¯"></a>8.2 å¤šé¡¹å¼æ—¶é—´çš„éªŒè¯</h5><p>å“ˆå¯†é¡¿å›è·¯</p><p>éªŒè¯ç®—æ³•</p><p>å¤æ‚ç±»NP</p><h5 id="8-3-NPå®Œå…¨æ€§å’Œå¯å½’çº¦æ€§"><a href="#8-3-NPå®Œå…¨æ€§å’Œå¯å½’çº¦æ€§" class="headerlink" title="8.3 NPå®Œå…¨æ€§å’Œå¯å½’çº¦æ€§"></a>8.3 NPå®Œå…¨æ€§å’Œå¯å½’çº¦æ€§</h5><h5 id="8-4-NPå®Œå…¨æ€§çš„è¯æ˜"><a href="#8-4-NPå®Œå…¨æ€§çš„è¯æ˜" class="headerlink" title="8.4 NPå®Œå…¨æ€§çš„è¯æ˜"></a>8.4 NPå®Œå…¨æ€§çš„è¯æ˜</h5><h5 id="8-5-NPå®Œå…¨é—®é¢˜"><a href="#8-5-NPå®Œå…¨é—®é¢˜" class="headerlink" title="8.5 NPå®Œå…¨é—®é¢˜"></a>8.5 NPå®Œå…¨é—®é¢˜</h5><p>&#x3D;&#x3D;å›¢é—®é¢˜&#x3D;&#x3D;</p><p>&#x3D;&#x3D;é¡¶ç‚¹è¦†ç›–é—®é¢˜&#x3D;&#x3D;</p><p>&#x3D;&#x3D;å“ˆå¯†é¡¿å›è·¯é—®é¢˜&#x3D;&#x3D;</p><p>&#x3D;&#x3D;æ—…è¡Œå•†é—®é¢˜&#x3D;&#x3D;</p><p>&#x3D;&#x3D;å­é›†å’Œé—®é¢˜&#x3D;&#x3D;</p><h4 id="9-è¿‘ä¼¼ç®—æ³•"><a href="#9-è¿‘ä¼¼ç®—æ³•" class="headerlink" title="9 è¿‘ä¼¼ç®—æ³•"></a>9 è¿‘ä¼¼ç®—æ³•</h4><p>é¡¶ç‚¹è¦†ç›–é—®é¢˜</p><p>æ—…è¡Œå•†é—®é¢˜</p><p>éšæœºåŒ–å’Œçº¿æ€§è§„åˆ’</p><p>å­é›†å’Œé—®é¢˜</p>]]></content>
    
    
    <categories>
      
      <category>ç®—æ³•</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŒºå—é“¾</title>
    <link href="/blog/2022/09/01/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    <url>/blog/2022/09/01/%E5%8C%BA%E5%9D%97%E9%93%BE/</url>
    
    <content type="html"><![CDATA[<h2 id="åŒºå—é“¾"><a href="#åŒºå—é“¾" class="headerlink" title="åŒºå—é“¾"></a>åŒºå—é“¾</h2><p>è®¨è®ºï¼šé€Ÿåº¦æœ€æ…¢çš„æ•°æ®åº“ã€ä¸‹ä¸€ä»£ä»·å€¼äº’è”ç½‘</p><h3 id="1ã€æ¯”ç‰¹å¸ä¸­çš„å¯†ç å­¦åŸç†"><a href="#1ã€æ¯”ç‰¹å¸ä¸­çš„å¯†ç å­¦åŸç†" class="headerlink" title="1ã€æ¯”ç‰¹å¸ä¸­çš„å¯†ç å­¦åŸç†"></a>1ã€æ¯”ç‰¹å¸ä¸­çš„å¯†ç å­¦åŸç†</h3><p>æ¯”ç‰¹å¸åˆç§°åŠ å¯†è´§å¸ï¼Œç”¨åˆ°äº†å¯†ç å­¦ä¸Šçš„å“ˆå¸Œå’Œç­¾å</p><h4 id="å“ˆå¸Œ"><a href="#å“ˆå¸Œ" class="headerlink" title="å“ˆå¸Œ"></a>å“ˆå¸Œ</h4><p>å¯†ç å­¦ä¸Šçš„å“ˆå¸Œå‡½æ•°cryptographic hash functionä¸¤ä¸ªé‡è¦æ€§è´¨ï¼š</p><ul><li>collision resistanceï¼Œä¸¤ä¸ªä¸åŒçš„è¾“å…¥ç®—å‡ºæ¥çš„å“ˆå¸Œå€¼ç›¸ç­‰ï¼Œç§°ä¸ºå“ˆå¸Œç¢°æ’ï¼Œå“ˆå¸Œç¢°æ’æ— æ³•é¿å…ï¼Œè¿™é‡Œæ˜¯æŒ‡æ²¡æœ‰é«˜æ•ˆçš„æ–¹æ³•äººä¸ºåˆ¶é€ å“ˆå¸Œç¢°æ’ã€‚<ul><li>MD5æ›¾ç»æ˜¯å¾ˆæµè¡Œçš„å“ˆå¸Œå‡½æ•°ï¼Œä½†ç°åœ¨å·²ç»çŸ¥é“å¦‚ä½•äººä¸ºåˆ¶é€ å“ˆå¸Œç¢°æ’äº†ã€‚</li></ul></li><li>hidingï¼šå“ˆå¸Œå‡½æ•°çš„è®¡ç®—è¿‡ç¨‹æ˜¯å•å‘çš„ï¼Œä¸å¯é€†çš„ã€‚æ— æ³•é€šè¿‡å“ˆå¸Œå€¼åæ¨è¾“å…¥çš„å†…å®¹ï¼Œå“ˆå¸Œå€¼æ²¡æœ‰æ³„éœ²è¾“å…¥çš„ä¿¡æ¯ã€‚</li><li>äºŒè€…ç»“åˆåœ¨ä¸€èµ·ï¼Œå¯ä»¥å®ç°ï¼šdigital commitment&#x2F;digital equivalent of a sealed envelopeï¼Œä½†è¦æ³¨æ„ï¼Œéœ€è¦è¾“å…¥ç©ºé—´è¶³å¤Ÿå¤§ã€è¾“å…¥åˆ†å¸ƒè¦å°½é‡å‡åŒ€ã€‚è¾“å…¥ç©ºé—´ä¸å¤Ÿå¤§æ—¶ï¼Œå¯ä»¥ç»™è¾“å…¥å€¼åé¢æ‹¼æ¥éšæœºæ•°å†ä¸€èµ·å–hashï¼Œä»¥ä¿è¯è¾“å…¥éšæœºä¸”åˆ†å¸ƒå‡åŒ€ã€‚</li><li>æ¯”ç‰¹å¸ä¸­ç”¨åˆ°çš„å“ˆå¸Œå‡½æ•°è¿˜è¦æ±‚ç¬¬ä¸‰ä¸ªæ€§è´¨ï¼špuzzle friendlyã€‚<ul><li>æŒ–çŸ¿ï¼šå¯»æ‰¾éšæœºæ•°nonceï¼Œæ‹¼æ¥åˆ°block headerï¼Œä½¿å¾—$H(\text {block header}) \le target$ï¼Œéœ€è¦å¤§é‡çš„è®¡ç®—ï¼ŒæŒ–çŸ¿å¾ˆéš¾ã€éªŒè¯å¾ˆå®¹æ˜“ï¼ˆdifficult to solve, but easy to verifyï¼‰ã€‚</li></ul></li></ul><p>æ¯”ç‰¹å¸ä¸­çš„å“ˆå¸Œå‡½æ•°å«åš<code>SHA-256</code>ã€‚</p><h4 id="ç­¾å"><a href="#ç­¾å" class="headerlink" title="ç­¾å"></a>ç­¾å</h4><p>å¼€è´¦æˆ·ï¼šåœ¨æœ¬åœ°åˆ›ç«‹ä¸€ä¸ªå…¬é’¥å’Œç§é’¥çš„å¯¹ï¼ˆpublic key, private key)ï¼Œè¿™å°±ä»£è¡¨äº†ä¸€ä¸ªæ¯”ç‰¹å¸çš„è´¦æˆ·ï¼Œå…¬ç§é’¥çš„æ¦‚å¿µæ¥è‡ªéå¯¹ç§°çš„åŠ å¯†ä½“ç³»ï¼ˆasymmetric encryption algorithmï¼‰</p><ul><li>å¯¹ç§°åŠ å¯†ä½“ç³»éœ€è¦å®‰å…¨çš„ç½‘ç»œç¯å¢ƒï¼Œä¸èƒ½ä»¥æ˜æ–‡å½¢å¼åœ¨ç½‘ç»œä¸Šä¼ è¾“ï¼Œå¯†é’¥çš„åˆ†å‘ä¸æ˜¯å¾ˆæ–¹ä¾¿ã€‚</li><li>éå¯¹ç§°åŠ å¯†ä½“ç³»ï¼šåŠ å¯†ç”¨å…¬é’¥ã€è§£å¯†ç”¨ç§é’¥ï¼Œå…¬é’¥å¯ä»¥å…¬å¼€ã€‚</li></ul><p>æ¯”ç‰¹å¸ç³»ç»Ÿæ˜¯ä¸åŠ å¯†çš„ï¼Œä¿¡æ¯éƒ½æ˜¯å…¬å¼€çš„ï¼Œå…¬ç§é’¥çš„ä½œç”¨ä¸»è¦å°±æ˜¯ç­¾åï¼Œ å‘èµ·äº¤æ˜“æ—¶ç”¨è‡ªå·±çš„ç§é’¥ç­¾åï¼Œå…¶ä»–äººç”¨å…¬é’¥éªŒè¯ï¼Œè¯æ˜äº¤æ˜“æ¥è‡ªæœ¬äººã€‚</p><p>ç”Ÿæˆå…¬ç§é’¥çš„è¿‡ç¨‹è¦æ˜¯éšæœºçš„ï¼Œæ¯”ç‰¹å¸ä¸­æ¯ä¸€æ¬¡ç­¾åæ—¶ä¹Ÿè¦æœ‰å¥½çš„éšæœºæºï¼Œä¸€æ¬¡éšæœºæºä¸å¥½å°±æœ‰å¯èƒ½æ³„éœ²ç§é’¥ã€‚</p><h3 id="2ã€æ¯”ç‰¹å¸çš„æ•°æ®ç»“æ„"><a href="#2ã€æ¯”ç‰¹å¸çš„æ•°æ®ç»“æ„" class="headerlink" title="2ã€æ¯”ç‰¹å¸çš„æ•°æ®ç»“æ„"></a>2ã€æ¯”ç‰¹å¸çš„æ•°æ®ç»“æ„</h3><p>å“ˆå¸ŒæŒ‡é’ˆï¼ˆhash pointersï¼‰ï¼šå­˜åœ°å€+hashå€¼ã€‚ï¼ˆæ‰¾åˆ°ä½ç½®ï¼Œæ£€æµ‹æ˜¯å¦æœ‰è¢«ç¯¡æ”¹ï¼‰</p><p><strong>åŒºå—é“¾ï¼š</strong></p><p><img src="https://raw.githubusercontent.com/Yoonalis/img/master/%E6%9C%AA%E5%91%BD%E5%90%8D%E6%96%87%E4%BB%B6.jpg" alt="åŒºå—é“¾çš„æ•°æ®ç»“æ„"></p><p>å–hashæ—¶ï¼Œæ˜¯å°†å‰ä¸€ä¸ªåŒºå—çš„å†…å®¹ï¼ˆåŒ…æ‹¬ä¿å­˜çš„hashå€¼ï¼‰ä¸€èµ·å–hashï¼Œé€šè¿‡è¿™ä¸ªæ•°æ®ç»“æ„å¯ä»¥å®ç°tamper-evident logï¼šåªè¦è®°ä½ç³»ç»Ÿé‡Œä¿å­˜çš„æœ€åä¸€ä¸ªhashå€¼ï¼Œå°±å¯ä»¥æ£€æµ‹å‡ºå¯¹åŒºå—é“¾ä»»ä½•éƒ¨ä½çš„ä¿®æ”¹ã€‚</p><p><strong>Merkle treeï¼š</strong></p><p><img src="https://raw.githubusercontent.com/Yoonalis/img/master/%E6%9C%AA%E5%91%BD%E5%90%8D%E6%96%87%E4%BB%B6%20(1).jpg" alt="merkle tree"></p><p>ç”¨hashæŒ‡é’ˆä»£æ›¿äº†æ™®é€šçš„æŒ‡é’ˆã€‚è®°ä½æ ¹hashå€¼ï¼Œå°±èƒ½æ£€æµ‹å‡ºå¯¹æ•°ä¸­ä»»ä½•èŠ‚ç‚¹çš„ä¿®æ”¹ï¼Œæ•ˆç‡æ›´é«˜ã€‚æ¯ä¸ªåŒºå—åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šå—å¤´å’Œå—èº«ã€‚</p><ul><li>block headerï¼šä»…å­˜å‚¨è¿™ä¸ªåŒºå—æ‰€åŒ…å«çš„æ‰€æœ‰äº¤æ˜“ç»„æˆçš„merkle treeç»„æˆçš„æ ¹hashå€¼ã€‚</li><li>block bodyï¼šæœ‰äº¤æ˜“åˆ—è¡¨ã€‚</li></ul><p>Merkle treeçš„ç”¨é€”ï¼š</p><ul><li><p>æä¾›merkle proofï¼šä»éœ€éªŒè¯çš„äº¤æ˜“å¾€ä¸Šæ‰¾åˆ°æ ¹èŠ‚ç‚¹ï¼Œè¿™ä¸ªè·¯å¾„ä¸Šçš„èŠ‚ç‚¹å°±æ˜¯merkle proofï¼Œä»ä¸‹å¾€ä¸ŠéªŒè¯ï¼Œæ²¿é€”çš„è¿™äº›hashå€¼éƒ½æ˜¯æ­£ç¡®çš„å°±è¡Œäº†ã€‚</p><p><img src="https://raw.githubusercontent.com/Yoonalis/img/master/e65b588da577865af9a1ad6b7339f89.png" alt="merkle proof"></p></li><li><p>proof of membership&#x2F;proof of inclusionï¼š$O(log(n))$</p></li><li><p>proof of non-membershipï¼š$O(n)$</p></li><li><p>Sorted merkle treeï¼šå¯¹hashå€¼æ’åº</p></li></ul><blockquote><p>hashæŒ‡é’ˆä¸é€‚ç”¨äºæœ‰ç¯çš„æƒ…å†µï¼Œä¼šå‡ºç°æ•°æ®ç›¸äº’ä¾èµ–ä»è€Œæ²¡æœ‰ä¸€ä¸ªåŒºå—çš„æ•°æ®èƒ½å®šä¸‹æ¥ã€‚</p></blockquote><h3 id="3ã€æ¯”ç‰¹å¸åè®®"><a href="#3ã€æ¯”ç‰¹å¸åè®®" class="headerlink" title="3ã€æ¯”ç‰¹å¸åè®®"></a>3ã€æ¯”ç‰¹å¸åè®®</h3><p>ä½¿ç”¨å…¬ç§é’¥å‘è¡Œè´§å¸ï¼šdouble spending attack</p><p>ä½¿ç”¨ç¼–å·ï¼Œæ¯æ¬¡ä½¿ç”¨è´§å¸å‘å¤®è¡ŒéªŒè¯å½’å±ï¼šå¤®è¡Œè¶…è´Ÿè·ï¼ˆä¸­å¿ƒåŒ–æ–¹æ¡ˆï¼‰</p><p>å°†å¤®è¡Œçš„èŒèƒ½æ”¹ä¸ºç”±ç”¨æˆ·å…±åŒæ‰¿æ‹…ï¼ˆå»ä¸­å¿ƒåŒ–æ–¹æ¡ˆï¼‰</p><p><img src="https://raw.githubusercontent.com/Yoonalis/img/master/%E6%9C%AA%E5%91%BD%E5%90%8D%E6%96%87%E4%BB%B6%20(3).jpg" alt="æœªå‘½åæ–‡ä»¶ (3)"></p><p>æ¯”ç‰¹å¸ç³»ç»Ÿä¸­æ¯ä¸ªäº¤æ˜“éƒ½åŒ…å«äº†è¾“å…¥å’Œè¾“å‡ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œè¾“å…¥éƒ¨åˆ†è¦ç»™å‡ºå¸çš„æ¥æºï¼Œè¾“å‡ºéƒ¨åˆ†è¦ç»™å‡ºæ”¶æ¬¾äººå…¬é’¥çš„hashã€‚</p><p>ä»˜æ¬¾äººçš„å…¬é’¥æ˜¯ä»˜æ¬¾äººäº¤æ˜“æ—¶ç»™å‡ºï¼Œä½†å¯èƒ½ä¸ºä¼ªé€ ï¼Œä¸ºäº†éªŒè¯äº¤æ˜“çœŸå®ï¼Œä½¿ç”¨ä»˜æ¬¾äººç»™å‡ºçš„å…¬é’¥å’Œå¸çš„æ¥æºæ—¶çš„å…¬é’¥æ ¸å¯¹ã€‚ï¼ˆæœ‰å€Ÿå¿…æœ‰è´·ã€å€Ÿè´·å¿…ç›¸ç­‰ï¼‰</p><ul><li><p>block headerï¼šä¿å­˜å®è§‚ä¿¡æ¯</p><ul><li>version ä½¿ç”¨æ¯”ç‰¹å¸å“ªä¸ªç‰ˆæœ¬çš„åè®®</li><li>hash of previous block header åŒºå—é“¾ä¸­æŒ‡å‘å‰ä¸€ä¸ªåŒºå—çš„æŒ‡é’ˆ</li><li>Merkle root hash merkle treeçš„æ ¹hashå€¼</li><li>target æŒ–çŸ¿çš„éš¾åº¦ç›®æ ‡é˜ˆå€¼</li><li>nonce éšæœºæ•°</li></ul></li><li><p>block bodyï¼šä¿å­˜äº¤æ˜“æ•°æ®</p><ul><li>transaction list äº¤æ˜“åˆ—è¡¨</li></ul></li></ul><p>ç³»ç»Ÿä¸­çš„èŠ‚ç‚¹åˆ†ä¸ºå…¨èŠ‚ç‚¹(full node)å’Œè½»èŠ‚ç‚¹(light node)ï¼Œå…¨èŠ‚ç‚¹ä¿å­˜åŒºå—é“¾çš„æ‰€æœ‰ä¿¡æ¯ï¼ŒéªŒè¯æ¯ä¸€ä¸ªäº¤æ˜“ï¼Œä¹Ÿå«fully validating nodeï¼Œè½»èŠ‚ç‚¹åªä¿å­˜block headerï¼Œä¸€èˆ¬æ¥è¯´ï¼Œè½»èŠ‚ç‚¹æ— æ³•ç‹¬ç«‹éªŒè¯äº¤æ˜“çš„åˆæ³•æ€§ã€‚ç³»ç»Ÿä¸­å¤§éƒ¨åˆ†èŠ‚ç‚¹æ˜¯è½»èŠ‚ç‚¹ï¼Œä¸å‚ä¸åŒºå—é“¾çš„æ„é€ å’Œç»´æŠ¤ï¼Œåªæ˜¯åˆ©ç”¨åŒºå—é“¾çš„ä¿¡æ¯åšæŸ¥è¯¢ç­‰ã€‚</p><p>è´¦æœ¬çš„å†…å®¹è¦å–å¾—åˆ†å¸ƒå¼çš„å…±è¯† distributed consensusï¼šç³»ç»Ÿé‡Œæœ‰å¾ˆå¤šå°æœºå™¨ï¼Œå…±åŒç»´æŠ¤ä¸€ä¸ªå…¨å±€çš„hashè¡¨ï¼ˆdistributed hash tableï¼‰ã€‚</p><p>åˆ†å¸ƒå¼ç³»ç»Ÿæœ‰å¾ˆå¤šä¸å¯èƒ½ç»“è®ºï¼Œä¾‹FLP impossibility resultï¼šåœ¨ä¸€ä¸ªå¼‚æ­¥(asynchronous)çš„ç³»ç»Ÿé‡Œ(ç½‘ç»œä¼ è¾“æ—¶å»¶æ²¡æœ‰ä¸Šé™)ï¼Œé‚£ä¹ˆå³ä½¿åªæœ‰ä¸€ä¸ªæˆå‘˜æ˜¯æœ‰é—®é¢˜çš„(faulty)ï¼Œé‚£ä¹ˆä¹Ÿä¸å¯èƒ½å–å¾—å…±è¯†ã€‚</p><p>CAP Theoremï¼šä¸€è‡´æ€§(Consistency)ã€å¯ç”¨æ€§(Availability)ã€åˆ†åŒºå®¹é”™æ€§(Partition tolerance)ï¼Œè¿™ä¸‰ä¸ªæ€§è´¨ä¸­æœ€å¤šåªèƒ½æ»¡è¶³ä¸¤ä¸ªï¼Œä¸å¯èƒ½ä¸‰ä¸ªéƒ½æ»¡è¶³ã€‚</p><p>åˆ†å¸ƒå¼å…±è¯†çš„ä¸€ä¸ªé‡è¦åè®®ï¼šPaxos(ç¡®ä¿ä¸€è‡´æ€§)</p><p>æ¯”ç‰¹å¸ä¸­çš„å…±è¯†åè®®ï¼šæœ‰äº›èŠ‚ç‚¹å¯èƒ½æ˜¯æœ‰æ¶æ„çš„ï¼Œå‡è®¾ç³»ç»Ÿä¸­å¤§å¤šæ•°èŠ‚ç‚¹æ˜¯å¥½çš„ã€‚</p><ul><li><p>ä½¿ç”¨æŠ•ç¥¨ï¼šéœ€è¦å…ˆç¡®å®šè°æœ‰æŠ•ç¥¨æƒ(membership)ï¼Œä¾‹å¦‚è”ç›Ÿé“¾(hyperledger fabric)ï¼Œåªæœ‰æŸäº›ç¬¦åˆæ¡ä»¶çš„å¤§å…¬å¸æ‰å¯ä»¥åŠ å…¥ï¼Œæ­¤æ—¶åŸºäºæŠ•ç¥¨çš„æ–¹æ¡ˆæ˜¯å¯è¡Œçš„ã€‚ä½†æ¯”ç‰¹å¸äº§ç”Ÿè´¦æˆ·æ˜¯å¾ˆå®¹æ˜“çš„ï¼Œä¸éœ€è¦æ‰¹å‡†ï¼Œåªæœ‰è·Ÿå¤–éƒ¨å‘ç”Ÿäº¤æ˜“æ—¶æ‰çŸ¥é“æœ‰è¿™ä¸ªè´¦æˆ·å­˜åœ¨ï¼Œå¯èƒ½å—åˆ°å¥³å·«æ”»å‡»(sybil attack)ã€‚</p></li><li><p>æ¯”ç‰¹å¸ä¸­çš„è§£å†³æ–¹æ¡ˆï¼šç”¨è®¡ç®—åŠ›æ¥æŠ•ç¥¨ã€‚</p><ul><li><p>æ¯ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥åœ¨æœ¬åœ°ç»„è£…å‡ºä¸€ä¸ªå€™é€‰åŒºå—ï¼ŒæŠŠä»–è®¤ä¸ºåˆæ³•çš„äº¤æ˜“æ”¾åœ¨åŒºå—é‡Œï¼Œç„¶åå°è¯•å„ç§nonceå€¼(4 bytes)ï¼Œçœ‹å“ªä¸€ä¸ªèƒ½æ»¡è¶³ä¸ç­‰å¼è¦æ±‚ï¼Œæ±‚å‡ºhashè½åœ¨æŒ‡å®šèŒƒå›´å†…ï¼Œå¦‚æœæŸä¸ªèŠ‚ç‚¹æ‰¾åˆ°äº†ç¬¦åˆè¦æ±‚çš„nonceï¼Œå°±è·å¾—äº†è®°è´¦æƒï¼Œä¹Ÿå³å¾€æ¯”ç‰¹å¸è¿™ä¸ªå»ä¸­å¿ƒåŒ–çš„ç³»ç»Ÿé‡Œå†™å…¥ä¸‹ä¸€ä¸ªåŒºå—çš„æƒåŠ›ï¼Œåªæœ‰æ‰¾åˆ°nonceï¼Œè·å¾—è®°è´¦æƒçš„èŠ‚ç‚¹æ‰æœ‰èµ„æ ¼å‘å¸ƒä¸‹ä¸€ä¸ªåŒºå—ã€‚</p></li><li><p>å…¶ä»–èŠ‚ç‚¹æ”¶åˆ°è¿™ä¸ªåŒºå—åï¼Œè¦éªŒè¯è¿™ä¸ªåŒºå—çš„åˆæ³•æ€§(éªŒè¯block headerçš„å†…å®¹æ˜¯å¦æ­£ç¡®ï¼›ç›®æ ‡é˜ˆå€¼çš„ç¼–ç â€”â€”nBitsåŸŸï¼Œæ£€æŸ¥nBitsåŸŸæ˜¯å¦ç¬¦åˆæ¯”ç‰¹å¸åè®®ä¸­è§„å®šçš„éš¾åº¦è¦æ±‚ï¼›æ£€æŸ¥nonceæ˜¯å¦ä½¿$H(\text {block header}) \le target$æˆç«‹)ï¼Œå‡è®¾éƒ½ç¬¦åˆè¦æ±‚ï¼Œç„¶åçœ‹block bodyé‡Œçš„äº¤æ˜“åˆ—è¡¨ï¼ŒéªŒè¯æ¯ä¸ªäº¤æ˜“éƒ½æ˜¯åˆæ³•çš„(è¦æœ‰åˆæ³•çš„ç­¾åï¼›ä»¥å‰æ²¡æœ‰è¢«èŠ±è¿‡)ï¼Œå¦‚æœæœ‰ä»»ä½•ä¸€ä¸ªä¸ç¬¦åˆè¦æ±‚ï¼Œé‚£ä¹ˆè¿™ä¸ªåŒºå—æ˜¯ä¸èƒ½è¢«æ¥æ”¶çš„ï¼Œè¦è¢«æ”¾å¼ƒæ‰ã€‚</p></li><li><p>æœ€é•¿åˆæ³•é“¾ longest vaild chainï¼šå‡è®¾æœ‰ä¸€ä¸ªåŒºå—ç»è¿‡æ£€æŸ¥ï¼Œéƒ½æ˜¯ç¬¦åˆè¦æ±‚çš„ï¼Œä½†å¦‚æœä¸åœ¨æœ€é•¿é“¾ä¸Šï¼Œä¹Ÿæœ‰å¯èƒ½ä¸è¢«æ¥æ”¶ã€‚æ¯”ç‰¹å¸åè®®ä¸­è§„å®šï¼šæ¥å—çš„åŒºå—åº”è¯¥æ˜¯åœ¨æ‰©å±•æœ€é•¿åˆæ³•é“¾ã€‚ï¼ˆåˆ†å‰æ”»å‡»çš„ä¾‹å­forking attackï¼šé€šè¿‡å¾€ä¸­é—´æ’å…¥åŒºå—ï¼Œæ¥å›æ»šå·²ç»å‘ç”Ÿäº†çš„äº¤æ˜“ï¼‰</p><ul><li>å¦‚æœä¸¤ä¸ªèŠ‚ç‚¹åœ¨å·®ä¸å¤šåŒä¸€ä¸ªæ—¶é—´æ‰¾åˆ°äº†ç¬¦åˆè¦æ±‚çš„nonceï¼Œéƒ½å¯ä»¥å‘å¸ƒåŒºå—ï¼Œè¿™æ—¶å€™ä¼šå‡ºç°ä¸¤ä¸ªç­‰é•¿çš„åˆ†å‰ï¼ŒæŒ‰æœ€é•¿åˆæ³•é“¾åŸåˆ™ï¼Œè¿™ä¸¤ä¸ªéƒ½æ˜¯åˆæ³•çš„ã€‚</li><li>æ¯”ç‰¹å¸ä¸­ï¼Œç¼ºçœæƒ…å†µä¸‹ï¼Œæ¯ä¸ªèŠ‚ç‚¹æ˜¯æ¥æ”¶å®ƒæœ€æ—©æ”¶åˆ°çš„é‚£ä¸ªã€‚</li><li>ç­‰é•¿çš„ä¸´æ—¶æ€§çš„åˆ†å‰å¯èƒ½ä¼šç»´æŒä¸€æ®µæ—¶é—´ï¼Œç›´åˆ°æœ€åæœ‰æŸä¸ªåŒºå—æ˜¯èƒœå‡ºçš„ï¼Œä¹Ÿå³æ²¿ç€è¿™ä¸ªåŒºå—å¾€ä¸‹æ‰©å±•ï¼Œå…¶ä»–åˆ†æ”¯åˆè¢«ç§°ä¸ºorphan blockã€‚</li></ul></li><li><p>è·å¾—è®°è´¦æƒçš„èŠ‚ç‚¹æœ¬èº«æœ‰ä¸€å®šæƒåˆ©ï¼Œå¯ä»¥å†³å®šå“ªäº›äº¤æ˜“è¢«å†™åˆ°ä¸‹ä¸ªåŒºå—é‡Œï¼Œä½†æ˜¯è®¾è®¡åè®®æ—¶ä¸åº”è¯¥è®©è¿™ä¸ªæˆä¸ºäº‰å¤ºè®°è´¦æƒçš„ä¸»è¦åŠ¨åŠ›ï¼Œå› ä¸ºå‡¡æ˜¯åˆæ³•çš„äº¤æ˜“ï¼Œéƒ½åº”è¯¥èƒ½è¢«å†™åˆ°åŒºå—é“¾é‡Œã€‚</p><ul><li><p>å‡ºå—å¥–åŠ± block reward æ¯”ç‰¹å¸åè®®ä¸­è§„å®šï¼Œè·å¾—è®°è´¦æƒçš„èŠ‚ç‚¹åœ¨å‘å¸ƒçš„åŒºå—é‡Œï¼Œå¯ä»¥æœ‰ä¸€ä¸ªç‰¹æ®Šçš„äº¤æ˜“ï¼Œå³é“¸å¸äº¤æ˜“ï¼Œåœ¨è¿™ä¸ªäº¤æ˜“é‡Œå¯ä»¥å‘å¸ƒä¸€å®šæ•°é‡çš„æ¯”ç‰¹å¸ã€‚</p></li><li><p>coinbase transaction æ˜¯æ¯”ç‰¹å¸ç³»ç»Ÿä¸­å‘è¡Œæ–°æ¯”ç‰¹å¸çš„å”¯ä¸€æ–¹æ³•ï¼Œå…¶ä»–æ‰€æœ‰çš„äº¤æ˜“éƒ½åªæ˜¯æŠŠå·²æœ‰çš„æ¯”ç‰¹å¸æŠŠä¸€ä¸ªè´¦æˆ·è½¬ç§»åˆ°å¦ä¸€ä¸ªè´¦æˆ·ï¼ŒåŒ…æ‹¬ç”¨æ³•å¸è´­ä¹°æ¯”ç‰¹å¸ï¼Œä¹Ÿæ²¡æœ‰äº§ç”Ÿæ–°çš„æ¯”ç‰¹å¸ã€‚</p></li><li><p>æ¯”ç‰¹å¸åˆšä¸Šçº¿æ—¶ï¼Œæ¯ä¸€ä¸ªå‘å¸ƒçš„åŒºå—å¯ä»¥äº§ç”Ÿ50BTCï¼Œ21ä¸‡ä¸ªåŒºå—ä¹‹åï¼Œè¿™ä¸ªå‡ºå—å¥–åŠ±å°±è¦å‡åŠï¼Œå³25BTCï¼Œå†è¿‡21ä¸‡ä¸ªåŒºå—ï¼Œå†æ¬¡å‡åŠï¼Œå³12.5BTCã€‚</p><blockquote><p>21ä¸‡ä¸ªåŒºå—å¹³å‡æ˜¯4å¹´ï¼Œæ¯éš”4å¹´å‡ºå—å¥–åŠ±å‡åŠã€‚</p></blockquote></li></ul></li></ul></li></ul><p>ä»¥ä¸Šå³æ˜¯æ¯”ç‰¹å¸é‡Œçš„å…±è¯†æœºåˆ¶ã€‚</p><h3 id="4ã€æ¯”ç‰¹å¸ç³»ç»Ÿçš„å®ç°"><a href="#4ã€æ¯”ç‰¹å¸ç³»ç»Ÿçš„å®ç°" class="headerlink" title="4ã€æ¯”ç‰¹å¸ç³»ç»Ÿçš„å®ç°"></a>4ã€æ¯”ç‰¹å¸ç³»ç»Ÿçš„å®ç°</h3><p>æ¯”ç‰¹å¸é‡‡å–åŸºäºäº¤æ˜“çš„è´¦æœ¬æ¨¡å¼ transaction-based ledgerï¼Œæ¯ä¸ªåŒºå—é‡Œè®°å½•çš„æ˜¯äº¤æ˜“ä¿¡æ¯ï¼Œæœ‰è½¬è´¦äº¤æ˜“ã€æœ‰é“¸å¸äº¤æ˜“ï¼Œä½†æ˜¯ç³»ç»Ÿä¸­æ²¡æœ‰æ˜¾å¼çš„è®°å½•æ¯ä¸ªè´¦æˆ·æœ‰å¤šå°‘é’±ï¼Œéœ€è¦ç»è¿‡äº¤æ˜“è®°å½•æ¥æ¨ç®—ã€‚</p><p>æ¯”ç‰¹å¸ä¸­çš„å…¨èŠ‚ç‚¹è¦ç»´æŠ¤ä¸€ä¸ªUTXOçš„æ•°æ®ç»“æ„(Unspent Transaction Output)â€”â€”è¿˜æ²¡æœ‰è¢«èŠ±å‡ºå»çš„äº¤æ˜“çš„è¾“å‡ºç»„æˆçš„é›†åˆã€‚ä¸€ä¸ªäº¤æ˜“å¯èƒ½æœ‰å¤šä¸ªè¾“å‡ºï¼ŒUtxoä¸­çš„æ¯ä¸ªå…ƒç´ è¦ç»™å‡ºäº§ç”Ÿè¿™ä¸ªè¾“å‡ºçš„äº¤æ˜“çš„hashå€¼ï¼Œä»¥åŠå®ƒåœ¨è¿™ä¸ªäº¤æ˜“é‡Œæ˜¯ç¬¬å‡ ä¸ªè¾“å‡ºã€‚æ–°å‘èµ·çš„äº¤æ˜“æ˜¯å¦åˆæ³•ï¼Œè¦æŸ¥è¯¢Utxoï¼Œåªæœ‰åœ¨è¿™ä¸ªé›†åˆé‡Œæ‰æ˜¯åˆæ³•çš„ï¼Œç»´æŠ¤Utxoä»¥ä¾¿å¿«é€Ÿæ£€æµ‹double spendingã€‚</p><p>æ¯ä¸ªäº¤æ˜“å¯ä»¥æœ‰å¤šä¸ªè¾“å…¥ï¼Œä¹Ÿå¯ä»¥æœ‰å¤šä¸ªè¾“å‡ºï¼Œæ‰€æœ‰è¾“å…¥çš„é‡‘é¢åŠ èµ·æ¥è¦ç­‰äºè¾“å‡ºçš„é‡‘é¢ã€‚</p><blockquote><p> æœ‰æ—¶å¯èƒ½ä¸ç­‰ï¼Œæ¶‰åŠåˆ°æ¯”ç‰¹å¸ç³»ç»Ÿçš„ç¬¬äºŒä¸ªæ¿€åŠ±æœºåˆ¶ï¼štransaction fee</p></blockquote><p>ä»¥å¤ªåŠé‡‡å–åŸºäºè´¦æˆ·çš„æ¨¡å¼ account_based ledgerï¼Œè¿™ä¸ªæ¨¡å¼ä¹‹ä¸­ï¼Œç³»ç»Ÿè¦æ˜¾å¼çš„è®°å½•æ¯ä¸ªè´¦æˆ·ä¸Šæœ‰å¤šå°‘ä¸ªå¸ã€‚</p><p><img src="https://raw.githubusercontent.com/Yoonalis/img/master/e905bb6edc2ab35cd4c40a7b8616245.png" alt="e905bb6edc2ab35cd4c40a7b8616245"></p><p><img src="https://raw.githubusercontent.com/Yoonalis/img/master/62f9439c6b117abb1d982f4a890709a.png" alt="62f9439c6b117abb1d982f4a890709a"></p><blockquote><p>æ±‚hashæ—¶åªç”¨åˆ°äº†block headerçš„å†…å®¹ï¼Œblock headeré‡Œæœ‰merkle treeçš„æ ¹hashå€¼ï¼Œè¿™å·²ç»èƒ½ä¿è¯æ•´ä¸ªåŒºå—é‡Œçš„äº¤æ˜“æ˜¯ä¸èƒ½è¢«ç¯¡æ”¹çš„ã€‚</p></blockquote><h4 id="æŒ–çŸ¿è¿‡ç¨‹çš„æ¦‚ç‡åˆ†æ"><a href="#æŒ–çŸ¿è¿‡ç¨‹çš„æ¦‚ç‡åˆ†æ" class="headerlink" title="æŒ–çŸ¿è¿‡ç¨‹çš„æ¦‚ç‡åˆ†æ"></a>æŒ–çŸ¿è¿‡ç¨‹çš„æ¦‚ç‡åˆ†æ</h4><p>æŒ–çŸ¿å³ä¸æ–­å°è¯•nonceï¼Œæ±‚è§£puzzleï¼Œæ¯æ¬¡å°è¯•nonceå¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªä¼¯åŠªåˆ©å®éªŒBernoulli trialï¼ˆa random experiment with binary outcomeï¼‰ï¼Œå¤§é‡å°è¯•è¿™ä¸ªè¿‡ç¨‹ï¼Œæ„æˆäº†ä¸€ä¸ªBernoulli processï¼ˆa sequence of independent Bernoulli trialsï¼‰ï¼Œå…·æœ‰æ— è®°å¿†æ€§ï¼ˆmemorylessï¼‰ã€‚</p><p>æ¯æ¬¡å°è¯•nonceï¼ŒæˆåŠŸçš„å¯èƒ½æ€§å¾ˆå°ï¼Œéœ€è¦å°è¯•å¤§é‡çš„nonceï¼Œæ‰æœ‰å¯èƒ½æ‰¾åˆ°ç¬¦åˆè¦æ±‚çš„ï¼Œè¿™ä¸ªæƒ…å†µä¸‹ï¼ŒBernoulli processå¯ä»¥ç”¨Poisson processæ¥è¿‘ä¼¼ï¼ˆå®éªŒçš„æ¬¡æ•°å¾ˆå¤šï¼Œæ¯æ¬¡å®éªŒæˆåŠŸçš„æ¦‚ç‡å¾ˆå°ï¼‰ã€‚</p><p>å‡ºå—æ—¶é—´æœä»æŒ‡æ•°åˆ†å¸ƒï¼ˆexponential distributionï¼‰ï¼Œæ•´ä¸ªç³»ç»Ÿçš„å¹³å‡å‡ºå—æ—¶é—´æ˜¯10minï¼Œè¿™ä¸ªå¹³å‡æ—¶é—´æ˜¯æ¯”ç‰¹å¸åè®®è®¾è®¡å‡ºæ¥çš„ï¼Œé€šè¿‡å®šæœŸè°ƒæ•´æŒ–çŸ¿éš¾åº¦ï¼Œä½¿å¾—å¹³å‡å‡ºå—æ—¶é—´ç»´æŒåœ¨10minå·¦å³ï¼Œå…·ä½“åˆ°æ¯ä¸€ä¸ªçŸ¿å·¥ï¼Œèƒ½æŒ–åˆ°ä¸‹ä¸€ä¸ªåŒºå—çš„æ—¶é—´ï¼Œå–å†³äºè¿™ä¸ªçŸ¿å·¥çš„ç®—åŠ›å ç³»ç»Ÿæ€»ç®—åŠ›çš„ç™¾åˆ†æ¯”ã€‚å‡ºå—æ—¶é—´çš„åˆ†å¸ƒä¹Ÿæ˜¯æ— è®°å¿†çš„ï¼Œå°†æ¥è¿˜è¦æŒ–å¤šå°‘æ—¶é—´è·Ÿè¿‡å»å·²ç»æŒ–äº†å¤šå°‘æ—¶é—´æ˜¯æ²¡æœ‰å…³ç³»çš„ï¼Œä»ç„¶æœä»æŒ‡æ•°åˆ†å¸ƒï¼Œå¹³å‡è¿˜æ˜¯è¦10minï¼Œè¿™ä¸ªæ€§è´¨ä¹Ÿæˆprogress freeï¼ˆè¿‡å»çš„progressæ˜¯æ²¡æœ‰ç”¨çš„ï¼‰ã€‚</p><blockquote><p>å¦‚æœæ²¡æœ‰è¿™ä¸ªç‰¹ç‚¹ï¼Œç®—åŠ›å¼ºçš„çŸ¿å·¥ä¼šæœ‰ä¸æˆæ¯”ä¾‹çš„ä¼˜åŠ¿ï¼Œè¿™æ°æ°æ˜¯æŒ–çŸ¿å…¬å¹³æ€§çš„ä¿è¯ã€‚</p></blockquote><p><img src="https://raw.githubusercontent.com/Yoonalis/img/master/1.png" alt="1"></p><h4 id="æ¯”ç‰¹å¸çš„æ€»é‡"><a href="#æ¯”ç‰¹å¸çš„æ€»é‡" class="headerlink" title="æ¯”ç‰¹å¸çš„æ€»é‡"></a>æ¯”ç‰¹å¸çš„æ€»é‡</h4><p>å‡ºå—å¥–åŠ±æ˜¯ç³»ç»Ÿä¸­äº§ç”Ÿæ–°çš„æ¯”ç‰¹å¸çš„å”¯ä¸€é€”å¾„ã€‚è€Œå‡ºå—å¥–åŠ±æ¯éš”å››å¹´å‡åŠï¼Œè¿™æ ·äº§ç”Ÿçš„æ¯”ç‰¹å¸æ•°é‡å°±æ„æˆäº†ä¸€ä¸ªå‡ ä½•åºåˆ—ï¼ˆgeometric seriesï¼‰ï¼š$21ä¸‡<em>50+21ä¸‡</em>25+21ä¸‡<em>12.5+\dots &#x3D; 21ä¸‡</em>50*(1+\frac 1 2+\frac 1 4+\dots ) &#x3D; 21ä¸‡<em>50</em>2 &#x3D;210ä¸‡$</p><p>æ¯”ç‰¹å¸çš„puzzleé™¤äº†æ¯”æ‹¼ç®—åŠ›ä¹‹å¤–ï¼Œæ²¡æœ‰å…¶ä»–çš„å®é™…æ„ä¹‰ï¼Œæ¯”ç‰¹å¸è¶Šæ¥è¶Šéš¾æŒ–åˆ°æ˜¯å› ä¸ºå‡ºå—å¥–åŠ±è¢«äººä¸ºçš„å‡å°‘äº†ï¼Œæ¯”ç‰¹å¸çš„ç¨€ç¼ºæ€§æ˜¯äººä¸ºé€ æˆçš„ã€‚</p><p>ä½†æ˜¯ï¼ŒæŒ–çŸ¿çš„è¿‡ç¨‹å¯¹äºç»´æŠ¤æ¯”ç‰¹å¸ç³»ç»Ÿçš„å®‰å…¨æ€§æ˜¯è‡³å…³é‡è¦çš„ï¼šBitcoin is secured by miningã€‚å¯¹äºä¸€ä¸ªå»ä¸­å¿ƒåŒ–çš„ï¼Œæ²¡æœ‰membershipæ§åˆ¶çš„ç³»ç»Ÿæ¥è¯´ï¼ŒæŒ–çŸ¿æä¾›äº†ä¸€ç§å‡­å€Ÿç®—åŠ›æŠ•ç¥¨çš„æœ‰æ•ˆæ‰‹æ®µï¼Œåªè¦å¤§éƒ¨åˆ†ç®—åŠ›æŒæ¡åœ¨è¯šå®çš„èŠ‚ç‚¹æ‰‹é‡Œï¼Œæ¯”ç‰¹å¸çš„å®‰å…¨æ€§å°±èƒ½å¾—åˆ°ä¿è¯ï¼ŒæŒ–çŸ¿è¿™ä¸ªè¿‡ç¨‹è™½ç„¶è¡¨é¢ä¸Šçœ‹æ²¡æœ‰å®é™…æ„ä¹‰ï¼Œä½†æ˜¯è¿™ä¸ªæœºåˆ¶çš„è®¾ç«‹å¯¹äºç»´æŠ¤æ•´ä¸ªç³»ç»Ÿçš„å®‰å…¨æ€§æ˜¯éå¸¸æœ‰æ•ˆçš„ã€‚</p><h4 id="æ¯”ç‰¹å¸å®‰å…¨æ€§åˆ†æ"><a href="#æ¯”ç‰¹å¸å®‰å…¨æ€§åˆ†æ" class="headerlink" title="æ¯”ç‰¹å¸å®‰å…¨æ€§åˆ†æ"></a>æ¯”ç‰¹å¸å®‰å…¨æ€§åˆ†æ</h4><p>å‡è®¾å¤§éƒ¨åˆ†ç®—åŠ›æŒæ¡åœ¨è¯šå®çš„çŸ¿å·¥æ‰‹é‡Œï¼Œæ˜¯å¦èƒ½ä¿è¯å†™å…¥åŒºå—é“¾çš„äº¤æ˜“éƒ½æ˜¯åˆæ³•çš„ï¼Ÿ</p><ul><li><p>æ¶æ„èŠ‚ç‚¹ä¼ªé€ äº¤æ˜“ï¼šæ²¡æœ‰å¯¹æ–¹çš„ç§é’¥æ— æ³•ç­¾åã€‚</p></li><li><p>å®šä¹‰æœ‰æ¶æ„çš„æ”»å‡»æ˜¯å¦æˆåŠŸçš„æ ‡å‡†ï¼Œæ˜¯çœ‹ä»–èƒ½ä¸èƒ½è®©è¯šå®çš„èŠ‚ç‚¹æ¥å—è¿™ä¸ªäº¤æ˜“ï¼Œå¦‚æœä»…æ˜¯æ¶æ„èŠ‚ç‚¹ä¹‹é—´äº’ç›¸è®¤è´¦ï¼Œè¯šå®èŠ‚ç‚¹éƒ½ä¸è®¤è´¦ï¼Œé‚£æ˜¯æ²¡æœ‰ç”¨çš„ï¼Œå› ä¸ºæ¯”ç‰¹å¸æ˜¯æ‰©å±•æœ€é•¿åˆæ³•é“¾ï¼Œæ¶æ„çš„åŒºå—ç›¸å½“äºä½œåºŸï¼Œè¿™å¯¹äºæ”»å‡»è€…æ¥è¯´ä¼šæŸå¤±å‡ºå—å¥–åŠ±ã€‚ï¼ˆ&#x3D;&#x3D;è¿™é‡Œè€å¸ˆè®²çš„æ˜¯æ¶æ„èŠ‚ç‚¹å¤šé•¿éƒ½æ²¡æœ‰ç”¨ï¼Œå¯å¦‚æœè¿™ä¸ªèŠ‚ç‚¹æœ¬æ¥æ˜¯è¯šå®çš„ï¼Œä»–åé¢å»¶ä¼¸äº†å¾ˆå¤šèŠ‚ç‚¹ï¼Œåæ¥å®ƒå˜æˆæ¶æ„çš„äº†ï¼Œè¿™æ¡é“¾ä¸å†æ‰©å±•ï¼Œé‚£ä¹ˆå®ƒåé¢çš„è¯šå®é“¾ä¼šå—åˆ°å½±å“å—ï¼Ÿ&#x3D;&#x3D;ï¼‰</p><p><img src="https://raw.githubusercontent.com/Yoonalis/img/master/%E6%9C%AA%E5%91%BD%E5%90%8D%E6%96%87%E4%BB%B6%20(0).jpg" alt="æœªå‘½åæ–‡ä»¶ (0)"></p></li><li><p>èƒ½å¦æŠŠå·²ç»èŠ±å‡ºå»çš„å¸å†èŠ±ä¸€éï¼Ÿ</p></li><li><p>åŒºå—æ’åœ¨å“ªä¸ªä½ç½®ï¼Œæ˜¯è¦åœ¨åˆšå¼€å§‹æŒ–çŸ¿æ—¶å°±è¦å†³å®šçš„ï¼Œå› ä¸ºè®¾ç½®çš„block headeré‡Œè¦å¡«å‰ä¸€ä¸ªåŒºå—çš„hashï¼Œå¦‚æœæƒ³æ’åœ¨æŸä¸ªèŠ‚ç‚¹ä¹‹åï¼Œä¸€å¼€å§‹å°±è¦æŠŠè¯¥èŠ‚ç‚¹è®¾ç½®ä¸ºå‰ä¸€ä¸ªåŒºå—ï¼Œè€Œä¸æ˜¯ç­‰è·å¾—äº†è®°è´¦æƒä¹‹åå†è¯´ã€‚é˜²èŒƒåŒèŠ±æ”»å‡»çš„åŠæ³•æ˜¯å¤šç­‰å‡ ä¸ªåŒºå—&#x2F;ç¡®è®¤ï¼Œæ¯”ç‰¹å¸åè®®ä¸­ç¼ºçœè¦ç­‰å…­ä¸ªconfirmationï¼Œæ­¤æ—¶æ‰è®¤ä¸ºå‰é¢ä¸€ä¸ªäº¤æ˜“æ˜¯ä¸å¯ç¯¡æ”¹çš„ï¼Œå¹³å‡å‡ºå—æ—¶é—´10minï¼Œè¿™ä¸ªè¿‡ç¨‹è¦ç­‰ä¸€ä¸ªå°æ—¶ã€‚</p></li></ul><p><img src="https://raw.githubusercontent.com/Yoonalis/img/master/4.jpg" alt="4"></p><ul><li><p>é›¶ç¡®è®¤ zero confirmationï¼šè¿™ä¸ªè½¬è´¦äº¤æ˜“å‘å¸ƒå‡ºå»ï¼Œä½†è¿˜æ²¡æœ‰è¢«å†™å…¥åŒºå—é“¾ã€‚æ¯”ç‰¹å¸ä¸­ç¼ºçœçš„è®¾ç½®æ˜¯èŠ‚ç‚¹æ¥æ”¶æœ€å…ˆå¬åˆ°çš„äº¤æ˜“ï¼›å®é™…äº¤æ˜“å¤©ç„¶æœ‰æ—¶é—´é—´éš”ã€‚</p></li><li><p>æ¶æ„èŠ‚ç‚¹æ˜¯å¦èƒ½æ•…æ„ä¸æŠŠåˆæ³•çš„äº¤æ˜“å†™åœ¨åŒºå—é“¾ï¼Ÿ</p></li><li><p>å¯ä»¥ï¼Œä½†åˆæ³•çš„äº¤æ˜“å¯ä»¥å†™åœ¨ä¸‹ä¸€ä¸ªåŒºå—é‡Œï¼Œæ€»æœ‰è¯šå®çš„èŠ‚ç‚¹æ„¿æ„å‘å¸ƒè¿™äº›äº¤æ˜“ï¼Œæ¯”ç‰¹å¸åè®®è§„å®šï¼ŒåŒºå—çš„å¤§å°æœ‰é™åˆ¶ï¼Œæœ€å¤šä¸èƒ½è¶…è¿‡1Må­—èŠ‚ï¼Œæ‰€ä»¥å¦‚æœäº¤æ˜“å¤ªå¤šï¼Œæœ‰äº›äº¤æ˜“å°±åªèƒ½ç­‰åˆ°ä¸‹ä¸€ä¸ªåŒºå—å†å‘å¸ƒã€‚</p></li><li><p>æ˜¯å¦å¯ä»¥éšè—ç®—å¥½çš„åŒºå—ï¼Œç­‰åˆ°äº¤æ˜“ç›®æ ‡è¾¾æˆå†åŒæ—¶å‘å¸ƒï¼Œä»¥è¶…è¶Šå·²å½¢æˆçš„åŒºå—&#x2F;confirmationï¼Œæˆä¸ºæœ€é•¿é“¾ï¼Ÿï¼ˆselfish miningï¼‰</p></li><li><p>æ­£å¸¸çš„æƒ…å†µæ˜¯æŒ–åˆ°åŒºå—é©¬ä¸Šå‘å¸ƒï¼Œä»¥å…è¢«å…¶ä»–äººæŒ–åˆ°æŸå¤±å¥–åŠ±ï¼Œè¿™ä¸ªæ”»å‡»æˆåŠŸçš„å‰ææ˜¯éœ€è¦å åˆ°å¾ˆå¤§çš„ç®—åŠ›ã€‚ï¼ˆä¸å¯èƒ½è¶Šçº§æŒ–ï¼Œå› ä¸ºæ¯ä¸ªå—éœ€è¦å‰ä¸€ä¸ªå—çš„hashï¼Œå‰é¢ä¸€ä¸ªåŒºå—æ²¡æŒ–å‡ºæ¥ï¼Œæ²¡åŠæ³•æå‰å‡†å¤‡å¥½ï¼‰</p><blockquote><p>selfish mining çš„å¦ä¸€ä¸ªç›®çš„ï¼šå‡å°‘ç«äº‰ã€‚</p><p>è—ä¸€ä¸ªå—ï¼Œç”¨ä¸¤ä¸ªå—ç«äº‰ï¼Œä½†ä¹Ÿæœ‰é£é™©ï¼Œè¿˜æ˜¯æ‹¼ç®—åŠ›ã€‚</p></blockquote></li></ul><h3 id="5ã€æ¯”ç‰¹å¸ç½‘ç»œ"><a href="#5ã€æ¯”ç‰¹å¸ç½‘ç»œ" class="headerlink" title="5ã€æ¯”ç‰¹å¸ç½‘ç»œ"></a>5ã€æ¯”ç‰¹å¸ç½‘ç»œ</h3><p>ç”¨æˆ·æŠŠäº¤æ˜“å‘å¸ƒåˆ°æ¯”ç‰¹å¸ç½‘ç»œä¸Šï¼ŒèŠ‚ç‚¹æ”¶åˆ°è¿™äº›äº¤æ˜“æŠŠä»–ä»¬æ‰“åŒ…åˆ°åŒºå—é‡Œï¼Œç„¶åæŠŠåŒºå—å‘å¸ƒåˆ°æ¯”ç‰¹å¸ç½‘ç»œä¸Šï¼Œè¿™äº›æ–°å‘å¸ƒçš„äº¤æ˜“å’ŒåŒºå—åœ¨æ¯”ç‰¹å¸ç½‘ç»œä¸Šå¦‚ä½•ä¼ æ’­ï¼Ÿ</p><p><img src="https://raw.githubusercontent.com/Yoonalis/img/master/5.jpg" alt="5"></p><p>æ¯”ç‰¹å¸ç½‘ç»œçš„è®¾è®¡åŸåˆ™ï¼šç®€å•ã€é²æ£’è€Œéé«˜æ•ˆã€‚</p><p>æ¶ˆæ¯ä»¥floodingçš„æ–¹å¼ä¼ æ’­ï¼šèŠ‚ç‚¹ç¬¬ä¸€æ¬¡æ”¶åˆ°æ¶ˆæ¯æ—¶ï¼Œå°†å®ƒä¼ æ’­ç»™å…¶ä»–é‚»å±…èŠ‚ç‚¹ï¼ŒåŒæ—¶è®°å½•å·²æ”¶åˆ°è¿™ä¸ªæ¶ˆæ¯ï¼Œä¸‹æ¬¡å†æ”¶åˆ°è¿™ä¸ªæ¶ˆæ¯ï¼Œå°±ä¸å†è½¬å‘ç»™é‚»å±…èŠ‚ç‚¹ï¼Œé‚»å±…èŠ‚ç‚¹çš„é€‰å–æ˜¯éšæœºçš„ï¼Œä¸è€ƒè™‘åº•å±‚çš„æ‹“æ‰‘ç»“æ„ï¼Œé²æ£’æ€§å¾ˆå¼ºï¼Œä½†ç‰ºç‰²äº†æ•ˆç‡ã€‚</p><p>æ¯”ç‰¹å¸ç³»ç»Ÿä¸­æ¯ä¸ªèŠ‚ç‚¹è¦ç»´æŠ¤ä¸€ä¸ªç­‰å¾…ä¸Šé“¾äº¤æ˜“çš„é›†åˆï¼Œç¬¬ä¸€æ¬¡å¬åˆ°æŸä¸ªäº¤æ˜“æ—¶ï¼ŒæŠŠè¿™ä¸ªäº¤æ˜“å†™å…¥é›†åˆï¼Œå¹¶ä¸”è½¬å‘è¿™ä¸ªäº¤æ˜“ï¼Œå†æ”¶åˆ°è¿™ä¸ªäº¤æ˜“å°±ä¸è½¬å‘ï¼Œè½¬å‘çš„å‰ææ˜¯äº¤æ˜“åˆæ³•ï¼ˆæœ‰åˆæ³•çš„ç­¾åï¼Œä»¥å‰æ²¡æœ‰è¢«èŠ±è¿‡ï¼‰ã€‚</p><p>é›†åˆä¸­çš„äº¤æ˜“ä¸€æ—¦å†™å…¥åŒºå—é“¾ï¼Œå°±è¦ä»é›†åˆä¸­åˆ æ‰ï¼Œå¦‚æœå› ä¸ºæŸä¸ªåŒºå—é“¾é‡Œçš„äº¤æ˜“å¯¼è‡´é›†åˆé‡Œå‡ºç°äº†éæ³•äº¤æ˜“ï¼Œä¹Ÿè¦åˆ é™¤éæ³•äº¤æ˜“ã€‚</p><blockquote><p>risk conditionï¼šæœ‰ä¸¤ä¸ªæœ‰å†²çªçš„äº¤æ˜“ï¼Œå·®ä¸å¤šåŒæ—¶è¢«å¹¿æ’­åˆ°ç½‘ç»œä¸Šï¼Œé‚£ä¹ˆæ¯ä¸ªèŠ‚ç‚¹å› ä¸ºåœ¨ç½‘ç»œä¸Šçš„ä½ç½®ä¸åŒï¼Œå…ˆæ”¶åˆ°çš„äº¤æ˜“ä¸åŒã€‚</p></blockquote><p>æ–°å‘å¸ƒçš„åŒºå—åœ¨ç½‘ç»œä¸Šçš„ä¼ æ’­æ–¹å¼è·Ÿæ–°å‘å¸ƒçš„äº¤æ˜“æ˜¯ç±»ä¼¼çš„ï¼Œæ¯ä¸ªèŠ‚ç‚¹é™¤äº†æ£€æŸ¥åŒºå—çš„å†…å®¹çš„åˆæ³•æ€§ï¼Œè¿˜è¦æ£€æŸ¥å®ƒæ˜¯å¦åœ¨æœ€é•¿åˆæ³•é“¾ä¸Šï¼Œè¶Šæ˜¯å¤§çš„åŒºå—åœ¨ç½‘ç»œä¸Šçš„ä¼ æ’­é€Ÿåº¦å°±è¶Šæ…¢ã€‚</p><p>best effortï¼šä¸€ä¸ªäº¤æ˜“å‘å¸ƒåˆ°æ¯”ç‰¹å¸ç½‘ç»œä¸Šï¼Œä¸ä¸€å®šæ‰€æœ‰çš„èŠ‚ç‚¹éƒ½èƒ½æ”¶åˆ°ï¼Œè€Œä¸”ä¸åŒçš„èŠ‚ç‚¹æ”¶åˆ°äº¤æ˜“çš„é¡ºåºä¹Ÿå¯èƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œç½‘ç»œä¼ æ’­å­˜åœ¨å»¶è¿Ÿï¼Œä¸”æœ‰çš„èŠ‚ç‚¹ä¸ä¸€å®šæŒ‰ç…§æ¯”ç‰¹å¸åè®®çš„è¦æ±‚è¿›è¡Œè½¬å‘ï¼Œä¹Ÿæœ‰çš„èŠ‚ç‚¹å¯èƒ½è½¬å‘ä¸åˆæ³•çš„äº¤æ˜“ï¼Œè¿™æ˜¯ä¸€ä¸ªå»ä¸­å¿ƒåŒ–çš„ç³»ç»Ÿä¸­é¢ä¸´çš„å®é™…é—®é¢˜ã€‚</p><h3 id="6ã€æ¯”ç‰¹å¸çš„æŒ–çŸ¿éš¾åº¦è°ƒæ•´"><a href="#6ã€æ¯”ç‰¹å¸çš„æŒ–çŸ¿éš¾åº¦è°ƒæ•´" class="headerlink" title="6ã€æ¯”ç‰¹å¸çš„æŒ–çŸ¿éš¾åº¦è°ƒæ•´"></a>6ã€æ¯”ç‰¹å¸çš„æŒ–çŸ¿éš¾åº¦è°ƒæ•´</h3><p>æŒ–çŸ¿ï¼šä¸æ–­å°è¯•block headeré‡Œçš„nonceå€¼ï¼Œä½¿æ•´ä¸ªblock headerçš„å“ˆå¸Œå€¼å°äºç­‰äºç»™å®šçš„ç›®æ ‡é˜ˆå€¼ã€‚å³$H(\text{block header}) \le target$ã€‚$target$è¶Šå°ï¼ŒæŒ–çŸ¿éš¾åº¦è¶Šå¤§ï¼Œè°ƒæ•´æŒ–çŸ¿éš¾åº¦å°±æ˜¯è°ƒæ•´ç›®æ ‡ç©ºé—´åœ¨æ•´ä¸ªè¾“å‡ºç©ºé—´ä¸­æ‰€å çš„æ¯”ä¾‹ã€‚</p><p>æ¯”ç‰¹å¸ç”¨çš„å“ˆå¸Œç®—æ³•æ˜¯SHA-256ï¼Œäº§ç”Ÿçš„å“ˆå¸Œå€¼æ˜¯256ä½ï¼Œæ‰€ä»¥æ•´ä¸ªè¾“å‡ºç©ºé—´æ˜¯$2^{256}$ä¸ªå¯èƒ½çš„å–å€¼ï¼Œè°ƒæ•´è¿™ä¸ªæ¯”ä¾‹å°±æ˜¯å“ˆå¸Œå€¼å‰é¢æœ‰å¤šå°‘ä¸ª0ï¼ˆä¸å‡†ç¡®ï¼‰ã€‚</p><p>å‡ºå—æ—¶é—´å¤ªçŸ­ä¼šå‡ºç°çš„é—®é¢˜ï¼š</p><ul><li>åˆ†å‰ä¼šæˆä¸ºå¸¸æ€ï¼Œåˆ†å‰è¿‡å¤šï¼Œå¯¹äºä¸åˆ©äºç³»ç»Ÿè¾¾æˆå…±è¯†ï¼Œä¹Ÿå±å®³ç³»ç»Ÿå®‰å…¨ï¼ˆæ¯”ç‰¹å¸åè®®å‡è®¾å¤§éƒ¨åˆ†ç®—åŠ›æŒæ¡åœ¨è¯šå®çš„çŸ¿å·¥æ‰‹é‡Œï¼Œç³»ç»Ÿçš„æ€»ç®—åŠ›è¶Šå¼ºï¼Œå®‰å…¨æ€§è¶Šå¥½ï¼‰ã€‚æ¶æ„èŠ‚ç‚¹å¯ä»¥é›†ä¸­ç®—åŠ›æ‰©å±•æˆæœ€é•¿åˆæ³•é“¾ã€‚</li></ul><p>æ¯”ç‰¹å¸åè®®ä¸­è§„å®šï¼šæ¯éš”2016ä¸ªåŒºå—ï¼Œè¦é‡æ–°è°ƒæ•´ç›®æ ‡é˜ˆå€¼ï¼Œå¤§æ¦‚æ˜¯æ¯ä¸¤ä¸ªæ˜ŸæœŸè°ƒæ•´ä¸€ä¸‹ï¼ˆ$\frac {2016<em>10} {60</em>24} &#x3D; 14å¤©$ï¼‰ã€‚å…·ä½“è°ƒæ•´æ–¹å¼ä¸º$target &#x3D; target * \frac {\text{actual time}} {\text{experted time}}$ï¼Œç›®æ ‡é˜ˆå€¼å¢å¤§æœ€å¤šå¢å¤§4å€ï¼Œä¸ä¼šè¶…è¿‡4å€ï¼›ç›®æ ‡é˜ˆå€¼ç¼©å°æœ€å¤šç¼©å°$\frac 1 4$ï¼Œä¸ä¼šè¶…è¿‡$\frac 1 4$ã€‚</p><p>è®¡ç®—$target$çš„æ–¹æ³•æ˜¯å†™åœ¨æ¯”ç‰¹å¸ç³»ç»Ÿçš„ä»£ç é‡Œï¼Œæ¯æŒ–åˆ°2016ä¸ªåŒºå—ä¼šè‡ªåŠ¨è¿›è¡Œè°ƒæ•´ï¼Œä»£ç å¼€æºï¼Œå¦‚æœ$target$è¢«æ¶æ„ä¿®æ”¹ï¼Œè¯šå®çš„çŸ¿å·¥ä¸ä¼šæ‰¿è®¤ã€‚</p><ul><li>nBitsåŸŸï¼š$target$ç¼–ç çš„ç‰ˆæœ¬ï¼Œåœ¨block headeré‡Œæ²¡æœ‰ç›´æ¥å­˜å‚¨$target$ï¼Œå› ä¸ºéœ€è¦256ä½&#x2F;32ä¸ªå­—èŠ‚ï¼Œè€ŒnBitsåªæœ‰4ä¸ªå­—èŠ‚ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªå‹ç¼©ç¼–ç ï¼Œå¦‚æœæ²¡æœ‰æŒ‰è§„åˆ™è°ƒæ•´$target$ï¼Œæ£€æŸ¥åŒºå—åˆæ³•æ€§å°±æ— æ³•é€šè¿‡ï¼Œå› ä¸ºæ¯ä¸ªèŠ‚ç‚¹è¦ç‹¬ç«‹éªŒè¯å‘å¸ƒçš„åŒºå—çš„åˆæ³•æ€§ã€‚</li></ul><h3 id="7ã€æ¯”ç‰¹å¸æŒ–çŸ¿"><a href="#7ã€æ¯”ç‰¹å¸æŒ–çŸ¿" class="headerlink" title="7ã€æ¯”ç‰¹å¸æŒ–çŸ¿"></a>7ã€æ¯”ç‰¹å¸æŒ–çŸ¿</h3><p>å…¨èŠ‚ç‚¹</p><ul><li>ä¸€ç›´åœ¨çº¿</li><li>åœ¨æœ¬åœ°ç¡¬ç›˜ä¸Šç»´æŠ¤å®Œæ•´çš„åŒºå—é“¾ä¿¡æ¯</li><li>åœ¨å†…å­˜é‡Œç»´æŠ¤UTXOé›†åˆï¼Œä»¥ä¾¿å¿«é€Ÿæ£€éªŒäº¤æ˜“çš„æ­£ç¡®æ€§</li><li>ç›‘å¬æ¯”ç‰¹å¸ç½‘ç»œä¸Šçš„äº¤æ˜“ä¿¡æ¯ï¼ŒéªŒè¯æ¯ä¸ªäº¤æ˜“çš„åˆæ³•æ€§</li><li>å†³å®šå“ªäº›äº¤æ˜“ä¼šè¢«æ‰“åŒ…åˆ°åŒºå—é‡Œ</li><li>ç›‘å¬åˆ«çš„çŸ¿å·¥æŒ–å‡ºæ¥çš„åŒºå—ï¼ŒéªŒè¯å…¶åˆæ³•æ€§</li><li>æŒ–çŸ¿<ul><li>å†³å®šéªŒè¯å“ªæ¡é“¾æŒ–ä¸‹å»</li><li>å½“å‡ºç°ç­‰é•¿çš„åˆ†å‰çš„æ—¶å€™ï¼Œé€‰æ‹©å“ªä¸€ä¸ªåˆ†å‰</li></ul></li></ul><p>è½»èŠ‚ç‚¹</p><ul><li>ä¸æ˜¯ä¸€ç›´åœ¨çº¿</li><li>ä¸ç”¨ä¿å­˜æ•´ä¸ªåŒºå—é“¾ï¼Œåªè¦ä¿å­˜æ¯ä¸ªåŒºå—çš„å—å¤´ï¼ˆ1000å€ï¼‰</li><li>ä¸ç”¨ä¿å­˜å…¨éƒ¨äº¤æ˜“ï¼Œåªä¿å­˜ä¸è‡ªå·±ç›¸å…³çš„äº¤æ˜“</li><li>æ— æ³•æ ¡éªŒå¤§å¤šæ•°äº¤æ˜“çš„åˆæ³•æ€§ï¼Œåªèƒ½æ ¡éªŒä¸è‡ªå·±ç›¸å…³çš„é‚£äº›äº¤æ˜“çš„åˆæ³•æ€§</li><li>æ— æ³•æ£€æµ‹ç½‘ä¸Šå‘å¸ƒçš„åŒºå—çš„æ­£ç¡®æ€§</li><li>å¯ä»¥éªŒè¯æŒ–çŸ¿çš„éš¾åº¦</li><li>åªèƒ½æ£€æµ‹å“ªä¸ªæ˜¯æœ€é•¿é“¾ï¼Œä¸çŸ¥é“å“ªä¸ªæ˜¯æœ€é•¿åˆæ³•é“¾</li></ul><p>æ¯”ç‰¹å¸æ€ä¹ˆä¿è¯å®‰å…¨æ€§</p><ul><li>å¯†ç å­¦ä¸Šçš„ä¿è¯ï¼šæ²¡æœ‰ç§é’¥ï¼Œå°±æ— æ³•ä¼ªé€ ç­¾åï¼Œä¸èƒ½å°†ä»–äººè´¦ä¸Šçš„å‰è½¬èµ°ï¼Œå‰ææ˜¯ï¼Œç³»ç»Ÿä¸­æ‹¥æœ‰å¤§å¤šæ•°ç®—åŠ›çš„çŸ¿å·¥æ˜¯å¥½çš„ï¼Œæ˜¯éµå®ˆåè®®çš„ï¼Œä¸ä¼šæ¥å—é‚£äº›æ²¡æœ‰åˆæ³•ç­¾åçš„äº¤æ˜“ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸€ç‚¹ï¼Œå¯†ç å­¦ä¸Šçš„ä¿è¯å°±æ²¡æœ‰ç”¨æ­¦ä¹‹åœ°ã€‚</li><li>å…±è¯†æœºåˆ¶</li></ul><p>æŒ–çŸ¿è®¾å¤‡</p><ul><li><p>è¶‹äºä¸“ä¸šåŒ–ï¼šCPUæŒ–çŸ¿ï¼ˆé€šç”¨è®¡ç®—æœºã€ç¬”è®°æœ¬ç”µè„‘ï¼‰â†’ GPUæŒ–çŸ¿ï¼ˆä¸»è¦ç”¨äºå¤§è§„æ¨¡çš„å¹¶è¡Œè®¡ç®—ï¼Œä¾‹å¦‚æ·±åº¦å­¦ä¹ ï¼Œå¤§é‡çš„çŸ©é˜µä¹˜æ³•ï¼‰ â†’ ASICèŠ¯ç‰‡ï¼ˆapplication specific integrated circulationï¼‰</p></li><li><p>å¤§å‹çŸ¿æ± çš„å‡ºç°ï¼šå•ä¸ªçŸ¿å·¥å³ä½¿ç”¨äº†ASICèŠ¯ç‰‡ï¼ŒæŒ–çŸ¿ä»å¹³å‡æ”¶ç›Šä¸Šçœ‹æ˜¯æœ‰åˆ©å¯å›¾çš„ï¼Œä½†æ˜¯æ”¶ç›Šæ˜¯éå¸¸ä¸ç¨³å®šçš„ï¼Œé™¤äº†æŒ–çŸ¿å¤–ï¼Œå•ä¸ªçŸ¿å·¥è¿˜è¦æ‰¿æ‹…å…¨èŠ‚ç‚¹çš„å…¶ä»–è´£ä»»ã€‚çŸ¿æ± å°±æ˜¯æŠŠçŸ¿å·¥ç»„ç»‡èµ·æ¥æˆä¸ºä¸€ä¸ªæ•´ä½“ï¼ŒçŸ¿çŸ³çš„æ¶æ„æ˜¯ä¸€ä¸ªå…¨èŠ‚ç‚¹ä¼šé©±åŠ¨å¾ˆå¤šçŸ¿æœºã€‚</p><p><img src="https://raw.githubusercontent.com/Yoonalis/img/master/6.jpg" alt="6"></p><p>çŸ¿å·¥åªè´Ÿè´£è®¡ç®—å“ˆå¸Œå€¼ï¼Œå…¨èŠ‚ç‚¹çš„å…¶ä»–èŒè´£éƒ½ç”±pool manageræ¥æ‰¿æ‹…ï¼ˆç›‘å¬ç½‘ä¸Šçš„äº¤æ˜“ã€æŠŠäº¤æ˜“ç»„ç»‡æ‰“åŒ…æˆå€™é€‰åŒºå—ã€æ˜¯å¦æœ‰å…¶ä»–èŠ‚ç‚¹æŠ¢å…ˆå‘å¸ƒåŒºå—ï¼Œæœ‰çš„è¯è¦è¿›è¡Œè°ƒæ•´ï¼‰ã€‚</p><p>çŸ¿æ± çš„å‡ºç°è§£å†³äº†æ”¶å…¥ä¸ç¨³å®šçš„é—®é¢˜ï¼Œæ”¶å…¥åˆ†é…æ—¶ï¼ŒçŸ¿ä¸»ä»¥çŸ¿å·¥æäº¤çš„è¾ƒç®€å•çš„almost valid blockä½œä¸ºshareçš„æ•°é‡ä¸ºä¾æ®è¿›è¡Œåˆ†é…ã€‚</p><p>æ˜¯å¦ä¼šå‡ºç°çŸ¿å·¥æŒ–åˆ°çŸ¿åä¸æäº¤ç»™çŸ¿æ± ï¼Œè‡ªå·±ç‹¬å å¥–åŠ±ï¼Ÿ</p><ul><li>ä¸å¯è¡Œï¼Œæ¯ä¸ªçŸ¿å·¥çš„ä»»åŠ¡æ˜¯æœ‰çŸ¿ä¸»åˆ†é…çš„ï¼ŒçŸ¿ä¸»è´Ÿè´£ç»„è£…å¥½åŒºå—ï¼Œç„¶åäº¤ç»™çŸ¿å·¥å°è¯•nonceï¼Œå…‰æ˜¯è°ƒæ•´nonceæ˜¯ä¸å¤Ÿçš„ï¼Œè¿˜è¦è°ƒæ•´coinbaseï¼ŒçŸ¿ä¸»å¯èƒ½æŠŠä¸åŒçš„coinbaseå¯¹åº”çš„nonceå€¼çš„èŒƒå›´äº¤ç»™ä¸åŒçš„çŸ¿å·¥å°è¯•ï¼Œcoinbase transactionçš„åœ°å€å¡«çš„æ˜¯çŸ¿ä¸»çš„åœ°å€ï¼Œæ‰€ä»¥çŸ¿å·¥æŒ–åˆ°åŒºå—åä¸æäº¤ç»™çŸ¿ä¸»ï¼Œè‡ªå·±æäº¤æ˜¯æ— ç”¨çš„ã€‚</li></ul><p>å¤§å‹çŸ¿æ± çš„ä¸€ä¸ªå¼Šç—…ï¼š51%çš„æ”»å‡»æ›´å®¹æ˜“äº†ï¼ˆåˆ†å‰æ”»å‡»ã€åŒèŠ±æ”»å‡»ã€Boycottå°é”æŸä¸ªè´¦æˆ·ï¼‰ã€‚ç±»ä¼¼äº‘è®¡ç®—é‡Œçš„on demand computingï¼Œæ­¤å¤„ä¸ºon demand miningï¼ŒçŸ¿çŸ³å¸¦æ¥çš„æ½œåœ¨å±å®³ã€‚</p></li></ul><h3 id="8ã€æ¯”ç‰¹å¸è„šæœ¬"><a href="#8ã€æ¯”ç‰¹å¸è„šæœ¬" class="headerlink" title="8ã€æ¯”ç‰¹å¸è„šæœ¬"></a>8ã€æ¯”ç‰¹å¸è„šæœ¬</h3><p>å”¯ä¸€èƒ½è®¿é—®çš„å†…å­˜ç©ºé—´å°±æ˜¯å †æ ˆï¼Œæ‰€ä»¥æ˜¯åŸºäºæ ˆçš„è¯­è¨€ã€‚</p><p><img src="https://raw.githubusercontent.com/Yoonalis/img/master/fb118d0f3f3f69f20c421b3b978ce13.jpg" alt="fb118d0f3f3f69f20c421b3b978ce13"></p><p><img src="https://raw.githubusercontent.com/Yoonalis/img/master/a44e90b2b47b4759d5d81b91b166c8f.jpg" alt="a44e90b2b47b4759d5d81b91b166c8f"></p><blockquote><p>æ¯ä¸ªè¾“å…¥éƒ½è¦è¯´æ˜è¿™ä¸ªè¾“å…¥çš„å¸æ¥è‡ªä¹‹å‰å“ªä¸ªäº¤æ˜“çš„è¾“å‡ºï¼Œå‰ä¸¤è¡Œç»™å‡ºè¾“å…¥çš„å¸çš„æ¥æºï¼Œç¬¬ä¸‰é¡¹æ˜¯è¾“å…¥è„šæœ¬ï¼Œç»™å‡ºsignatureè¯æ˜æœ‰æƒåŠ›èŠ±è¿™ä¸ªé’±ã€‚</p></blockquote><p><img src="https://raw.githubusercontent.com/Yoonalis/img/master/2175087397b6f48030dd2daf87dc210.jpg" alt="2175087397b6f48030dd2daf87dc210"></p><blockquote><p>scriptPublicKeyæ˜¯è¾“å‡ºè„šæœ¬ï¼Œasmæ˜¯è¾“å‡ºè„šæœ¬å†…å®¹ï¼ŒåŒ…å«ä¸€ç³»åˆ—æ“ä½œï¼ŒreqSigsè¡¨ç¤ºè¿™ä¸ªè¾“å‡ºéœ€è¦å¤šå°‘ä¸ªç­¾åæ‰èƒ½å…‘ç°ï¼Œtypeæ˜¯è¾“å‡ºçš„ç±»å‹ï¼Œè¿™é‡Œè¡¨ç¤ºå…¬é’¥çš„å“ˆå¸Œï¼Œaddressesæ˜¯è¾“å‡ºçš„åœ°å€ã€‚</p></blockquote><p><img src="https://raw.githubusercontent.com/Yoonalis/img/master/df1c2ac503eaaa4ca31f23169e91964.jpg" alt="df1c2ac503eaaa4ca31f23169e91964"></p><blockquote><p>è¾“å‡ºè„šæœ¬è¦ä¸è¾“å…¥è„šæœ¬åŒ¹é…</p></blockquote><p>è¾“å…¥è¾“å‡ºè„šæœ¬çš„å½¢å¼</p><ul><li><p>P2PK(Pay to Public Key)</p><ul><li><p>input script</p><ul><li>PUSHDATA(Sig)</li></ul></li><li><p>output script</p><ul><li>PUSHDATA(PubKey)&#x2F;&#x2F;è¾“å‡ºè„šæœ¬é‡Œç›´æ¥ç»™å‡ºæ”¶æ¬¾äººçš„å…¬é’¥ã€‚</li><li>CHECKSIG&#x2F;&#x2F;æ£€æŸ¥ç­¾åï¼Œåœ¨è¾“å…¥è„šæœ¬é‡Œç›´æ¥æ£€æŸ¥ç­¾åï¼Œç­¾åæ˜¯ç”¨ç§é’¥å¯¹è¾“å…¥è„šæœ¬æ‰€åœ¨çš„æ•´ä¸ªäº¤æ˜“çš„ç­¾åï¼Œæ˜¯æœ€ç®€å•çš„ã€‚</li></ul></li><li><p>å®ä¾‹ï¼š</p><p><img src="https://raw.githubusercontent.com/Yoonalis/img/master/9f2bc3262d66508b9926191b78f1d49.jpg" alt="9f2bc3262d66508b9926191b78f1d49"></p></li></ul></li><li><p>P2PKH(Pay to Public Key Hash)</p><ul><li><p>input script</p><ul><li>PUSHDATA(Sig)&#x2F;&#x2F;æŠŠç­¾åå‹å…¥æ ˆ</li><li>PUSHDATA(Public)&#x2F;&#x2F;æŠŠå…¬é’¥å‹å…¥æ ˆ</li></ul></li><li><p>output script</p><ul><li>DUP&#x2F;&#x2F;æŠŠæ ˆé¡¶å…ƒç´ å¤åˆ¶ä¸€é(æ ˆé¡¶ä¸ºä¸¤ä¸ªå…¬é’¥)</li><li>HASH160&#x2F;&#x2F;æŠŠæ ˆé¡¶å…ƒç´ å¼¹å‡ºæ¥ï¼Œå–å“ˆå¸Œï¼Œç„¶åæŠŠå¾—åˆ°çš„å“ˆå¸Œå€¼å‹å…¥æ ˆ(æ ˆé¡¶ä¸ºå…¬é’¥çš„å“ˆå¸Œå€¼)(è¾“å…¥è„šæœ¬é‡Œç»™å‡ºçš„å…¬é’¥)</li><li>PUSHDATA(PubKeyHash)&#x2F;&#x2F;æŠŠè¾“å‡ºè„šæœ¬é‡Œæä¾›çš„å…¬é’¥çš„å“ˆå¸Œå€¼å‹å…¥æ ˆ(æ”¶æ¬¾äººçš„å…¬é’¥çš„å“ˆå¸Œ)</li><li>EQUALVERIFY&#x2F;&#x2F;å¼¹å‡ºæ ˆé¡¶ä¸¤ä¸ªå…ƒç´ æ˜¯å¦ç›¸ç­‰ï¼Œé˜²æ­¢å†’åé¡¶æ›¿</li><li>CHECKSIG&#x2F;&#x2F;å¼¹å‡ºæ ˆé¡¶çš„ä¸¤ä¸ªå…ƒç´ ï¼Œç”¨å…¬é’¥æ£€æŸ¥ç­¾å</li></ul></li><li><p>å®ä¾‹</p><p><img src="https://raw.githubusercontent.com/Yoonalis/img/master/0223bb1d47a9820801fef7d25ca796d.jpg" alt="0223bb1d47a9820801fef7d25ca796d"></p></li></ul></li><li><p>P2SH(Pay to Script Hash)</p><ul><li><p>é‡‡ç”¨BIP16çš„æ–¹æ¡ˆ</p></li><li><p>input script</p><ul><li><p>â€¦â€¦</p></li><li><p>PUSHDATA(Sig)</p></li><li><p>â€¦â€¦</p></li><li><p>PUSHDATA(serialized redeemScript)</p></li></ul></li><li><p>output script</p><ul><li>HASH160</li><li>PUSHDATA(redeemScriptHash)(èµå›è„šæœ¬)</li><li>EQUAL</li></ul></li><li><p>input scriptè¦ç»™å‡ºä¸€äº›ç­¾åï¼ˆæ•°ç›®ä¸å®šï¼‰åŠä¸€æ®µåºåˆ—åŒ–çš„redeemScriptï¼ŒéªŒè¯åˆ†ä¸ºå¦‚ä¸‹ä¸¤æ­¥ï¼š</p><ul><li>éªŒè¯åºåˆ—åŒ–çš„redeemScriptæ˜¯å¦ä¸output scriptä¸­çš„å“ˆå¸Œå€¼åŒ¹é…</li><li>ååºåˆ—åŒ–å¹¶æ‰§è¡ŒredeemScriptï¼ŒéªŒè¯input scriptä¸­ç»™å‡ºçš„ç­¾åæ˜¯å¦æ­£ç¡®</li></ul></li><li><p>redeemScriptçš„å½¢å¼</p><ul><li>P2PKå½¢å¼</li><li>P2PKHå½¢å¼</li><li>å¤šé‡ç­¾åå½¢å¼</li></ul></li><li><p>ä¾‹ï¼šç”¨P2SHå®ç°P2PK</p><ul><li>redeemScript<ul><li>PUSHDATA(PubKey)</li><li>CHECKSIG</li></ul></li><li>input script<ul><li>PUSHDATA(Sig)</li><li>PUSHDATA(serialized redeemScript)</li></ul></li><li>output script<ul><li>HASH160</li><li>PUSHDATA(redeemScriptHash)</li><li>EQUAL</li></ul></li></ul></li><li><p>P2SHçš„ä¸€ä¸ªå¸¸è§åœºæ™¯æ˜¯å¯¹å¤šé‡ç­¾åçš„æ”¯æŒ</p><ul><li><p>æ¯”ç‰¹å¸ç³»ç»Ÿä¸­ä¸€ä¸ªè¾“å‡ºå¯èƒ½æ€§éœ€è¦å¤šä¸ªç­¾åæ‰èƒ½æŠŠé’±å–å‡ºæ¥</p></li><li><p>æœ€æ—©çš„å¤šé‡ç­¾åï¼Œç›®å‰å·²ä¸æ¨èä½¿ç”¨</p><ul><li>input script<ul><li>X&#x2F;&#x2F;éœ€è¦å¤šå‹ä¸€ä¸ªæ²¡ç”¨çš„å…ƒç´ ï¼Œå·²å¯¹åº”CHECKMULITISIGçš„bug</li><li>PUSHDATA(Sig_1)</li><li>PUSHDATA(Sig_2)</li><li>â€¦â€¦</li><li>PUSHDATA(Sig_M)</li></ul></li><li>outputScript<ul><li>M</li><li>PUSHDATA(pubkey_1)</li><li>PUSHDATA(pubkey_2)</li><li>â€¦â€¦</li><li>PUSHDATA(pubkey_N)</li><li>N</li><li>CHECKMULTISIG</li></ul></li></ul></li><li><p>ç”¨P2SHå®ç°å¤šé‡ç­¾å</p><ul><li>æŠŠè¾“å‡ºè„šæœ¬çš„å¤æ‚åº¦è½¬ç§»åˆ°è¾“å…¥è„šæœ¬</li><li>redeemScript<ul><li>M</li><li>PUSHDATA(pubkey_1)</li><li>PUSHDATA(pubkey_2)</li><li>â€¦â€¦</li><li>PUSHDATA(pubkey_N)</li><li>N</li><li>CHECKMULTISIG</li></ul></li><li>input script<ul><li>X</li><li>PUSHDATA(Sig_1)</li><li>PUSHDATA(Sig_2)</li><li>â€¦â€¦</li><li>PUSHDATA(Sig_M)</li><li>PUSHDATA(serialized RedeemScript)</li></ul></li><li>output script<ul><li>HASH160</li><li>PUSHDATA(RedeemScriptHash)</li><li>EQUAL</li></ul></li></ul></li><li><p>å®ä¾‹</p><p><img src="https://raw.githubusercontent.com/Yoonalis/img/master/3694329da6ab2de67074e3d6382151d.jpg" alt="3694329da6ab2de67074e3d6382151d"></p></li></ul></li></ul></li><li><p>Proof of Burn</p><ul><li><p>output script</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs script">RETURN //æ— æ¡ä»¶è¿”å›é”™è¯¯ï¼ŒåŒ…å«è¿™ä¸ªæ“ä½œçš„è„šæœ¬æ°¸è¿œä¸å¯èƒ½é€šè¿‡éªŒè¯<br>[zero or more ops or test]<br></code></pre></td></tr></table></figure><p>è¿™ç§å½¢å¼çš„outputè¢«ç§°ä¸ºï¼šProvably Unspendable&#x2F;Prunable Outputs</p></li><li><p>è„šæœ¬è¯´æ˜</p><p>å‡å¦‚æœ‰ä¸€ä¸ªäº¤æ˜“çš„inputæŒ‡å‘è¿™ä¸ªoutputï¼Œæ— è®ºinputé‡Œçš„input scriptå¦‚ä½•è®¾è®¡ï¼Œæ‰§è¡Œåˆ°RETURNå‘½ä»¤ä¹‹åéƒ½ä¼šç›´æ¥ä½†ä¼šfalseï¼Œä¸ä¼šæ‰§è¡ŒRETURNåé¢çš„å…¶ä»–æŒ‡ä»¤ï¼Œæ‰€ä»¥è¿™ä¸ªoutputæ— æ³•å†è¢«èŠ±å‡ºå»ï¼Œå…¶å¯¹åº”çš„UTXOä¹Ÿå°±å¯ä»¥è¢«å‰ªæäº†ï¼Œæ— éœ€ä¿å­˜ã€‚</p><p>åº”ç”¨åœºæ™¯ï¼š</p><ul><li><p>è¿™ä¸ªè„šæœ¬æ˜¯è¯æ˜é”€æ¯æ¯”ç‰¹å¸çš„ä¸€ç§æ–¹æ³•ï¼Œæœ‰äº›å°å¸ç§è¦æ±‚é”€æ¯ä¸€å®šæ•°é‡çš„æ¯”ç‰¹å¸æ‰èƒ½å¾—åˆ°è¿™ä¸ªå¸ç§ï¼ˆAltCoinï¼‰ã€‚</p></li><li><p>åœ¨åŒºå—é“¾é‡Œæ·»åŠ éœ€è¦æ°¸ä¹…ä¿å­˜çš„å†…å®¹ï¼Œå¦‚digital commitmentï¼ŒæŠŠæŸé¡¹çŸ¥è¯†äº§æƒçš„å†…å®¹å–hashåï¼ŒæŠŠhashå€¼æ”¾åœ¨RETURNè¯­å¥çš„åé¢ï¼Œä¸ä¼šå å¾ˆå¤§çš„å†…å®¹ï¼Œä¹Ÿä¸ä¼šæ³„éœ²çŸ¥è¯†äº§æƒçš„å†…å®¹ï¼Œåº”å¯¹çŸ¥è¯†äº§æƒçš„çº çº·ã€‚</p><blockquote><p>coinbaseåŸŸé‡Œä¹Ÿå¯ä»¥éšæ„å†™å†…å®¹ï¼Œä¸”ä¸ç”¨é”€æ¯æ¯”ç‰¹å¸ï¼Œä½†åªæœ‰è·å¾—è®°è´¦æƒçš„èŠ‚ç‚¹æ‰èƒ½ç”¨ã€‚</p></blockquote></li></ul></li></ul></li></ul><blockquote><p>æ³¨ï¼šç®€å•èµ·è§ï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½çœç•¥äº†OP_å‰ç¼€ï¼Œä¾‹ï¼šOP_CHECKSIGã€OP_DUP</p><p>æ¯”ç‰¹å¸çš„è„šæœ¬è¯­è¨€ä¸æ”¯æŒå¾ªç¯ï¼Œå°±ä¸ä¼šæœ‰æ­»å¾ªç¯</p></blockquote><h3 id="9ã€æ¯”ç‰¹å¸åˆ†å‰"><a href="#9ã€æ¯”ç‰¹å¸åˆ†å‰" class="headerlink" title="9ã€æ¯”ç‰¹å¸åˆ†å‰"></a>9ã€æ¯”ç‰¹å¸åˆ†å‰</h3><p>åˆ†å‰çš„åŸå› ï¼šä¸¤ä¸ªèŠ‚ç‚¹å·®ä¸å¤šåŒæ—¶æŒ–åˆ°çŸ¿ï¼Œä¼šå‡ºç°ä¸´æ—¶æ€§çš„åˆ†å‰ï¼ˆstate forkï¼‰ï¼›åˆ†å‰æ”»å‡»ï¼ˆforKing attack&#x2F;deliberate forkï¼‰ï¼›æ¯”ç‰¹å¸çš„åè®®å‘ç”Ÿäº†æ”¹å˜ï¼Œå»ä¸­å¿ƒåŒ–çš„ç³»ç»Ÿä¸­å‡çº§è½¯ä»¶æ²¡åŠæ³•ä¿è¯æ‰€æœ‰èŠ‚ç‚¹éƒ½å‡çº§ï¼ˆprotocal forkï¼‰ï¼Œæ ¹æ®å¯¹åè®®ä¿®æ”¹çš„å†…å®¹çš„ä¸åŒï¼Œåˆå¯åˆ†ä¸ºç¡¬åˆ†å‰ï¼ˆhard forkï¼‰å’Œè½¯åˆ†å‰ï¼ˆsoft forkï¼‰ã€‚</p><p>ç¡¬åˆ†å‰ï¼šå¯¹æ¯”ç‰¹å¸åè®®å¢åŠ ä¸€äº›æ–°çš„ç‰¹æ€§ï¼Œè¿™æ—¶å€™æ²¡æœ‰å‡çº§è½¯ä»¶çš„æ—§çš„èŠ‚ç‚¹ä¸è®¤å¯è¿™äº›ç‰¹æ€§ï¼Œè®¤ä¸ºè¿™äº›ç‰¹æ€§éæ³•ã€‚ä¸€ä¸ªä¾‹å­æ˜¯æ¯”ç‰¹å¸åè®®ä¸­çš„åŒºå—å¤§å°é™åˆ¶ï¼ˆblock size limitï¼‰ï¼ŒæŸäº›æ–°èŠ‚ç‚¹æ”¹ä¸ºäº†4Mï¼Œæ—§èŠ‚ç‚¹ä¾ç„¶æ˜¯1Mï¼Œåªè¦æ—§èŠ‚ç‚¹ä¸æ›´æ–°è½¯ä»¶ï¼Œè¿™ä¸ªåˆ†å‰å°±ä¸ä¼šæ¶ˆå¤±ã€‚å‡ºç°hard forkåå˜æˆäº†ä¸¤æ¡å¹³è¡Œçš„é“¾ï¼Œå½¼æ­¤ä¹‹é—´æœ‰å„è‡ªçš„åŠ å¯†è´§å¸ï¼ˆç¤¾åŒºåˆ†è£‚ï¼‰ï¼Œåˆ†å‰å‰çš„é“¾ç†è®ºä¸Šåˆ†å‰åçš„é“¾éƒ½ä¼šè®¤ï¼Œä½†ä¼šå‡ºç°é—®é¢˜ï¼Œåæ¥åˆ†è£‚çš„é“¾ä¼šå¸¦ä¸€æ¡chain Idã€‚</p><blockquote><p>ç›®å‰åŒºå—å¤§å°é™åˆ¶</p><p>$\frac {1000000} {250} &#x3D; 4000$   $\frac {4000} {60*10} &#x3D; 7 tx&#x2F;s$</p></blockquote><p><img src="https://raw.githubusercontent.com/Yoonalis/img/master/7.jpg" alt="7"></p><p>è½¯åˆ†å‰ï¼šå¯¹æ¯”ç‰¹å¸åè®®åŠ ä¸€äº›é™åˆ¶ï¼ŒåŸæ¥åˆæ³•çš„äº¤æ˜“&#x2F;åŒºå—ï¼Œåœ¨æ–°çš„åè®®ä¸­å¯èƒ½å˜å¾—ä¸åˆæ³•ã€‚ä¾‹æŸäº›æ–°èŠ‚ç‚¹å°†åŒºå—å¤§å°é™åˆ¶æ”¹ä¸ºäº†0.5Mï¼Œæ—§èŠ‚ç‚¹ä¾ç„¶æ˜¯1Mï¼Œå› ä¸ºæ–°æ—§èŠ‚ç‚¹éƒ½è®¤å¯çš„æ˜¯0.5Mçš„åˆ†å‰ï¼Œæ‰€ä»¥ä¹‹åæ‰€æœ‰èŠ‚ç‚¹éƒ½ä¼šåœ¨0.5Mçš„é“¾ä¸Šæ‰©å±•ï¼Œè¿«ä½¿å…¶æ›´æ–°åè®®ï¼Œç³»ç»Ÿä¸ä¼šæœ‰æ°¸ä¹…æ€§çš„åˆ†å‰ã€‚</p><p><img src="https://raw.githubusercontent.com/Yoonalis/img/master/%E6%9C%AA%E5%91%BD%E5%90%8D%E6%96%87%E4%BB%B6%20(4).jpg" alt="æœªå‘½åæ–‡ä»¶ (4)"></p><p>å®é™…å¯èƒ½å‡ºç°è½¯åˆ†å‰çš„æƒ…å†µï¼šç»™æŸäº›ç›®å‰åè®®ä¸­æ²¡æœ‰è§„å®šçš„åŸŸå¢åŠ ä¸€äº›æ–°çš„å«ä¹‰ï¼Œèµ‹äºˆæ–°çš„è§„åˆ™ï¼Œä¾‹coinbaseåŸŸï¼Œæœ‰æ—¶ä¼šæŠŠcoinbaseåŸŸçš„å‰å…«ä¸ªå­—èŠ‚ä¹Ÿä½œä¸ºextra nonceï¼Œä½¿æœç´¢ç©ºé—´ä»$2^{32}$å˜æˆ$2^{96}$ï¼Œä½œä¸ºæŒ–çŸ¿éš¾åº¦ï¼Œå‰©ä¸‹çš„å­—èŠ‚å¦‚ä½•ç”¨ï¼Ÿæœ‰äººæå‡ºä½œä¸ºUTXOçš„æ ¹å“ˆå¸Œå€¼ã€‚</p><p>æ¯”ç‰¹å¸å†å²ä¸Šä¸€ä¸ªæ¯”è¾ƒè‘—åçš„è½¯åˆ†å‰çš„ä¾‹å­æ˜¯P2SH(Pay to Script Hash)ï¼Œè¿™ä¸ªåŠŸèƒ½åœ¨æœ€åˆçš„æ¯”ç‰¹å¸ç‰ˆæœ¬ä¸Šæ˜¯æ²¡æœ‰çš„ï¼Œæ˜¯é€šè¿‡è½¯åˆ†å‰çš„æ–¹æ³•åŠ è¿›å»çš„ã€‚</p><h3 id="10ã€é—®ç­”"><a href="#10ã€é—®ç­”" class="headerlink" title="10ã€é—®ç­”"></a>10ã€é—®ç­”</h3><h5 id="Q1ï¼šè½¬è´¦äº¤æ˜“æ—¶ï¼Œæ¥æ”¶è€…ä¸åœ¨çº¿æ€ä¹ˆåŠ"><a href="#Q1ï¼šè½¬è´¦äº¤æ˜“æ—¶ï¼Œæ¥æ”¶è€…ä¸åœ¨çº¿æ€ä¹ˆåŠ" class="headerlink" title="Q1ï¼šè½¬è´¦äº¤æ˜“æ—¶ï¼Œæ¥æ”¶è€…ä¸åœ¨çº¿æ€ä¹ˆåŠ"></a>Q1ï¼šè½¬è´¦äº¤æ˜“æ—¶ï¼Œæ¥æ”¶è€…ä¸åœ¨çº¿æ€ä¹ˆåŠ</h5><p>ä¸éœ€è¦æ¥æ”¶è€…åœ¨çº¿ï¼Œè½¬è´¦äº¤æ˜“åªæ˜¯åœ¨åŒºå—é“¾ä¸Šè®°å½•æŠŠè‡ªå·±è´¦æˆ·ä¸Šçš„æ¯”ç‰¹å¸è½¬è¿‡å»ï¼Œæ˜¯ä¸æ˜¯å½“æ—¶è¿åœ¨æ¯”ç‰¹å¸ç½‘ç»œæ˜¯æ²¡å…³ç³»çš„ã€‚</p><h5 id="Q2ï¼šå‡è®¾æŸä¸ªå…¨èŠ‚ç‚¹æ”¶åˆ°äº†æŸä¸ªè½¬è´¦äº¤æ˜“ï¼Œæœ‰æ²¡æœ‰å¯èƒ½è½¬è´¦äº¤æ˜“ä¸­æ¥æ”¶è€…çš„æ”¶æ¬¾åœ°å€æ˜¯è¿™ä¸ªèŠ‚ç‚¹ä»¥å‰ä»æ¥æ²¡æœ‰å¬è¯´è¿‡çš„"><a href="#Q2ï¼šå‡è®¾æŸä¸ªå…¨èŠ‚ç‚¹æ”¶åˆ°äº†æŸä¸ªè½¬è´¦äº¤æ˜“ï¼Œæœ‰æ²¡æœ‰å¯èƒ½è½¬è´¦äº¤æ˜“ä¸­æ¥æ”¶è€…çš„æ”¶æ¬¾åœ°å€æ˜¯è¿™ä¸ªèŠ‚ç‚¹ä»¥å‰ä»æ¥æ²¡æœ‰å¬è¯´è¿‡çš„" class="headerlink" title="Q2ï¼šå‡è®¾æŸä¸ªå…¨èŠ‚ç‚¹æ”¶åˆ°äº†æŸä¸ªè½¬è´¦äº¤æ˜“ï¼Œæœ‰æ²¡æœ‰å¯èƒ½è½¬è´¦äº¤æ˜“ä¸­æ¥æ”¶è€…çš„æ”¶æ¬¾åœ°å€æ˜¯è¿™ä¸ªèŠ‚ç‚¹ä»¥å‰ä»æ¥æ²¡æœ‰å¬è¯´è¿‡çš„"></a>Q2ï¼šå‡è®¾æŸä¸ªå…¨èŠ‚ç‚¹æ”¶åˆ°äº†æŸä¸ªè½¬è´¦äº¤æ˜“ï¼Œæœ‰æ²¡æœ‰å¯èƒ½è½¬è´¦äº¤æ˜“ä¸­æ¥æ”¶è€…çš„æ”¶æ¬¾åœ°å€æ˜¯è¿™ä¸ªèŠ‚ç‚¹ä»¥å‰ä»æ¥æ²¡æœ‰å¬è¯´è¿‡çš„</h5><p>å¯èƒ½çš„ï¼Œæ¯”ç‰¹å¸è´¦æˆ·åœ¨åˆ›å»ºçš„æ—¶å€™æ˜¯ä¸éœ€è¦é€šçŸ¥å…¶ä»–äººçš„ï¼Œåœ¨æœ¬åœ°äº§ç”Ÿå…¬ç§é’¥å¯¹å°±å¯ä»¥äº†ï¼Œåªæœ‰åœ¨ä»¥åäº§ç”Ÿæ”¶æ¬¾åœ°å€ï¼Œç¬¬ä¸€æ¬¡æ”¶åˆ°é’±ï¼Œå…¶ä»–èŠ‚ç‚¹æ‰çŸ¥é“è¿™ä¸ªè´¦æˆ·çš„å­˜åœ¨ã€‚</p><h5 id="Q3ï¼šè´¦æˆ·çš„ç§é’¥ä¸¢å¤±äº†æ€ä¹ˆåŠ"><a href="#Q3ï¼šè´¦æˆ·çš„ç§é’¥ä¸¢å¤±äº†æ€ä¹ˆåŠ" class="headerlink" title="Q3ï¼šè´¦æˆ·çš„ç§é’¥ä¸¢å¤±äº†æ€ä¹ˆåŠ"></a>Q3ï¼šè´¦æˆ·çš„ç§é’¥ä¸¢å¤±äº†æ€ä¹ˆåŠ</h5><p>è´¦æˆ·ä¸Šçš„é’±å˜æˆäº†æ­»é’±ï¼Œæ°¸è¿œå–ä¸å‡ºæ¥ï¼Œä½†æ˜¯æœ‰äº›åŠ å¯†è´§å¸çš„äº¤æ˜“æ‰€æ˜¯ä¸­å¿ƒåŒ–çš„æœºæ„ï¼Œåœ¨äº¤æ˜“æ‰€å¼€åŠè´¦æˆ·ä¸€èˆ¬æ¥è¯´æ˜¯éœ€è¦æä¾›èº«ä»½è¯æ˜çš„ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼ŒæŠŠæ¯”ç‰¹å¸æ”¾åœ¨äº¤æ˜“æ‰€ï¼Œç§é’¥æ˜¯äº¤æ˜“æ‰€ä¿ç®¡çš„ï¼Œç™»å½•äº¤æ˜“æ‰€ç±»ä¼¼ç™»å½•é“¶è¡Œï¼Œè¿™ç§æƒ…å†µä¸‹ä¸¢å¤±äº†å¯†ç å¯ä»¥è·Ÿäº¤æ˜“æ‰€ç»ƒä¹ ï¼Œé€šè¿‡èº«ä»½éªŒè¯é‡ç½®å¯†ç ï¼ˆä¸æ˜¯å¯†é’¥ï¼‰ï¼Œæœ‰äº›åœ¨çº¿é’±åŒ…ä¹Ÿæœ‰ä¿ç®¡ç§é’¥çš„åŠŸèƒ½ï¼ˆMt.Goxï¼‰ã€‚</p><h5 id="Q4ï¼šç§é’¥æ³„éœ²äº†æ€ä¹ˆåŠ"><a href="#Q4ï¼šç§é’¥æ³„éœ²äº†æ€ä¹ˆåŠ" class="headerlink" title="Q4ï¼šç§é’¥æ³„éœ²äº†æ€ä¹ˆåŠ"></a>Q4ï¼šç§é’¥æ³„éœ²äº†æ€ä¹ˆåŠ</h5><p>å°½å¿«æŠŠè´¦æˆ·ä¸Šçš„é’±è½¬ç§»åˆ°å¦ä¸€ä¸ªå®‰å…¨è´¦æˆ·ä¸Šã€‚</p><h5 id="Q5ï¼šè½¬è´¦æ—¶å†™é”™äº†åœ°å€æ€ä¹ˆåŠ"><a href="#Q5ï¼šè½¬è´¦æ—¶å†™é”™äº†åœ°å€æ€ä¹ˆåŠ" class="headerlink" title="Q5ï¼šè½¬è´¦æ—¶å†™é”™äº†åœ°å€æ€ä¹ˆåŠ"></a>Q5ï¼šè½¬è´¦æ—¶å†™é”™äº†åœ°å€æ€ä¹ˆåŠ</h5><p>æ²¡æœ‰åŠæ³•å–æ¶ˆå·²ç»å‘å¸ƒçš„äº¤æ˜“ï¼Œè½¬åˆ°åˆ«äººçš„åœ°å€æˆ–è€…ä¸å­˜åœ¨çš„åœ°å€éƒ½æ— æ³•æ‹¿å›æ¯”ç‰¹å¸ï¼Œå¦‚æœè½¬åˆ°ä¸å­˜åœ¨çš„åœ°å€ï¼Œå…¨èŠ‚ç‚¹ä¼šæ°¸ä¹…çš„æŠŠè¿™ä¸ªåœ°å€ä¿å­˜åœ¨UTXOé‡Œï¼Œè¿™å¯¹å…¨èŠ‚ç‚¹æ˜¯ä¸å‹å¥½çš„ã€‚</p><h5 id="Q6ï¼šOP-RETURNæ˜¯æ— æ¡ä»¶è¿”å›é”™è¯¯ï¼Œä¸ºä»€ä¹ˆèƒ½å†™åœ¨åŒºå—é“¾é‡Œ"><a href="#Q6ï¼šOP-RETURNæ˜¯æ— æ¡ä»¶è¿”å›é”™è¯¯ï¼Œä¸ºä»€ä¹ˆèƒ½å†™åœ¨åŒºå—é“¾é‡Œ" class="headerlink" title="Q6ï¼šOP_RETURNæ˜¯æ— æ¡ä»¶è¿”å›é”™è¯¯ï¼Œä¸ºä»€ä¹ˆèƒ½å†™åœ¨åŒºå—é“¾é‡Œ"></a>Q6ï¼šOP_RETURNæ˜¯æ— æ¡ä»¶è¿”å›é”™è¯¯ï¼Œä¸ºä»€ä¹ˆèƒ½å†™åœ¨åŒºå—é“¾é‡Œ</h5><p>è¿›è¡ŒéªŒè¯æ—¶ï¼Œæ˜¯å½“å‰äº¤æ˜“çš„è¾“å…¥è„šæœ¬å’Œå¸çš„æ¥æºçš„è¾“å‡ºè„šæœ¬æ‹¼åœ¨ä¸€èµ·çœ‹èƒ½ä¸èƒ½é¡ºåˆ©æ‰§è¡Œï¼Œè¿™ä¸ªæ‰§è¡Œè¿‡ç¨‹æ˜¯ä¸å¯ä»¥å‘ç”Ÿé”™è¯¯çš„ï¼Œå¦‚æœæŠ›å‡ºé”™è¯¯å°±ä¸æ˜¯åˆæ³•äº¤æ˜“ï¼Œä½†OP_RETURNæ˜¯å†™åœ¨å½“å‰äº¤æ˜“çš„è¾“å‡ºè„šæœ¬ï¼Œæ‰€ä»¥éªŒè¯å½“å‰äº¤æ˜“åˆæ³•æ€§æ—¶ï¼Œä¸ä¼šæ‰§è¡Œè¿™ä¸ªè¯­å¥ã€‚æœ‰äººæƒ³èŠ±è¿™ç¬”é’±æ—¶æ‰ä¼šæ‰§è¡Œåˆ°è¿™ä¸ªäº¤æ˜“çš„è¾“å‡ºè„šæœ¬ã€‚</p><p>&#x3D;&#x3D;é‚£ä¹ˆè¿™ä¸ªè¾“å‡ºè„šæœ¬ä¸ä¸‹ä¸€ä¸ªè¾“å…¥è„šæœ¬æ‹¼å’Œæ—¶ä¼šéªŒè¯ä¸é€šè¿‡å—&#x3D;&#x3D;</p><h5 id="Q7ï¼šä¼šä¸ä¼šæœ‰çš„çŸ¿å·¥å·ç­”æ¡ˆï¼ŒæŠŠå…¶ä»–çŸ¿å·¥æ‰¾åˆ°çš„nonceå½“æˆè‡ªå·±çš„nonceå‘å¸ƒå‡ºå»ï¼ˆæ€ä¹ˆçŸ¥é“æ˜¯å“ªä¸ªçŸ¿å·¥æœ€å…ˆæ‰¾åˆ°nonceï¼‰"><a href="#Q7ï¼šä¼šä¸ä¼šæœ‰çš„çŸ¿å·¥å·ç­”æ¡ˆï¼ŒæŠŠå…¶ä»–çŸ¿å·¥æ‰¾åˆ°çš„nonceå½“æˆè‡ªå·±çš„nonceå‘å¸ƒå‡ºå»ï¼ˆæ€ä¹ˆçŸ¥é“æ˜¯å“ªä¸ªçŸ¿å·¥æœ€å…ˆæ‰¾åˆ°nonceï¼‰" class="headerlink" title="Q7ï¼šä¼šä¸ä¼šæœ‰çš„çŸ¿å·¥å·ç­”æ¡ˆï¼ŒæŠŠå…¶ä»–çŸ¿å·¥æ‰¾åˆ°çš„nonceå½“æˆè‡ªå·±çš„nonceå‘å¸ƒå‡ºå»ï¼ˆæ€ä¹ˆçŸ¥é“æ˜¯å“ªä¸ªçŸ¿å·¥æœ€å…ˆæ‰¾åˆ°nonceï¼‰"></a>Q7ï¼šä¼šä¸ä¼šæœ‰çš„çŸ¿å·¥å·ç­”æ¡ˆï¼ŒæŠŠå…¶ä»–çŸ¿å·¥æ‰¾åˆ°çš„nonceå½“æˆè‡ªå·±çš„nonceå‘å¸ƒå‡ºå»ï¼ˆæ€ä¹ˆçŸ¥é“æ˜¯å“ªä¸ªçŸ¿å·¥æœ€å…ˆæ‰¾åˆ°nonceï¼‰</h5><p>å‘å¸ƒçš„åŒºå—é‡Œæœ‰coinbase transactionï¼Œé‡Œé¢æœ‰æ”¶æ¬¾äººåœ°å€ï¼Œæ˜¯æŒ–åˆ°çŸ¿çš„çŸ¿å·¥çš„åœ°å€ï¼Œå·ç­”æ¡ˆè¦æŠŠè¿™ä¸ªåœ°å€æ¢æˆè‡ªå·±çš„åœ°å€ï¼Œä¸€æ—¦æ¢æ‰ï¼Œcoinbase transactionçš„å†…å®¹å°±å‘ç”Ÿäº†æ”¹å˜ï¼Œè¿™æ ·ä¼šå¯¼è‡´è¿™ä¸ªmerkle treeçš„æ ¹hashä¼šå˜åŒ–ï¼Œä¼šå¯¼è‡´block headerçš„å†…å®¹å‘ç”Ÿå˜åŒ–ï¼ŒåŸæ¥æ‰¾åˆ°çš„nonceå°±ä½œåºŸäº†ï¼Œæ‰€ä»¥ä¸å¯èƒ½å·ç­”æ¡ˆã€‚</p><h5 id="Q8ï¼šäº‹å…ˆæ€ä¹ˆçŸ¥é“äº¤æ˜“è´¹è¦ç»™å“ªä¸ªçŸ¿å·¥"><a href="#Q8ï¼šäº‹å…ˆæ€ä¹ˆçŸ¥é“äº¤æ˜“è´¹è¦ç»™å“ªä¸ªçŸ¿å·¥" class="headerlink" title="Q8ï¼šäº‹å…ˆæ€ä¹ˆçŸ¥é“äº¤æ˜“è´¹è¦ç»™å“ªä¸ªçŸ¿å·¥"></a>Q8ï¼šäº‹å…ˆæ€ä¹ˆçŸ¥é“äº¤æ˜“è´¹è¦ç»™å“ªä¸ªçŸ¿å·¥</h5><p>äº‹å…ˆä¸éœ€è¦çŸ¥é“å“ªä¸ªçŸ¿å·¥ä¼šå¾—åˆ°äº¤æ˜“è´¹ï¼Œäº¤æ˜“è´¹çš„è®¡ç®—æ˜¯<code>total inputs - total outputs</code>ï¼ŒçŸ¿å·¥æŒ–åˆ°çŸ¿åï¼Œå¯ä»¥æŠŠåŒºå—é‡ŒåŒ…å«çš„äº¤æ˜“çš„å·®é¢éƒ½æ”¶é›†èµ·æ¥ï¼Œä½œä¸ºè‡ªå·±çš„äº¤æ˜“è´¹ã€‚</p><h3 id="11ã€æ¯”ç‰¹å¸çš„åŒ¿åæ€§"><a href="#11ã€æ¯”ç‰¹å¸çš„åŒ¿åæ€§" class="headerlink" title="11ã€æ¯”ç‰¹å¸çš„åŒ¿åæ€§"></a>11ã€æ¯”ç‰¹å¸çš„åŒ¿åæ€§</h3><p>æœ‰å¯èƒ½ç ´åæ¯”ç‰¹å¸åŒ¿åæ€§ï¼š</p><ul><li>åœ°å€è´¦æˆ·å¯èƒ½è¢«å…³è”</li><li>æ¯”ç‰¹å¸è·Ÿå®ä½“ä¸–ç•Œå‘ç”Ÿè”ç³»æ—¶ï¼Œå¯èƒ½æ³„éœ²çœŸå®èº«ä»½</li><li>ç”¨æ¯”ç‰¹å¸åšæ”¯ä»˜</li></ul><p>ç½‘ç»œå±‚çš„åŒ¿åæ€§ï¼šTORï¼ˆå¤šè·¯å¾„è½¬å‘&#x2F;æ´‹è‘±è·¯ç”±ï¼‰</p><p>åº”ç”¨å±‚çš„åŒ¿åæ€§ï¼šcoin mixingï¼ˆäº¤æ˜“æ‰€ã€åœ¨çº¿é’±åŒ…ï¼‰</p><p>ä¸å¯ç¯¡æ”¹æ€§å¯¹éšç§ä¿æŠ¤æ˜¯ç¾éš¾æ€§çš„</p><h4 id="é›¶çŸ¥è¯†è¯æ˜"><a href="#é›¶çŸ¥è¯†è¯æ˜" class="headerlink" title="é›¶çŸ¥è¯†è¯æ˜"></a>é›¶çŸ¥è¯†è¯æ˜</h4><p>æ¦‚å¿µï¼šä¸€æ–¹ï¼ˆè¯æ˜è€…ï¼‰å‘å¦ä¸€æ–¹ï¼ˆéªŒè¯è€…ï¼‰è¯æ˜ä¸€ä¸ªé™ˆè¿°æ˜¯æ­£ç¡®çš„ï¼Œè€Œæ— éœ€é€éœ²é™¤è¯¥é™ˆè¿°æ˜¯äº‰å–çš„å¤–çš„ä»»ä½•ä¿¡æ¯ã€‚</p><p>æ•°å­¦åŸºç¡€ï¼šåŒæ€éšè—</p><ul><li>å¦‚æœx,yä¸åŒï¼Œé‚£ä¹ˆå®ƒä»¬çš„åŠ å¯†å‡½æ•°å€¼E(x)å’ŒE(y)ä¹Ÿä¸ç›¸åŒï¼ˆåº”ä¸ä¼šå‡ºç°ç¢°æ’ï¼‰</li><li>ç»™å®šE(x)çš„å€¼ï¼Œå¾ˆéš¾åæ¨å‡ºxçš„å€¼</li><li>ç»™å®šE(x)å’ŒE(y)çš„å€¼ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°è®¡ç®—å‡ºæŸäº›å…³äºx,yçš„åŠ å¯†å‡½æ•°å€¼<ul><li>åŒæ€åŠ æ³•ï¼šé€šè¿‡E(x)å’ŒE(y)è®¡ç®—å‡ºE(x+y)çš„å€¼</li><li>åŒæ€ä¹˜æ³•ï¼šé€šè¿‡E(x)å’ŒE(y)è®¡ç®—å‡ºE(xy)çš„å€¼</li><li>æ‰©å±•åˆ°å¤šé¡¹å¼</li></ul></li></ul><p>ä¾‹å­ï¼šAliceæƒ³è¦å‘Bobè¯æ˜ä»–çŸ¥é“ä¸€ç»„æ•°ä½¿å¾—x+y&#x3D;7ï¼ŒåŒæ—¶ä¸è®©BobçŸ¥é“xå’Œyçš„å…·ä½“æ•°å€¼</p><ul><li><p>ç®€å•çš„ç‰ˆæœ¬</p><ul><li><p>AliceæŠŠE(x)å’ŒE(y)çš„æ•°å€¼å‘ç»™Bob</p></li><li><p>Bobé€šè¿‡æ”¶åˆ°çš„E(x)å’ŒE(y)è®¡ç®—å‡ºE(x+y)çš„å€¼</p></li><li><p>BobåŒæ—¶è®¡ç®—E(7)çš„å€¼ï¼Œå¦‚æœE(x+y) &#x3D; E(7)ï¼Œé‚£ä¹ˆéªŒè¯é€šè¿‡ï¼Œå¦åˆ™éªŒè¯å¤±è´¥</p><blockquote><p>è™½ç„¶Bobæ— æ³•ä»E(x)çŸ¥é“xçš„å€¼ï¼Œä½†æ˜¯å¯ä»¥éå†xçš„å„ç§å–å€¼ï¼Œæ‰€ä»¥åœ¨å¤æ‚åœºæ™¯ä¸‹ï¼ŒAliceå°†å€¼ç»™Bobä¹‹å‰ï¼Œè¦åšä¸€äº›éšæœºåŒ–å¤„ç†ï¼Œä½†è¦ä¿è¯x+yä¾ç„¶ä¸å˜ã€‚</p></blockquote></li></ul></li></ul><p>ç›²ç­¾</p><ul><li>ç”¨æˆ·Aæä¾›SerialNumï¼Œé“¶è¡Œåœ¨ä¸çŸ¥é“SerialNumçš„æƒ…å†µä¸‹è¿”å›ç­¾åTokenï¼Œå‡å°‘Açš„å­˜æ¬¾</li><li>ç”¨æˆ·AæŠŠSerialNumå’ŒTokenäº¤ç»™Bå®Œæˆäº¤æ˜“</li><li>ç”¨æˆ·Bæ‹¿SerialNumå’ŒTokenç»™é“¶è¡ŒéªŒè¯ï¼Œé“¶è¡ŒéªŒè¯é€šè¿‡ï¼Œå¢åŠ Bçš„å­˜æ¬¾</li><li>é“¶è¡Œæ— æ³•æŠŠAå’ŒBè”ç³»èµ·æ¥</li><li>ä¸­å¿ƒåŒ–</li></ul><p>é›¶å¸å’Œé›¶é’</p><ul><li>é›¶å¸å’Œé›¶é’åœ¨åè®®å±‚å°±èåˆäº†åŒ¿ååŒ–å¤„ç†ï¼Œå…¶åŒ¿åå±æ€§æ¥è‡ªå¯†ç ä¿è¯</li><li>é›¶å¸(zerocoin)ç³»ç»Ÿä¸­å­˜åœ¨åŸºç¡€å¸å’Œé›¶å¸ï¼Œé€šè¿‡åŸºç¡€å¸å’Œé›¶å¸çš„æ¥å›è½¬æ¢ï¼Œæ¶ˆé™¤æ—§åœ°å€å’Œæ–°åœ°å€çš„å…³è”æ€§ï¼Œå…¶åŸç†ç±»ä¼¼äºæ··å¸æœåŠ¡</li><li>é›¶é’(zerocash)ç³»ç»Ÿä½¿ç”¨zk-SNARKsåè®®ï¼Œä¸ä¾èµ–ä¸€ç§åŸºç¡€å¸ï¼ŒåŒºå—é“¾ä¸­åªè®°å½•äº¤æ˜“çš„å­˜åœ¨æ€§å’ŒçŸ¿å·¥ç”¨æ¥éªŒè¯ç³»ç»Ÿæ­£å¸¸è¿è¡Œæ‰€éœ€è¦å…³é”®å±æ€§çš„è¯æ˜ã€‚åŒºå—é“¾ä¸Šæ—¢ä¸æ˜¾ç¤ºäº¤æ˜“åœ°å€ä¹Ÿä¸æ˜¾ç¤ºäº¤æ˜“é‡‘é¢ï¼Œæ‰€æœ‰äº¤æ˜“é€šè¿‡é›¶çŸ¥è¯†éªŒè¯çš„æ–¹å¼è¿›è¡Œ</li></ul><h3 id="12ã€æ¯”ç‰¹å¸å¼•å‘çš„æ€è€ƒ"><a href="#12ã€æ¯”ç‰¹å¸å¼•å‘çš„æ€è€ƒ" class="headerlink" title="12ã€æ¯”ç‰¹å¸å¼•å‘çš„æ€è€ƒ"></a>12ã€æ¯”ç‰¹å¸å¼•å‘çš„æ€è€ƒ</h3><p><strong>Q1ï¼šæŒ‡é’ˆä¿å­˜çš„æ˜¯æœ¬åœ°å†…å­˜çš„åœ°å€ï¼Œåªæ˜¯åœ¨æœ¬åœ°è®¡ç®—æœºä¸Šæ‰æœ‰æ„ä¹‰ï¼Œåœ¨å…¶ä»–è®¡ç®—æœºä¸Šå°±æ²¡æœ‰æ„ä¹‰äº†ï¼Œé‚£ä¹ˆåœ¨å‘é€åŒºå—çš„æ—¶å€™ï¼Œå“ˆå¸ŒæŒ‡é’ˆæ˜¯æ€ä¹ˆé€šè¿‡ç½‘ç»œä¼ è¾“</strong></p><p>å“ˆå¸ŒæŒ‡é’ˆåªæ˜¯ä¸€ç§å½¢è±¡çš„è¯´æ³•ï¼Œå®é™…ç”¨çš„æ—¶å€™åªæœ‰å“ˆå¸Œæ²¡æœ‰æŒ‡é’ˆï¼Œå…¨èŠ‚ç‚¹ä¸€èˆ¬æ˜¯æŠŠè¿™äº›åŒºå—å­˜å‚¨åœ¨(key,value)æ•°æ®åº“é‡Œï¼Œkeyæ˜¯åŒºå—çš„å“ˆå¸Œï¼Œvalueæ˜¯åŒºå—çš„å†…å®¹ï¼Œä¸€ä¸ªå¸¸ç”¨çš„(key,value)æ•°æ®åº“æ˜¯level DBï¼ŒåŒºå—é“¾è¿™ç§é“¾è¡¨ç»“æ„å®é™…ä¸Šæ˜¯åœ¨level DBé‡Œé¢ç”¨å“ˆå¸ŒæŒ‡é’ˆä¸²èµ·æ¥çš„ï¼Œåªè¦æŒæ¡äº†æœ€åä¸€ä¸ªåŒºå—çš„å“ˆå¸ŒæŒ‡é’ˆï¼Œå°±å¯ä»¥é€šè¿‡level DBæ¥æŸ¥æ‰¾keyå¯¹åº”çš„valueå°±å¯ä»¥æŠŠæœ€åä¸€ä¸ªåŒºå—çš„å†…å®¹å–å‡ºæ¥ï¼Œè¿™ä¸ªåŒºå—çš„å—å¤´åˆæœ‰æŒ‡å‘å‰ä¸€ä¸ªåŒºå—çš„å“ˆå¸ŒæŒ‡é’ˆï¼Œä¸€æ­¥æ­¥å¾€å‰æ‰¾ï¼Œæœ€ç»ˆèƒ½æŠŠæ•´ä¸ªåŒºå—é“¾æ‰¾å‡ºæ¥ã€‚</p><p>æœ‰äº›èŠ‚ç‚¹æ²¡æœ‰ä¿å­˜å®Œæ•´çš„åŒºå—é“¾çš„ä¿¡æ¯ï¼Œåªä¿å­˜äº†æœ€è¿‘çš„å‡ åƒä¸ªåŒºå—ï¼Œå¦‚æœéœ€è¦ç”¨åˆ°å‰é¢åŒºå—çš„ä¿¡æ¯ï¼Œå¯ä»¥é—®å…¶ä»–çš„å…¨èŠ‚ç‚¹è¦ï¼Œå“ˆå¸ŒæŒ‡é’ˆçš„æ€§è´¨ä¿è¯äº†æ•´ä¸ªåŒºå—çš„å†…å®¹æ˜¯ä¸å¯ç¯¡æ”¹çš„ã€‚</p><p><strong>Q2ï¼šåŒºå—æ‹ï¼šnä¸ªäººä¿å­˜ç§é’¥çš„nä¸ªéƒ¨åˆ†</strong></p><p>ä»»ä½•ä¸€äººä¸¢å¤±ï¼Œéƒ½å¯èƒ½å¯¼è‡´æ— æ³•å–å‡ºé’±ã€‚</p><p>æˆªæ–­ç§é’¥çš„åšæ³•ä¼šé™ä½è´¦æˆ·çš„å®‰å…¨æ€§ï¼Œæ¯”ç‰¹å¸ç³»ç»Ÿä¸­æ¯ä¸ªè´¦æˆ·çš„å®‰å…¨æ€§ä¸æ‰€ç”¨çš„ç§é’¥çš„é•¿åº¦æ˜¯ç›¸å…³çš„ã€‚</p><p>å¤šä¸ªäººçš„å…±äº«è´¦æˆ·ä¸å»ºè®®ç”¨å…±äº«ç§é’¥çš„åŠæ³•ï¼Œå»ºè®®ç”¨å¤šé‡ç­¾åã€‚</p><p><strong>Q3ï¼šç†è®ºä¸Šï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿä¸­å–å¾—å…±è¯†æ˜¯ä¸å¯èƒ½çš„ï¼Œæ¯”ç‰¹å¸ç³»ç»Ÿå¦‚ä½•ç»•è¿‡åˆ†å¸ƒå¼å…±è¯†ä¸­çš„é‚£äº›ä¸å¯èƒ½ç»“è®ºã€‚</strong></p><p>ä¸¥æ ¼æ¥è¯´ï¼Œæ¯”ç‰¹å¸æ²¡æœ‰å–å¾—çœŸæ­£çš„å…±è¯†ï¼Œå› ä¸ºå–å¾—çš„å…±è¯†éšæ—¶å¯èƒ½è¢«æ¨ç¿»ï¼Œä¾‹å¦‚åˆ†å‰æ”»å‡»ï¼Œä½†æ˜¯ç†è®ºä¸Šçš„ä¸å¯èƒ½ç»“è®ºï¼Œå®é™…ä¸­ä¸ä¸€å®šé€‚ç”¨ï¼Œç†è®ºå¯èƒ½åªé’ˆå¯¹æŸç§ç‰¹å®šçš„æ¨¡å‹ã€‚</p><p><strong>Q4ï¼šæ¯”ç‰¹å¸çš„ç¨€ç¼ºæ€§</strong></p><p>æ€»é‡å›ºå®š&#x2F;ç¨€ç¼ºçš„ä¸œè¥¿å…¶å®æ˜¯ä¸é€‚åˆè´§å¸çš„ï¼Œä¸€ä¸ªå¥½çš„è´§å¸è¦æœ‰é€šè´§è†¨èƒ€çš„åŠŸèƒ½ã€‚</p><p><strong>Q5ï¼šé‡å­è®¡ç®—</strong></p><p>é‡å­è®¡ç®—ç¦»å®ç”¨è¿˜å·®å¾—å¾ˆè¿œï¼›æ¯”ç‰¹å¸ä¸­å¹¶æ²¡æœ‰æŠŠè´¦æˆ·çš„å…¬é’¥ç›´æ¥æš´éœ²å‡ºæ¥ï¼Œè€Œæ˜¯ç”¨å…¬é’¥å–hashåå¾—åˆ°ä¸€ä¸ªåœ°å€ï¼ˆå–hashä¸åŒäºåŠ å¯†ï¼Œå¯èƒ½é€ æˆä¿¡æ¯çš„æŸå¤±ï¼Œhashå‡½æ•°ä¸€èˆ¬æ˜¯ä¸å¯é€†çš„ï¼‰ï¼›</p><blockquote><p>æœªå®Œå¾…ç»­ã€‚ã€‚ã€‚ã€‚</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>åŒºå—é“¾</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ¯”ç‰¹å¸</tag>
      
      <tag>ä»¥å¤ªåŠ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç®—æ³•è®¾è®¡</title>
    <link href="/blog/2022/09/01/%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/"/>
    <url>/blog/2022/09/01/%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/</url>
    
    <content type="html"><![CDATA[<h1 id="ç®—æ³•è®¾è®¡"><a href="#ç®—æ³•è®¾è®¡" class="headerlink" title="ç®—æ³•è®¾è®¡"></a>ç®—æ³•è®¾è®¡</h1><p><strong>æ•™å­¦å†…å®¹</strong></p><ul><li><p>NPéš¾é—®é¢˜çš„è¿‘ä¼¼ç®—æ³•ï¼šNPéš¾é—®é¢˜æ²¡æœ‰å¤šé¡¹å¼æ—¶é—´ç²¾ç¡®ç®—æ³•ï¼Œé™¤éP&#x3D;NPï¼Œå¦‚ä½•åœ¨å¤šé¡¹å¼æ—¶é—´å†…å¯»æ‰¾è¿‘ä¼¼æœ€ä¼˜è§£ã€‚</p></li><li><p>åœ¨çº¿ç®—æ³•ï¼šè¾“å…¥ç¼ºä¹å…ˆéªŒï¼Œéšç€æ—¶é—´çš„æ¨ç§»åˆ†åˆ«åœ¨çº¿åˆ°è¾¾ã€‚å¦‚ä½•è®¾è®¡ç®—æ³•ï¼Œä½¿æ€§èƒ½å’Œäº‹å…ˆæ‹¥æœ‰å…¨éƒ¨ä¿¡æ¯çš„ç®—æ³•ç›¸è¿‘ã€‚</p></li><li><p>æµå¼ç®—æ³•ï¼šè§£å†³åœ¨ä¸¥é‡å­˜å‚¨é™åˆ¶ä¸‹çš„å¤§å‹æ•°æ®é›†ä¸Šçš„é—®é¢˜ï¼Œä¾‹å¦‚åœ¨é«˜é€Ÿç½‘ç»œç¯å¢ƒä¸­ï¼Œ</p></li><li><p>åšå¼ˆè®ºç®—æ³•ï¼šè¾“å…¥ç”±è®¸å¤šä¸åŒåˆ©ç›Šä¸åŒçš„å‚ä¸è€…æ§åˆ¶ï¼Œ</p></li></ul><p><strong>è¯¾ç¨‹ç›®æ ‡</strong></p><ul><li><p>å·©å›ºåˆ©ç”¨è®¡ç®—æ€ç»´æ±‚è§£å¤æ‚é—®é¢˜çš„èƒ½åŠ›ï¼ŒæŒæ¡å®šé‡çš„é—®é¢˜åˆ†æã€è®¾è®¡å’Œç¨‹åºå®ç°çš„æ–¹æ³•ã€‚</p></li><li><p>æŒæ¡åŸºæœ¬çš„ç®—æ³•å®ç°æŠ€èƒ½ï¼Œè¿›ä¸€æ­¥å­¦ä¹ æŒæ¡ç®—æ³•å¼€å‘æ–¹æ³•ã€‚</p></li><li><p>æŒæ¡ä»å…·ä½“é—®é¢˜å‡ºå‘ç‹¬ç«‹æŸ¥é˜…å„ç§é€”å¾„çš„èµ„æ–™æ¥åˆ†æè§£å†³é—®é¢˜çš„èƒ½åŠ›ã€‚</p></li><li><p>æŒæ¡åˆ†æå’Œå»ºç«‹è®¡ç®—æœºé¢†åŸŸçš„é—®é¢˜æ¨¡å‹çš„èƒ½åŠ›ï¼Œ æé«˜æŒ‰ç…§è§„èŒƒç¼–å†™ç¨‹åºï¼ŒåŸ¹å…»è‰¯å¥½çš„ç¨‹åºè®¾è®¡ä¹ æƒ¯ã€‚</p></li></ul><p><strong>ç§‘å­¦èŒƒå¼</strong></p><ul><li>å®éªŒå½’çº³ï¼šäººç±»æ—©æœŸçš„ç§‘å­¦å®è·µï¼Œä»¥è®°å½•æè¿°è‡ªç„¶ç°è±¡ä¸ºä¸»è¦ç‰¹å¾ï¼Œç§°ä¸ºâ€œå®éªŒç§‘å­¦â€ï¼ˆç¬¬ä¸€èŒƒå¼ï¼‰ </li><li>æ¨¡å‹æ¨æ¼”ï¼šç§‘å­¦å®¶å°è¯•ç®€åŒ–æ¨¡å‹ï¼Œå»æ‰å¹²æ‰°ï¼Œç•™ä¸‹å…³é”®å› ç´ ï¼Œé€šè¿‡æ¼”ç®—è¿›è¡Œå½’çº³æ€»ç»“ï¼ˆç¬¬äºŒèŒƒå¼ï¼‰ </li><li>ä»¿çœŸæ¨¡æ‹Ÿï¼šéšç€è®¡ç®—æœºä»¿çœŸè¶Šæ¥è¶Šå¤šæˆç†Ÿï¼Œå¯ä»¥é€æ¸å–ä»£å®éªŒï¼Œæˆä¸ºç§‘ç ”çš„å¸¸è§„æ–¹æ³•ï¼ˆç¬¬ä¸‰èŒƒå¼ï¼‰ </li><li>æ•°æ®å¯†é›†å‹ç§‘å­¦å‘ç°ï¼šéšç€æ•°æ®çš„çˆ†ç‚¸æ€§å¢é•¿ï¼Œè®¡ç®—æœºå°†ä¸ä»…ä»…èƒ½åšæ¨¡æ‹Ÿä»¿çœŸï¼Œè¿˜èƒ½è¿›è¡Œåˆ†ææ€»ç»“ï¼Œå¾—åˆ°ç†è®ºï¼ˆç¬¬å››èŒƒå¼ï¼‰</li></ul><h3 id="1ã€ä¸‰æŸ±-x2F-å››æŸ±æ±‰è¯ºå¡”-x2F-åŠ¨æ€è§„åˆ’"><a href="#1ã€ä¸‰æŸ±-x2F-å››æŸ±æ±‰è¯ºå¡”-x2F-åŠ¨æ€è§„åˆ’" class="headerlink" title="1ã€ä¸‰æŸ±&#x2F;å››æŸ±æ±‰è¯ºå¡”&#x2F;åŠ¨æ€è§„åˆ’"></a>1ã€ä¸‰æŸ±&#x2F;å››æŸ±æ±‰è¯ºå¡”&#x2F;åŠ¨æ€è§„åˆ’</h3><h4 id="é€’å½’åˆ†æ"><a href="#é€’å½’åˆ†æ" class="headerlink" title="é€’å½’åˆ†æ"></a>é€’å½’åˆ†æ</h4><p>ç”¨é€’å½’æ ‘å¯è§†åŒ–é€’å½’è¿‡ç¨‹</p><p><img src="/blog/2022/09/01/%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/2022-04-14_204251.png" alt="2022-04-14_204251"></p><p>åˆ†æ²»ç®—æ³•çš„ä¸»å®šç†ï¼š$T(n) &#x3D; aT(\frac n b +cn^k)$</p><ul><li>è‹¥$a &gt; b^k$ï¼Œåˆ™$T(n)&#x3D;O(n^{log_ba})$</li><li>è‹¥$a &#x3D; b^k$ï¼Œåˆ™$T(n) &#x3D; O(n^klog_bn)$</li><li>è‹¥$a &lt; b^k$ï¼Œåˆ™$T(n) &#x3D; O(n^k)$</li></ul><h4 id="Tower-of-Hanoi"><a href="#Tower-of-Hanoi" class="headerlink" title="Tower of Hanoi"></a>Tower of Hanoi</h4><p>1883å¹´ç”±çˆ±å¾·åÂ·å¢å¡æ–¯æå‡º</p><p>é—®é¢˜æè¿°ï¼šç”±ä¸‰ä¸ªæœ¨æ¡©å’Œä¸€ç»„nä¸ªç›´å¾„ä¸åŒçš„åœ†ç›˜ç»„æˆï¼Œè¿™äº›åœ†ç›˜å¯ä»¥å †å åœ¨æœ¨æ¡©ä¸Šã€‚åˆå§‹æƒ…å†µæ˜¯åœ†ç›˜æŒ‰å¤§å°é¡ºåºå †æ”¾åœ¨ä¸€ä¸ªæœ¨æ¡©ä¸Šï¼Œæœ€å¤§çš„åœ¨åº•éƒ¨ã€‚è§„åˆ™ä¸ºå…è®¸åœ†ç›˜ä¸€æ¬¡ä»ä¸€ä¸ªæœ¨æ¡©ç§»åŠ¨åˆ°å¦ä¸€ä¸ªï¼Œå¤§ç›˜ä¸èƒ½æ”¾åœ¨å°ç›˜çš„é¡¶éƒ¨ã€‚ç›®æ ‡æ˜¯ä»¥æœ€å°‘çš„ç§»åŠ¨æ¬¡æ•°å°†æ‰€æœ‰åœ†ç›˜è½¬ç§»åˆ°å¦ä¸€ä¸ªç›®æ ‡æœ¨æ¡©ä¸Šã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># è¾“å‡ºç§»åŠ¨æ–¹å¼ï¼Œç”¨numå­˜å‚¨ç§»åŠ¨æ¬¡æ•°ï¼Œæš´åŠ›è§£</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">hanoi3</span>(<span class="hljs-params">n,A,B,C</span>):<br>    <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">    ä¸‰æŸ±æ±‰è¯ºå¡”</span><br><span class="hljs-string">    A:åˆå§‹æŸ± B:è¿‡æ¸¡æŸ± C:ç›®æ ‡æŸ±</span><br><span class="hljs-string">    &#x27;&#x27;&#x27;</span><br>    <span class="hljs-keyword">global</span> num<br>    num += <span class="hljs-number">1</span><br>    <span class="hljs-keyword">if</span> (n == <span class="hljs-number">1</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;disk[<span class="hljs-subst">&#123;n&#125;</span>]: from <span class="hljs-subst">&#123;A&#125;</span> to <span class="hljs-subst">&#123;C&#125;</span>&#x27;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        hanoi3(n-<span class="hljs-number">1</span>, A, C, B)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;disk[<span class="hljs-subst">&#123;n&#125;</span>]: from <span class="hljs-subst">&#123;A&#125;</span> to <span class="hljs-subst">&#123;B&#125;</span>&#x27;</span>)<br>        hanoi3(n-<span class="hljs-number">1</span>, B, A, C)<br><br><span class="hljs-comment">#æµ‹è¯•</span><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    <span class="hljs-string">&#x27;ä¸»ç¨‹åº&#x27;</span><br>    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>):<br>        <span class="hljs-comment"># num = 0</span><br>        n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;è¯·è¾“å…¥ç›˜æ•°ï¼š&#x27;</span>))  <span class="hljs-comment"># ç›˜æ•°</span><br>        hanoi3(n, <span class="hljs-string">&quot;A&quot;</span>, <span class="hljs-string">&quot;B&quot;</span>, <span class="hljs-string">&quot;C&quot;</span>)<br>        <span class="hljs-built_in">print</span>(num)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27; ---END--- &#x27;</span>)<br></code></pre></td></tr></table></figure><h4 id="å››æŸ±æ±‰è¯ºå¡”"><a href="#å››æŸ±æ±‰è¯ºå¡”" class="headerlink" title="å››æŸ±æ±‰è¯ºå¡”"></a>å››æŸ±æ±‰è¯ºå¡”</h4><p>å½“æˆ‘ä»¬æœ‰å¤§äº3æ ¹æŸ±å­çš„æ—¶å€™ï¼Œå¦‚ä½•ç§»åŠ¨æ‰èƒ½æœ€ä¼˜ï¼Ÿ</p><p>Frame-Stewartç®—æ³•</p><ul><li>ä½¿ç”¨4æ ¹æŸ±å­å°†æœ€ä¸Šé¢çš„kä¸ªç›˜ç‰‡ç§»åˆ°ä¸€ä¸ªä¸´æ—¶æŸ±å­</li><li>ä½¿ç”¨å‰©ä½™çš„3æ ¹æŸ±å­å°†å‰©ä½™çš„ç›˜ç‰‡ç§»åˆ°ç›®æ ‡æŸ±å­</li><li>ä½¿ç”¨4æ ¹æŸ±å­å°†kä¸ªç›˜ç‰‡ä»ä¸´æ—¶æŸ±å­ç§»åˆ°ç›®æ ‡æŸ±å­</li></ul><p>ä¼˜åŒ–é—®é¢˜ï¼šå¦‚ä½•é€‰æ‹©æœ€ä¼˜çš„kï¼Ÿ</p><ul><li>åŠ¨æ€è§„åˆ’ï¼šå­˜åœ¨é‡å å­é—®é¢˜</li><li>æ˜¯å¦å­˜åœ¨è§£æè§£ï¼Ÿ</li></ul><h3 id="2ã€å››æŸ±æ±‰è¯ºå¡”çš„æœ€ä¼˜è§£æ³•-x2F-é«˜æ¥¼æ‰”é¸¡è›‹"><a href="#2ã€å››æŸ±æ±‰è¯ºå¡”çš„æœ€ä¼˜è§£æ³•-x2F-é«˜æ¥¼æ‰”é¸¡è›‹" class="headerlink" title="2ã€å››æŸ±æ±‰è¯ºå¡”çš„æœ€ä¼˜è§£æ³•&#x2F;é«˜æ¥¼æ‰”é¸¡è›‹"></a>2ã€å››æŸ±æ±‰è¯ºå¡”çš„æœ€ä¼˜è§£æ³•&#x2F;é«˜æ¥¼æ‰”é¸¡è›‹</h3><h4 id="è§£å››æŸ±æ±‰è¯ºå¡”"><a href="#è§£å››æŸ±æ±‰è¯ºå¡”" class="headerlink" title="è§£å››æŸ±æ±‰è¯ºå¡”"></a>è§£å››æŸ±æ±‰è¯ºå¡”</h4><p>å…¬å¼ï¼š$M_4(n)&#x3D;2M_4(n-k)+M_3(k)$</p><p>åˆå§‹æ¡ä»¶ï¼š$M_4(1)&#x3D;1$ and $M_3(k)&#x3D;2^k-1$</p><blockquote><p>è§£é‡Šï¼šå…ˆç”¨å››æŸ±çš„æ–¹å¼å°†ä¸Š<code>n-k</code>ä¸ªç›˜å­æ”¾åœ¨æŸè¿‡æ¸¡æŸ±ä¸Šï¼Œå†ç”¨ä¸‰æŸ±çš„æ–¹å¼å°†ä¸‹<code>k</code>ä¸ªç›˜å­æ”¾åœ¨ç›®æ ‡æŸ±ä¸Šï¼Œå†ç”¨å››æŸ±çš„æ–¹å¼å°†è¿‡æ¸¡æŸ±ä¸Šçš„<code>n-k</code>ä¸ªç›˜å­æ”¾åœ¨ç›®æ ‡æŸ±ä¸Š</p><p>$M_4(n)$ï¼šä»¥å››æŸ±çš„æ–¹å¼æ”¾nä¸ªç›˜å­æœ€å°‘éœ€è¦å¤šå°‘æ¬¡</p><p><code>n</code>ï¼šéœ€è¦æ”¾çš„ç›˜å­æ€»æ•°</p><p><code>k</code>ï¼šä»¥ä¸‰æŸ±çš„æ–¹å¼æ”¾å¤šå°‘ä¸ªç›˜å­</p></blockquote><p>å¼•å‡ºé—®é¢˜ï¼š<code>k</code>å¦‚ä½•å–å€¼ï¼Ÿ</p><p>æš´åŠ›ï¼šå¯¹äºè¾“å…¥kï¼Œéå†k&#x3D;1â€¦nçš„ç»“æœï¼Œå–éå†å‡ºçš„æœ€å°å€¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> math<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">hanoi4</span>(<span class="hljs-params">n</span>):<br>    m = <span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;INF&#x27;</span>)<br>    <span class="hljs-keyword">if</span> n == <span class="hljs-number">1</span>: <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n):<br>        tmp = <span class="hljs-number">2</span>*hanoi4(n-i) + math.<span class="hljs-built_in">pow</span>(<span class="hljs-number">2</span>,i)-<span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> tmp &lt; m:<br>            m = tmp<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">int</span>(m)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    <span class="hljs-string">&#x27;ä¸»ç¨‹åº&#x27;</span><br>    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>):<br>        n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;è¯·è¾“å…¥ç›˜æ•°ï¼š&#x27;</span>))  <span class="hljs-comment"># ç›˜æ•°</span><br>        <span class="hljs-built_in">print</span>(hanoi4(n))<br></code></pre></td></tr></table></figure><p>ä¼˜åŒ–æ–¹å¼ï¼šç”¨ä¸€ä¸ªæ•°ç»„æ¥å­˜å‚¨è®¡ç®—è¿‡çš„$M_4(n-k)$çš„å€¼ï¼Œéå†æ—¶ä¼˜å…ˆæŸ¥è¡¨</p><table><thead><tr><th>$n$</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>10</th></tr></thead><tbody><tr><td>$M_3$</td><td>1</td><td>3</td><td>7</td><td>15</td><td>31</td><td>63</td><td>127</td><td>255</td><td>511</td><td>1023</td></tr><tr><td>$M_4$</td><td>1</td><td>3</td><td>5</td><td>9</td><td>13</td><td>17</td><td>25</td><td>33</td><td>41</td><td>49</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># å¸¦å¤‡å¿˜å½•çš„è§£æ³•</span><br><span class="hljs-keyword">import</span> math<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">hanoi4_memo</span>(<span class="hljs-params">n</span>):<br>    <span class="hljs-keyword">global</span> memo<br>    <span class="hljs-keyword">if</span> n == <span class="hljs-number">1</span>: <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>    <span class="hljs-keyword">if</span> memo[n] != <span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;INF&#x27;</span>): <span class="hljs-keyword">return</span> memo[n]<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n):<br>        tmp = <span class="hljs-number">2</span>*hanoi4_memo(n-i) + math.<span class="hljs-built_in">pow</span>(<span class="hljs-number">2</span>,i) - <span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> tmp &lt; memo[n]:<br>            memo[n] = <span class="hljs-built_in">int</span>(tmp)<br>    <span class="hljs-keyword">return</span> memo[n]<br><br><span class="hljs-comment"># æµ‹è¯•</span><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>):<br>        n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;è¯·è¾“å…¥ç›˜æ•°ï¼š&#x27;</span>))  <span class="hljs-comment"># ç›˜æ•°</span><br>        memo = [<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;INF&#x27;</span>)]*(n+<span class="hljs-number">1</span>)<br>        <span class="hljs-built_in">print</span>(hanoi4_memo(n))<br></code></pre></td></tr></table></figure><p>æœ€ä¼˜è§£ï¼š</p><p>ä¸‰è§’å½¢æ•°ï¼š$t_k &#x3D; \frac{k(k+1)}{2}$ ä¹Ÿå³<code>1,3,6,10,15,21</code></p><table><thead><tr><th>$k$</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th></tr></thead><tbody><tr><td>$t_k$</td><td>1</td><td>3</td><td>6</td><td>10</td><td>15</td><td>21</td><td>28</td></tr></tbody></table><p>ä»¤$M(t_k) &#x3D; 2M(t_{k-1}) + 2^k-1$ ï¼Œåˆå§‹æ¡ä»¶$M(1)&#x3D;1$</p><blockquote><p>Frameå’ŒStewartè¯æ˜ï¼š</p><p>è‹¥$n&#x3D;t_k$ï¼Œæœ€ä¼˜é€‰æ‹©å°±æ˜¯kï¼›</p><p>å½“$t_{k-1} &lt; n &lt; t_k$æ—¶ï¼Œ<code>k-1</code>å’Œ<code>k</code>éƒ½æ˜¯æœ€ä¼˜è§£ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># dpæ•°ç»„çš„è¿­ä»£è§£æ³•</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">hanoi4_dp</span>(<span class="hljs-params">n</span>):<br>    <span class="hljs-comment"># å¾—åˆ°ä¸‰æŸ±æ±‰è¯ºå¡”çš„æœ€å°‘æ¬¡æ•°åˆ—è¡¨</span><br>    hanoi3 = [<span class="hljs-number">0</span>]*n<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        hanoi3[i] = <span class="hljs-built_in">int</span>(math.<span class="hljs-built_in">pow</span>(<span class="hljs-number">2</span>,i)-<span class="hljs-number">1</span>)<br>    dp = [<span class="hljs-number">0</span>]*(n+<span class="hljs-number">1</span>)<br>    dp[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span><br>    <span class="hljs-comment"># è®¡ç®—å››æŸ±æ±‰è¯ºå¡”</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>,n+<span class="hljs-number">1</span>):<br>        <span class="hljs-comment"># å¾—åˆ°ä½¿ç”¨ä¸‰æŸ±æ–¹æ³•çš„æŸ±æ•°k</span><br>        k=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,i):<br>            <span class="hljs-keyword">if</span> i &lt;= j*(j+<span class="hljs-number">1</span>)/<span class="hljs-number">2</span>: <br>                k = j<br>                <span class="hljs-keyword">break</span><br>        <span class="hljs-comment"># ç®—å››æŸ±çš„dpæ•°ç»„</span><br>        dp[i]=<span class="hljs-number">2</span>*dp[i-k]+hanoi3[k]<br>    <span class="hljs-keyword">return</span> dp[n]<br></code></pre></td></tr></table></figure><h4 id="é«˜æ¥¼æ‰”é¸¡è›‹"><a href="#é«˜æ¥¼æ‰”é¸¡è›‹" class="headerlink" title="é«˜æ¥¼æ‰”é¸¡è›‹"></a>é«˜æ¥¼æ‰”é¸¡è›‹</h4><p>é—®é¢˜æè¿°ï¼šnå±‚æ¥¼ï¼Œkä¸ªé¸¡è›‹ï¼Œç®—æœ€å°‘çš„å°è¯•æ¬¡æ•°ï¼Œæ‰¾åˆ°é¸¡è›‹æ°å¥½æ‘”ç¢çš„é‚£å±‚æ¥¼ï¼ˆä»¥ä¸‹éƒ½ä¸ç¢ï¼Œä»¥ä¸Šéƒ½ä¼šç¢ï¼‰</p><p>æ³¨ï¼šn,kè‡³å°‘ä¸º1ï¼Œæœ€åæƒ…å†µï¼šé¸¡è›‹ç ´ç¢ä¸€å®šå‘ç”Ÿåœ¨æœç´¢ç©ºé—´ç©·å°½æ—¶</p><p>æ¡ä»¶ï¼šnå±‚æ¥¼ã€kä¸ªé¸¡è›‹</p><p>é€‰æ‹©ï¼šå»å“ªå±‚æ¥¼æ‰”</p><p>æ¡ä»¶å‘ç”Ÿå˜åŒ–ï¼šåœ¨ç¬¬iå±‚æ‰”ä¸‹é¸¡è›‹å</p><p>é¸¡è›‹ç¢äº†ï¼š<code>k=k-1</code>ï¼Œæœç´¢åŒºé—´<code>[1,i-1]</code>å…±<code>i-1</code>å±‚</p><p>é¸¡è›‹æ²¡ç¢ï¼š<code>k</code>ä¸å˜ï¼Œæœç´¢åŒºé—´<code>[i+1,n]</code>å…±<code>n-i</code>å±‚</p><p>åˆ†åˆ«éå†ä¸¤ç§å¯èƒ½ï¼Œç„¶åé€‰æ‹©æ¬¡æ•°æ›´å¤šçš„ä¸€ä¸ªï¼ˆè¾ƒå·®çš„æƒ…å†µä¸‹ï¼‰ï¼ŒåŠ ä¸Šåˆå§‹æ‰”çš„ä¸€æ¬¡ï¼Œå°±æ˜¯åˆå§‹åœ¨iå±‚æ¥¼æ‰”ä¸‹é¸¡è›‹éœ€è¦çš„å°è¯•æ¬¡æ•°ã€‚</p><p>ç”¨iéå†nï¼Œæ‰¾å‡ºåˆå§‹åœ¨æ¯å±‚æ¥¼éœ€è¦çš„å°è¯•æ¬¡æ•°ï¼Œå–æœ€å°å€¼ï¼Œå³ä¸ºæ‰€æ±‚æ¬¡æ•°ã€‚</p><blockquote><p>è§£é¢˜æ€è·¯ï¼š</p><p>1ã€å®šä¹‰F(n,k)ï¼šnå±‚æ¥¼ï¼Œkä¸ªé¸¡è›‹æ—¶ï¼Œè‡³å°‘è¦æ‰”å‡ æ¬¡é¸¡è›‹</p><p>2ã€çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š $F(n,k)&#x3D;min_{1\le i\le n}(max(F(n-i,k),F(i-1,k-1))+1)$</p><p>3ã€base caseï¼š $F(0,x)&#x3D;0,F(x,1)&#x3D;x$</p></blockquote><p>æš´åŠ›è§£æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># n:æ¥¼å±‚æ•°ï¼Œk:é¸¡è›‹æ•°</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">eggDrop</span>(<span class="hljs-params">n,k</span>):<br>    res = <span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;INF&#x27;</span>)<br>    <span class="hljs-keyword">if</span> n==<span class="hljs-number">0</span>: <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>    <span class="hljs-keyword">if</span> k==<span class="hljs-number">1</span>: <span class="hljs-keyword">return</span> n<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>        tmp = <span class="hljs-built_in">max</span>(eggDrop(n-i,k),eggDrop(i-<span class="hljs-number">1</span>,k-<span class="hljs-number">1</span>))+<span class="hljs-number">1</span><br>        res = <span class="hljs-built_in">min</span>(res,tmp)<br>    <span class="hljs-keyword">return</span> res<br><br><span class="hljs-comment"># æµ‹è¯•</span><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>):<br>        n,k=<span class="hljs-built_in">eval</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;è¯·è¾“å…¥æ¥¼å±‚æ•°å’Œé¸¡è›‹æ•°ï¼Œç”¨é€—å·éš”å¼€ï¼š&quot;</span>))<br>        <span class="hljs-built_in">print</span>(eggDrop(n,k))<br></code></pre></td></tr></table></figure><p>ä¼˜åŒ–ï¼šæ·»åŠ å¤‡å¿˜å½•æ¶ˆé™¤é‡å å­é—®é¢˜</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># n:æ¥¼å±‚æ•°ï¼Œk:é¸¡è›‹æ•°</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">superEggDrop</span>(<span class="hljs-params">n,k</span>):<br>    memo = <span class="hljs-built_in">dict</span>()<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">dp</span>(<span class="hljs-params">n,k</span>) -&gt; <span class="hljs-built_in">int</span>:<br>        <span class="hljs-comment"># base case</span><br>        <span class="hljs-keyword">if</span> k==<span class="hljs-number">1</span>: <span class="hljs-keyword">return</span> n<br>        <span class="hljs-keyword">if</span> n==<span class="hljs-number">0</span>: <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>        <span class="hljs-comment"># é¿å…é‡å¤è®¡ç®—</span><br>        <span class="hljs-keyword">if</span> (n,k) <span class="hljs-keyword">in</span> memo:<br>            <span class="hljs-keyword">return</span> memo[(n,k)]<br>        res = <span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;INF&#x27;</span>)<br>        <span class="hljs-comment"># ç©·ä¸¾æ‰€æœ‰çš„å¯èƒ½</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>            res = <span class="hljs-built_in">min</span>(res, <span class="hljs-built_in">max</span>(dp(n-i,k),dp(i-<span class="hljs-number">1</span>,k-<span class="hljs-number">1</span>)) + <span class="hljs-number">1</span>)<br>        memo[(n,k)] = res<br>        <span class="hljs-keyword">return</span> res<br>    <span class="hljs-keyword">return</span> dp(n,k)<br></code></pre></td></tr></table></figure><p>ä¼˜åŒ–ï¼šäºŒåˆ†æœç´¢ä»£æ›¿çº¿æ€§æœç´¢ä¼˜åŒ–forå¾ªç¯</p><p>æ€è·¯ï¼š<code>dp(n,k)</code>è¿™ä¸ªå‡½æ•°ï¼Œå½“<code>k</code>å›ºå®šæ—¶ï¼Œæ˜¯å…³äº<code>n</code>å•è°ƒé€’å¢çš„ï¼ˆé¸¡è›‹æ•°é‡å›ºå®šæ—¶ï¼Œæ¥¼å±‚è¶Šå¤šï¼Œéœ€è¦çš„å°è¯•æ¬¡æ•°è¶Šå¤šï¼‰ï¼Œäºæ˜¯å°†<code>dp(n-i,k)</code>å’Œ<code>dp(i-1,k-1)</code>çœ‹åšå…³äº<code>i</code>çš„å‡½æ•°ï¼Œæ‰€ä»¥<code>dp(n-i,k)</code>æ˜¯å…³äº<code>i</code>å•è°ƒé€’å‡ï¼Œ<code>dp(i-1,k-1)</code>æ˜¯å…³äº<code>i</code>å•è°ƒé€’å¢ã€‚</p><p><img src="/blog/2022/09/01/%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/d2253affeade7b0d8c4128c5e193ab0.jpg" alt="d2253affeade7b0d8c4128c5e193ab0"></p><p>äºæ˜¯ï¼Œé—®é¢˜ä¾¿æˆäº†æ±‚äºŒè€…çš„äº¤ç‚¹ï¼Œå¯ä»¥ç”¨äºŒåˆ†æŸ¥æ‰¾æ¥å¯»æ‰¾è¿™ä¸ªç‚¹ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">superEggDrop2</span>(<span class="hljs-params">n,k</span>):<br>    memo = <span class="hljs-built_in">dict</span>()<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">dp</span>(<span class="hljs-params">n,k</span>):<br>        <span class="hljs-keyword">if</span> n == <span class="hljs-number">0</span>: <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>        <span class="hljs-keyword">if</span> k == <span class="hljs-number">1</span>: <span class="hljs-keyword">return</span> n<br>        <span class="hljs-keyword">if</span> (n,k) <span class="hljs-keyword">in</span> memo:<br>            <span class="hljs-keyword">return</span> memo[(n,k)]<br>        res = <span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;INF&#x27;</span>)<br>        <span class="hljs-comment"># ç”¨äºŒåˆ†ä»£æ›¿çº¿æ€§æœç´¢</span><br>        low, high = <span class="hljs-number">1</span>, n<br>        <span class="hljs-keyword">while</span> low &lt;= high:<br>            mid = (low + high) // <span class="hljs-number">2</span><br>            broken = dp(mid-<span class="hljs-number">1</span>,k-<span class="hljs-number">1</span>) <span class="hljs-comment"># ç¢</span><br>            non_broken = dp(n-mid,k) <span class="hljs-comment"># æ²¡ç¢</span><br>            <span class="hljs-comment"># res = min(max(ç¢ï¼Œæ²¡ç¢) +1)</span><br>            <span class="hljs-keyword">if</span> broken &gt; non_broken:<br>                high = mid-<span class="hljs-number">1</span><br>                res = <span class="hljs-built_in">min</span>(res,broken+<span class="hljs-number">1</span>)<br>            <span class="hljs-keyword">else</span>:<br>                low = mid+<span class="hljs-number">1</span><br>                res = <span class="hljs-built_in">min</span>(res, non_broken+<span class="hljs-number">1</span>)<br>        memo[(n,k)] = res<br>        <span class="hljs-keyword">return</span> res<br>    <span class="hljs-keyword">return</span> dp(n,k)<br></code></pre></td></tr></table></figure><p>ä¼˜åŒ–ï¼šé‡æ–°å®šä¹‰çŠ¶æ€è½¬ç§»</p><p>å®šä¹‰ï¼škï¼šé¸¡è›‹æ•°ï¼Œmï¼šæœ€å°‘æ‰”é¸¡è›‹æ¬¡æ•°ï¼Œdp(k,m)ï¼šæœ€é«˜æ¥¼å±‚æ•°</p><p>é¸¡è›‹ç¢äº†ï¼šæµ‹æ¥¼ä¸‹</p><p>é¸¡è›‹æ²¡ç¢ï¼šæµ‹æ¥¼ä¸Š</p><p>æ€»çš„æ¥¼å±‚æ•° &#x3D; æ¥¼ä¸Šçš„æ¥¼å±‚æ•° + æ¥¼ä¸‹çš„æ¥¼å±‚æ•° + 1ï¼ˆå½“å‰è¿™å±‚æ¥¼ï¼‰</p><p>çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š<code>dp[k][m] = dp[k][m-1] + dp[k-1][m-1] + 1</code></p><p><code>dp[k][m-1]</code>ï¼šæ¥¼ä¸Šçš„æ¥¼å±‚æ•°</p><p><code>dp[k-1][m-1]</code>ï¼šæ¥¼ä¸‹çš„æ¥¼å±‚æ•°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># é‡æ–°å®šä¹‰çŠ¶æ€è½¬ç§»æ–¹ç¨‹</span><br><span class="hljs-comment"># k:é¸¡è›‹æ•° m:æœ€å°‘æ‰”é¸¡è›‹æ¬¡æ•°</span><br><span class="hljs-comment"># å‡½æ•°è¿”å›ç»“æœ: æœ€é«˜æ¥¼å±‚æ•°</span><br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">superEggDrop3</span>(<span class="hljs-params">k,m</span>):<br>    dp = np.zeros((k+<span class="hljs-number">1</span>, m+<span class="hljs-number">1</span>), dtype=<span class="hljs-built_in">int</span>)<br>    n = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">while</span> dp[k][m] &lt; m:<br>        n+=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,k+<span class="hljs-number">1</span>):<br>            dp[i][n] = dp[i][n-<span class="hljs-number">1</span>] + dp[i-<span class="hljs-number">1</span>][n-<span class="hljs-number">1</span>] + <span class="hljs-number">1</span><br>    <span class="hljs-keyword">return</span> dp[k][m]<br><br><span class="hljs-comment"># æµ‹è¯•</span><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>):<br>        k,m=<span class="hljs-built_in">eval</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;è¯·è¾“å…¥é¸¡è›‹æ•°å’Œæœ€å°‘æ‰”é¸¡è›‹æ¬¡æ•°ï¼Œç”¨é€—å·éš”å¼€ï¼š&quot;</span>))<br>        <span class="hljs-built_in">print</span>(superEggDrop3(k,m))<br>        <br><span class="hljs-comment"># è¯¥æ–¹ç¨‹ä¸€ä¸ª10*9çš„dpæ•°ç»„å¦‚ä¸‹</span><br>[[   <span class="hljs-number">0</span>    <span class="hljs-number">0</span>    <span class="hljs-number">0</span>    <span class="hljs-number">0</span>    <span class="hljs-number">0</span>    <span class="hljs-number">0</span>    <span class="hljs-number">0</span>    <span class="hljs-number">0</span>    <span class="hljs-number">0</span>    <span class="hljs-number">0</span>    <span class="hljs-number">0</span>]<br> [   <span class="hljs-number">0</span>    <span class="hljs-number">1</span>    <span class="hljs-number">2</span>    <span class="hljs-number">3</span>    <span class="hljs-number">4</span>    <span class="hljs-number">5</span>    <span class="hljs-number">6</span>    <span class="hljs-number">7</span>    <span class="hljs-number">8</span>    <span class="hljs-number">9</span>   <span class="hljs-number">10</span>]<br> [   <span class="hljs-number">0</span>    <span class="hljs-number">1</span>    <span class="hljs-number">3</span>    <span class="hljs-number">6</span>   <span class="hljs-number">10</span>   <span class="hljs-number">15</span>   <span class="hljs-number">21</span>   <span class="hljs-number">28</span>   <span class="hljs-number">36</span>   <span class="hljs-number">45</span>   <span class="hljs-number">55</span>]<br> [   <span class="hljs-number">0</span>    <span class="hljs-number">1</span>    <span class="hljs-number">3</span>    <span class="hljs-number">7</span>   <span class="hljs-number">14</span>   <span class="hljs-number">25</span>   <span class="hljs-number">41</span>   <span class="hljs-number">63</span>   <span class="hljs-number">92</span>  <span class="hljs-number">129</span>  <span class="hljs-number">175</span>]<br> [   <span class="hljs-number">0</span>    <span class="hljs-number">1</span>    <span class="hljs-number">3</span>    <span class="hljs-number">7</span>   <span class="hljs-number">15</span>   <span class="hljs-number">30</span>   <span class="hljs-number">56</span>   <span class="hljs-number">98</span>  <span class="hljs-number">162</span>  <span class="hljs-number">255</span>  <span class="hljs-number">385</span>]<br> [   <span class="hljs-number">0</span>    <span class="hljs-number">1</span>    <span class="hljs-number">3</span>    <span class="hljs-number">7</span>   <span class="hljs-number">15</span>   <span class="hljs-number">31</span>   <span class="hljs-number">62</span>  <span class="hljs-number">119</span>  <span class="hljs-number">218</span>  <span class="hljs-number">381</span>  <span class="hljs-number">637</span>]<br> [   <span class="hljs-number">0</span>    <span class="hljs-number">1</span>    <span class="hljs-number">3</span>    <span class="hljs-number">7</span>   <span class="hljs-number">15</span>   <span class="hljs-number">31</span>   <span class="hljs-number">63</span>  <span class="hljs-number">126</span>  <span class="hljs-number">246</span>  <span class="hljs-number">465</span>  <span class="hljs-number">847</span>]<br> [   <span class="hljs-number">0</span>    <span class="hljs-number">1</span>    <span class="hljs-number">3</span>    <span class="hljs-number">7</span>   <span class="hljs-number">15</span>   <span class="hljs-number">31</span>   <span class="hljs-number">63</span>  <span class="hljs-number">127</span>  <span class="hljs-number">254</span>  <span class="hljs-number">501</span>  <span class="hljs-number">967</span>]<br> [   <span class="hljs-number">0</span>    <span class="hljs-number">1</span>    <span class="hljs-number">3</span>    <span class="hljs-number">7</span>   <span class="hljs-number">15</span>   <span class="hljs-number">31</span>   <span class="hljs-number">63</span>  <span class="hljs-number">127</span>  <span class="hljs-number">255</span>  <span class="hljs-number">510</span> <span class="hljs-number">1012</span>]<br> [   <span class="hljs-number">0</span>    <span class="hljs-number">1</span>    <span class="hljs-number">3</span>    <span class="hljs-number">7</span>   <span class="hljs-number">15</span>   <span class="hljs-number">31</span>   <span class="hljs-number">63</span>  <span class="hljs-number">127</span>  <span class="hljs-number">255</span>  <span class="hljs-number">511</span> <span class="hljs-number">1022</span>]]<br></code></pre></td></tr></table></figure><h4 id="æ€è€ƒé¢˜ï¼šæœ€é•¿ä¸Šå‡å­åºåˆ—"><a href="#æ€è€ƒé¢˜ï¼šæœ€é•¿ä¸Šå‡å­åºåˆ—" class="headerlink" title="æ€è€ƒé¢˜ï¼šæœ€é•¿ä¸Šå‡å­åºåˆ—"></a>æ€è€ƒé¢˜ï¼šæœ€é•¿ä¸Šå‡å­åºåˆ—</h4><p>é—®é¢˜æè¿°ï¼šç»™å®šä¸€ä¸ªæ— åºçš„æ•´æ•°æ•°ç»„ï¼Œæ‰¾åˆ°å…¶ä¸­æœ€é•¿çš„ä¸Šå‡å­åºåˆ—ï¼ˆä¸ä¸€å®šè¿ç»­ï¼‰çš„é•¿åº¦ã€‚</p><p>å®šä¹‰dpæ•°ç»„ï¼š<code>dp[i]</code>è¡¨ç¤ºä»¥<code>nums[i]</code>è¿™ä¸ªæ•°ç»“å°¾çš„æœ€é•¿é€’å¢å­åºåˆ—çš„é•¿åº¦ã€‚</p><p>æ ¹æ®è¿™ä¸ªå®šä¹‰ï¼Œæœ€ç»ˆç»“æœåº”ä¸ºdpæ•°ç»„ä¸­çš„æœ€å¤§å€¼ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">lengthOfLIS</span>(<span class="hljs-params">nums</span>):<br>    dp = [<span class="hljs-number">1</span>] * <span class="hljs-built_in">len</span>(nums)<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nums)):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i):<br>            <span class="hljs-keyword">if</span> nums[i] &gt; nums[j]:<br>                dp[i] = <span class="hljs-built_in">max</span>(dp[i],dp[j]+<span class="hljs-number">1</span>)<br>    res = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(dp)):<br>        res = <span class="hljs-built_in">max</span>(res,dp[i])<br>    <span class="hljs-keyword">return</span> res<br><br><span class="hljs-comment"># æµ‹è¯•</span><br><span class="hljs-keyword">if</span> __name__==<span class="hljs-string">&quot;__main__&quot;</span>:<br>    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>):<br>        nums=<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;è¯·è¾“å…¥åºåˆ—ï¼š&quot;</span>)<br>        <span class="hljs-built_in">print</span>(lengthOfLIS(nums))<br></code></pre></td></tr></table></figure><h4 id="æ€è€ƒé¢˜ï¼šèƒŒåŒ…é—®é¢˜ï¼ˆç»„åˆä¼˜åŒ–ï¼‰"><a href="#æ€è€ƒé¢˜ï¼šèƒŒåŒ…é—®é¢˜ï¼ˆç»„åˆä¼˜åŒ–ï¼‰" class="headerlink" title="æ€è€ƒé¢˜ï¼šèƒŒåŒ…é—®é¢˜ï¼ˆç»„åˆä¼˜åŒ–ï¼‰"></a>æ€è€ƒé¢˜ï¼šèƒŒåŒ…é—®é¢˜ï¼ˆç»„åˆä¼˜åŒ–ï¼‰</h4><p>0-1èƒŒåŒ…</p><h3 id="3ã€é©¬å°”ç§‘å¤«é“¾-x2F-æœ€é•¿ä¸Šå‡å­åºåˆ—-x2F-èƒŒåŒ…é—®é¢˜-x2F-è´ªå©ªç®—æ³•"><a href="#3ã€é©¬å°”ç§‘å¤«é“¾-x2F-æœ€é•¿ä¸Šå‡å­åºåˆ—-x2F-èƒŒåŒ…é—®é¢˜-x2F-è´ªå©ªç®—æ³•" class="headerlink" title="3ã€é©¬å°”ç§‘å¤«é“¾&#x2F;æœ€é•¿ä¸Šå‡å­åºåˆ—&#x2F;èƒŒåŒ…é—®é¢˜&#x2F;è´ªå©ªç®—æ³•"></a>3ã€é©¬å°”ç§‘å¤«é“¾&#x2F;æœ€é•¿ä¸Šå‡å­åºåˆ—&#x2F;èƒŒåŒ…é—®é¢˜&#x2F;è´ªå©ªç®—æ³•</h3><h4 id="é©¬å°”ç§‘å¤«é“¾"><a href="#é©¬å°”ç§‘å¤«é“¾" class="headerlink" title="é©¬å°”ç§‘å¤«é“¾"></a>é©¬å°”ç§‘å¤«é“¾</h4><ul><li>ä»¥ä¸€ç»´å¯æ•°é›†ä¸ºç´¢å¼•çš„ç¦»æ•£éšæœºå˜é‡ï¼š$X&#x3D;\left{X_n|n&gt;0\right}$</li><li>éšæœºå˜é‡çš„å–å€¼ä¸ºä¸€ä¸ªå¯æ•°é›†ï¼ˆçŠ¶æ€ç©ºé—´ï¼‰çš„å…ƒç´ ï¼š$X &#x3D; s_i,s_i\in s$</li><li>æ»¡è¶³é©¬å°”ç§‘å¤«æ€§è´¨ï¼š$p(X_{t+1} | X_t,â€¦X_1) &#x3D; p(X_{t+1} | X_t)$</li></ul><h4 id="éšé©¬å°”ç§‘å¤«æ¨¡å‹ï¼ˆHMMï¼‰"><a href="#éšé©¬å°”ç§‘å¤«æ¨¡å‹ï¼ˆHMMï¼‰" class="headerlink" title="éšé©¬å°”ç§‘å¤«æ¨¡å‹ï¼ˆHMMï¼‰"></a>éšé©¬å°”ç§‘å¤«æ¨¡å‹ï¼ˆHMMï¼‰</h4><ul><li>çŠ¶æ€ä¸èƒ½ç›´æ¥è§‚å¯Ÿï¼Œä½†æ˜¯å¯ä»¥ç”Ÿæˆä¸€ä¸ªå¯ä»¥æµ‹é‡çš„è¾“å‡ºå¯¹è±¡</li><li>è¾“å‡ºæ˜¯ä¸€ä¸ªä¾èµ–äºçŠ¶æ€çš„éšæœºå˜é‡</li><li>åº”ç”¨ï¼šè¯­éŸ³è¯†åˆ«ã€è‡ªç„¶è¯­è¨€å¤„ç†</li><li>å…³é”®é—®é¢˜ä¸ç®—æ³•<ul><li>è¯„ä¼°é—®é¢˜ï¼šå‰å‘ç®—æ³•ï¼ˆç»™è§‚æµ‹åºåˆ—<code>O</code>ï¼Œï¼‰</li><li>è§£ç é—®é¢˜ï¼šViterbiç®—æ³•</li><li>å­¦ä¹ é—®é¢˜ï¼šå‘å‰å‘åç®—æ³•</li></ul></li></ul><p><strong>æ¨¡å‹è¡¨è¾¾ï¼š2ä¸ªçŠ¶æ€é›†åˆå’Œ3ä¸ªæ¦‚ç‡çŸ©é˜µ</strong></p><ol><li>éšå«çŠ¶æ€ $S$</li><li>å¯è§‚æµ‹çŠ¶æ€ $O$</li><li>åˆå§‹çŠ¶æ€æ¦‚ç‡çŸ©é˜µ $\pi$</li><li>éšå«çŠ¶æ€è½¬ç§»æ¦‚ç‡çŸ©é˜µ $A$</li><li>è§‚æµ‹çŠ¶æ€è½¬ç§»æ¦‚ç‡çŸ©é˜µ $B$</li></ol><p>æ€»ç»“ï¼šä¸€èˆ¬çš„ï¼Œå¯ä»¥ç”¨ $\lambda &#x3D; (A,B,\pi)$ ä¸‰å…ƒç»„æ¥ç®€æ´çš„è¡¨ç¤ºä¸€ä¸ªéšé©¬å°”ç§‘å¤«æ¨¡å‹ã€‚ éšé©¬å°”å¯å¤«æ¨¡å‹å®é™…ä¸Šæ˜¯æ ‡å‡†é©¬å°”å¯å¤«æ¨¡å‹çš„æ‰©å±•ï¼Œæ·»åŠ äº†å¯è§‚æµ‹çŠ¶æ€é›†åˆå’Œè¿™äº›çŠ¶æ€ä¸éšå«çŠ¶æ€ä¹‹é—´çš„æ¦‚ç‡å…³ç³»ã€‚</p><blockquote><p>ä¾‹ï¼šç›’å­æ¨¡çƒå®éªŒ</p><p>æœ‰ä¸‰ä¸ªç›’å­ï¼Œç¼–å·åˆ†åˆ«ä¸º1å·ã€2å·å’Œ3å·ï¼Œæ¯ä¸ªç›’å­é‡Œæœ‰ä¸ªæ•°ä¸ç­‰çš„é»‘çƒå’Œç™½çƒï¼š</p><ul><li>1å·ï¼šé»‘çƒ2ä¸ªï¼Œç™½çƒ8ä¸ª</li><li>2å·ï¼šé»‘çƒ6ä¸ªï¼Œç™½çƒ4ä¸ª</li><li>3å·ï¼šé»‘çƒ4ä¸ªï¼Œç™½çƒ6ä¸ª</li></ul><p>æ®æ­¤å¯å¾—<strong>è§‚æµ‹æ¦‚ç‡çŸ©é˜µ</strong>ï¼š$$B&#x3D;\begin{pmatrix} 0.2 &amp; 0.8 \ 0.6 &amp; 0.4 \ 0.4 &amp; 0.6 \end{pmatrix}$$</p><p>å®éªŒè¿‡ç¨‹ï¼š</p><p>æ¯æ¬¡éšæœºå‡ºç°ä¸€ä¸ªç›’å­ï¼Œç„¶åä»éšæœºå‡ºç°çš„ç›’å­ä¸­éšæœºæ‘¸ä¸€ä¸ªçƒï¼Œè®°å½•ä¸‹æ±‚å¾—é¢œè‰²ï¼Œç„¶åæŠŠçƒæ”¾å›ç›’å­ã€‚é‡å¤ä»¥ä¸Šã€‚</p><p>è¯•éªŒè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬åªèƒ½åœ¨æ¯æ¬¡æ‘¸å‡ºçƒåçœ‹åˆ°è¢«æ‘¸å‡ºçš„çƒçš„é¢œè‰²ï¼ˆå¯è§‚æµ‹çŠ¶æ€ï¼‰ï¼Œä½†æ— æ³•çŸ¥é“æ¯æ¬¡éšæœºå‡ºç°çš„ç›’å­çš„ç¼–å·ï¼ˆéšå«çŠ¶æ€ï¼‰ã€‚</p><p>è®°å½•<strong>å¯è§‚æµ‹çŠ¶æ€</strong>ï¼š$O&#x3D;\left{é»‘ï¼Œé»‘ï¼Œç™½ï¼Œç™½ï¼Œç™½ï¼Œé»‘ï¼Œé»‘\right}$</p><p>å‡å®šç¬¬ä¸€æ¬¡ä¸ªç›’å­å‡ºç°çš„æ¦‚ç‡åˆ†å¸ƒä¸ºï¼š1å·0.3ï¼Œ2å·0.5ï¼Œ3å·0.2</p><p>å¯å¾—<strong>åˆå§‹çŠ¶æ€æ¦‚ç‡çŸ©é˜µï¼š</strong> $\pi &#x3D; (0.3,0.5,0.2)^T$</p><p>æç‚¼<strong>éšå«çŠ¶æ€è½¬ç§»æ¦‚ç‡çŸ©é˜µï¼š</strong> $ A &#x3D; \begin{bmatrix} 0.4 &amp; 0.4 &amp; 0.2 \ 0.3 &amp; 0.2 &amp; 0.5 \ 0.2 &amp; 0.6 &amp; 0.2 \end{bmatrix}$</p><blockquote><p>æå§çŠ¶æ€è½¬ç§»çŸ©é˜µï¼šç¬¬ä¸€è¡Œï¼šéšæœºåˆ°1å·åï¼Œå†æ¬¡éšæœºï¼Œ1å·å‡ºç°çš„æ¦‚ç‡æ˜¯0.4ï¼Œ2å·å‡ºç°çš„æ¦‚ç‡æ˜¯0.4ï¼Œ3å·å‡ºç°çš„æ¦‚ç‡æ˜¯0.2ã€‚ä»¥æ­¤ç±»æ¨ã€‚</p></blockquote><p>å‚è€ƒï¼š<a href="https://www.zhihu.com/question/19633865/answer/1635328825">https://www.zhihu.com/question/19633865/answer/1635328825</a></p></blockquote><p><strong>ä¸»è¦å…³æ³¨ï¼šviterbiç®—æ³•</strong></p><ul><li>æœ€å¤§ä¼¼ç„¶è§£ç ï¼šç»™å®šè§‚å¯Ÿåˆ°çš„ä¿¡é“è¾“å‡ºï¼Œæ‰¾åˆ°æœ€æœ‰å¯èƒ½çš„è¾“å…¥ã€‚</li><li>å¹¿æ³›åº”ç”¨äºé€šä¿¡ç³»ç»Ÿä¸­ï¼Œç”¨äºè§£ç ç”±æœ‰é™çŠ¶æ€è¿‡ç¨‹ç¼–ç çš„æ•°æ®åºåˆ—</li><li>æ±‚è§£ï¼š$maxP(1|0,\theta)$</li></ul><h4 id="åŠ¨æ€è§„åˆ’çš„è¦ç´ "><a href="#åŠ¨æ€è§„åˆ’çš„è¦ç´ " class="headerlink" title="åŠ¨æ€è§„åˆ’çš„è¦ç´ "></a>åŠ¨æ€è§„åˆ’çš„è¦ç´ </h4><p>çŠ¶æ€ï¼šéœ€è¦ä¿ç•™çš„ä¿¡æ¯æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>çŠ¶æ€è½¬ç§»ï¼šä¿¡æ¯äº¤æ¢ä¸æ›´æ–°çš„è¿‡ç¨‹</p><p>æƒé‡ä¸æŸå¤±å‡½æ•°ï¼šå±€éƒ¨è¯„ä»·æŒ‡æ ‡ã€æœ€ç»ˆç›®æ ‡</p><p>ä¼˜åŒ–è¿‡ç¨‹ï¼šå¯»æ‰¾æœ€ä¼˜è§£</p><h4 id="æœ€é•¿ä¸Šå‡å­åºåˆ—"><a href="#æœ€é•¿ä¸Šå‡å­åºåˆ—" class="headerlink" title="æœ€é•¿ä¸Šå‡å­åºåˆ—"></a>æœ€é•¿ä¸Šå‡å­åºåˆ—</h4><p>æš´åŠ›ï¼šå…±$2^n$ä¸ªå­åºåˆ—</p><p>è€å¸ˆè®²çš„è§£æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">lengthOfLIS2</span>(<span class="hljs-params">nums</span>):<br>    dp = [<span class="hljs-number">1</span>] * <span class="hljs-built_in">len</span>(nums)<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nums)):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i+<span class="hljs-number">1</span>,<span class="hljs-built_in">len</span>(nums)):<br>            <span class="hljs-keyword">if</span> nums[j] &gt; nums[i] <span class="hljs-keyword">and</span> dp[j] &lt; dp[i]+<span class="hljs-number">1</span>:<br>                dp[j] = dp[i] + <span class="hljs-number">1</span><br>    res = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(dp)):<br>        <span class="hljs-keyword">if</span> dp[i] &gt; res:<br>            res = dp[i]<br>    <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></table></figure><h4 id="èƒŒåŒ…é—®é¢˜ï¼šç»„åˆä¼˜åŒ–"><a href="#èƒŒåŒ…é—®é¢˜ï¼šç»„åˆä¼˜åŒ–" class="headerlink" title="èƒŒåŒ…é—®é¢˜ï¼šç»„åˆä¼˜åŒ–"></a>èƒŒåŒ…é—®é¢˜ï¼šç»„åˆä¼˜åŒ–</h4><p>é—®é¢˜æè¿°ï¼šå®¹é‡é‡é‡æœ‰é™ï¼Œæ±‚ä»·å€¼æœ€å¤§çš„æ–¹æ¡ˆ</p><blockquote><p>Knapsack Problemæ˜¯NPéš¾é—®é¢˜ï¼Œæ²¡æœ‰å¤šé¡¹å¼æ—¶é—´è§£</p></blockquote><p><strong>0-1èƒŒåŒ…é—®é¢˜</strong></p><p><strong>é—®é¢˜æè¿°ï¼š</strong></p><p>Nä»¶ç‰©å“å¯æ”¾å…¥èƒŒåŒ…ï¼Œç¬¬iä»¶ç‰©å“çš„é‡é‡ä¸ºw[i]ï¼Œä»·å€¼ä¸ºv[i]ã€‚è¦æ±‚åœ¨æ€»é‡é‡ä¸è¶…è¿‡ä¸Šé™Wçš„æƒ…å†µä¸‹ï¼Œè£…å…¥èƒŒåŒ…çš„ç‰©å“ä»·å€¼æœ€å¤§ã€‚</p><p>0-1å†³ç­–ï¼šè£…æˆ–è€…ä¸è£…</p><p>ç¡®å®šç›®æ ‡å‡½æ•°ï¼ŒæŒ‡ç¤ºå‡½æ•°d(i) &#x3D; {0,1}</p><p>$max_d \sum_{i&#x3D;1}^N d(i)V(i)$, subject to $\sum d(i)W(i) \leq W$</p><p>å‡è®¾Wï¼ŒW(i)ç¦»æ•£</p><p>å·²çŸ¥æ¡ä»¶ï¼šè£…äº†å¤šå°‘ä»¶ç‰©å“ï¼Œè¿˜å¯ä»¥è£…å¤šé‡çš„ä¸œè¥¿</p><p>è€ƒè™‘çš„ä¾æ®ï¼šä¸è¶…è¿‡é‡é‡é™åˆ¶æ—¶ï¼Œé€‰æ‹©ä¸‹ä¸€ä»¶ç‰©å“ä½¿æ€»ä»·å€¼æœ€å¤§</p><p><strong>è§£é¢˜æ€è·¯ï¼š</strong></p><p>æ„å»ºä¸€ä¸ªäºŒç»´è¡¨<code>V[i][j]</code>ï¼šåœ¨é‡é‡é™åˆ¶<code>j</code>æ—¶ï¼Œé€‰æ‹©äº†<code>&#123;1,2ï¼Œ...ï¼Œi&#125;</code>ä»¶ç‰©å“çš„æœ€å¤§ä»·å€¼</p><p>è¡¨çš„ä¸Šé™<code>V[N][W]</code>ï¼šè£…<code>N</code>ä»¶ç‰©å“ï¼Œé‡é‡<code>W</code></p><p>åˆ†æçŠ¶æ€è½¬ç§»ï¼šç¬¬<code>i</code>ä»¶ç‰©å“è¦ä¹ˆè£…å…¥èƒŒåŒ…ï¼Œè¦ä¹ˆä¸è£…å…¥èƒŒåŒ…</p><p>è£…å…¥èƒŒåŒ…ï¼š<code>V[i][j] = V[i-1][j-W[i]] + v[i]</code></p><p>ä¸è£…å…¥èƒŒåŒ…ï¼š<code>V[i][j] = V[i-1][j]</code></p><p>å†³ç­–ä¾æ®ï¼š$V[i][j] &#x3D; max(V[i-1][j], V[i-1][j-W[i]] + v[i])$</p><p><strong>èƒŒåŒ…é—®é¢˜è§£çš„ä¼˜åŒ–ï¼š</strong></p><p>ä¼ªå¤šé¡¹å¼æ—¶é—´<code>O(NW)</code></p><p>è¿›ä¸€æ­¥åˆ†æï¼Œä¸éœ€è¦æ˜¾å¼è¡¨ç¤ºç‰©å“åºå·ï¼Œå¯ç®€åŒ–ä¸ºä¸€ç»´è¡¨ï¼š</p><p><code>i</code>ä¸ºä¸åŒçš„é‡é‡é™åˆ¶ï¼Œ<code>j</code>éå†æ¯ä¸ªç‰©å“</p><p>$V[i] &#x3D; max_j(V[i], V[i-w[j]]+v[j])$ï¼Œå…¶ä¸­ï¼Œ$V[W] &#x3D; 0$</p><blockquote><p><strong>ä¸€ç§è§£æ³•ï¼ˆäºŒç»´æ•°ç»„ï¼‰</strong></p><p>&#x3D;&#x3D;step1ï¼šæ˜ç¡®ã€çŠ¶æ€ã€‘å’Œã€é€‰æ‹©ã€‘&#x3D;&#x3D;</p><p>çŠ¶æ€ï¼šã€èƒŒåŒ…çš„å®¹é‡ã€‘ã€ã€å¯é€‰æ‹©çš„ç‰©å“ã€‘</p><p>é€‰æ‹©ï¼šã€è£…è¿›èƒŒåŒ…ã€‘ã€ã€ä¸è£…è¿›èƒŒåŒ…ã€‘</p><p>å¥—æ¡†æ¶ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">&gt;<span class="hljs-keyword">for</span> çŠ¶æ€<span class="hljs-number">1</span> <span class="hljs-keyword">in</span> çŠ¶æ€<span class="hljs-number">1</span>çš„æ‰€æœ‰å–å€¼:<br>&gt;<span class="hljs-keyword">for</span> çŠ¶æ€<span class="hljs-number">2</span> <span class="hljs-keyword">in</span> çŠ¶æ€<span class="hljs-number">2</span>çš„æ‰€æœ‰å–å€¼:<br>&gt;<span class="hljs-keyword">for</span> ...<br>dp[çŠ¶æ€<span class="hljs-number">1</span>][çŠ¶æ€<span class="hljs-number">2</span>][...] = æ‹©ä¼˜(é€‰æ‹©<span class="hljs-number">1</span>,é€‰æ‹©<span class="hljs-number">2</span>,...)<br></code></pre></td></tr></table></figure><p>&#x3D;&#x3D;step2ï¼šæ˜ç¡®dpæ•°ç»„çš„å®šä¹‰&#x3D;&#x3D;</p><p>dpæ•°ç»„å³æè¿°é—®é¢˜å±€é¢çš„ä¸€ä¸ªæ•°ç»„ï¼Œä¸ŠèŠ‚æ˜ç¡®äº†æœ¬é¢˜æœ‰ä¸¤ä¸ªçŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯è¯´éœ€è¦ä¸€ä¸ªäºŒç»´çš„dpæ•°ç»„ï¼Œä¸€ç»´æ˜¯å¯é€‰æ‹©çš„ç‰©å“ï¼Œä¸€ç»´æ˜¯èƒŒåŒ…çš„å®¹é‡ã€‚</p><p>äºæ˜¯å¯¹dpæ•°ç»„å®šä¹‰ï¼šå¯¹äºå‰<code>i</code>ä¸ªç‰©å“ï¼Œå½“å‰èƒŒåŒ…çš„å®¹é‡ä¸º<code>w</code>ï¼Œè¿™ç§æƒ…å†µä¸‹å¯ä»¥è£…çš„æœ€å¤§ä»·å€¼æ˜¯<code>dp[i][w]</code>ã€‚</p><p>æ ¹æ®è¿™ä¸ªå®šä¹‰ï¼Œæˆ‘ä»¬æœ€ç»ˆæƒ³æ±‚çš„ç­”æ¡ˆå°±æ˜¯<code>dp[N][W]</code>ï¼Œbase caseä¸º<code>dp[0][...] = dp[...][0] = 0</code>ï¼Œå› ä¸ºæ²¡æœ‰ç‰©å“æˆ–è€…èƒŒåŒ…æ²¡æœ‰ç©ºé—´æ—¶ï¼Œèƒ½è£…çš„æœ€å¤§ä»·å€¼å°±æ˜¯0ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">&gt;<span class="hljs-comment"># ç»†åŒ–æ¡†æ¶</span><br>&gt;dp = np.zeros((N+<span class="hljs-number">1</span>, W+<span class="hljs-number">1</span>), dtype=<span class="hljs-built_in">int</span><br>&gt;<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> [<span class="hljs-number">1.</span>.N]:<br>&gt;<span class="hljs-keyword">for</span> w <span class="hljs-keyword">in</span> [<span class="hljs-number">1.</span>.W]:<br>&gt;dp[i][w] = <span class="hljs-built_in">max</span>(<br> æŠŠç‰©å“ i è£…è¿›èƒŒåŒ…,<br> ä¸æŠŠç‰©å“ i è£…è¿›èƒŒåŒ…<br>&gt;)<br>&gt;<span class="hljs-keyword">return</span> dp[N][W]<br></code></pre></td></tr></table></figure><p>&#x3D;&#x3D;step3ï¼šæ ¹æ®ã€é€‰æ‹©ã€‘ï¼Œæ€è€ƒçŠ¶æ€è½¬ç§»çš„é€»è¾‘&#x3D;&#x3D;</p><p>è£…å…¥èƒŒåŒ…ï¼š<code>dp[i][W] = V[i-1][j-W[i-1]] + v[i-1]</code></p><p>ä¸è£…å…¥èƒŒåŒ…ï¼š<code>dp[i][W] = V[i-1][w]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">&gt;<span class="hljs-comment"># ç»†åŒ–ä»£ç </span><br>&gt;<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> [<span class="hljs-number">1.</span>.N]:<br>&gt;<span class="hljs-keyword">for</span> w <span class="hljs-keyword">in</span> [<span class="hljs-number">1.</span>.W]:<br>&gt;dp[i][w] = <span class="hljs-built_in">max</span>(<br> dp[i-<span class="hljs-number">1</span>][w],<br> dp[i-<span class="hljs-number">1</span>][w - wt[i-<span class="hljs-number">1</span>]] + val[i-<span class="hljs-number">1</span>]<br>&gt;)<br>&gt;<span class="hljs-keyword">return</span> dp[N][W]<br></code></pre></td></tr></table></figure><p>&#x3D;&#x3D;step4ï¼šå†™æˆä»£ç ï¼Œå¤„ç†è¾¹ç•Œæƒ…å†µ&#x3D;&#x3D;</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">&gt;<span class="hljs-keyword">def</span> <span class="hljs-title function_">knapsack2</span>(<span class="hljs-params">W,N,weight,value</span>):<br>&gt;<span class="hljs-comment"># åˆå§‹åŒ–å…¨ä¸º0</span><br>&gt;dp = np.zeros((N+<span class="hljs-number">1</span>,W+<span class="hljs-number">1</span>), dtype=<span class="hljs-built_in">int</span>)<br>&gt;<span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,N+<span class="hljs-number">1</span>):<br>  <span class="hljs-keyword">for</span> w <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,W+<span class="hljs-number">1</span>):<br>      <span class="hljs-keyword">if</span> w &lt; weight[n-<span class="hljs-number">1</span>]:<br>          <span class="hljs-comment"># è£…ä¸ä¸‹</span><br>          dp[n][w] = dp[n-<span class="hljs-number">1</span>][w]<br>      <span class="hljs-keyword">else</span>:<br>          <span class="hljs-comment"># æ‹©ä¼˜ï¼šè£…/ä¸è£…</span><br>          dp[n][w] = <span class="hljs-built_in">max</span>(dp[n-<span class="hljs-number">1</span>][w-weight[n-<span class="hljs-number">1</span>]]+value[n-<span class="hljs-number">1</span>],dp[n-<span class="hljs-number">1</span>][w])<br>&gt;<span class="hljs-keyword">return</span> dp[N][W]<br></code></pre></td></tr></table></figure></blockquote><p>ä¼˜åŒ–ä¸ºä¸€ç»´æ•°ç»„</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># W:èƒŒåŒ…èƒ½æ‰¿å—çš„é‡é‡ N:ç‰©å“çš„æ•°é‡ weight:æ¯ä¸ªç‰©å“çš„é‡é‡ value:æ¯ä¸ªç‰©å“çš„ä»·å€¼</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">knapsack3</span>(<span class="hljs-params">W,N,weight,value</span>):<br>    dp = [<span class="hljs-number">0</span>]*(W+<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">for</span> w <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,W+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(weight)):<br>            <span class="hljs-keyword">if</span> w &gt;= weight[i]:<br>                dp[w] = <span class="hljs-built_in">max</span>(dp[w],dp[w-weight[i]]+value[i])<br>        <span class="hljs-built_in">print</span>(dp)<br>    <span class="hljs-keyword">return</span> dp<br></code></pre></td></tr></table></figure><blockquote><p>å†™ä¸ªå°å‘ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># ç®€åŒ–ä¸ºä¸€ç»´æ•°ç»„</span><br><span class="hljs-comment"># W:èƒŒåŒ…èƒ½æ‰¿å—çš„é‡é‡ N:ç‰©å“çš„æ•°é‡ weight:æ¯ä¸ªç‰©å“çš„é‡é‡ value:æ¯ä¸ªç‰©å“çš„ä»·å€¼</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">knapsack3</span>(<span class="hljs-params">W,N,weight,value</span>):<br> dp = [<span class="hljs-number">0</span>]*(W+<span class="hljs-number">1</span>)<br> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N):<br>     <span class="hljs-keyword">for</span> w <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,W+<span class="hljs-number">1</span>):<br>         <span class="hljs-keyword">if</span> w &gt;= weight[i]:<br>             dp[w] = <span class="hljs-built_in">max</span>(dp[w],dp[w-weight[i]]+value[i])<br>     <span class="hljs-built_in">print</span>(dp)<br> <span class="hljs-keyword">return</span> dp<br><br> <span class="hljs-comment"># å¦ä¸€ç§éå†</span><br> <span class="hljs-comment"># for w in range(1,W+1):</span><br>     <span class="hljs-comment"># for i in range(N):</span><br>     <span class="hljs-comment">#     if w &gt;= weight[i]:</span><br>     <span class="hljs-comment">#         dp[w] = max(dp[w],dp[w-weight[i]]+value[i])</span><br>     <span class="hljs-comment"># print(dp)</span><br><br><span class="hljs-comment"># è¾“å…¥ï¼š10,6,[2,2,3,1,5,2],[2,3,1,5,4,3]</span><br><span class="hljs-comment"># è¾“å‡ºï¼š[0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50]</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œä¹Ÿæ˜¯å°è¯•å†™æˆä¸€ç»´æ•°ç»„ï¼Œä¸ä¸Šé¢æ–¹æ³•ä¸åŒçš„æ˜¯ä»æ­£å‘éå†ï¼Œå¯¼è‡´<code>dp[w-weight[i]]</code>æ‹¿åˆ°çš„æ•°æ®å¯èƒ½åŒ…å«äº†ç¬¬<code>i</code>ä¸ªç‰©å“ï¼Œå¯¼è‡´äº†é‡å¤ã€‚å°è¯•äº†åŠ flagä¹‹ç±»çš„ï¼Œä½†ä¼¼ä¹æ­£å‘éå†çš„æ–¹æ³•æ²¡æ³•åšã€‚</p></blockquote><h5 id="èƒŒåŒ…é—®é¢˜çš„å˜ä½“"><a href="#èƒŒåŒ…é—®é¢˜çš„å˜ä½“" class="headerlink" title="èƒŒåŒ…é—®é¢˜çš„å˜ä½“"></a>èƒŒåŒ…é—®é¢˜çš„å˜ä½“</h5><h6 id="å­é›†èƒŒåŒ…é—®é¢˜"><a href="#å­é›†èƒŒåŒ…é—®é¢˜" class="headerlink" title="å­é›†èƒŒåŒ…é—®é¢˜"></a>å­é›†èƒŒåŒ…é—®é¢˜</h6><p>ä¾‹ï¼š<a href="https://leetcode-cn.com/problems/partition-equal-subset-sum/">https://leetcode-cn.com/problems/partition-equal-subset-sum/</a></p><p>åˆ†å‰²ç­‰å’Œå­é›†ï¼šç»™å®šä¸€ä¸ªåªåŒ…å«æ­£æ•´æ•°çš„éç©ºæ•°ç»„ï¼Œæ˜¯å¦å¯ä»¥å°†è¿™ä¸ªæ•°ç»„åˆ†å‰²æˆä¸¤ä¸ªå­é›†ï¼Œä½¿å¾—ä¸¤ä¸ªå­é›†çš„å…ƒç´ å’Œç›¸ç­‰ã€‚</p><p><strong>é—®é¢˜è½¬æ¢ï¼š</strong></p><p><code>sum</code>ä¸ºç‰©å“æ€»é‡é‡ï¼Œç»™ä¸€ä¸ªå¯è£…è½½é‡é‡ä¸º<code>sum/2</code>çš„èƒŒåŒ…å’Œ<code>N</code>ä¸ªç‰©å“ï¼Œæ¯ä¸ªç‰©å“é‡é‡ä¸º<code>weight[i]</code>ï¼Œæ˜¯å¦å­˜åœ¨ä¸€ç§è£…æ³•ï¼Œèƒ½å¤Ÿæ°å¥½å°†èƒŒåŒ…è£…æ»¡ã€‚</p><p>1ã€æ˜ç¡®ã€çŠ¶æ€ã€‘å’Œã€é€‰æ‹©ã€‘ï¼š</p><p>çŠ¶æ€ï¼šã€èƒŒåŒ…çš„å®¹é‡ã€‘ã€ã€å¯é€‰æ‹©çš„ç‰©å“ã€‘</p><p>é€‰æ‹©ï¼šã€è£…è¿›èƒŒåŒ…ã€‘ã€ã€ä¸è£…è¿›èƒŒåŒ…ã€‘</p><p>2ã€æ˜ç¡®dpæ•°ç»„å®šä¹‰ï¼š</p><p><code>dp[i][j]</code>è¡¨ç¤ºå¯¹äºå‰<code>i</code>ä¸ªç‰©å“ï¼Œå½“å‰èƒŒåŒ…çš„å®¹é‡ä¸º<code>j</code>æ—¶ï¼Œè‹¥<code>x</code>ä¸º<code>True</code>ï¼Œåˆ™è¯´æ˜å¯ä»¥æ°å¥½å°†èƒŒåŒ…è£…æ»¡ï¼Œè‹¥<code>x</code>ä¸º<code>False</code>ï¼Œåˆ™è¯´æ˜ä¸èƒ½æ°å¥½å°†èƒŒåŒ…è£…æ»¡ã€‚</p><p>æ ¹æ®è¿™ä¸ªå®šä¹‰ï¼Œæˆ‘ä»¬æƒ³æ±‚çš„æœ€ç»ˆç­”æ¡ˆå³ä¸º<code>dp[N][sum/2]</code>ã€‚</p><p>base caseä¸º<code>dp[...][0] = True</code>å’Œ<code>dp[0][...]=False</code></p><blockquote><p>èƒŒåŒ…æ²¡æœ‰ç©ºé—´ï¼šè£…æ»¡äº†</p><p>æ²¡æœ‰ç‰©å“å¯é€‰ï¼šæ— æ³•è£…æ»¡</p></blockquote><p>3ã€æ ¹æ®ã€é€‰æ‹©ã€‘ï¼Œæ€è€ƒçŠ¶æ€è½¬ç§»çš„é€»è¾‘</p><p>åˆ¤æ–­æ˜¯å¦å¯è£…å…¥ï¼š<code>weight[i-1] &lt;= j</code></p><p>è£…å…¥èƒŒåŒ…ï¼š<code>dp[i][j] = dp[i-1][j-weight[i-1]]</code></p><p>ä¸è£…å…¥èƒŒåŒ…ï¼š<code>dp[i][j] = dp[i-1][j]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">knapsack_divide</span>(<span class="hljs-params">weight</span>):<br>    <span class="hljs-built_in">sum</span> = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> w <span class="hljs-keyword">in</span> weight: <span class="hljs-built_in">sum</span> += w<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">sum</span>%<span class="hljs-number">2</span> != <span class="hljs-number">0</span>): <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-built_in">sum</span> = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">sum</span>/<span class="hljs-number">2</span>)<br>    dp = np.full((<span class="hljs-built_in">int</span>(<span class="hljs-built_in">len</span>(weight)+<span class="hljs-number">1</span>),<span class="hljs-built_in">sum</span>+<span class="hljs-number">1</span>),<span class="hljs-literal">False</span>,dtype=<span class="hljs-built_in">bool</span>)<br>    <span class="hljs-comment"># base case</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(weight)):<br>        dp[i][<span class="hljs-number">0</span>] = <span class="hljs-literal">True</span><br>    <span class="hljs-comment"># çŠ¶æ€è½¬æ¢</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-built_in">len</span>(weight)+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-built_in">sum</span>+<span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">if</span> j-weight[i-<span class="hljs-number">1</span>]&lt;<span class="hljs-number">0</span>:<br>                <span class="hljs-comment"># èƒŒåŒ…å®¹é‡ä¸è¶³</span><br>                dp[i][j] = dp[i-<span class="hljs-number">1</span>][j]<br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-comment"># é€‰æ‹©è£…å…¥æˆ–ä¸è£…å…¥</span><br>                dp[i][j] = dp[i-<span class="hljs-number">1</span>][j] | dp[i-<span class="hljs-number">1</span>][j-weight[i-<span class="hljs-number">1</span>]]<br>    <span class="hljs-keyword">return</span> dp[<span class="hljs-built_in">len</span>(weight)][<span class="hljs-built_in">sum</span>]<br></code></pre></td></tr></table></figure><p>4ã€ä¼˜åŒ–ï¼šçŠ¶æ€å‹ç¼©</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># çŠ¶æ€å‹ç¼©</span><br><span class="hljs-comment"># weight: ç‰©å“é‡é‡æ•°ç»„</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">knapsack_divide2</span>(<span class="hljs-params">weight</span>):<br>    <span class="hljs-built_in">sum</span> = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> w <span class="hljs-keyword">in</span> weight: <span class="hljs-built_in">sum</span> += w<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">sum</span>%<span class="hljs-number">2</span> != <span class="hljs-number">0</span>): <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-built_in">sum</span> = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">sum</span>/<span class="hljs-number">2</span>)<br>    dp = [<span class="hljs-literal">False</span>] * (<span class="hljs-built_in">sum</span>+<span class="hljs-number">1</span>)<br>    dp[<span class="hljs-number">0</span>] = <span class="hljs-literal">True</span><br>    <span class="hljs-comment"># çŠ¶æ€è½¬æ¢</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(weight)):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">sum</span>,-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">if</span> j &gt;= weight[i]:<br>                dp[j] = dp[j] | dp[j-weight[i]]<br>    <span class="hljs-keyword">return</span> dp[<span class="hljs-built_in">sum</span>]<br></code></pre></td></tr></table></figure><blockquote><p>å¦‚ä¸Šé¢˜ï¼Œ<code>j</code>åº”ä»åå¾€å‰åå‘éå†ï¼Œå› ä¸ºæ¯ä¸ªç‰©å“ï¼ˆæˆ–è€…è¯´æ•°å­—ï¼‰åªèƒ½ç”¨ä¸€æ¬¡ï¼Œä»¥å…ä¹‹å‰çš„ç»“æœå½±å“äº†å…¶ä»–çš„ç»“æœã€‚</p></blockquote><p>è‡³æ­¤ï¼Œå­é›†åˆ‡å‰²çš„é—®é¢˜å°±å®Œå…¨è§£å†³äº†ï¼Œæ—¶é—´å¤æ‚åº¦ O(n*sum)ï¼Œç©ºé—´å¤æ‚åº¦ O(sum)ã€‚ </p><h6 id="å®Œå…¨èƒŒåŒ…é—®é¢˜"><a href="#å®Œå…¨èƒŒåŒ…é—®é¢˜" class="headerlink" title="å®Œå…¨èƒŒåŒ…é—®é¢˜"></a>å®Œå…¨èƒŒåŒ…é—®é¢˜</h6><p>ä¾‹ï¼š<a href="https://leetcode-cn.com/problems/coin-change-2/">https://leetcode-cn.com/problems/coin-change-2/</a></p><p>é›¶é’±å…‘æ¢2ï¼šç»™å®šä¸åŒé¢é¢çš„ç¡¬å¸å’Œä¸€ä¸ªæ€»é‡‘é¢ï¼Œå†™å‡ºå‡½æ•°æ¥è®¡ç®—å¯ä»¥å‡‘æˆæ€»é‡‘é¢çš„ç¡¬å¸ç»„åˆæ•°ï¼Œå‡è®¾æ¯ä¸€ç§é¢é¢çš„ç¡¬å¸æœ‰æ— é™ä¸ª<strong>ã€‚</strong></p><p><strong>é—®é¢˜è½¬æ¢ï¼š</strong></p><p>æœ‰ä¸€ä¸ªèƒŒåŒ…ï¼Œæœ€å¤§å®¹é‡ä¸º<code>W</code>ï¼Œæœ‰ä¸€ç³»åˆ—ç‰©å“<code>weight</code>ï¼Œæ¯ä¸ªç‰©å“çš„é‡é‡ä¸º<code>weight[i]</code>ï¼Œæ¯ä¸ªç‰©å“çš„æ•°é‡æ— é™ï¼Œè¯·é—®æœ‰å¤šå°‘ç§æ–¹æ³•ï¼Œèƒ½å¤ŸæŠŠèƒŒåŒ…æ°å¥½è£…æ»¡ã€‚</p><p>1ã€æ˜ç¡®ã€çŠ¶æ€ã€‘å’Œã€é€‰æ‹©ã€‘ï¼š</p><p>çŠ¶æ€ï¼šã€èƒŒåŒ…çš„å®¹é‡ã€‘ã€ã€å¯é€‰æ‹©çš„ç‰©å“ã€‘</p><p>é€‰æ‹©ï¼šã€è£…è¿›èƒŒåŒ…ã€‘ã€ã€ä¸è£…è¿›èƒŒåŒ…ã€‘</p><p>2ã€æ˜ç¡®<code>dp</code>æ•°ç»„çš„å®šä¹‰ï¼š</p><p>è‹¥åªä½¿ç”¨å‰<code>i</code>ä¸ªç‰©å“ï¼Œå½“èƒŒåŒ…å®¹é‡ä¸º<code>j</code>æ—¶ï¼Œæœ‰<code>dp[i][j]</code>ç§æ–¹æ³•å¯ä»¥è£…æ»¡èƒŒåŒ…ã€‚</p><p>æ‰€æ±‚çš„ç­”æ¡ˆå³ä¸º<code>dp[N][W]</code>ï¼Œ<code>N</code>ä¸º<code>weight</code>æ•°ç»„çš„å¤§å°ã€‚</p><p>base caseï¼š<code>dp[0][...]=0</code>å’Œ<code>dp[...][0]=1</code></p><p>3ã€æ ¹æ®ã€é€‰æ‹©ã€‘ï¼Œæ€è€ƒçŠ¶æ€è½¬ç§»çš„é€»è¾‘ï¼š</p><p>æ¡ä»¶ï¼š<code>j &gt;= weight[i-1]</code></p><p>è£…å…¥èƒŒåŒ…ï¼š<code>dp[i][j-weight[i-1]]</code>&#x3D;&#x3D;(å¯ä»¥é‡å¤ï¼Œæ‰€ä»¥æ˜¯<code>i</code>è€Œä¸æ˜¯<code>i-1</code>)&#x3D;&#x3D;</p><p>ä¸è£…å…¥èƒŒåŒ…ï¼š<code>dp[i-1][j]</code></p><p>å…±æœ‰<code>dp[i][j] = dp[i][j-weight[i-1]] + dp[i-1][j]</code>ç§å‡‘æ³•</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># å®Œå…¨èƒŒåŒ…</span><br><span class="hljs-comment"># weight: ç‰©å“é‡é‡æ•°ç»„</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">knapsack_complete</span>(<span class="hljs-params">W,weight</span>):<br>    dp = np.zeros((<span class="hljs-built_in">len</span>(weight)+<span class="hljs-number">1</span>,W+<span class="hljs-number">1</span>),dtype=<span class="hljs-built_in">int</span>)<br>    <span class="hljs-comment"># base case</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(weight)+<span class="hljs-number">1</span>):<br>        dp[i][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-built_in">len</span>(weight)+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,W+<span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">if</span> j &gt;= weight[i-<span class="hljs-number">1</span>]:<br>                dp[i][j] = dp[i-<span class="hljs-number">1</span>][j] + dp[i][j - weight[i-<span class="hljs-number">1</span>]]<br>            <span class="hljs-keyword">else</span>:<br>                dp[i][j] = dp[i-<span class="hljs-number">1</span>][j]<br>    <span class="hljs-keyword">return</span> dp[<span class="hljs-built_in">len</span>(weight)][W]<br></code></pre></td></tr></table></figure><p>4ã€ä¼˜åŒ–ï¼šé™ä½ç©ºé—´å¤æ‚åº¦</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># çŠ¶æ€å‹ç¼©</span><br><span class="hljs-comment"># W: èƒŒåŒ…æ‰¿é‡ weight: ç‰©å“é‡é‡æ•°ç»„</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">knapsack_complete2</span>(<span class="hljs-params">W,weight</span>):<br>    dp = [<span class="hljs-number">0</span>]*(W+<span class="hljs-number">1</span>)<br>    <span class="hljs-comment"># base case</span><br>    dp[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(weight)):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, W+<span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">if</span> j &gt;= weight[i]:<br>                dp[j] = dp[j] + dp[j-weight[i]]<br>    <span class="hljs-keyword">return</span> dp<br></code></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦<code> O(len(weight)*W)</code>ï¼Œç©ºé—´å¤æ‚åº¦<code>O(W)</code>ã€‚</p><h4 id="è´ªå©ªç®—æ³•"><a href="#è´ªå©ªç®—æ³•" class="headerlink" title="è´ªå©ªç®—æ³•"></a>è´ªå©ªç®—æ³•</h4><ul><li>é€šè¿‡åšå‡ºä¸€ç³»åˆ—çŸ­è§†çš„å†³ç­–æ¥è§£å†³é—®é¢˜</li><li>æ¯ä¸ªå†³ç­–æœ¬èº«éƒ½èƒ½æœ€ä¼˜åœ°è§£å†³æŸäº›å­é—®é¢˜</li><li>ä½†è¿™äº›å­é—®é¢˜å¯¹æ•´ä¸ªé—®é¢˜æ¥è¯´æœªå¿…æœ€ä¼˜</li><li>è®¾è®¡çš„å…³é”®ï¼šæ‰¾åˆ°ä¸€ç§åˆé€‚çš„æ–¹æ³•ï¼ŒæŠŠé—®é¢˜åˆ†è§£æˆå‡ ä¸ªå°çš„éƒ¨åˆ†ï¼Œç„¶åæŠŠä»–ä»¬ç»„åˆåœ¨ä¸€èµ·</li><li>ä¾‹ï¼šä½œä¸šè°ƒåº¦ã€Dijkstraç®—æ³•ã€æœ€å°ç”Ÿæˆæ ‘</li></ul><blockquote><p>æ¯ä¸€æ­¥éƒ½åšå‡ºä¸€ä¸ªå±€éƒ¨æœ€ä¼˜çš„é€‰æ‹©ï¼Œæœ€ç»ˆçš„ç»“æœå°±æ˜¯å…¨å±€æœ€ä¼˜ã€‚</p><p>æ³¨ï¼šéƒ¨åˆ†é—®é¢˜å…·æœ‰è¿™ä¸ªæ€§è´¨</p></blockquote><h5 id="åŒºé—´è°ƒåº¦é—®é¢˜"><a href="#åŒºé—´è°ƒåº¦é—®é¢˜" class="headerlink" title="åŒºé—´è°ƒåº¦é—®é¢˜"></a>åŒºé—´è°ƒåº¦é—®é¢˜</h5><p>ç»™å‡ºå¤šä¸ªå½¢å¦‚[start,end]çš„é—­åŒºé—´ï¼Œç®—å‡ºè¿™äº›åŒºé—´ä¸­æœ€å¤šæœ‰å‡ ä¸ªäº’ä¸ç›¸äº¤çš„åŒºé—´ã€‚</p><blockquote><p>ä¾‹ï¼šintvs &#x3D; [[1,3],[2,4],[3,6]]ï¼Œåº”è¿”å›2ï¼Œå³æœ€å¤šæœ‰ä¸¤ä¸ªåŒºé—´äº’ä¸ç›¸äº¤</p></blockquote><p>è§£é¢˜æ€è·¯ï¼š</p><p>1ã€ä»åŒºé—´ç»“åˆintvsä¸­é€‰æ‹©ä¸€ä¸ªåŒºé—´xï¼Œè¿™ä¸ªxæ˜¯åœ¨å½“å‰æ‰€æœ‰åŒºé—´ä¸­ç»“æŸæœ€æ—©çš„ï¼ˆendæœ€å°ï¼‰</p><p>2ã€æŠŠæ‰€æœ‰ä¸xç›¸äº¤çš„åŒºé—´ä»åŒºé—´é›†åˆintvsä¸­åˆ é™¤</p><p>3ã€é‡å¤æ­¥éª¤1å’Œæ­¥éª¤2ï¼Œç›´åˆ°intvsä¸ºç©ºï¼Œä¹‹å‰é€‰å‡ºçš„xå°±æ˜¯æœ€å¤§ä¸ç›¸äº¤å­é›†ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># åŒºé—´è°ƒåº¦</span><br><span class="hljs-comment"># intvs: åŒºé—´é›†åˆ</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">key_function</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">return</span> x[<span class="hljs-number">1</span>]<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">interval_schedule</span>(<span class="hljs-params">intvs</span>):<br>    <span class="hljs-keyword">if</span> intvs == []:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>    <span class="hljs-comment"># æŒ‰endæ’åº</span><br>    intvs.sort(key=key_function)<br>    <span class="hljs-comment"># è‡³å°‘æœ‰ä¸€ä¸ªåŒºé—´ä¸ç›¸äº¤</span><br>    count = <span class="hljs-number">1</span><br>    <span class="hljs-comment"># æ’åºåï¼Œç¬¬ä¸€ä¸ªåŒºé—´å°±æ˜¯x</span><br>    x_end = intvs[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>]<br>    <span class="hljs-keyword">for</span> intv <span class="hljs-keyword">in</span> intvs:<br>        start = intv[<span class="hljs-number">0</span>]<br>        <span class="hljs-keyword">if</span> start &gt;= x_end:<br>            count += <span class="hljs-number">1</span><br>            x_end = intv[<span class="hljs-number">1</span>]<br>    <span class="hljs-keyword">return</span> count<br><br><span class="hljs-comment"># æµ‹è¯•</span><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    intvs = [[<span class="hljs-number">1</span>,<span class="hljs-number">3</span>],[<span class="hljs-number">2</span>,<span class="hljs-number">4</span>],[<span class="hljs-number">3</span>,<span class="hljs-number">6</span>],[<span class="hljs-number">8</span>,<span class="hljs-number">9</span>],[<span class="hljs-number">4</span>,<span class="hljs-number">5</span>]]<br>    <span class="hljs-built_in">print</span>(interval_schedule(intvs))<br></code></pre></td></tr></table></figure><h5 id="ä½œä¸šè°ƒåº¦"><a href="#ä½œä¸šè°ƒåº¦" class="headerlink" title="ä½œä¸šè°ƒåº¦"></a>ä½œä¸šè°ƒåº¦</h5><p><strong>é—®é¢˜æè¿°ï¼š</strong></p><p>ç»™å®šï¼šnä¸ªä½œä¸šå’Œä¸€å°æœºå™¨ï¼Œä½œä¸š<code>i</code>æœ‰ä¸€ä¸ªå¼€å§‹æ—¶é—´$s_i$å’Œä¸€ä¸ªå®Œæˆæ—¶é—´$f_i \geq s_i$</p><p>ç›®æ ‡ï¼šä»¥éé‡å çš„æ–¹å¼æ‰¾åˆ°å¯ä»¥åœ¨æœºå™¨ä¸Šè°ƒåº¦çš„æœ€å¤§ä½œä¸šå­é›†</p><p>å¯¹äºä»»æ„ä¸¤ä¸ªè®¡åˆ’ä½œä¸š<code>i</code>å’Œ<code>j</code>ï¼Œ$f_i \le s_j$ æˆ– $f_j \le s_i$ ï¼ˆä¸èƒ½åŒæ—¶è¿›è¡Œï¼‰</p><p>è´ªå©ªæ–¹æ³•ï¼šæŒç»­ä½œä¸šè°ƒåº¦ï¼Œç¡®ä¿æ²¡æœ‰æ–°ä½œä¸šä¸ç°æœ‰çš„ä½œä¸šé‡å ã€‚å…³é”®åœ¨äºè°ƒåº¦ä½œä¸šçš„é¡ºåºã€‚</p><p><strong>è´ªå©ªç­–ç•¥ï¼š</strong></p><p>æœ‰å‡ ç§å¯èƒ½çš„æ–¹æ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œæ¯ç§æ–¹æ³•éƒ½è¯•å›¾å°½é‡å‡å°‘æ¯ä¸ªè¿ç»­ä½œä¸šå¯èƒ½å¯¼è‡´çš„æ½œåœ¨é‡å æ¬¡æ•°</p><ul><li>æœ€çŸ­ä½œä¸šä¼˜å…ˆ</li><li>æœ€æ—©åˆ°è¾¾ä¼˜å…ˆ</li><li>å†²çªæœ€å°‘ä¼˜å…ˆ</li><li>æœ€æ—©å®Œæˆæ—¶é—´ä¼˜å…ˆ</li></ul><p><strong>æœ€æ—©å®Œæˆæ—¶é—´ä¼˜å…ˆï¼š</strong></p><p>è€ƒè™‘ä»»ä½•ä¸å°‘äº<code>k</code>ä¸ªä½œä¸šçš„è§£å†³æ–¹æ¡ˆ<code>S</code>ã€‚å¯¹<code>k</code>å½’çº³è¯æ˜ï¼Œè´ªå©ªç®—æ³•<code>G</code>è°ƒåº¦è‡³å°‘<code>k</code>ä¸ªä½œä¸šæ—¶ï¼Œå‰<code>k</code>ä¸ªä½œä¸šä¸æ™šäºæ‰€é€‰è§£ä¸­çš„å‰<code>k</code>ä¸ªä½œä¸šå®Œæˆã€‚è¿™ä¸€ç»“è®ºæ„å‘³ç€è´ªå©ªç®—æ³•è°ƒåº¦çš„ä½œä¸šæ•°è‡³å°‘ä¸æœ€ä¼˜è§£ç›¸åŒã€‚</p><p>åŸºæœ¬æƒ…å†µï¼š<code>k=0</code>ï¼Œå‡è®¾å½’çº³å‡è®¾é€‚ç”¨äº<code>k-1</code></p><p>ä»¤$S_k$ä¸º<code>S</code>ä¸­çš„ç¬¬<code>k</code>ä¸ªä½œä¸šï¼Œ$G_k$æ˜¯è´ªå©ªè°ƒåº¦çš„ç¬¬<code>k</code>ä¸ªä½œä¸šã€‚æ˜¾ç„¶ï¼Œ$s_{S_K} \ge f_{S_K-1} \ge f_{G_{K-1}}$ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ$S_k$åœ¨$G_{k-1}$å®Œæˆä¹‹åå¼€å§‹ã€‚å¦å¤–ï¼Œåœ¨è´ªå©ªä¸­è°ƒåº¦$G_{k-1}$æ—¶ï¼Œ$S_k$å°šæœªè¢«è€ƒè™‘ã€‚å› æ­¤è´ªå©ªç®—æ³•å¯ä»¥é€šè¿‡å¢åŠ ä½œä¸š$S_k$æ¥æ‰©å……å…¶è°ƒåº¦ã€‚å› æ­¤ï¼Œå®ƒä¼šæ‰¾åˆ°ä¸€ä¸ªå€™é€‰è€…æ¥æ‰©å……å®ƒçš„è§£å†³æ–¹æ¡ˆï¼Œç‰¹åˆ«æ˜¯é€‰æ‹©ä¸€ä¸ªä¸æ™šäº$S_k$çš„è§£å†³æ–¹æ¡ˆã€‚</p><p><strong>è´ªå©ªç®—æ³•çš„ç‰¹ç‚¹ï¼š</strong>åˆ†æ­¥éª¤æ¥æ„é€ ä¸€ä¸ªä¼˜åŒ–é—®é¢˜çš„è§£ï¼Œæ¯ä¸€æ­¥éœ€æ»¡è¶³ç‰¹å®šè¦æ±‚ã€‚</p><ul><li>å¯è¡Œï¼šä¸è¿åçº¦æŸæ¡ä»¶</li><li>å±€éƒ¨æœ€ä¼˜ï¼šå½“å‰æ­¥éª¤æœ€ä¼˜çš„å±€éƒ¨è§£</li><li>ä¸å¯æ’¤é”€ï¼šä¸€æ—¦åšå‡ºé€‰æ‹©ï¼Œåç»­æ­¥éª¤ä¸­æ— æ³•æ”¹å˜ï¼ˆä¸åŠ¨æ€è§„åˆ’çš„åŒºåˆ«ï¼ŒåŠ¨æ€è§„åˆ’è€ƒè™‘å…¨å±€ï¼Œå¯ä»¥æ’¤é”€ï¼Œè´ªå©ªè€ƒè™‘å±€éƒ¨ï¼‰</li></ul><h5 id="æœ€ä½³è‚¡ç¥¨äº¤æ˜“æ—¶é—´"><a href="#æœ€ä½³è‚¡ç¥¨äº¤æ˜“æ—¶é—´" class="headerlink" title="æœ€ä½³è‚¡ç¥¨äº¤æ˜“æ—¶é—´"></a>æœ€ä½³è‚¡ç¥¨äº¤æ˜“æ—¶é—´</h5><p>é—®é¢˜æè¿°ï¼šæ•´å½¢æ•°ç»„ä¸­çš„å…ƒç´ è¡¨ç¤ºå½“å¤©è‚¡ç¥¨çš„ä»·æ ¼ï¼›æ ¹æ®éœ€è¦ä¹°å…¥å–å‡ºï¼Œå®Œæˆå°½å¯èƒ½å¤šçš„äº¤æ˜“ï¼›ä¸å¾—åŒæ—¶è¿›è¡Œå¤šç¬”äº¤æ˜“ï¼Œå¿…é¡»åœ¨å†æ¬¡è´­ä¹°ä¹‹å‰å–å‡ºè‚¡ç¥¨ï¼›è®¾è®¡ç®—æ³•æ‰¾å‡ºæœ€å¤§åˆ©æ¶¦ã€‚</p><p><strong>è‚¡ç¥¨ä¹°å–é—®é¢˜ï¼š</strong></p><p>é—®é¢˜æè¿°ï¼šç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œå®ƒçš„ç¬¬<code>i</code>ä¸ªå…ƒç´ æ—¶ä¸€æ”¯ç»™å®šçš„è‚¡ç¥¨åœ¨ç¬¬<code>i</code>å¤©çš„ä»·æ ¼ï¼Œè®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ èƒ½è·å–çš„æœ€å¤§åˆ©ç›Šã€‚ä½ æœ€å¤šå¯ä»¥å®Œæˆ<code>k</code>ç¬”äº¤æ˜“ï¼Œä¸”ä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ã€‚</p><p>ç¤ºä¾‹ï¼š</p><blockquote><p>è¾“å…¥ï¼š[2,4,1], k&#x3D;2</p><p>è¾“å‡ºï¼š2ï¼ˆæœ€å¤§åˆ©ç›Šï¼‰</p><p>è¾“å…¥ï¼š[3,2,6,5,0,3], k&#x3D;2</p><p>è¾“å‡ºï¼š7ï¼ˆæœ€å¤§åˆ©ç›Šï¼‰</p></blockquote><p>1ã€æ˜ç¡®ã€çŠ¶æ€ã€‘å’Œã€é€‰æ‹©ã€‘</p><p>çŠ¶æ€ï¼šã€å¤©æ•°ã€‘ã€ã€å…è®¸äº¤æ˜“çš„æœ€å¤§æ¬¡æ•°ã€‘ã€ã€å½“å‰çš„æŒæœ‰çŠ¶æ€ã€‘(1æŒæœ‰0æ²¡æœ‰æŒæœ‰)</p><p>é€‰æ‹©ï¼šã€ä¹°å…¥ã€‘ã€ã€å–å‡ºã€‘ã€ã€æ— æ“ä½œã€‘</p><p>å°è¯•ç©·ä¸¾ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">dp[i][k][<span class="hljs-number">0</span> <span class="hljs-keyword">or</span> <span class="hljs-number">1</span>]<br><span class="hljs-number">0</span> &lt;= i &lt;= n-<span class="hljs-number">1</span>, <span class="hljs-number">1</span> &lt;= k &lt;= K<br><span class="hljs-comment"># nä¸ºå¤©æ•°ï¼ŒKä¸ºæœ€å¤šäº¤æ˜“æ•°</span><br><span class="hljs-comment"># æ­¤é—®é¢˜å…±n*K*2ç§çŠ¶æ€ï¼Œå¯å°è¯•ç©·ä¸¾</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,K+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> s <span class="hljs-keyword">in</span> &#123;<span class="hljs-number">0</span>,<span class="hljs-number">1</span>&#125;:<br>            dp[i][k][s] = <span class="hljs-built_in">max</span>(buy,sell,rest)<br><span class="hljs-keyword">return</span> dp[n-<span class="hljs-number">1</span>][K][<span class="hljs-number">0</span>]<br></code></pre></td></tr></table></figure><p>2ã€çŠ¶æ€è½¬ç§»æ¡†æ¶</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># base case:</span><br><span class="hljs-comment"># i=-1(æ²¡å¼€å§‹) k=0(ä¸å…è®¸äº¤æ˜“) åˆ©æ¶¦ä¸º0</span><br>dp[-<span class="hljs-number">1</span>][k][<span class="hljs-number">0</span>] = dp[i][<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span><br><span class="hljs-comment"># i=-1 s=1(æ²¡å¼€å§‹æ—¶æŒæœ‰è‚¡ç¥¨) k=0 s=1(ä¸å…è®¸äº¤æ˜“æŒæœ‰è‚¡ç¥¨) è´Ÿæ— ç©·è¡¨ä¸å¯èƒ½</span><br>dp[-<span class="hljs-number">1</span>][k][<span class="hljs-number">1</span>] = dp[i][<span class="hljs-number">0</span>][<span class="hljs-number">1</span>] = -<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;INF&#x27;</span>)<br><br><span class="hljs-comment"># çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š</span><br>dp[i][k][<span class="hljs-number">0</span>] = <span class="hljs-built_in">max</span>(dp[i-<span class="hljs-number">1</span>][k][<span class="hljs-number">0</span>],dp[i-<span class="hljs-number">1</span>][k][<span class="hljs-number">1</span>] + prices[i])<br>dp[i][k][<span class="hljs-number">1</span>] = <span class="hljs-built_in">max</span>(dp[i-<span class="hljs-number">1</span>][k][<span class="hljs-number">1</span>],dp[i-<span class="hljs-number">1</span>][k-<span class="hljs-number">1</span>][<span class="hljs-number">0</span>] - prices[i])<br></code></pre></td></tr></table></figure><p>3ã€è¿ç”¨åˆ°ä¸åŒç±»å‹çš„é¢˜ç›®</p><ul><li>k&#x3D;1</li></ul><p>æ­¤æ—¶<code>k</code>å‡ä¸º1ï¼Œä¸ä¼šæ”¹å˜ï¼Œ<code>k</code>å¯¹äºçŠ¶æ€è½¬ç§»å·²ç»æ²¡æœ‰å½±å“äº†ï¼Œå¯ä»¥ç®€åŒ–<code>k</code>ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># k=1çš„æƒ…å†µ</span><br><span class="hljs-comment"># prices: è‚¡ç¥¨ä»·æ ¼åˆ—è¡¨</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">profit2</span>(<span class="hljs-params">prices</span>):<br>    n = <span class="hljs-built_in">len</span>(prices)<br>    dp = np.zeros((n,<span class="hljs-number">2</span>),dtype=<span class="hljs-built_in">int</span>)<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        <span class="hljs-keyword">if</span> i-<span class="hljs-number">1</span>==-<span class="hljs-number">1</span>: <br>            dp[i][<span class="hljs-number">0</span>]=<span class="hljs-number">0</span><br>            dp[i][<span class="hljs-number">1</span>]=-prices[i]<br>            <span class="hljs-keyword">continue</span><br>        dp[i][<span class="hljs-number">0</span>]=<span class="hljs-built_in">max</span>(dp[i-<span class="hljs-number">1</span>][<span class="hljs-number">0</span>],dp[i-<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]+prices[i])<br>        dp[i][<span class="hljs-number">1</span>]=<span class="hljs-built_in">max</span>(dp[i-<span class="hljs-number">1</span>][<span class="hljs-number">1</span>],-prices[i])<br>    <span class="hljs-keyword">return</span> dp[n-<span class="hljs-number">1</span>][<span class="hljs-number">0</span>]<br></code></pre></td></tr></table></figure><p>ä¼˜åŒ–ï¼šé™ä½ç©ºé—´å¤æ‚åº¦</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># æ”¹è¿›ï¼šdpæ•°ç»„-&gt;ä¸€ä¸ªå˜é‡</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">profit3</span>(<span class="hljs-params">prices</span>):<br>    n = <span class="hljs-built_in">len</span>(prices)<br>    <span class="hljs-comment"># base case</span><br>    dp0,dp1 = <span class="hljs-number">0</span>,-<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;INF&#x27;</span>)<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        dp0 = <span class="hljs-built_in">max</span>(dp0,dp1+prices[i])<br>        dp1 = <span class="hljs-built_in">max</span>(dp1,-prices[i])<br>    <span class="hljs-keyword">return</span> dp0<br></code></pre></td></tr></table></figure><ul><li>k&#x3D;æ­£æ— ç©·</li></ul><p>æ­¤æ—¶<code>k=k-1</code>ï¼Œä¾ç„¶ä¸éœ€è¦<code>k</code>æ¥è®°å½•çŠ¶æ€</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># k= æ­£æ— ç©·</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">profit4</span>(<span class="hljs-params">prices</span>):<br>    n=<span class="hljs-built_in">len</span>(prices)<br>    dp0,dp1 = <span class="hljs-number">0</span>,-<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;INF&#x27;</span>)<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        tmp=dp0<br>        dp0=<span class="hljs-built_in">max</span>(dp0,dp1+prices[i])<br>        dp1=<span class="hljs-built_in">max</span>(dp1,tmp-prices[i])<br>    <span class="hljs-keyword">return</span> dp0<br></code></pre></td></tr></table></figure><ul><li>k&#x3D;æ­£æ— ç©·+å†·å´ä¸€å¤©</li></ul><p>æ¯æ¬¡sellåï¼Œè¦ç­‰ä¸€å¤©æ‰èƒ½äº¤æ˜“</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># k=æ­£æ— ç©·+cooldown</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">profit5</span>(<span class="hljs-params">prices</span>):<br>    n=<span class="hljs-built_in">len</span>(prices)<br>    dp0,dp1 = <span class="hljs-number">0</span>,-<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;INF&#x27;</span>)<br>    dp_pre0 = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> price <span class="hljs-keyword">in</span> prices:<br>        tmp=dp0<br>        dp0 = <span class="hljs-built_in">max</span>(dp0,dp1+price)<br>        dp1 = <span class="hljs-built_in">max</span>(dp1,dp_pre0-price)<br>        dp_pre0=tmp<br>    <span class="hljs-keyword">return</span> dp0<br></code></pre></td></tr></table></figure><ul><li>k&#x3D;æ­£æ— ç©·+fee</li></ul><p>æŠŠæ‰‹ç»­è´¹ä»åˆ©æ¶¦ä¸­å‡å»</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># k=æ­£æ— ç©·+fee</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">profit6</span>(<span class="hljs-params">prices,fee</span>):<br>    n=<span class="hljs-built_in">len</span>(prices)<br>    dp0,dp1=<span class="hljs-number">0</span>,-<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;INF&#x27;</span>)<br>    <span class="hljs-keyword">for</span> price <span class="hljs-keyword">in</span> prices:<br>        tmp = dp0<br>        dp0 = <span class="hljs-built_in">max</span>(dp0,dp1+price)<br>        dp1 = <span class="hljs-built_in">max</span>(dp1,tmp-price-fee)<br>    <span class="hljs-keyword">return</span> dp0<br></code></pre></td></tr></table></figure><ul><li>k&#x3D;2</li></ul><p>æ²¡æœ‰æ¶ˆæ‰<code>k</code>çš„å½±å“ï¼Œæ‰€ä»¥å¿…é¡»å¯¹<code>k</code>è¿›è¡Œç©·ä¸¾</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># k=2</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">profit7</span>(<span class="hljs-params">prices</span>):<br>    K=<span class="hljs-number">2</span><br>    n=<span class="hljs-built_in">len</span>(prices)<br>    <span class="hljs-comment"># åˆ›å»ºä¸‰ç»´è¡¨</span><br>    dp = np.zeros((n,K+<span class="hljs-number">1</span>,<span class="hljs-number">2</span>),dtype=<span class="hljs-built_in">float</span>)<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(K,<span class="hljs-number">0</span>,-<span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">if</span> i-<span class="hljs-number">1</span>==-<span class="hljs-number">1</span>:<br>                dp[i][k][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span><br>                dp[i][k][<span class="hljs-number">1</span>] = -prices[i]<br>                <span class="hljs-keyword">continue</span><br>            dp[i][k][<span class="hljs-number">0</span>] = <span class="hljs-built_in">max</span>(dp[i-<span class="hljs-number">1</span>][k][<span class="hljs-number">0</span>],dp[i-<span class="hljs-number">1</span>][k][<span class="hljs-number">1</span>]+prices[i])<br>            dp[i][k][<span class="hljs-number">1</span>] = <span class="hljs-built_in">max</span>(dp[i-<span class="hljs-number">1</span>][k][<span class="hljs-number">1</span>],dp[i-<span class="hljs-number">1</span>][k-<span class="hljs-number">1</span>][<span class="hljs-number">0</span>]-prices[i])<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">int</span>(dp[n-<span class="hljs-number">1</span>][K][<span class="hljs-number">0</span>])<br></code></pre></td></tr></table></figure><ul><li>k&#x3D;any integer</li></ul><p>Kéå¸¸å¤§æ—¶ï¼Œå¯ä½¿ç”¨k&#x3D;æ­£æ— ç©·çš„è§£æ³•ï¼Œå‡å°‘éå†ã€‚</p><p>æ­¤å¤–å¯ç±»ä¼¼k&#x3D;2çš„å†™æ³•</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># k=any integer</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">profit8</span>(<span class="hljs-params">prices,K</span>):<br>    n=<span class="hljs-built_in">len</span>(prices)<br>    <span class="hljs-keyword">if</span> K &gt; n/<span class="hljs-number">2</span>:<br>        <span class="hljs-keyword">return</span> profit4(prices)<br>    <span class="hljs-comment"># åˆ›å»ºä¸‰ç»´è¡¨</span><br>    dp = np.zeros((n,K+<span class="hljs-number">1</span>,<span class="hljs-number">2</span>),dtype=<span class="hljs-built_in">float</span>)<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(K,<span class="hljs-number">0</span>,-<span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">if</span> i-<span class="hljs-number">1</span>==-<span class="hljs-number">1</span>:<br>                dp[i][k][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span><br>                dp[i][k][<span class="hljs-number">1</span>] = -prices[i]<br>                <span class="hljs-keyword">continue</span><br>            dp[i][k][<span class="hljs-number">0</span>] = <span class="hljs-built_in">max</span>(dp[i-<span class="hljs-number">1</span>][k][<span class="hljs-number">0</span>],dp[i-<span class="hljs-number">1</span>][k][<span class="hljs-number">1</span>]+prices[i])<br>            dp[i][k][<span class="hljs-number">1</span>] = <span class="hljs-built_in">max</span>(dp[i-<span class="hljs-number">1</span>][k][<span class="hljs-number">1</span>],dp[i-<span class="hljs-number">1</span>][k-<span class="hljs-number">1</span>][<span class="hljs-number">0</span>]-prices[i])<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">int</span>(dp[n-<span class="hljs-number">1</span>][K][<span class="hljs-number">0</span>])<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼šç”¨æ•°ç»„å­˜å‚¨æ‰€æœ‰çš„çŠ¶æ€ï¼Œä»base caseå¼€å§‹çŠ¶æ€è½¬ç§»ï¼Œè‡³è§£ã€‚</p><h5 id="åœ†å’Œå¼¦ï¼ˆå¡ç‰¹å…°æ•°ï¼‰"><a href="#åœ†å’Œå¼¦ï¼ˆå¡ç‰¹å…°æ•°ï¼‰" class="headerlink" title="åœ†å’Œå¼¦ï¼ˆå¡ç‰¹å…°æ•°ï¼‰"></a>åœ†å’Œå¼¦ï¼ˆå¡ç‰¹å…°æ•°ï¼‰</h5><p>é—®é¢˜æè¿°ï¼šåœ†ä¸Šæœ‰<code>2n</code>ä¸ªç‚¹ï¼Œå¯ä»¥è¿æˆ<code>n</code>ä¸ªä¸ç›¸äº¤çš„å¼¦ï¼Œä¸åŒçš„è¿æ¥æ–¹å¼æœ‰å¤šå°‘ï¼Ÿ</p><p>è§£é¢˜æ€è·¯ï¼š</p><p>0ã€å®šä¹‰å‡½æ•°<code>f(2n)</code>ï¼šä¸ºæ‰€æ±‚ç­”æ¡ˆ</p><p>1ã€è¿æ¥ä»»æ„ä¸¤ä¸ªç‚¹ï¼Œå¯ä»¥ç”¨ä¸€æ ¹å¼¦å°†æ•´ä¸ªåœ†åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œä¾‹å¦‚å¯¹äºæœ‰<code>2n</code>ä¸ªç‚¹çš„åœ†ï¼Œå¯ä»¥åˆ†æˆ<code>2</code>å’Œ<code>n-4</code>ä¸¤éƒ¨åˆ†ï¼Œäºæ˜¯è¿™ä¸ªæƒ…å†µæœ‰<code>f(2)*f(n-4)</code>ç§è¿æ¥æ–¹å¼ã€‚</p><p>2ã€å› ä¸ºåˆ’åˆ†è¦åšåˆ°ä¸¤è¾¹éƒ½æ˜¯å¶æ•°ï¼Œæ‰èƒ½ä¿è¯è¿æ¥å‡º<code>n</code>ä¸ªå¼¦ä¸ç›¸äº¤ï¼Œæ‰€ä»¥ä»å•ä¸ªç‚¹å‡ºå‘ï¼Œæœ‰<code>n/2</code>ç§åˆ’åˆ†ã€‚</p><p>3ã€æœ€ç»ˆç­”æ¡ˆå°±æ˜¯æŠŠæ¯ç§åˆ’åˆ†çš„æ‰€æœ‰è¿æ¥æ–¹å¼ç›¸åŠ ã€‚</p><p>å®é™…æ˜¯ç®—å¡ç‰¹å…°æ•°ï¼Œä¹Ÿå³ï¼š<code>f(n)=f(0)*f(n-1)+f(1)*f(n-2)+...+f(n-1)*f(0)</code></p><p>ä¾‹ï¼š<code>[1, 1, 2, 5, 14, 42, 132, 429, 1430, 4862, 16796] </code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># åœ†å’Œå¼¦</span><br><span class="hljs-comment"># åœ†ä¸Šæœ‰2nä¸ªç‚¹ï¼Œå¯ä»¥è¿æˆnä¸ªä¸ç›¸äº¤çš„å¼¦ï¼Œä¸åŒçš„è¿æ¥æ–¹å¼æœ‰å¤šå°‘ï¼Ÿ</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Catalan</span>(<span class="hljs-params">n</span>):<br>    <span class="hljs-keyword">if</span> n%<span class="hljs-number">2</span> != <span class="hljs-number">0</span>: <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>    dp = [<span class="hljs-number">0</span>]*<span class="hljs-built_in">int</span>(n/<span class="hljs-number">2</span>+<span class="hljs-number">1</span>)<br>    dp[<span class="hljs-number">0</span>]=dp[<span class="hljs-number">1</span>]=<span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>,<span class="hljs-built_in">int</span>(n/<span class="hljs-number">2</span>)+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i):<br>            dp[i] += dp[j]*dp[i-j-<span class="hljs-number">1</span>]<br>    <span class="hljs-keyword">return</span> dp[<span class="hljs-built_in">int</span>(n/<span class="hljs-number">2</span>)]<br></code></pre></td></tr></table></figure><blockquote><p>åŒæ ·æ˜¯æ±‚å¡ç‰¹å…°æ•°çš„é—®é¢˜ï¼š</p><ul><li>å‡ºæ ˆé—®é¢˜ï¼šå·²çŸ¥è¿›å±•é¡ºåº<code>abcd</code>ï¼Œå¯èƒ½çš„å‡ºæ ˆé¡ºåºå¤šå°‘ç§ï¼Ÿ<code>f(4)=14</code>ã€‚</li><li>nä¸ªç¬¦å·åˆ†åˆ«ä¾æ¬¡å…¥æ ˆ</li><li>å½’ç»“ä¸ºå·²çŸ¥é—®é¢˜ï¼šåœ¨n*nçš„æ–¹æ ¼ä¸­ï¼Œå…¥æ ˆ&#x3D;å‘ä¸Šï¼Œå‡ºæ ˆ&#x3D;å‘å³ï¼Œèµ·ç‚¹ï¼ˆ0,0ï¼‰ï¼Œç»ˆç‚¹ï¼ˆn,nï¼‰</li><li>æ»¡äºŒå‰æ ‘é—®é¢˜ï¼šæ±‚ä¸ª(n+1)ä¸ªå¶å­çš„æ»¡äºŒå‰æ ‘çš„ä¸ªæ•°ï¼ˆè¿™é‡Œçš„æ»¡äºŒå‰æ ‘ï¼ˆfull binary treeï¼‰æ˜¯æŒ‡é™¤æ ¹èŠ‚ç‚¹å¤–çš„èŠ‚ç‚¹è¦ä¹ˆæœ‰2ä¸ªè¦ä¹ˆæœ‰0ä¸ªèŠ‚ç‚¹ï¼‰ã€‚<code>f(3)=5</code>å³4ä¸ªå¶å­çš„æ»¡äºŒå‰æ ‘ä¸ªæ•°ã€‚</li><li>è´­ç¥¨é—®é¢˜ï¼šç”µå½±ç¥¨æ¯50å¼ å…ƒï¼Œå¦‚æœæœ‰ä¸ªäººæ’é˜Ÿä¹°ç¥¨ï¼Œå…¶ä¸­ä¸ªnäººå„æŒæœ‰100å…ƒé¢å€¼çš„é’ç¥¨å¼ ï¼Œå¦å¤–ä¸ªmäººå„æŒæœ‰50å…ƒé¢å€¼çš„é’ç¥¨å¼ ï¼Œè€Œç¥¨æˆ¿æ²¡æœ‰é¢„å¤‡æ‰¾é›¶ï¼æœ‰å¤šå°‘ç§æ–¹æ³•å¯ä»¥å°†è¿™ä¸ªäººæ’æˆä¸€åˆ—ï¼Œé¡ºåºè´­ç¥¨ï¼Ÿ<code>m=næ—¶ï¼Œå³ä¸ºCatalanæ•°</code>ã€‚</li><li>å‡¸å¤šè¾¹å½¢çš„å‰–åˆ†ï¼šæ±‚å‡¸ï¼ˆn+2ï¼‰è¾¹å½¢ç”¨å…¶(n-1)æ¡å¯¹è§’çº¿åˆ†å‰²ä¸ºäº’ä¸é‡å çš„ä¸‰è§’å½¢çš„åˆ†æ³•æ€»æ•°ã€‚<code>f(4)=14</code>å‡¸6è¾¹å½¢ç”¨3æ¡å¯¹è§’çº¿çš„åˆ†æ³•æ€»æ•°ã€‚</li></ul></blockquote><h6 id="å¡ç‰¹å…°è®¡æ•°é—®é¢˜"><a href="#å¡ç‰¹å…°è®¡æ•°é—®é¢˜" class="headerlink" title="å¡ç‰¹å…°è®¡æ•°é—®é¢˜"></a>å¡ç‰¹å…°è®¡æ•°é—®é¢˜</h6><p><img src="/blog/2022/09/01/%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/2022-04-21_133416.png" alt="2022-04-21_133416"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># åŠ¨æ€è§„åˆ’çš„è§£æ³•</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Catalan4</span>(<span class="hljs-params">m,n</span>):<br>    dp = np.zeros((m+<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>), dtype=<span class="hljs-built_in">int</span>)<br>    dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,j+<span class="hljs-number">1</span>):<br>            dp[i][j] = dp[i-<span class="hljs-number">1</span>][j] + dp[i][j-<span class="hljs-number">1</span>]<br>    <span class="hljs-keyword">return</span> dp[m][n]<br></code></pre></td></tr></table></figure><h6 id="äºŒå‰æ ‘æ•°é‡"><a href="#äºŒå‰æ ‘æ•°é‡" class="headerlink" title="äºŒå‰æ ‘æ•°é‡"></a>äºŒå‰æ ‘æ•°é‡</h6><ul><li>ç»™å®šäºŒå‰æ ‘çš„ä¸­åºéå†ç»“æœï¼Œæœ‰å¤šå°‘ç§äºŒå‰æ ‘æ»¡è¶³è¿™ç§éå†ã€‚</li><li>è§‚å¯Ÿè§†è§’ï¼šæ ¹èŠ‚ç‚¹åœ¨å“ªé‡Œï¼Ÿ</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># äºŒå‰æ ‘æ•°é‡çš„é€’å½’</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Catalan6</span>(<span class="hljs-params">n</span>):<br>    <span class="hljs-built_in">sum</span> = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">if</span> n == <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span>  <span class="hljs-built_in">range</span>(n):<br>        <span class="hljs-built_in">sum</span> += Catalan6(i) * Catalan6(n-i-<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">sum</span><br></code></pre></td></tr></table></figure><h5 id="ä½œä¸šï¼šç†Ÿæ‚‰æŒæ¡Viterbiç®—æ³•"><a href="#ä½œä¸šï¼šç†Ÿæ‚‰æŒæ¡Viterbiç®—æ³•" class="headerlink" title="ä½œä¸šï¼šç†Ÿæ‚‰æŒæ¡Viterbiç®—æ³•"></a>ä½œä¸šï¼šç†Ÿæ‚‰æŒæ¡Viterbiç®—æ³•</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">viterbi_decode</span>(<span class="hljs-params">score, transition</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;è§£ç TensorFlowä¹‹å¤–å¾—åˆ†æœ€é«˜çš„æ ‡ç­¾åºåˆ—</span><br><span class="hljs-string">    å‚æ•°:</span><br><span class="hljs-string">        score: é¢„æµ‹æ¦‚ç‡çŸ©é˜µ</span><br><span class="hljs-string">        transition: è½¬ç§»çŸ©é˜µ</span><br><span class="hljs-string">    è¿”å›:</span><br><span class="hljs-string">        viterbi: æœ€é«˜å¾—åˆ†æ ‡ç­¾çš„æ•´æ•°åˆ—è¡¨</span><br><span class="hljs-string">        viterbi_score: viterbiåˆ†æ•°</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-comment"># ç”¨äºå­˜å‚¨ç´¯è®¡åˆ†æ•°çš„æ•°ç»„</span><br>    <span class="hljs-comment"># np.zeros_likeè¿”å›ä¸€ä¸ªæ–°çŸ©é˜µï¼Œå…¶ç»´åº¦ä¸çŸ©é˜µscoreä¸€è‡´ï¼Œå¹¶ä¸ºå…¶åˆå§‹åŒ–ä¸ºå…¨0ï¼›</span><br>    trellis = np.zeros_like(score)<br>    <span class="hljs-comment"># ç”¨äºå­˜å‚¨æœ€ä¼˜è·¯å¾„ç´¢å¼•çš„æ•°ç»„</span><br>    backpointers = np.zeros_like(score, dtype=np.int32)<br>    <span class="hljs-comment"># ç¬¬ä¸€ä¸ªæ—¶åˆ»çš„ç´¯è®¡åˆ†æ•°</span><br>    trellis[<span class="hljs-number">0</span>] = score[<span class="hljs-number">0</span>]<br><br>    <span class="hljs-comment"># shape: è¡Œï¼Œåˆ—</span><br>    <span class="hljs-comment"># å¾ªç¯scoreçš„è¡Œï¼Œä»1å¼€å§‹</span><br>    <span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, score.shape[<span class="hljs-number">0</span>]):<br>        <span class="hljs-comment"># å„ä¸ªçŠ¶æ€æˆªæ­¢åˆ°ä¸Šä¸ªæ—¶åˆ»çš„ç´¯è®¡åˆ†æ•° + è½¬ç§»åˆ†æ•°</span><br>        <span class="hljs-comment"># æŠŠtrellisçš„ç¬¬ä¸€è¡Œæ‰©å±•ä¸ºä¸‰è¡Œï¼ˆç¬¬ä¸€åˆ—çš„æ•°å½¢æˆç¬¬ä¸€è¡Œï¼‰ï¼Œä¸transisionç›¸åŠ </span><br>        v = np.expand_dims(trellis[t - <span class="hljs-number">1</span>], <span class="hljs-number">1</span>) + transition<br>        <span class="hljs-comment"># maxï¼ˆå„ä¸ªçŠ¶æ€æˆªæ­¢åˆ°ä¸Šä¸ªæ—¶åˆ»çš„ç´¯è®¡åˆ†æ•° + è½¬ç§»åˆ†æ•°ï¼‰+ é€‰æ‹©å½“å‰çŠ¶æ€çš„åˆ†æ•°</span><br>        <span class="hljs-comment"># axis=0 ä»£è¡¨è¡Œï¼ˆå¯¹æ¯åˆ—ï¼Œé€‰å‡ºæœ€å¤§è¡Œï¼‰ , axis=1 ä»£è¡¨åˆ—</span><br>        trellis[t] = score[t] + np.<span class="hljs-built_in">max</span>(v, <span class="hljs-number">0</span>)<br>        <span class="hljs-comment"># è®°å½•ç´¯è®¡åˆ†æ•°æœ€å¤§çš„ç´¢å¼•</span><br>        backpointers[t] = np.argmax(v, <span class="hljs-number">0</span>)<br><br>    <span class="hljs-comment"># æœ€ä¼˜è·¯å¾„çš„ç»“æœ</span><br>    <span class="hljs-comment"># trellisæ•°ç»„æœ€åä¸€è¡Œæœ€å¤§å€¼çš„ç´¢å¼•ä»¥æ•°ç»„çš„å½¢å¼è¿”å›</span><br>    viterbi = [np.argmax(trellis[-<span class="hljs-number">1</span>])]<br>    <span class="hljs-comment"># åå‘éå†æ¯ä¸ªæ—¶åˆ»ï¼Œå¾—åˆ°æœ€ä¼˜è·¯å¾„</span><br>    <span class="hljs-keyword">for</span> bp <span class="hljs-keyword">in</span> <span class="hljs-built_in">reversed</span>(backpointers[<span class="hljs-number">1</span>:]):<br>        viterbi.append(bp[viterbi[-<span class="hljs-number">1</span>]])<br>    viterbi.reverse()<br><br>    viterbi_score = np.<span class="hljs-built_in">max</span>(trellis[-<span class="hljs-number">1</span>])<br>    <span class="hljs-keyword">return</span> viterbi, viterbi_score<br><br><span class="hljs-comment"># æµ‹è¯•</span><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    score = np.array([[<span class="hljs-number">0.8</span>,<span class="hljs-number">0.1</span>,<span class="hljs-number">0.1</span>],[<span class="hljs-number">0.1</span>,<span class="hljs-number">0.5</span>,<span class="hljs-number">0.4</span>],[<span class="hljs-number">0.2</span>,<span class="hljs-number">0.6</span>,<span class="hljs-number">0.2</span>]])<br>    transition = np.array([[<span class="hljs-number">0.5</span>,<span class="hljs-number">0.2</span>,<span class="hljs-number">0.3</span>],[<span class="hljs-number">0.3</span>,<span class="hljs-number">0.5</span>,<span class="hljs-number">0.2</span>],[<span class="hljs-number">0.2</span>,<span class="hljs-number">0.3</span>,<span class="hljs-number">0.5</span>]])<br>    <span class="hljs-built_in">print</span>(viterbi_decode(score, transition))<br></code></pre></td></tr></table></figure><h3 id="4ã€Catalan-x2F-åŠ¨æ€æ—¶é—´æ‹‰ä¼¸-x2F-Dijkstra"><a href="#4ã€Catalan-x2F-åŠ¨æ€æ—¶é—´æ‹‰ä¼¸-x2F-Dijkstra" class="headerlink" title="4ã€Catalan&#x2F;åŠ¨æ€æ—¶é—´æ‹‰ä¼¸&#x2F;Dijkstra"></a>4ã€Catalan&#x2F;åŠ¨æ€æ—¶é—´æ‹‰ä¼¸&#x2F;Dijkstra</h3><h5 id="è‚¡ç¥¨äº¤æ˜“æ—¶é—´"><a href="#è‚¡ç¥¨äº¤æ˜“æ—¶é—´" class="headerlink" title="è‚¡ç¥¨äº¤æ˜“æ—¶é—´"></a>è‚¡ç¥¨äº¤æ˜“æ—¶é—´</h5><p>ä¸€è¶Ÿæ‰«æï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># a:è‚¡ç¥¨ä»·æ ¼æ•°ç»„</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">profit</span>(<span class="hljs-params">a</span>):<br>    tmp = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-built_in">len</span>(a)):<br>        <span class="hljs-keyword">if</span> a[i] &gt; a[i-<span class="hljs-number">1</span>]:<br>            tmp += a[i] - a[i-<span class="hljs-number">1</span>]<br>    <span class="hljs-keyword">return</span> tmp<br></code></pre></td></tr></table></figure><p>è¿™æ˜¯è€å¸ˆç»™çš„è§£ç­”ï¼Œç›¸å½“äºæŠŠæ‰€æœ‰ç›¸é‚»çš„å‰å°åå¤§å…¨éƒ¨ç›¸åŠ ï¼Œæ‹¿åˆ°äº†å…¨å±€æœ€ä¼˜ã€‚</p><p>è¯æ˜ä¸è¯¦ï¼Œä½†ç»æµ‹è¯•ä¸åŠ¨æ€è§„åˆ’è§£æ³•<code>profit4(prices)</code>èƒ½å¾—å‡ºä¸€æ ·çš„ç»“æœã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># æ¯”è¾ƒæµ‹è¯•</span><br><span class="hljs-keyword">import</span> random<br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">20</span>):<br>        random_int_list = []<br>        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">20</span>):<br>            random_int_list.append(random.randint(<span class="hljs-number">0</span>,<span class="hljs-number">10</span>))<br>        <span class="hljs-built_in">print</span>(profit(random_int_list))<br>        <span class="hljs-built_in">print</span>(profit4(random_int_list))<br></code></pre></td></tr></table></figure><h5 id="ç”·ç”Ÿï¼ˆ100ï¼‰å¥³ç”Ÿï¼ˆ50ï¼‰ä¹°ç¥¨"><a href="#ç”·ç”Ÿï¼ˆ100ï¼‰å¥³ç”Ÿï¼ˆ50ï¼‰ä¹°ç¥¨" class="headerlink" title="ç”·ç”Ÿï¼ˆ100ï¼‰å¥³ç”Ÿï¼ˆ50ï¼‰ä¹°ç¥¨"></a>ç”·ç”Ÿï¼ˆ100ï¼‰å¥³ç”Ÿï¼ˆ50ï¼‰ä¹°ç¥¨</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># åŠåŒºç½‘è·¯å¾„</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Catalan3</span>(<span class="hljs-params">i,j</span>):<br>    <span class="hljs-comment"># base case</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-number">1</span> == i <span class="hljs-keyword">and</span> <span class="hljs-number">1</span> == j: <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>    <span class="hljs-keyword">if</span> i &lt; j <span class="hljs-keyword">and</span> i &gt; <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> j &gt; <span class="hljs-number">1</span>:<br>        <span class="hljs-keyword">return</span> Catalan3(i-<span class="hljs-number">1</span>, j) + Catalan3(i, j-<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">if</span> i == j: <span class="hljs-keyword">return</span> Catalan3(i-<span class="hljs-number">1</span>, j)<br>    <span class="hljs-keyword">if</span> <span class="hljs-number">1</span> == i: <span class="hljs-keyword">return</span> Catalan3(i, j-<span class="hljs-number">1</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;should have not reached here&#x27;</span>)<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><h5 id="åœ†å’Œå¼¦"><a href="#åœ†å’Œå¼¦" class="headerlink" title="åœ†å’Œå¼¦"></a>åœ†å’Œå¼¦</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># æ±‚Catalané€’å½’çš„å†™æ³•</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Catalan2</span>(<span class="hljs-params">n</span>):<br>    <span class="hljs-keyword">if</span> n%<span class="hljs-number">2</span> != <span class="hljs-number">0</span>: <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>    <span class="hljs-keyword">if</span> n == <span class="hljs-number">2</span>: <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>    <span class="hljs-keyword">if</span> n == <span class="hljs-number">0</span>: <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>    <span class="hljs-keyword">else</span>:<br>        tmp = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,n,<span class="hljs-number">2</span>):<br>            tmp += Catalan2(i)*Catalan2(n-i-<span class="hljs-number">2</span>)<br>        <span class="hljs-keyword">return</span> tmp<br></code></pre></td></tr></table></figure><h4 id="åŠ¨æ€æ—¶é—´æ‹‰ä¼¸"><a href="#åŠ¨æ€æ—¶é—´æ‹‰ä¼¸" class="headerlink" title="åŠ¨æ€æ—¶é—´æ‹‰ä¼¸"></a>åŠ¨æ€æ—¶é—´æ‹‰ä¼¸</h4><ul><li><p>å¤šæ™®å‹’æ•ˆåº”ï¼šæ³¢åœ¨æ³¢æºç§»å‘è§‚å¯Ÿè€…æ—¶æ¥æ”¶é¢‘ç‡å˜é«˜ï¼Œè€Œåœ¨æ³¢æºè¿œç¦»è§‚å¯Ÿè€…æ—¶æ¥æ”¶é¢‘ç‡å˜ä½ã€‚</p></li><li><p>æ¨¡æ¿åŒ¹é…</p></li><li><p>æ—¶é—´åºåˆ—å¯¹å‡†</p></li><li><p>åºåˆ—ç›¸ä¼¼åº¦åº¦é‡</p></li></ul><p>ä¸¤ä¸ªæœ‰é™é•¿åº¦çš„åºåˆ—$X&#x3D;\left{x_1,\dots,x_m\right}$å’Œ$Y&#x3D;\left{y_1,\dots,y_n\right}$</p><p>éè´Ÿä»£ä»·å‡½æ•°$d(x_i,y_j)$</p><p>å¦‚ä½•å‘ç°$X$å’Œ$Y$çš„æœ€ä½³å¯¹åº”å…³ç³»ï¼Ÿ</p><p><strong>åŠ¨æ€è§„åˆ’æ±‚è§£ï¼š</strong></p><ul><li>è½¬åŒ–ä¸ºä»(0,0)åˆ°(m,n)çš„æœ€çŸ­è·¯å¾„é—®é¢˜</li><li>å·²çŸ¥D(0,0)ï¼Œæ±‚D(m,n)</li><li>é€’æ¨è¿‡ç¨‹ï¼š<code>D(i,j) = d(i,j) + min&#123;D(i,j-1),D(i-1,j-1),D(i-1,j)&#125;</code></li></ul><h5 id="Dijkstraæœ€çŸ­è·¯å¾„ç®—æ³•ï¼ˆè´ªå©ªç®—æ³•ï¼‰"><a href="#Dijkstraæœ€çŸ­è·¯å¾„ç®—æ³•ï¼ˆè´ªå©ªç®—æ³•ï¼‰" class="headerlink" title="Dijkstraæœ€çŸ­è·¯å¾„ç®—æ³•ï¼ˆè´ªå©ªç®—æ³•ï¼‰"></a>Dijkstraæœ€çŸ­è·¯å¾„ç®—æ³•ï¼ˆè´ªå©ªç®—æ³•ï¼‰</h5><ul><li>Dijkstraç®—æ³•è´ªå©ªåœ°æ¢ç´¢ä»<code>s</code>å¼€å§‹çš„è·¯å¾„ï¼Œæ¯æ¬¡ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªæœ€è¿‘çš„èŠ‚ç‚¹ã€‚è¿™ç§æ–¹å¼å®é™…æ„é€ äº†ä»<code>s</code>åˆ°å›¾ä¸­æ¯ä¸ªå…¶ä»–èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ã€‚</li><li>ç»™å®šï¼šå¸¦æƒå›¾ä»¥åŠç‰¹æ®ŠèŠ‚ç‚¹<code>s</code>å’Œ<code>t</code></li><li>ç›®æ ‡ï¼šæ‰¾åˆ°<code>s</code>å’Œ<code>t</code>ä¹‹é—´çš„æœ€çŸ­è·¯å¾„</li></ul><p>ç®—æ³•æè¿°ï¼š</p><ul><li><p>åˆå§‹åŒ–<code>K=&#123;s&#125;</code>ï¼Œä»¤<code>Path(s)= âˆ… </code>ï¼Œ<code>d(s) = 0</code></p></li><li><p>å¯¹ä¸åœ¨<code>K</code>ä¸­çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹<code>v</code>ï¼Œè®¡ç®—è·ç¦» $d(v) &#x3D; \min_{u \in K}\left{ d(u) + w(u,v) \right}$</p></li><li><p>ä»¤$v^*$ä¸º$v^* &#x3D; \arg \min_{v \notin K}d(v)$ï¼Œ<code>e=(u,v)</code>ä¸ºå¯¹åº”è¾¹</p></li><li><p>ä»¤$K&#x3D;K \cup \left{ v^* \right}$ï¼Œ$Path(v^*) &#x3D; Path(u)\cup\left{e^<em>\right}$ï¼Œ$d(v^</em>) &#x3D; d(u) + w(e^*)$</p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> heapq <span class="hljs-keyword">import</span> *<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dijkstra</span>(<span class="hljs-params">graph, start</span>):<br>    vnum = <span class="hljs-built_in">len</span>(graph) <span class="hljs-comment"># é¡¶ç‚¹ä¸ªæ•°</span><br>    paths = &#123;&#125;<br>    cands = [(<span class="hljs-number">0</span>,start,start)]<br>    heapify(cands) <span class="hljs-comment"># è½¬åŒ–ä¸ºå°é¡¶å †ï¼Œä¾¿äºæ‰¾åˆ°æƒé‡æœ€å°çš„è¾¹</span><br>    count = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">while</span> count &lt; vnum <span class="hljs-keyword">and</span> cands <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:<br>        plen,u,vmin=heappop(cands) <span class="hljs-comment"># é€‰å‡ºç´¯è®¡è·¯å¾„æœ€çŸ­çš„è¾¹</span><br>        <span class="hljs-keyword">if</span> paths.get(vmin) <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>: <span class="hljs-comment"># å¦‚æœå·²ç»æ‰¾åˆ°åˆ°vminçš„æœ€çŸ­è·¯å¾„å°±è·³è¿‡</span><br>            <span class="hljs-keyword">continue</span><br>        paths[vmin] = plen <span class="hljs-comment"># å­˜å…¥æœ€çŸ­è·¯å¾„</span><br>        <span class="hljs-keyword">for</span> next_edge <span class="hljs-keyword">in</span> graph[vmin]:<br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> paths.get(next_edge[<span class="hljs-number">2</span>]):<br>                heappush(cands, (plen+next_edge[<span class="hljs-number">0</span>],u,next_edge[<span class="hljs-number">2</span>]))<br>        count += <span class="hljs-number">1</span><br>    <span class="hljs-keyword">return</span> paths<br>graph = &#123;<span class="hljs-string">&#x27;A&#x27;</span>: [(<span class="hljs-number">7</span>, <span class="hljs-string">&#x27;A&#x27;</span>, <span class="hljs-string">&#x27;B&#x27;</span>), (<span class="hljs-number">5</span>, <span class="hljs-string">&#x27;A&#x27;</span>, <span class="hljs-string">&#x27;D&#x27;</span>)], <br>         <span class="hljs-string">&#x27;C&#x27;</span>: [(<span class="hljs-number">8</span>, <span class="hljs-string">&#x27;C&#x27;</span>, <span class="hljs-string">&#x27;B&#x27;</span>), (<span class="hljs-number">5</span>, <span class="hljs-string">&#x27;C&#x27;</span>, <span class="hljs-string">&#x27;E&#x27;</span>)], <br>         <span class="hljs-string">&#x27;B&#x27;</span>: [(<span class="hljs-number">7</span>, <span class="hljs-string">&#x27;B&#x27;</span>, <span class="hljs-string">&#x27;A&#x27;</span>), (<span class="hljs-number">8</span>, <span class="hljs-string">&#x27;B&#x27;</span>, <span class="hljs-string">&#x27;C&#x27;</span>), (<span class="hljs-number">9</span>, <span class="hljs-string">&#x27;B&#x27;</span>, <span class="hljs-string">&#x27;D&#x27;</span>), (<span class="hljs-number">7</span>, <span class="hljs-string">&#x27;B&#x27;</span>, <span class="hljs-string">&#x27;E&#x27;</span>)], <br>         <span class="hljs-string">&#x27;E&#x27;</span>: [(<span class="hljs-number">7</span>, <span class="hljs-string">&#x27;E&#x27;</span>, <span class="hljs-string">&#x27;B&#x27;</span>), (<span class="hljs-number">5</span>, <span class="hljs-string">&#x27;E&#x27;</span>, <span class="hljs-string">&#x27;C&#x27;</span>), (<span class="hljs-number">15</span>, <span class="hljs-string">&#x27;E&#x27;</span>, <span class="hljs-string">&#x27;D&#x27;</span>), (<span class="hljs-number">8</span>, <span class="hljs-string">&#x27;E&#x27;</span>, <span class="hljs-string">&#x27;F&#x27;</span>), (<span class="hljs-number">9</span>, <span class="hljs-string">&#x27;E&#x27;</span>, <span class="hljs-string">&#x27;G&#x27;</span>)], <br>         <span class="hljs-string">&#x27;D&#x27;</span>: [(<span class="hljs-number">5</span>, <span class="hljs-string">&#x27;D&#x27;</span>, <span class="hljs-string">&#x27;A&#x27;</span>), (<span class="hljs-number">9</span>, <span class="hljs-string">&#x27;D&#x27;</span>, <span class="hljs-string">&#x27;B&#x27;</span>), (<span class="hljs-number">15</span>, <span class="hljs-string">&#x27;D&#x27;</span>, <span class="hljs-string">&#x27;E&#x27;</span>), (<span class="hljs-number">6</span>, <span class="hljs-string">&#x27;D&#x27;</span>, <span class="hljs-string">&#x27;F&#x27;</span>)], <br>         <span class="hljs-string">&#x27;G&#x27;</span>: [(<span class="hljs-number">9</span>, <span class="hljs-string">&#x27;G&#x27;</span>, <span class="hljs-string">&#x27;E&#x27;</span>), (<span class="hljs-number">11</span>, <span class="hljs-string">&#x27;G&#x27;</span>, <span class="hljs-string">&#x27;F&#x27;</span>)], <br>         <span class="hljs-string">&#x27;F&#x27;</span>: [(<span class="hljs-number">6</span>, <span class="hljs-string">&#x27;F&#x27;</span>, <span class="hljs-string">&#x27;D&#x27;</span>), (<span class="hljs-number">8</span>, <span class="hljs-string">&#x27;F&#x27;</span>, <span class="hljs-string">&#x27;E&#x27;</span>), (<span class="hljs-number">11</span>, <span class="hljs-string">&#x27;F&#x27;</span>, <span class="hljs-string">&#x27;G&#x27;</span>)]&#125;      <br><span class="hljs-built_in">print</span>(dijkstra(graph, <span class="hljs-string">&#x27;A&#x27;</span>))<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># æ³•äºŒï¼š</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">startwith</span>(<span class="hljs-params">start: <span class="hljs-built_in">int</span>, mgraph: <span class="hljs-built_in">list</span></span>) -&gt; <span class="hljs-built_in">list</span>:<br>    passed = [start]<br>    nopass = [x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(mgraph)) <span class="hljs-keyword">if</span> x != start]<br>    dis = mgraph[start]<br>    <br>    <span class="hljs-keyword">while</span> <span class="hljs-built_in">len</span>(nopass):<br>        idx = nopass[<span class="hljs-number">0</span>]<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> nopass:<br>            <span class="hljs-keyword">if</span> dis[i] &lt; dis[idx]: idx = i<br><br>        nopass.remove(idx)<br>        passed.append(idx)<br><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> nopass:<br>            <span class="hljs-keyword">if</span> dis[idx] + mgraph[idx][i] &lt; dis[i]: <br>                dis[i] = dis[idx] + mgraph[idx][i]<br>    <span class="hljs-keyword">return</span> dis<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    inf = <span class="hljs-number">10086</span><br>    mgraph = [[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">12</span>, inf, inf, inf],<br>              [inf, <span class="hljs-number">0</span>, <span class="hljs-number">9</span>, <span class="hljs-number">3</span>, inf, inf],<br>              [inf, inf, <span class="hljs-number">0</span>, inf, <span class="hljs-number">5</span>, inf],<br>              [inf, inf, <span class="hljs-number">4</span>, <span class="hljs-number">0</span>, <span class="hljs-number">13</span>, <span class="hljs-number">15</span>],<br>              [inf, inf, inf ,inf, <span class="hljs-number">0</span>, <span class="hljs-number">4</span>],<br>              [inf, inf, inf, inf ,inf, <span class="hljs-number">0</span>]]<br><br>    <span class="hljs-built_in">print</span>(startwith(<span class="hljs-number">0</span>, mgraph))<br></code></pre></td></tr></table></figure><p><strong>Dijkstraç®—æ³•çš„æœ€ä¼˜æ€§ï¼š</strong></p><p>é€šè¿‡å¯¹$K$çš„å¤§å°çš„å½’çº³æ¥è¯æ˜è¿™ä¸ªç»“è®ºã€‚</p><p>$|K| &#x3D; 1$çš„åŸºæœ¬æƒ…å†µæ˜¯å¹³å‡¡çš„ï¼šåœ¨è¿™ç§æƒ…å†µä¸‹$K$åªåŒ…å«$s$å’Œè·¯å¾„$Path(s) &#x3D; \varnothing$ã€‚</p><p>å‡è®¾ç»“è®ºä¸€ç›´ä¿æŒåˆ°æ­¥éª¤$k-1$ä»ç„¶æˆç«‹ï¼Œå¹¶è€ƒè™‘ç¬¬$k$æ­¥æŠŠç‚¹$v$æ·»åŠ åˆ°é›†åˆ$K$ï¼Œä¸”$e&#x3D;(u,v)$ä¸ºå¯¹åº”è¾¹ã€‚</p><p>ä¸ºäº†é€ æˆçŸ›ç›¾ï¼Œå‡è®¾è·¯å¾„$Path(v)$å¹¶é$s$åˆ°$v$çš„æœ€çŸ­è·¯å¾„ï¼Œè€Œ$Path^*(v)$ä¸ºç›¸åº”çš„æœ€çŸ­è·¯å¾„ã€‚è®¾$x$ä¸º$Path^*(v)$ä¸Šé›†åˆ$K$ä¸­æœ€åä¸€ä¸ªç»“ç‚¹ï¼Œ$xâ€™$æ˜¯$Path^*(v)$ä¸Šç´§éš$x$ä¹‹åçš„ç»“ç‚¹ã€‚</p><p>ç”±å®šä¹‰å¯çŸ¥$d(x)+w(x,xâ€™)$ä¸è¶…è¿‡ä¸º$Path^*(v)$çš„é•¿åº¦ã€‚</p><p>ä½†æ˜¯ï¼Œé€šè¿‡æ„é€ ï¼Œ&#x3D;&#x3D;$d(u) + w(u,v) \leq d(x) + w(x,xâ€™)$ï¼ˆä¸æ˜¯å¾ˆç†è§£ï¼‰&#x3D;&#x3D;ï¼Œä¸”$d(v) &#x3D; d(u) + w(u,v)$ï¼Œæ„å‘³ç€$d(v)$ä¸è¶…è¿‡$Path^*(v)$çš„é•¿åº¦ã€‚</p><p>äºæ˜¯å¯¼å‡ºçŸ›ç›¾ã€‚</p><h5 id="ä½œä¸šï¼škruskalç®—æ³•ã€primeç®—æ³•"><a href="#ä½œä¸šï¼škruskalç®—æ³•ã€primeç®—æ³•" class="headerlink" title="ä½œä¸šï¼škruskalç®—æ³•ã€primeç®—æ³•"></a>ä½œä¸šï¼škruskalç®—æ³•ã€primeç®—æ³•</h5><h3 id="5ã€Catalanè®¡æ•°-x2F-æœ€å°ç”Ÿæˆæ ‘é—®é¢˜"><a href="#5ã€Catalanè®¡æ•°-x2F-æœ€å°ç”Ÿæˆæ ‘é—®é¢˜" class="headerlink" title="5ã€Catalanè®¡æ•°&#x2F;æœ€å°ç”Ÿæˆæ ‘é—®é¢˜"></a>5ã€Catalanè®¡æ•°&#x2F;æœ€å°ç”Ÿæˆæ ‘é—®é¢˜</h3><p>Catalanè®¡æ•°è§å‰æ–‡</p><h4 id="æœ€å°ç”Ÿæˆæ ‘"><a href="#æœ€å°ç”Ÿæˆæ ‘" class="headerlink" title="æœ€å°ç”Ÿæˆæ ‘"></a>æœ€å°ç”Ÿæˆæ ‘</h4><ul><li>$G&#x3D;(V,E)$æ˜¯ä¸€ä¸ªæ— å‘è¿é€šå›¾ï¼Œä»£ä»·å‡½æ•°<code>w</code>å°†è¾¹æ˜ å°„ä¸ºæ­£å®æ•°</li><li>ç”Ÿæˆæ ‘æ˜¯ä¸€é¢—è¿æ¥<code>G</code>çš„æ‰€æœ‰é¡¶ç‚¹çš„æ— å‘æ ‘</li><li>ç”Ÿæˆæ ‘çš„ä»£ä»·ç­‰äºæ ‘ä¸­æ‰€æœ‰è¾¹çš„ä»£ä»·ä¹‹å’Œ</li><li>æœ€å°ç”Ÿæˆæ ‘çš„ä»£ä»·ä¸º<code>G</code>çš„æ‰€æœ‰å¯èƒ½ç”Ÿæˆæ ‘çš„æœ€å°ä»£ä»·çš„ä¸€é¢—ç”Ÿæˆæ ‘</li><li>ä¸€ä¸ªå›¾å¯ä»¥æœ‰è®¸å¤šå…·æœ‰ä»£ä»·çš„<code>MST</code></li><li>æ„å»º<code>MST</code>çš„ä¸¤ä¸ªä¸»è¦ç®—æ³•ï¼š<code>Kruskal</code>å’Œ<code>Prim</code>ï¼Œéƒ½æ˜¯è´ªå©ªç®—æ³•</li></ul><p><strong>å®‰å…¨è¾¹</strong></p><ul><li>å›¾çš„å‰²ï¼šå¯¹ç»“ç‚¹é›†åˆ<code>V</code>çš„ä¸€ä¸ªåˆ’åˆ†</li><li>ç©¿è¿‡å‰²çš„è¾¹ï¼šä¸€æ¡è¾¹çš„ä¸¤ä¸ªç«¯ç‚¹åˆ†åˆ«åœ¨å‰²çš„ä¸¤è¾¹</li><li>è½»è¾¹ï¼šç©¿è¿‡å‰²çš„è¾¹ä¸­æƒé‡æœ€å°çš„ä¸€æ¡è¾¹</li><li>ç»“è®ºï¼šå‡è®¾$A\subset E$ï¼Œä¸”åŒ…å«åœ¨ä¸€äº›<code>MST</code>ä¸­ï¼Œå¦‚æœ$(s,v_s)$ æ˜¯ä¸€ä¸ªå…³äº$A$çš„å‰²ï¼Œ$(u,v)$æ˜¯ä¸€æ¡ç©¿è¿‡å‰²$(s,v_s)$çš„è½»è¾¹ï¼Œåˆ™$(u,v)$å¯¹$A$æ¥è¯´æ˜¯å®‰å…¨çš„ã€‚</li></ul><p>è´ªå©ªç®—æ³•ï¼šç‹¬ç‰¹</p><h5 id="Kruskalç®—æ³•"><a href="#Kruskalç®—æ³•" class="headerlink" title="Kruskalç®—æ³•"></a>Kruskalç®—æ³•</h5><ul><li>é›†åˆ<code>A</code>åˆå§‹æ—¶åªåŒ…æ‹¬å­¤ç«‹çš„ç»“ç‚¹</li><li>å¯¹<code>E</code>çš„è¾¹æŒ‰æƒé‡å¤§å°å‡åºæ’åº</li><li>é¡ºåºè€ƒè™‘è¾¹ï¼šå¦‚æœè¿™æ¡è¾¹è¿æ¥ä¸¤ä¸ªä¸åŒéƒ¨åˆ†ï¼Œåˆ™æ·»åŠ è¯¥è¾¹</li><li>æ— å‘å›¾$G&#x3D;(V,E)$çš„<code>MST</code>å¯ä»¥åœ¨æ—¶é—´å¤æ‚åº¦$O(|V|log|V| + |E|log|E|)$å®Œæˆ</li></ul><h5 id="Primç®—æ³•"><a href="#Primç®—æ³•" class="headerlink" title="Primç®—æ³•"></a>Primç®—æ³•</h5><ul><li>Primç®—æ³•ä¸Dijkstraç®—æ³•çš„å•æºæœ€çŸ­è·¯å¾„ç®—æ³•éå¸¸åƒï¼Œå…·æœ‰ç›¸åŒçš„å¤æ‚åº¦</li><li>åœ¨ç®—æ³•çš„ä»»ä½•é˜¶æ®µï¼Œé›†åˆ<code>A</code>éƒ½ä¼šå½¢æˆä¸€æ£µæ ‘ï¼Œè€Œä¸æ˜¯åƒKruskalé‚£æ ·ç”±è¿æ¥çš„ç»„ä»¶ç»„æˆçš„æ£®æ—</li><li>æ¯ä¸ªé˜¶æ®µä¸­ï¼Œéƒ½ä¼šå‘æ ‘æ·»åŠ ä¸€æ¡è½»è¾¹ï¼Œå°†<code>A</code>è¿æ¥åˆ°$V_A$ä¸­çš„é¡¶ç‚¹</li><li>ç”¨è¾¹çš„æƒé‡ç»„æˆä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—è´Ÿè´£æŸ¥æ‰¾è½»è¾¹</li></ul><h4 id="På’ŒNP"><a href="#På’ŒNP" class="headerlink" title="På’ŒNP"></a>På’ŒNP</h4><ul><li>åœ¨åˆ†æç®—æ³•çš„å¤æ‚æ€§æ—¶ï¼Œå¯ä»¥æŠŠé—®é¢˜è½¬åŒ–ä¸ºä¸€ä¸ªå†³ç­–é—®é¢˜ï¼šç­”æ¡ˆä¸ºæ˜¯&#x2F;å¦çš„å¯è®¡ç®—é—®é¢˜</li><li>ä¾‹å¦‚ï¼ŒæŠŠåœ¨ä¸€ç§è¯­è¨€ä¸­ç”Ÿæˆå­—ç¬¦ä¸²çš„é—®é¢˜è½¬åŒ–ä¸ºéªŒè¯ç»™å®šå­—ç¬¦ä¸²åœ¨ä¸€ç§è¯­è¨€ä¸­çš„æˆå‘˜èº«ä»½çš„é—®é¢˜</li><li>PæŒ‡çš„æ˜¯ä¸€ç±»è¯­è¨€ï¼Œå®ƒçš„éš¶å±åº¦é—®é¢˜å¯ä»¥ç”¨è¾“å…¥å­—ç¬¦ä¸²å¤§å°çš„æ—¶é—´å¤šé¡¹å¼æ¥ç¡®å®š</li><li>å¯¹äºæŸäº›è¯­è¨€ï¼Œåˆ™æ²¡æœ‰å¤šé¡¹å¼æ—¶é—´çš„æˆå‘˜ç®—æ³•ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å¦ä¸€ä¸ªâ€œè§è¯â€å­—ç¬¦ä¸²åœ¨å¤šé¡¹å¼æ—¶é—´å†…éªŒè¯è¯¥å­—ç¬¦ä¸²æ˜¯å¦ä½¿ç”¨è¿™ä¸€è¯­è¨€</li><li>NPæ˜¯ä¸€ç±»è¯­è¨€ï¼Œç»™å®šä¸€ä¸ªå¤šé¡¹å¼é•¿åº¦çš„è§è¯å­—ç¬¦ä¸²ï¼Œå…¶æˆå‘˜èµ„æ ¼å¯ä»¥åœ¨å¤šé¡¹å¼æ—¶é—´å†…è¿›è¡ŒéªŒè¯</li></ul><p><strong>P-æ—¶é—´å¯çº¦æ€§</strong></p><ul><li>å¯çº¦æ€§çš„æ¦‚å¿µå…è®¸æˆ‘ä»¬åœ¨å¤šé¡¹å¼æ—¶é—´å†…å°†ä¸€ä¸ªé—®é¢˜è½¬åŒ–ä¸ºå¦ä¸€ä¸ªé—®é¢˜</li><li>å¦‚æœæˆ‘ä»¬èƒ½è§£å†³åè€…ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¹Ÿèƒ½è§£å†³å‰è€…çš„é—®é¢˜ï¼›ç›¸åï¼Œå¦‚æœå‰è€…æ˜¯NPéš¾é—®é¢˜ï¼Œåè€…ä¹Ÿæ˜¯NPéš¾é—®é¢˜</li><li>åœ¨è®¨è®ºå†³ç­–é—®é¢˜æ—¶ï¼Œå¦‚æœå­˜åœ¨ä¸€ä¸ªå¤šé¡¹å¼æ—¶é—´ç®—æ³•ï¼Œè¯¥ç®—æ³•å°†é—®é¢˜Açš„ä¸€ä¸ªå®ä¾‹ä½œä¸ºè¾“å…¥ï¼Œå¹¶è¾“å‡ºä¸€ä¸ªä¿è¯ä¸é—®é¢˜Açš„å®ä¾‹å…·æœ‰ç›¸åŒç»“æœçš„é—®é¢˜Bçš„å®ä¾‹ï¼Œè¿™ç§å½’çº¦æˆä¸ºCookå½’çº¦</li><li>å°±æ˜¯è¯´ï¼Œå¦‚æœé—®é¢˜Bå­˜åœ¨ä¸€ä¸ªæœ‰æ•ˆç®—æ³•ï¼Œé‚£ä¹ˆé—®é¢˜Aå¯ä»¥é€šè¿‡å°†å…¶å®ä¾‹è½¬æ¢ä¸ºé—®é¢˜Bçš„å®ä¾‹ï¼Œå¹¶å¯¹å…¶åº”ç”¨æœ‰æ•ˆç®—æ³•æ¥è§£å†³</li></ul><p><strong>P&#x3D;NP?</strong></p><ul><li>På’ŒNPæ˜¯å¦ç›¸ç­‰æ˜¯è®¡ç®—æœºç§‘å­¦ä¸­æœ€çªå‡ºã€æœ€é‡è¦çš„å¼€æ”¾æ€§é—®é¢˜ä¹‹ä¸€ã€‚è€ƒè™‘è¿™ä¸ªé—®é¢˜çš„æœ‰æ•ˆå·¥å…·ï¼šä¸€ä¸ªé—®é¢˜å¯¹äºä¸€ä¸ªç±»æ¥è¯´æ˜¯å®Œå…¨çš„æ¦‚å¿µ</li><li>å¯ä»¥è¯´ï¼ŒNPä¸­æœ€éš¾çš„é—®é¢˜ç§°ä¸ºNP-Hardï¼Œæ˜¯NPä¸­çš„æ¯ä¸€ä¸ªé—®é¢˜éƒ½å¯ä»¥è¢«å¤šé¡¹å¼æ—¶é—´å½’çº¦åˆ°çš„é—®é¢˜</li><li>å› æ­¤ï¼Œä»»ä½•ä¸€ä¸ªé—®é¢˜çš„å¤šé¡¹å¼æ—¶é—´ç®—æ³•éƒ½æ„å‘³ç€NPä¸­çš„æ¯ä¸€ä¸ªé—®é¢˜éƒ½å¯ä»¥åœ¨å¤šé¡¹å¼æ—¶é—´å†…æ±‚è§£ï¼Œå³$NP \subseteq P$</li><li>æˆ‘ä»¬å·²ç»çŸ¥é“$P \subseteq NP$ï¼Œå› ä¸ºæ¯ä¸ªPç®—æ³•éƒ½å¯ä»¥è¢«çœ‹ä½œæ˜¯ä¸€ä¸ªNPç®—æ³•</li><li>P&#x3D;NP if å­˜åœ¨ä¸€ä¸ªå†³å®šä»»ä½•ä¸€ä¸ªNPå®Œå…¨é—®é¢˜çš„å¤šé¡¹å¼æ—¶é—´ç®—æ³•</li></ul><p><strong>SATé—®é¢˜</strong></p><ul><li>ç¬¬ä¸€ä¸ªè¢«è¯æ˜æ˜¯NPå®Œå…¨çš„é—®é¢˜æ˜¯Boolean-SATï¼šç»™å®šä¸€ä¸ªå¸ƒå°”è¡¨è¾¾å¼ï¼Œæ˜¯å¦æœ‰ä¸€ç»„å˜é‡å¯ä»¥ä½¿æ•´ä¸ªè¡¨è¾¾å¼çš„å€¼ä¸ºçœŸï¼Ÿæ˜¾ç„¶ï¼Œå­˜åœ¨ä¸€äº›ä¸å¯æ»¡è¶³çš„å¸ƒå°”è¡¨è¾¾å¼</li><li>å¯æ»¡è¶³æ€§ï¼šç»™å®šå…±è½­èŒƒå¼çš„å¸ƒå°”è¡¨è¾¾å¼ï¼Œå¯»æ‰¾å˜é‡çš„å€¼ä½¿è¯¥è¡¨è¾¾å¼ä¸ºTRUE</li><li>Cookå’ŒLevinç‹¬ç«‹åœ°è¯æ˜äº†SATçš„NPå®Œå…¨æ€§ï¼Œç§°ä¸ºCook-Levinå®šç†ã€‚Cook-Levinå®šç†è¯æ˜äº†SATæ˜¯NPå®Œå…¨çš„ï¼Œè¯æ˜äº†å¯¹äºNPä¸­çš„ä»»ä½•é—®é¢˜SATéƒ½å­˜åœ¨ä¸€ä¸ªçº¦ç®€</li></ul><p><img src="/blog/2022/09/01/%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/2022-04-30_103017.png" alt="2022-04-30_103017"></p><p><strong>é¡¶ç‚¹è¦†ç›–é—®é¢˜</strong></p><p><img src="/blog/2022/09/01/%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/2022-04-30_103309.png" alt="2022-04-30_103309"></p><p>é—®é¢˜æè¿°ï¼šç»™å®šä¸€ä¸ªNä¸ªç‚¹Mæ¡è¾¹çš„æ— å‘å›¾Gï¼ˆç‚¹çš„ç¼–å·ä»1è‡³Nï¼‰ï¼Œé—®æ˜¯å¦å­˜åœ¨ä¸€ä¸ªä¸è¶…è¿‡Kä¸ªç‚¹çš„é›†åˆSï¼Œä½¿å¾—Gä¸­çš„æ¯æ¡è¾¹éƒ½è‡³å°‘æœ‰ä¸€ä¸ªç‚¹åœ¨é›†åˆSä¸­ã€‚</p><p><strong>SATé—®é¢˜å®šä¹‰</strong></p><p>å¸ƒå°”å¯æ»¡è¶³æ€§ï¼šç»™å®šä¸€ä¸ªCNFï¼ˆå…±è½­èŒƒå¼ï¼‰ä¸­çš„å¸ƒå°”å…¬å¼$\phi$ï¼Œè¯¥å…¬å¼å¯ä»¥æ»¡è¶³å—ï¼Ÿæ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬ç»™å‡ºäº†ä¸€ä¸ªå¸¦æœ‰nä¸ªå˜é‡çš„$x_1,x_2,\dots,x_n$çš„å¸ƒå°”å…¬å¼$\phi &#x3D; C_1\wedge C_2\wedge \dots \wedge C_k$ï¼Œå…¶ä¸­æ¯ä¸ª$C_i$æ˜¯ä¸€ä¸ªå½¢å¼ä¸º$(l_{i1} \vee l_{i2} \vee \dots \vee l_{il})$çš„å­å¥ï¼Œæ¯ä¸ª$l_{ij}$æ˜¯ä»é›†åˆ$\left{ x_1,x_2,\dots,x_n;\overline{x_1},\overline{x_2},\dots,\overline{x_n} \right}$é‡ŒæŠ½å–çš„æ–‡å­—ã€‚æˆ‘ä»¬éœ€è¦å†³å®šæ˜¯å¦å­˜åœ¨ä¸€äº›å˜é‡çš„è®¾ç½®ä½¿å¾—$\phi$å¾—åˆ°æ»¡è¶³</p><p><strong>2-CNFå’Œ3-CNF</strong></p><ul><li>é‡è¦æ€§ï¼šNP-å®Œå…¨é—®é¢˜æ˜¯ä¸€ç±»ä»»ä½•NPé—®é¢˜å¯ä»¥ä»¥å¤šé¡¹å¼æ—¶é—´è½¬åŒ–çš„é—®é¢˜ã€‚ä»»ä¸€NPå®Œå…¨é—®é¢˜å¯ä»¥å¤šé¡¹å¼æ—¶é—´æ±‚è§£ï¼Œåˆ™æ‰€æœ‰NP-å®Œå…¨é—®é¢˜éƒ½å˜æˆäº†Pé—®é¢˜</li><li>2-CNFï¼šå­å¥åŒ…å«1æˆ–2ä¸ªå˜é‡çš„æ»¡è¶³æ€§å†³ç­–é—®é¢˜</li><li>3-CNFï¼šå­å¥å¯ä»¥åŒ…å«3ä¸ªå˜é‡</li><li>2-CNFæ˜¯Pé—®é¢˜ï¼Œè€Œ3-CNFå±äºNPC</li></ul><p><strong>SATçš„NPå®Œå…¨æ€§è´¨</strong></p><p>è¦è¯æ˜SATé—®é¢˜æ˜¯NPå®Œå…¨çš„ï¼Œåªéœ€è¯æ˜NPä¸­çš„ä»»ä½•é—®é¢˜éƒ½å¯ä»¥åœ¨å¤šé¡¹å¼æ—¶é—´å†…å½’çº¦ä¸ºSATé—®é¢˜</p><ul><li>é¦–å…ˆæŠŠé—®é¢˜é™åˆ¶ä¸ºå†³ç­–é—®é¢˜ï¼šæŠŠåŸå§‹é—®é¢˜è½¬åŒ–ä¸ºä¸€ä¸ªæˆå‘˜é—®é¢˜ï¼Œå³ç»™å®šçš„è¾“å…¥æ˜¯å¦å±äºæŸç§è¯­è¨€ã€‚é‚£ä¹ˆï¼ŒPè¡¨ç¤ºå¯ä»¥åœ¨å¤šé¡¹å¼æ—¶é—´å†…ç¡®å®šæˆå‘˜éš¶å±çš„è¯­è¨€ç±»ï¼Œè€ŒNPä»£è¡¨å­˜åœ¨ä¸€ä¸ªå¯ä»¥åœ¨å¤šé¡¹å¼æ—¶é—´å†…éªŒè¯å…¶æˆå‘˜éš¶å±çš„è¯­è¨€ç±»ã€‚</li><li>å…¶æ¬¡ï¼Œéœ€è¦å°†ä¸€ä¸ªé—®é¢˜è§„çº¦ä¸ºå¦ä¸€ä¸ªé—®é¢˜ã€‚é—®é¢˜Aå¯ä»¥è§„çº¦åˆ°é—®é¢˜Bï¼Œåˆ™å¦‚æœå¾—åˆ°Bçš„ä¸€ä¸ªè§£ï¼Œå¯ä»¥å¤šé¡¹å¼æ—¶é—´å†…è°ƒç”¨è¿™ä¸ªè§£è¿˜åŸæ€§ä¸ºAçš„è§£ã€‚</li></ul><p>Cook-Levinå®šç†è¡¨åï¼Œå¯¹äºNPä¸­çš„ä»»ä½•é—®é¢˜ï¼Œéƒ½å­˜åœ¨åˆ°SATçš„ä¸€ç§è§„çº¦ï¼Œä»è€Œè¯æ˜SATæ˜¯NPå®Œå…¨çš„</p><p><strong>Cook-Levinå®šç†</strong></p><blockquote><p>SAT is NP-complete</p></blockquote><p>å‡è®¾Læ˜¯ä¸€ä¸ªNPé—®é¢˜ï¼Œæ ¹æ®å®šä¹‰ï¼Œåˆ™Lå…·æœ‰ä¸€ä¸ªå¤šé¡¹å¼æ—¶é—´çš„éªŒè¯ç®—æ³•Vï¼š</p><ul><li>If $x\in L$ï¼Œ$\exist$è§è¯è€…yï¼ŒV(x,y) &#x3D; 1</li><li>If $x \notin L$ï¼Œ$\exist$è§è¯è€…yï¼ŒV(x,y) &#x3D; 0</li></ul><p>å¯ä»¥ä¸ºVæ„é€ ä¸€ä¸ªå¤šé¡¹å¼å¤§å°çš„ç”µè·¯ï¼Œç”±ANDã€ORã€NOTç»„æˆã€‚æ”¹ç”µè·¯åŒ…å«|x|+|y|ä¸ªè¾“å…¥ï¼Œå…¶ä¸­|x|å¯¹åº”xçš„æ¯ä¸€ä½çš„å€¼ï¼Œ|y|ä»£è¡¨å¯å˜å˜é‡</p><p><strong>Cook-Levinå®šç†è¯æ˜æ€è·¯</strong></p><p>è¦æ±‚è§£é—®é¢˜Lï¼Œåªéœ€è¦æ‰¾åˆ°è¾“å…¥ä¸­çš„|y|ä¸ªå˜é‡ä¸­çš„ä¸€ç§è®¾ç½®ä½¿ç”µè·¯çš„è¾“å‡ºä¸º1ã€‚è¿™æ ·å°±æŠŠé—®é¢˜Lå½’ç»“ä¸ºå†³å®šç”µè·¯æ˜¯å¦èƒ½è¾“å‡º1çš„é—®é¢˜ã€‚æ¥ä¸‹æ¥è¯æ˜æ»¡è¶³ç”µè·¯çš„é—®é¢˜å¯è¢«å½’ä¸ºSATçš„ä¸€ä¸ªå®ä¾‹ã€‚ç”µè·¯ä¸­çš„æ¯ä¸€ä¸ªé—¨å¯ä»¥è¡¨ç¤ºç§°ä¸€ä¸ª3CNFï¼ˆä¸‰å…ƒCNFï¼Œæ¯ä¸ªå­å¥é‡‘åŒ…å«ä¸‰é¡¹ï¼‰</p><p>ä¾‹å¦‚ï¼š</p><ul><li><p>æˆ–é—¨ORæ˜¯ä¸€ä¸ªè¾“å…¥aå’Œbä»¥åŠè¾“å‡º$Z_i$çš„å‡½æ•°ï¼Œè¡¨ç¤ºä¸º$(a \vee b \vee \bar Z_i) \wedge (Z_i \vee \bar a) \wedge (Z_i \vee \bar b) $</p><blockquote><p>a,b&#x3D;true&#x2F;false</p></blockquote></li><li><p>éé—¨NOTæ˜¯ä¸€ä¸ªè¾“å…¥aä¸”è¾“å‡º$Z_i$çš„å‡½æ•°ï¼Œè¡¨ç¤ºä¸º$(a \vee \bar Z_i) \wedge (\bar a \vee Z_i)$</p><blockquote><p>a&#x3D;true&#x2F;false</p></blockquote></li></ul><p>å³ä½¿æœ‰äº›å­å¥åªåŒ…å«å°‘äº3é¡¹ï¼Œå¯ä»¥é€šè¿‡å¡«å……ç‹¬ç«‹æ–‡å­—æ¥æ„é€ 3CNFã€‚ç‹¬ç«‹æ–‡å­—çš„å€¼ä¸å½±å“ä»å¥çš„å¸ƒå°”é‡ã€‚</p><p><strong>Cook-Levinå®šç†è¯æ˜</strong></p><p>å‡è®¾Vä¸­å…±æœ‰qä¸ªé—¨ï¼Œè®°ä¸º$Z_i,Z_2,\dots,Z_q$ï¼Œå…¶ä¸­$Z_q$æ˜¯Vçš„æœ€åè¾“å‡ºã€‚</p><p>è¿™äº›é—¨è¦ä¹ˆç›´æ¥ä½¿ç”¨è¾“å…¥ï¼Œè¦ä¹ˆä½¿ç”¨ä¸­é—´ç»“æœ$Z_i$ä¸ºè¾“å…¥ã€‚</p><p>å› æ­¤ï¼Œæ•´ä¸ªç”µè·¯å¯ä»¥è¡¨ç¤ºä¸ºCNFå½¢å¼çš„å…¬å¼ï¼š$\phi &#x3D; C_1\wedge C_2\wedge \dots \wedge C_q \wedge Z_q$ï¼Œå…¶ä¸­æ¯ä¸ª$C_i&#x3D;(t_i \vee t_2 \vee t_3)$ï¼Œ$t_1,t_2,t_3 \in \left{ x,y,Z_1,Z_2,\dots,Z_q,\bar Z_1,\bar Z_2,\dots,\bar Z_q \right}$ã€‚</p><p>å¦‚å‰æ‰€è¿°ï¼Œå³ä½¿æœ€åä¸€ä¸ªå­å¥åªå«ä¸€é¡¹$Z_q$ï¼Œä¹Ÿå¯ç­‰ä»·è½¬æ¢ä¸º3-CNFã€‚å› æ­¤ï¼Œè¯¥ç”µè·¯è¢«å½’ç»“ä¸º$\phi$ï¼Œ3-CNFå½¢å¼çš„å…¬å¼ã€‚</p><p>$\phi$è¢«æ»¡è¶³å½“ä¸”ä»…å½“åŸç”µè·¯è¾“å‡º1ã€‚</p><p>æ‰€ä»¥ï¼Œ$L \le_p SAT$ï¼ŒSATæ˜¯NPå®Œå…¨é—®é¢˜</p><h4 id="æ¥é›¨æ°´ï¼ˆè´ªå©ªï¼‰"><a href="#æ¥é›¨æ°´ï¼ˆè´ªå©ªï¼‰" class="headerlink" title="æ¥é›¨æ°´ï¼ˆè´ªå©ªï¼‰"></a>æ¥é›¨æ°´ï¼ˆè´ªå©ªï¼‰</h4><p>é—®é¢˜æè¿°ï¼šç»™å®šä¸€ä¸ªé•¿åº¦ä¸ºnçš„æ•´å½¢æ•°ç»„ï¼Œå…ƒç´ å‡å¤§äº0ï¼Œä»¥å…¶ä¸­ä»»æ„ä¸¤ä¸ªä½œä¸ºéš”æ¿ï¼Œä¸”ä½ç½®ä¸å˜ï¼Œå¦‚ä½•ä½¿å®¹çº³æ°´çš„å®¹ç§¯æœ€å¤§ï¼Ÿ</p><p>è§£é¢˜æ€è·¯ï¼šé€‰æ‹©çŸ­æ¿ç®—å®¹é‡å¹¶æ·˜æ±°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">water</span>(<span class="hljs-params">a</span>):<br>    n = <span class="hljs-built_in">len</span>(a)<br>    i,j = <span class="hljs-number">0</span>,n-<span class="hljs-number">1</span><br>    m = tmp = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">while</span> i &lt; j:<br>        <span class="hljs-keyword">if</span> a[i] &lt; a[j]:<br>            tmp = a[i]*(j-i+<span class="hljs-number">1</span>)<br>            i+=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">else</span>:<br>            tmp = a[j]*(j-i-<span class="hljs-number">1</span>)<br>            j-=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> tmp &gt; m:<br>            m = tmp<br>    <span class="hljs-keyword">return</span> m<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    a = [<span class="hljs-number">4</span>,<span class="hljs-number">6</span>,<span class="hljs-number">5</span>,<span class="hljs-number">10</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>]<br>    <span class="hljs-built_in">print</span>(water(a))<br></code></pre></td></tr></table></figure><h3 id="6ã€På’ŒNP-x2F-æ¥é›¨æ°´-x2F-ç½‘ç»œæµç®—æ³•-x2F-æ’é˜Ÿ"><a href="#6ã€På’ŒNP-x2F-æ¥é›¨æ°´-x2F-ç½‘ç»œæµç®—æ³•-x2F-æ’é˜Ÿ" class="headerlink" title="6ã€På’ŒNP&#x2F;æ¥é›¨æ°´&#x2F;ç½‘ç»œæµç®—æ³•&#x2F;æ’é˜Ÿ"></a>6ã€På’ŒNP&#x2F;æ¥é›¨æ°´&#x2F;ç½‘ç»œæµç®—æ³•&#x2F;æ’é˜Ÿ</h3><h4 id="NPé—®é¢˜"><a href="#NPé—®é¢˜" class="headerlink" title="NPé—®é¢˜"></a>NPé—®é¢˜</h4><p><strong>æ±‚è§£ä¸éªŒè¯</strong></p><ul><li>æ±‚è§£é—®é¢˜çœ‹èµ·æ¥æ¯”éªŒè¯ç­”æ¡ˆè¦éš¾ï¼ˆæ›´åŠ è€—æ—¶ï¼‰</li><li>ä¾‹å¦‚ï¼šæ•°ç‹¬ï¼Œç»™å®šåˆå§‹ä½ç½®ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ±‚è§£æ•°ç‹¬æ¯”éªŒè¯å¡«å¥½çš„æ•°å­—æ˜¯å¦æ»¡è¶³æ•°ç‹¬çš„è§„åˆ™è¦æ›´åŠ å›°éš¾</li><li>ä½†æ˜¯ï¼Œå¦‚æœéœ€è¦éªŒè¯çš„è§£çš„æ•°é‡éå¸¸å¤§ï¼Œå³ä½¿å•ä¸ªç­”æ¡ˆå¯ä»¥å¾ˆå¿«éªŒè¯ï¼Œæ€»ä½“ä¸Šä¹Ÿè¦èŠ±è´¹å¾ˆé•¿æ—¶é—´</li><li>NPæ˜¯nondetermintstic polynomial timeçš„ç¼©å†™ï¼ŒæŒ‡åœ¨éç¡®å®šæ€§å›¾çµæœºä¸Šå¯ä»¥ä»¥å¤šé¡¹å¼æ—¶é—´ç²¾ç¡®æ±‚è§£çš„é—®é¢˜</li><li>æœ‰äº›é—®é¢˜ä¼¼ä¹ç›¸ä¼¼ï¼Œå®é™…åˆ†å±På’ŒNPï¼šæ¬§æ‹‰æ—…è¡Œé—®é¢˜ï¼ˆè®¿é—®æ‰€æœ‰è¾¹ï¼‰ï¼Œæ±‰å¯†å°”é¡¿ç¯ï¼ˆä¸€æ¬¡æ€§è®¿é—®æ‰€æœ‰èŠ‚ç‚¹ï¼‰</li></ul><p><strong>CNF</strong></p><p><strong>2-CNFå’Œ3-CNF</strong></p><p><strong>Cook-Levinå®šç†</strong></p><h4 id="ç½‘ç»œæµç®—æ³•"><a href="#ç½‘ç»œæµç®—æ³•" class="headerlink" title="ç½‘ç»œæµç®—æ³•"></a>ç½‘ç»œæµç®—æ³•</h4><ul><li>å‡è®¾æœ‰ä¸€ä¸ªç®¡é“ç½‘ç»œï¼Œæ¯ä¸ªç®¡é“éƒ½æœ‰ä¸€å®šçš„æ¨ªæˆªé¢ï¼Œç½‘ç»œæœ‰ä¸€ä¸ªå…¥å£å’Œä¸€ä¸ªå‡ºå£</li><li>ç›®æ ‡æ˜¯å°†æ°´é€šè¿‡ç®¡é“ä»å…¥å£ä»¥å°½å¯èƒ½å¤§çš„é€Ÿç‡è¾“é€åˆ°å‡ºå£</li><li>ä¸¤ä¸ªä¸»è¦é™åˆ¶ï¼šé€šè¿‡ç®¡é“çš„é€Ÿåº¦ä¸èƒ½è¶…è¿‡ç®¡é“çš„æ¨ªæˆªé¢ï¼ˆå®¹é‡çº¦æŸï¼‰ï¼›åœ¨ç®¡ç½‘çš„ä»»ä½•è¿æ¥å¤„ï¼Œæµå…¥çš„æ°´é‡å¿…é¡»æ­£å¥½ç­‰äºæµå‡ºçš„æ°´é‡ï¼ˆæµé‡å®ˆæ’çº¦æŸï¼‰</li><li>æœ€å¤§æµé—®é¢˜è¦æ±‚åœ¨ç»™å®šçš„æœ‰å®¹é‡å›¾ä¸­æ‰¾åˆ°ä¸€ä¸ªæœ€å¤§å¯èƒ½çš„å¯è¡Œæµ</li></ul><p><strong>å‡è®¾</strong></p><ul><li>å›¾Gä¸åŒ…å«è‡ªå¾ªç¯ï¼ˆä¸å«å½¢ä¸º(u,u)çš„è¾¹ï¼‰</li><li>å›¾Gä¸åŒ…å«å¤šé‡è¾¹ï¼Œå¦‚æœ$e_1$ï¼Œ$e_2$æ˜¯ä»uåˆ°vçš„ä¸¤æ¡è¾¹ï¼Œå®¹é‡åˆ†åˆ«æ˜¯$c_1$ï¼Œ$c_2$ï¼Œåˆ™å¯ä»¥ç”¨ä¸€æ¡è¾¹å®¹é‡ä¸º$c_1+c_2$çš„è¾¹eè¡¨ç¤º</li><li>å›¾Gæœ‰æ–¹å‘æ€§ã€‚å¦‚æœå›¾åŒ…å«ä¸€æ¡æ— å‘è¾¹(u,v)ï¼Œå¯ä»¥ç”¨ä¸¤æ¡æœ‰å‘è¾¹u-&gt;vå’Œv-&gt;uæ¥ä»£æ›¿ï¼Œæ¯æ¡è¾¹çš„å®¹é‡éƒ½ç­‰äºc(u,v)</li></ul><p><strong>è´ªå©ªç®—æ³•</strong></p><p>é‡å¤ä¸‹åˆ—æ“ä½œç›´è‡³æ‰€æœ‰s~tè·¯å¾„éƒ½è¾¾åˆ°é¥±å’Œ</p><ul><li>å¯»æ‰¾å¸¦æœ‰å‰©ä½™å®¹é‡çš„s~tè·¯å¾„</li><li>è®©è¯¥è·¯å¾„è¾¾åˆ°é¥±å’Œ</li><li>é‡å¤ç›´åˆ°æ²¡æœ‰è¿™ç§è·¯å¾„å­˜åœ¨</li></ul><p>è´ªå©ªç®—æ³•æ— æ³•ä¿è¯æœ€ä¼˜è§£ï¼šå•ä¸€æ­¥éª¤å…·æœ‰ä¸å¯æ’¤é”€çš„ç‰¹ç‚¹</p><p><strong>Ford-Fulkersonç®—æ³•</strong></p><ul><li>ç®—æ³•çš„æ€»ä½“æ€æƒ³ç±»ä¼¼è´ªå©ªç®—æ³•ï¼šåœ¨æ¯ä¸€æ­¥é€šè¿‡å›¾é€‰æ‹©ä¸€æ¡s~tè·¯å¾„ï¼Œå¹¶å¯¹å…¶è¿›è¡Œé¥±å’Œ</li><li>åœ¨å‰©ä½™å›¾ä¸­æ‰¾åˆ°è·¯å¾„ï¼Œè¯¥å›¾æ˜ç¡®å…è®¸æ²¿å…ˆå‰ä½¿ç”¨çš„è¾¹åå‘æµåŠ¨</li><li>ç»™å®šä¸€ä¸ªå¯è¡Œæµ$f$ï¼Œå‰©ä½™å›¾$G_f&#x3D;(V_f,E_f)$ï¼Œå®¹é‡å‡½æ•°$c_f$æŒ‰ä¸‹åˆ—æ–¹å¼å®šä¹‰ï¼š<ul><li>$V_f&#x3D;V$</li><li>$E_f&#x3D;\left{(u,v)|u,v \in V \wedge (c(u,v) &gt; f(u,v))\right} \cup \left{ (u,v) | u,v \in V \wedge (f(v,u) &gt; 0) \right}$ </li><li>$c_f(u,v)&#x3D;c(u,v)-f(u,v)+f(v,u)$</li></ul></li></ul><p><strong>ç½‘ç»œæµä¸å‰²é›†</strong></p><ul><li>s-tå‰²é›†æ˜¯ä¸€ç»„è¾¹Cï¼Œä½¿å¾—å›¾$Gâ€™&#x3D;(V,E \backslash C)$ä¸åŒ…å«s~tè·¯å¾„ã€‚å‰²é›†çš„å®¹é‡ä¸º$cap(C)&#x3D;\sum _{e\in C}c(e)$</li><li>è®°Fä¸ºæ‰€æœ‰å¯è¡Œçš„æµçš„é›†åˆï¼Œåˆ™å¯¹äºä»»æ„s~tå‰²é›†Cï¼Œ$cap(C) \ge \max _{f\in F}|f|$</li><li>è®¾$C^*$ä¸ºGçš„æœ€å°s~tå‰²é›†ï¼Œ$f^*$æ˜¯Gçš„æœ€å¤§s-tæµï¼Œåˆ™$cap(C^*) \ge |f^*|$</li></ul><p><strong>ä¸»è¦ç»“è®º</strong></p><ul><li>å¦‚æœå®¹é‡æ˜¯æ•´æ•°å€¼ï¼ŒFord-Fulkersonç®—æ³•å¯ä»¥å‘ç°æœ€å¤§æµ</li><li>æœ€å¤§æµé‡çš„å¤§å°ç­‰äºæœ€å°å‰²é›†çš„å®¹é‡</li><li>ç®—æ³•çš„è¿è¡Œæ—¶é—´ï¼šè¿­ä»£ä¸­çš„æ¯ä¸€æ­¥æœ€å¤šéœ€è¦$O(m)$æ—¶é—´ï¼Œå…¶ä¸­mæ˜¯è¾¹çš„æ•°ç›®ï¼Œå› ä¸ºåœ¨æ¯æ¬¡è¿­ä»£ä¸­ï¼Œæµçš„å¤§å°è‡³å°‘å¢åŠ 1ï¼Œè¿­ä»£æ¬¡æ•°çš„ä¸€ä¸ªç®€å•ä¸Šç•Œæ˜¯Fï¼Œæœ€å¤§æµçš„å¤§å°ã€‚è¿™æ˜¯ä¸€ä¸ª$O(mF)$çš„ç•Œã€‚è¿è¡Œæ—¶é—´æ˜¯ä¸€ä¸ªä¼ªå¤šé¡¹å¼æ—¶é—´ã€‚</li></ul><h4 id="æ’é˜Ÿé—®é¢˜"><a href="#æ’é˜Ÿé—®é¢˜" class="headerlink" title="æ’é˜Ÿé—®é¢˜"></a>æ’é˜Ÿé—®é¢˜</h4><p>é—®é¢˜æè¿°ï¼šå‡è®¾æœ‰æ‰“ä¹±é¡ºåºçš„ä¸€ç¾¤äººç«™æˆä¸€ä¸ªé˜Ÿåˆ—ï¼Œæ•°ç»„peopleè¡¨ç¤ºé˜Ÿåˆ—ä¸­ä¸€äº›äººçš„å±æ€§ï¼ˆä¸ä¸€å®šæŒ‰é¡ºåºï¼‰ã€‚æ¯ä¸ª$people[i] &#x3D; [h_i,k_i]$è¡¨ç¤ºç¬¬$i$ä¸ªäººçš„èº«é«˜ä¸º$h_i$ï¼Œå‰é¢æ­£å¥½æœ‰$k_i$ä¸ªèº«é«˜å¤§äºæˆ–ç­‰äº$h_i$çš„äººã€‚è¯·é‡æ–°æ„é€ å¹¶è¿”å›æ•°ç»„peopleæ‰€è¡¨ç¤ºçš„é˜Ÿåˆ—ã€‚è¿”å›çš„é˜Ÿåˆ—åº”è¯¥æ ¼å¼åŒ–ä¸ºæ•°ç»„queueï¼Œå…¶ä¸­$queue[j] &#x3D; [h_j,k_j]$æ˜¯é˜Ÿåˆ—ä¸­ç¬¬$j$ä¸ªäººçš„å±æ€§ï¼ˆqueue[0]æ˜¯æ’åœ¨é˜Ÿåˆ—å‰é¢çš„äººï¼‰</p><blockquote><p>ç¤ºä¾‹ï¼šè¾“å…¥ï¼špeople&#x3D;[[7,0],[4,4],[7,1],[5,0],[6,1],[5,2]]</p><p>è¾“å‡ºï¼š[[5,0],[7,0],[5,2],[6,1],[4,4],[7,1]]</p></blockquote><h4 id="é¢„å‘Š"><a href="#é¢„å‘Š" class="headerlink" title="é¢„å‘Š"></a>é¢„å‘Š</h4><p>éšæœºç®—æ³•</p><p>åœ¨çº¿ç®—æ³•</p><p>ç»å…¸åˆ†æ²»ç®—æ³•åº”ç”¨FFT</p><h3 id="7ã€æ’é˜Ÿ-x2F-np-x2F-é¡¶ç‚¹è¦†ç›–é—®é¢˜-x2F-äºŒéƒ¨å›¾åŒ¹é…ï¼ˆçº¿æ€§è§„åˆ’ï¼‰"><a href="#7ã€æ’é˜Ÿ-x2F-np-x2F-é¡¶ç‚¹è¦†ç›–é—®é¢˜-x2F-äºŒéƒ¨å›¾åŒ¹é…ï¼ˆçº¿æ€§è§„åˆ’ï¼‰" class="headerlink" title="7ã€æ’é˜Ÿ&#x2F;np&#x2F;é¡¶ç‚¹è¦†ç›–é—®é¢˜&#x2F;äºŒéƒ¨å›¾åŒ¹é…ï¼ˆçº¿æ€§è§„åˆ’ï¼‰"></a>7ã€æ’é˜Ÿ&#x2F;np&#x2F;é¡¶ç‚¹è¦†ç›–é—®é¢˜&#x2F;äºŒéƒ¨å›¾åŒ¹é…ï¼ˆçº¿æ€§è§„åˆ’ï¼‰</h3><h4 id="é¡¶ç‚¹è¦†ç›–é—®é¢˜"><a href="#é¡¶ç‚¹è¦†ç›–é—®é¢˜" class="headerlink" title="é¡¶ç‚¹è¦†ç›–é—®é¢˜"></a>é¡¶ç‚¹è¦†ç›–é—®é¢˜</h4><p><strong>é¡¶ç‚¹è¦†ç›–é—®é¢˜çš„NPå®Œå…¨æ€§</strong></p><ul><li>Vertex Covering Problemå±äºNPé—®é¢˜</li><li>ä»»ä½•ä¸€ä¸ªNPå®Œå…¨é—®é¢˜å¯ä»¥è§„çº¦ä¸ºé¡¶ç‚¹è¦†ç›–é—®é¢˜</li></ul><p><strong>é¡¶ç‚¹è¦†ç›–é—®é¢˜å±äºNP</strong></p><ul><li>è®¾è®¡ä¸€ä¸ªå¤šé¡¹å¼æ—¶é—´çš„éªŒè¯ç®—æ³•ï¼Œæ£€éªŒï¼š<ul><li>ç»™å®šçš„é¡¶ç‚¹é›†åˆæ˜¯åŸå›¾é¡¶ç‚¹çš„ä¸€ä¸ªå­é›†</li><li>è¯¥é¡¶ç‚¹é›†åˆè¦†ç›–äº†æ‰€æœ‰çš„è¾¹</li></ul></li><li>ä¸Šè¿°æ­¥éª¤éƒ½å¯ä»¥åœ¨å¤šé¡¹å¼æ—¶é—´å®Œæˆã€‚å¦‚æœæ¯ä¸€æ­¥å›ç­”éƒ½æ˜¯YESï¼Œåˆ™è¿”å›YESï¼Œå¦åˆ™è¿”å›NO</li></ul><p><strong>SATè§„çº¦ä¸ºé¡¶ç‚¹è¦†ç›–é—®é¢˜</strong></p><ul><li><p>ç»™å®šä¸€ä¸ª3-CNFï¼š</p><p>$\phi &#x3D; (x_1 \vee x_1 \vee x_2) \wedge (\bar x_1 \vee \bar x_2 \vee \bar x_2) \wedge (\bar x_1 \vee x_2 \vee x_2)$</p></li><li><p>è®¾è®¡ä¸€ä¸ªé¡¶ç‚¹è¦†ç›–é—®é¢˜ä¸ä¹‹ç­‰ä»·</p></li></ul><p><img src="/blog/2022/09/01/%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/2022-04-30_112712.png" alt="2022-04-30_112712"></p><h4 id="äºŒéƒ¨å›¾åŒ¹é…"><a href="#äºŒéƒ¨å›¾åŒ¹é…" class="headerlink" title="äºŒéƒ¨å›¾åŒ¹é…"></a>äºŒéƒ¨å›¾åŒ¹é…</h4><p><strong>é—®é¢˜æè¿°</strong></p><ul><li>äºŒéƒ¨å›¾G&#x3D;(V,E)æ˜¯é¡¶ç‚¹é›†Vå¯åˆ†ä¸ºä¸¤ä¸ªä¸ç›¸äº¤çš„å­é›†Xå’ŒYçš„å›¾ï¼Œä½¿å¾—æ¯ä¸ªè¾¹$e \in E$æœ‰ä¸€ä¸ªç«¯ç‚¹åœ¨Xä¸­ï¼Œå¦ä¸€ä¸ªç«¯ç‚¹åœ¨Yä¸­</li><li>ä¸€ä¸ªåŒ¹é…$M \subseteq E$æ˜¯è¾¹çš„å­é›†ï¼Œä½¿å¾—Vä¸­çš„æ¯ä¸ªèŠ‚ç‚¹æœ€å¤šå‡ºç°åœ¨Mä¸­çš„ä¸€æ¡è¾¹ä¸Š</li><li>Maximal Matching(æå¤§åŒ¹é…)æ˜¯æŒ‡åœ¨ä¸å°†ä¸€ä¸ªèŠ‚ç‚¹çš„åº¦å¢åŠ åˆ°2çš„æƒ…å†µä¸‹ï¼Œä¸èƒ½å†æ·»åŠ ä»»ä½•è¾¹çš„åŒ¹é…ï¼Œæ˜¯ä¸€ä¸ªå±€éƒ¨æœ€å¤§å€¼</li><li>Maximum Matching(æœ€å¤§åŒ¹é…)æ˜¯å…·æœ‰å°½å¯èƒ½å¤šçš„åŒ¹é…ï¼Œå®ƒæ˜¯å…¨å±€æœ€ä¼˜çš„</li></ul><p><strong>äºŒéƒ¨å›¾ä¸æœ€å¤§æµ</strong></p><ul><li>ç›®æ ‡ï¼šåœ¨å›¾ä¸­æ‰¾åˆ°æœ€å¤§åŒ¹é…</li><li>å¯ä»¥å®¹æ˜“åœ°æ‰¾åˆ°æœ€å¤§åŒ¹é…ï¼šåªéœ€åœ¨åŒ¹é…ä¸­æ·»åŠ è¾¹ï¼Œç›´åˆ°æ— æ³•æ·»åŠ æ›´å¤šçš„è¾¹ä¸ºæ­¢</li><li>å¯ä»¥è¯æ˜ï¼Œå¯¹äºä»»ä½•æå¤§åŒ¹é…(maximal matching) $M$ï¼Œ$|M| \ge \frac 1 2|M^*|$ï¼Œå…¶ä¸­$M^*$æ˜¯æœ€å¤§åŒ¹é…(maximum matching)</li><li>æœ€å¤§åŒ¹é…é—®é¢˜å¯ä»¥å½’ç»“ä¸ºæœ€å¤§æµé—®é¢˜</li></ul><p><strong>äºŒéƒ¨å›¾åŒ¹é…ä¸æœ€å¤§æµ</strong></p><ul><li>åœ¨$G&#x3D;(V,E)$åŸºç¡€ä¸Šæ„é€ $Gâ€™ &#x3D; (Vâ€™,Eâ€™)$ï¼Œå…¶ä¸­$Vâ€™$é™¤$V$ä¸­çš„èŠ‚ç‚¹å¤–è¿˜åŒ…å«æºså’Œæ±‡tï¼Œ$Eâ€™$é™¤Eä¸­çš„è¾¹å¤–è¿˜åŒ…å«såˆ°Xå’ŒYåˆ°tçš„è¾¹</li><li>æ‰€æœ‰è¾¹å…·æœ‰å•ä½å®¹é‡</li><li>å¯¹äºå¤§å°ä¸ºkçš„æµï¼ŒXä¸­çš„ç‚¹æœ€å¤šå¸¦æœ‰ä¸€æ¡å¸¦æµé‡çš„å‡ºè¾¹ï¼ŒYä¸­3çš„ç‚¹æœ€å¤šæœ‰ä¸€æ¡å¸¦æµé‡çš„å…¥è¾¹ï¼ŒXåˆ°Yæœ‰æµé‡çš„è¾¹çš„ä¸ªæ•°æ˜¯k</li><li>è§£å†³æœ€å¤§æµé—®é¢˜å°±è§£å†³äº†æœ€å¤§åŒ¹é…ï¼Œæ—¶é—´å¤æ‚åº¦$O((m+n)n)$</li></ul><p><img src="/blog/2022/09/01/%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/2022-04-30_115228.png" alt="2022-04-30_115228"></p><p><strong>å®Œå…¨åŒ¹é…</strong></p><ul><li><p>å®Œå…¨åŒ¹é…æ˜¯æŒ‡æ¯ä¸ªèŠ‚ç‚¹ä¸Šæ­£å¥½æœ‰ä¸€æ¡è¾¹çš„åŒ¹é…</p></li><li><p>ç¡®å®šç»™å®šäºŒéƒ¨å›¾æ˜¯å¦å…·æœ‰å®Œå…¨åŒ¹é…çš„ä¸€ç§æ–¹æ³•å¯ä»¥å…ˆæ‰¾åˆ°æœ€å¤§åŒ¹é…ï¼Œå†æ£€æŸ¥åŒ¹é…çš„å¤§å°æ˜¯å¦ç­‰äºæ¯ä¸ªéƒ¨åˆ†ä¸­çš„èŠ‚ç‚¹æ•°</p></li><li><p>å¦ä¸€ç§æ–¹æ³•åˆ©ç”¨äº†éœå°”å®šç†</p><blockquote><p>äºŒéƒ¨å›¾G(V,E)å…·æœ‰å®Œå…¨åŒ¹é…å½“ä¸”ä»…å½“å¯¹æ¯ä¸ªå­é›†$S \sube X$æˆ–$S \sube Y$ï¼ŒSçš„é‚»åŸŸçš„å¤§å°è‡³å°‘å’ŒSä¸€æ ·å¤§ï¼Œå³$|\gamma (S)| \ge |S|$</p></blockquote></li></ul><p><strong>è°ƒåº¦é—®é¢˜</strong></p><ul><li>å‡è®¾$J&#x3D;\left{J_1,J_2,\dots,J_n\right}$æ˜¯ä¸€ç»„ä½œä¸šï¼Œ$T&#x3D;\left{ T_1,T_2,\dots,T_k \right}$ä¸ºå¯æ‰§è¡Œè¿™äº›ä½œä¸šçš„æœºå™¨ä¸Šçš„å¯ç”¨æ—¶éš™</li><li>æ¯ä¸ªä½œä¸š$J$éƒ½æœ‰ä¸€ç»„æœ‰æ•ˆçš„æ—¶éš™$S_j \in T$ï¼Œå¯ä»¥å¯¹å…¶è¿›è¡Œè°ƒåº¦ï¼›é™åˆ¶æ¡ä»¶æ˜¯ä¸èƒ½åŒæ—¶è°ƒåº¦ä¸¤ä¸ªä½œä¸š</li><li>é—®é¢˜æ˜¯å¦‚ä½•æ‰¾åˆ°å¯ä»¥è°ƒåº¦çš„æœ€å¤§ä½œä¸šé›†</li><li>è¿™ä¸€é—®é¢˜å¯ä»¥å½’ç»“ä¸ºäºŒéƒ¨åŒ¹é…ï¼šå¯¹äºæ¯ä¸ªä½œä¸šï¼Œåœ¨$X$ä¸­åˆ›å»ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¯¹äºæ¯ä¸ªæ—¶éš™ï¼Œåœ¨$Y$ä¸­åˆ›å»ºä¸€ä¸ªèŠ‚ç‚¹ï¼›å¯¹äº$S_j$ä¸­çš„æ¯ä¸ªæ—¶éš™ï¼Œåœ¨$X$å’Œ$Y$ä¹‹é—´åˆ›å»ºä¸€æ¡è¾¹ã€‚äºŒéƒ¨å›¾çš„æœ€å¤§åŒ¹é…å°±æ˜¯å¯ä»¥è°ƒåº¦çš„æœ€å¤§ä½œä¸šé›†</li></ul><p><strong>è°ƒåº¦é—®é¢˜ä¸¾ä¾‹</strong></p><ul><li>æŸå®¶åŒ»é™¢æœ‰nååŒ»ç”Ÿï¼Œæ¯ä¸ªåŒ»ç”Ÿéƒ½æœ‰ä¸€ç»„ä¼‘å‡æ—¥ã€‚æœ‰kä¸ªå‡æœŸæ®µä¾›é€‰æ‹©ï¼Œæ¯ä¸ªå‡æœŸæ®µè¿ç»­è·¨è¶Šå‡ å¤©ã€‚è®¾$D_j$ä¸ºç¬¬$j$ä¸ªå‡æœŸä¸­åŒ…å«çš„å¤©æ•°</li><li>åœ¨é™åˆ¶æ¡ä»¶ä¸‹ï¼Œéœ€è¦æœ€å¤§é™åº¦åœ°å°†åŒ»ç”Ÿåˆ†é…åˆ°å¤©ï¼Œæ¯å¤©ä¸€ååŒ»ç”Ÿ</li><li>é™åˆ¶ï¼šæ¯ä¸ªåŒ»ç”Ÿéƒ½æœ‰ä¸€ä¸ªå®¹é‡$c_i$ï¼Œæ˜¯å¯ä»¥å®‰æ’çš„æœ€å¤§æ€»å¤©æ•°ï¼Œæ¯ä¸ªå‡æœŸæ®µï¼Œä»»ä½•ä¸€ä¸ªåŒ»ç”Ÿæœ€å¤šå®‰æ’ä¸€æ¬¡</li></ul><p><strong>è½¬åŒ–ä¸ºæœ€å¤§æµé—®é¢˜</strong></p><ul><li>ä¸ºæ¯ä¸ªåŒ»ç”Ÿ$i$åˆ›å»ºä¸€ä¸ªèŠ‚ç‚¹$u_i$ï¼Œä¸ºæ¯ä¸ªä¼‘å‡æ—¥$j$åˆ›å»ºä¸€ä¸ªèŠ‚ç‚¹$v_j$ï¼›ä»èµ·å§‹èŠ‚ç‚¹sæ·»åŠ ä¸€æ¡è¾¹åˆ°$u_i$ï¼Œä»$v_j$åŠ å…¥ä¸€æ¡è¾¹åˆ°æ±‡ç‚¹$t$</li><li>åŒ»ç”Ÿçš„å®¹é‡è¡¨ç¤ºä¸ºä»$s$åˆ°$u_i$çš„è¾¹çš„å®¹é‡</li><li>ä»èŠ‚ç‚¹$v_j$åˆ°$t$çš„è¾¹çš„å®¹é‡éƒ½è®¾ç½®ä¸º1ï¼Œè¡¨ç¤ºæ¯ä¸ªå‡æœŸé€‰æ‹©ä¸€ä¸ªåŒ»ç”Ÿ</li><li>ä¸ºäº†é˜²æ­¢åŒ»ç”Ÿåœ¨ä¼‘å‡æœŸé—´è¢«å®‰æ’å¤šæ¬¡ï¼Œå¼•å…¥ä¸­é—´èŠ‚ç‚¹ï¼šå¯¹äºä»»ä½•åŒ»ç”Ÿ$i$å’Œå‡æœŸ$j$ï¼Œåˆ›å»ºä¸€ä¸ªä¸­é—´èŠ‚ç‚¹$w_{ij}$å¹¶åˆ›å»ºä¸€ä¸ªä»$u_i$åˆ°$w_{ij}$çš„å•ä½å®¹é‡çš„è¾¹ã€‚å¯¹äºä¼‘å‡æœŸé—´åŒ»ç”Ÿæœ‰ç©ºçš„æ¯ä¸€å¤©ï¼Œåˆ›å»ºä¸€æ¡ä»$w_{ij}$åˆ°è¯¥å¤©èŠ‚ç‚¹çš„å•ä½å®¹é‡è¾¹</li></ul><p><strong>åŠ å…¥ä¸­é—´èŠ‚ç‚¹</strong></p><p><img src="/blog/2022/09/01/%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/2022-05-04_102711.png" alt="2022-05-04_102711"></p><p><strong>çº¿æ€§è§„åˆ’</strong></p><ul><li>æŠŠæœ€å¤§æµå¯ä»¥å½’ç»“ä¸ºçº¿æ€§è§„åˆ’é—®é¢˜</li><li>é¦–å…ˆè€ƒè™‘æœ€å¤§æµé—®é¢˜çš„ä¸€ä¸ªä¾‹å­ï¼Œ$G&#x3D;(V,E)$ï¼Œè¾¹$e \in E$çš„å®¹é‡ä¸º$c_e$</li><li>è®¾å˜é‡$f_e$ä¸ºè¾¹$e$ä¸Šçš„æµé‡ï¼Œä¸‹é¢çš„çº¿æ€§è§„åˆ’å¯ç”¨äºæœ€å¤§æµé—®é¢˜</li></ul><p>$ max \sum_{v:(s,v) \in E} $ </p><p>subject to $\sum_{u:(u,v) \in E}f(u,v) &#x3D; \sum_{u:(v,u) \in E}f(v,u) $ $\forall v \in V,v \ne s,$ </p><p>$0 \le f_e &lt; c_e $ ï¼Œ$\forall e \in E$</p><p><strong>çº¿æ€§è§„åˆ’å½¢å¼</strong></p><p>$min \sum_i c_ix_i$</p><p>subject to $\sum_i A_{ij}x_i \ge b_j$  $\forall j$</p><p>$ x_i \ge 0$  $\forall i$ </p><p><strong>çº¿æ€§è§„åˆ’ä¸¾ä¾‹</strong></p><p><img src="/blog/2022/09/01/%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/90cf3102072a47d92eec4727d52285b.jpg" alt="90cf3102072a47d92eec4727d52285b"></p><h3 id="8ã€çº¿æ€§ä»£æ•°è§£æ³•-x2F-éšæœºåŒ–ç®—æ³•-x2F-knuth-shuffle-x2F-æ‰©å±•è®¡æ•°èŒƒå›´-x2F-è´Ÿè½½å‡è¡¡é—®é¢˜-x2F-çƒå’Œæ¡¶-x2F-é—ä¼ ç®—æ³•"><a href="#8ã€çº¿æ€§ä»£æ•°è§£æ³•-x2F-éšæœºåŒ–ç®—æ³•-x2F-knuth-shuffle-x2F-æ‰©å±•è®¡æ•°èŒƒå›´-x2F-è´Ÿè½½å‡è¡¡é—®é¢˜-x2F-çƒå’Œæ¡¶-x2F-é—ä¼ ç®—æ³•" class="headerlink" title="8ã€çº¿æ€§ä»£æ•°è§£æ³•&#x2F;éšæœºåŒ–ç®—æ³•&#x2F;knuth shuffle&#x2F;æ‰©å±•è®¡æ•°èŒƒå›´&#x2F;è´Ÿè½½å‡è¡¡é—®é¢˜&#x2F;çƒå’Œæ¡¶&#x2F;é—ä¼ ç®—æ³•"></a>8ã€çº¿æ€§ä»£æ•°è§£æ³•&#x2F;éšæœºåŒ–ç®—æ³•&#x2F;knuth shuffle&#x2F;æ‰©å±•è®¡æ•°èŒƒå›´&#x2F;è´Ÿè½½å‡è¡¡é—®é¢˜&#x2F;çƒå’Œæ¡¶&#x2F;é—ä¼ ç®—æ³•</h3><h4 id="çº¿æ€§ä»£æ•°è§£æ³•ç»ƒä¹ "><a href="#çº¿æ€§ä»£æ•°è§£æ³•ç»ƒä¹ " class="headerlink" title="çº¿æ€§ä»£æ•°è§£æ³•ç»ƒä¹ "></a>çº¿æ€§ä»£æ•°è§£æ³•ç»ƒä¹ </h4><p><img src="https://raw.githubusercontent.com/Yoonalis/img/master/2022-05-04_135935.png" alt="2022-05-04_135935"></p><p><img src="/blog/2022/09/01/%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/09ec96aa4d19bf976ce665f5b08067d.jpg" alt="09ec96aa4d19bf976ce665f5b08067d"></p><h4 id="éšæœºåŒ–ç®—æ³•ï¼ˆæ‹‰æ–¯ç»´åŠ æ–¯å’Œè’™ç‰¹å¡æ´›ï¼‰"><a href="#éšæœºåŒ–ç®—æ³•ï¼ˆæ‹‰æ–¯ç»´åŠ æ–¯å’Œè’™ç‰¹å¡æ´›ï¼‰" class="headerlink" title="éšæœºåŒ–ç®—æ³•ï¼ˆæ‹‰æ–¯ç»´åŠ æ–¯å’Œè’™ç‰¹å¡æ´›ï¼‰"></a>éšæœºåŒ–ç®—æ³•ï¼ˆæ‹‰æ–¯ç»´åŠ æ–¯å’Œè’™ç‰¹å¡æ´›ï¼‰</h4><ul><li><p>éšæœºåŒ–ç®—æ³•æ˜¯ä¸€ç§ç±»ä¼¼äºå¯ä»¥æŠ•æ·ç¡¬å¸å¹¶æ ¹æ®æŠ•æ·ç»“æœé‡‡å–ä¸åŒè¡ŒåŠ¨çš„ç®—æ³•ï¼Œå°†è®¨è®ºä¸¤ç§éšæœºç®—æ³•ï¼š</p></li><li><p>Las Vegasï¼šéšæœºåŒ–ç®—æ³•æ€»æ˜¯èƒ½ç»™å‡ºæ­£ç¡®ç­”æ¡ˆï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½èŠ±è´¹æ›´é•¿çš„æ—¶é—´ã€‚å®ƒä»¬çš„â€œé¢„æœŸâ€è¿è¡Œæ—¶é—´æ˜¯è¾“å…¥å¤§å°çš„å¤šé¡¹å¼ï¼Œæ„å‘³ç€æ‰€æœ‰å¯èƒ½æŠ•å¸çš„å¹³å‡è¿è¡Œæ—¶é—´æ˜¯å¤šé¡¹å¼ã€‚</p><ul><li><p>åœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œæ‹‰æ–¯ç»´åŠ æ–¯ç®—æ³•å¯èƒ½éœ€è¦æŒ‡æ•°çº§çš„æ—¶é—´ã€‚</p></li><li><p>æ‹‰æ–¯ç»´åŠ æ–¯ç®—æ³•çš„ä¸€ä¸ªä¾‹å­æ˜¯å¿«é€Ÿæ’åºï¼šå®ƒæ ¹æ®æŠ•å¸é‡åšå‡ºä¸€äº›å†³ç­–ï¼Œæ€»æ˜¯äº§ç”Ÿæ­£ç¡®çš„ç»“æœï¼Œå…¶é¢„æœŸè¿è¡Œæ—¶é—´å’Œæœ€åæƒ…å†µä¸‹çš„è¿è¡Œæ—¶é—´åˆ†åˆ«æ˜¯$nlogn$å’Œ$n^2$</p></li></ul></li><li><p>Monte Carloç®—æ³•ï¼šè¿™äº›æ˜¯æŒ‡æœ‰æ—¶ä¼šå¾—å‡ºä¸€ä¸ªé”™è¯¯çš„ç­”æ¡ˆçš„éšæœºç®—æ³•ã€‚</p><ul><li>åƒæ‹‰æ–¯ç»´åŠ æ–¯ç®—æ³•ä¸€æ ·ï¼Œå®ƒä»¬çš„é¢„æœŸè¿è¡Œæ—¶é—´æ˜¯å¤šé¡¹å¼çš„ï¼Œä½†åœ¨æœ€åæƒ…å†µä¸‹å¯èƒ½æ˜¯æŒ‡æ•°çš„ã€‚</li><li>é€šå¸¸å¯ä»¥é€šè¿‡å¤šæ¬¡è¿è¡ŒMonte Carloç®—æ³•ï¼Œå°†å¾—åˆ°æ­£ç¡®ç­”æ¡ˆçš„æ¦‚ç‡â€œæå‡â€åˆ°æˆ‘ä»¬å–œæ¬¢çš„æœ€å°å€¼ã€‚</li><li>ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªç‰¹å®šçš„è’™ç‰¹å¡æ´›ç®—æ³•äº§ç”Ÿä¸€ä¸ªæ¦‚ç‡ä¸º$\frac 1 4$çš„é”™è¯¯ç»“æœï¼Œå¹¶ä¸”æˆ‘ä»¬æœ‰èƒ½åŠ›æ´å•åˆ°ä¸€ä¸ªé”™è¯¯çš„ç»“æœï¼Œé‚£ä¹ˆåœ¨tæ¬¡ç‹¬ç«‹è¿è¡Œä¹‹åï¼Œæ²¡æœ‰å¾—åˆ°æ­£ç¡®ç­”æ¡ˆçš„æ¦‚ç‡æ˜¯$(\frac 1 4)^t$ã€‚</li><li>åœ¨æŸäº›ä¼˜åŒ–é—®é¢˜ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰èƒ½åŠ›æ£€æµ‹é”™è¯¯çš„ç­”æ¡ˆï¼Œä½†å¯ä»¥æ¯”è¾ƒä¸åŒçš„ç­”æ¡ˆï¼Œå¹¶é€‰æ‹©æœ€å¥½çš„ä¸€ä¸ªã€‚</li></ul></li></ul><blockquote><p>æ‹‰æ–¯ç»´åŠ æ–¯ç®—æ³•ï¼šé‡‡æ ·è¶Šå¤šï¼Œè¶Šæœ‰æœºä¼šæ‰¾åˆ°æœ€ä¼˜è§£ï¼ˆè¯•é’¥åŒ™ï¼‰</p><p>è’™ç‰¹å¡ç½—ç®—æ³•ï¼šé‡‡æ ·è¶Šå¤šï¼Œè¶Šè¿‘ä¼¼æœ€ä¼˜è§£ï¼ˆæŒ‘æœ€å¤§çš„è‹¹æœï¼‰</p></blockquote><p><strong>éšæœºåŒ–çš„ä¼˜åŠ¿</strong></p><p>éšæœºç®—æ³•ç›¸æ¯”ç¡®å®šå‹ç®—æ³•å…·æœ‰å‡ ä¸ªæœ‰ç‚¹ï¼š</p><ul><li>ç®€å•æ€§ã€‚å¯¹äºç›¸åŒçš„ä»»åŠ¡ï¼Œéšæœºç®—æ³•å¾€å¾€æ¯”ç¡®å®šå‹ç®—æ³•ç®€å•ã€‚ä¾‹å¦‚ï¼Œå¿«é€Ÿæ’åºæ¢çº½å…ƒçš„é€‰æ‹©ã€‚</li><li>æ•ˆç‡ã€‚å¯¹äºæŸäº›é—®é¢˜ï¼Œéšæœºç®—æ³•æ¯”ç¡®å®šå‹ç®—æ³•å…·æœ‰æ›´å¥½çš„æ¸è¿‘è¿è¡Œæ—¶é—´ï¼šå¯¹æŸäº›é—®é¢˜ï¼Œç¡®å®šå‹ç®—æ³•æ˜¯ä»¥æŒ‡æ•°æ—¶é—´è¿è¡Œçš„ï¼Œè€Œéšæœºç®—æ³•æ˜¯å·²çŸ¥å¤šé¡¹å¼æ—¶é—´çš„ã€‚</li><li>å½“ç®—æ³•é¢ä¸´ä¿¡æ¯ä¸è¶³æ—¶ï¼ŒéšæœºåŒ–æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</li></ul><h4 id="KargeréšæœºåŒ–ç®—æ³•"><a href="#KargeréšæœºåŒ–ç®—æ³•" class="headerlink" title="KargeréšæœºåŒ–ç®—æ³•"></a>KargeréšæœºåŒ–ç®—æ³•</h4><h4 id="knuth-shuffle"><a href="#knuth-shuffle" class="headerlink" title="knuth shuffle"></a>knuth shuffle</h4><p>ä»£ç å®ç°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> random<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">shuffle</span>(<span class="hljs-params">a,n</span>):<br>    tmp = a[<span class="hljs-number">0</span>]<br>    <span class="hljs-keyword">if</span> <span class="hljs-number">1</span> &gt;= n: <span class="hljs-keyword">return</span> a<br>    i = random.randint(<span class="hljs-number">1</span>,n-<span class="hljs-number">1</span>)<br>    a[<span class="hljs-number">0</span>] = a[i]<br>    a[i] = tmp<br>    shuffle(a[<span class="hljs-number">1</span>:],n-<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">return</span> a<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    a = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>]<br>    n = <span class="hljs-built_in">len</span>(a)<br>    <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):<br>        <span class="hljs-built_in">print</span>(shuffle(a,n))<br></code></pre></td></tr></table></figure><blockquote><p>å¯èƒ½å› ä¸ºä¾èµ–çš„<code>random.randint()</code>è¿™ä¸ªå‡½æ•°ï¼Œæ„Ÿè§‰åœ¨çŸ­æ—¶é—´å†…çš„éšæœºæ€§ä¸æ˜¯å¾ˆå¥½</p></blockquote><h4 id="æ‰©å±•è®¡æ•°èŒƒå›´"><a href="#æ‰©å±•è®¡æ•°èŒƒå›´" class="headerlink" title="æ‰©å±•è®¡æ•°èŒƒå›´"></a>æ‰©å±•è®¡æ•°èŒƒå›´</h4><p>é—®é¢˜æè¿°ï¼šç»™ä¸€ä¸ªèƒ½åœ¨1-7ä¸­å–éšæœºçš„<code>rand7()</code>ï¼Œè®¾è®¡ä¸€ä¸ªèƒ½åœ¨1-10ä¸­å–éšæœºçš„<code>rand10()</code>ï¼Œè¦æ±‚å–åˆ°æ¯ä¸ªæ•°çš„æ¦‚ç‡ç›¸ç­‰ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> random<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">rand7</span>():<br>    <span class="hljs-keyword">return</span> random.randint(<span class="hljs-number">1</span>, <span class="hljs-number">7</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">rand10</span>():<br>    x=-<span class="hljs-number">1</span><br>    <span class="hljs-keyword">while</span> x == -<span class="hljs-number">1</span> <span class="hljs-keyword">or</span> x &gt; <span class="hljs-number">40</span>:<br>        x = (rand7() - <span class="hljs-number">1</span>) * <span class="hljs-number">7</span> + rand7()<br>    x = x%<span class="hljs-number">10</span>+<span class="hljs-number">1</span><br>    <span class="hljs-keyword">return</span> x<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    <span class="hljs-built_in">print</span>(rand10())<br></code></pre></td></tr></table></figure><h4 id="è´Ÿè½½å‡è¡¡é—®é¢˜"><a href="#è´Ÿè½½å‡è¡¡é—®é¢˜" class="headerlink" title="è´Ÿè½½å‡è¡¡é—®é¢˜"></a>è´Ÿè½½å‡è¡¡é—®é¢˜</h4><ul><li>åœ¨å¤šä¸ªèµ„æºä¹‹é—´åˆ†é…ä»»åŠ¡</li><li>ä¾‹å¦‚ï¼ŒNginxä¸€ç§æ”¯æŒåå‘ä»£ç†çš„å¼€æºWebæœåŠ¡å™¨ï¼Œå¯ä»¥ç”¨äºé«˜æ€§èƒ½çš„è´Ÿè½½å‡è¡¡</li><li>åœ¨ç½‘ç»œæœåŠ¡å™¨ä¹‹é—´åˆç†åˆ†é…è¯·æ±‚ï¼Œä½¿æ¯ä¸ªæœåŠ¡å™¨çš„å·¥ä½œé‡åŸºæœ¬ç›¸åŒ</li><li>ç®€å•çš„æ–¹æ³•å°±æ˜¯æŠŠä»»åŠ¡ä»¥å‡åŒ€åˆ†å¸ƒæ–¹å¼åˆ†å‘ç»™æœåŠ¡å™¨</li></ul><p><strong>Nginxè´Ÿè½½å‡è¡¡æ–¹æ³•</strong></p><ul><li>Round-Robinï¼šå¯¹åº”ç”¨æœåŠ¡å™¨çš„è¯·æ±‚æŒ‰ç…§è½®è½¬æ–¹å¼åˆ†é…</li><li>æœ€å°‘è¿æ¥æ•°ï¼šå°†ä¸‹ä¸€æ¡è¯·æ±‚åˆ†é…ç»™æ´»è·ƒè¿æ¥æ•°æœ€å°‘çš„æœåŠ¡å™¨</li><li>IP-hashï¼šåŸºäºå®¢æˆ·ç«¯çš„IPåœ°å€ï¼Œä½¿ç”¨å“ˆå¸Œå‡½æ•°æ¥å†³å®šä¸ºä¸‹ä¸€æ¡è¯·æ±‚åˆ†é…å“ªä¸€ä¸ªæœåŠ¡å™¨</li></ul><h4 id="çƒå’Œæ¡¶"><a href="#çƒå’Œæ¡¶" class="headerlink" title="çƒå’Œæ¡¶"></a>çƒå’Œæ¡¶</h4><ul><li>è€ƒè™‘æŠŠmä¸ªçƒæ‰”è¿›nä¸ªæ¡¶çš„è¿‡ç¨‹</li><li>æ¯ä¸€ä¸ªçƒéƒ½ä»¥$\frac 1 n$çš„æ¦‚ç‡è¿›å…¥ä¸åŒçš„æ¡¶ï¼Œç‹¬ç«‹äºå…¶ä»–çš„çƒ</li><li>ç¢°æ’ï¼šä¸¤ä¸ªçƒæ‰”è¿›åŒä¸€ä¸ªæ¡¶</li></ul><p><strong>åŸºæœ¬ç»“è®º</strong></p><ul><li><p>ä¸¤çƒç¢°æ’çš„æ¦‚ç‡æ˜¯å¤šå°‘ï¼Ÿ</p></li><li><p>ä½¿ç”¨è´å¶æ–¯å®šç†ï¼Œå†è®¡ç®—è¾¹é™…æ¦‚ç‡</p></li><li><p>æŠŠçƒiè¿›å…¥æ¡¶jçš„äº‹ä»¶è®°ä½œ$B_i^j$</p><p>$Pr[Col_{12}] &#x3D; \sum^2_{i&#x3D;1}Pr[B^i_2|B^i_1]Pr[B^i_1] &#x3D; \sum^n_{i&#x3D;1} \frac 1 n Pr[B^i_1] &#x3D; \frac 1 n$</p></li><li><p>mä¸ªçƒè¿›å…¥nä¸ªæ¡¶ç›¸æ’æ¬¡æ•°çš„æœŸæœ›å€¼æ˜¯ï¼š$\sum_{i \ne j}Pr[Col_{ij}]&#x3D;\frac 1 n C^2_m$</p></li><li><p>ä¸€ä¸ªæ¡¶ä¸ºç©ºçš„æ¦‚ç‡æ˜¯å¤šå°‘ï¼Ÿä¸€ä¸ªçƒä¸è½å…¥æ¡¶içš„æ¦‚ç‡æ˜¯$1-\frac 1 n$ï¼Œå› æ­¤æ¡¶å§‹ç»ˆä¸ºç©ºçš„æ¦‚ç‡æ˜¯$(1-\frac 1 n)^n \to \frac 1 e$</p></li><li><p>ç©ºæ¡¶ä¸ªæ•°çš„æœŸæœ›å€¼æ˜¯å¤šå°‘ï¼Ÿ$\frac n e$</p></li><li><p>ä¸€ä¸ªæ¡¶å†…æ°å¥½æœ‰kä¸ªçƒçš„æ¦‚ç‡æ˜¯å¤šå°‘ï¼Ÿ$C_n^k(\frac 1 n)^k(1-\frac 1 n)^{n-k} \le \frac {n^k} {k!} \frac 1 {n^k} &#x3D; \frac 1 {k!}$</p></li><li><p>ä¸€ä¸ªæ¡¶å†…è‡³å°‘æœ‰kä¸ªçƒçš„æ¦‚ç‡æ˜¯å¤šå°‘ï¼Ÿ$\le C^k_n(\frac 1 n)^k \le (\frac e k)^k$</p></li></ul><p><img src="/blog/2022/09/01/%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/2022-05-06_152213.png" alt="2022-05-06_152213"></p><h4 id="é—ä¼ ç®—æ³•"><a href="#é—ä¼ ç®—æ³•" class="headerlink" title="é—ä¼ ç®—æ³•"></a>é—ä¼ ç®—æ³•</h4><p><strong>ä»‹ç»</strong></p><ul><li>é—ä¼ ç®—æ³•æ˜¯ä¸€ç§ä¼˜åŒ–ç®—æ³•ï¼Œç”¨æ¥å¯»æ‰¾æœ€å¤§åŒ–æˆ–æœ€å°åŒ–çš„ä¸€ä¸ªç‰¹å®šçš„å‡½æ•°çš„æœ€ä¼˜è§£</li><li>é—ä¼ ç®—æ³•æ˜¯ä¸€ä¸ªæ¼”åŒ–è®¡ç®—ç ”ç©¶é¢†åŸŸçš„ä¸€ä¸ªåˆ†æ”¯ï¼Œæ¨¡æ‹Ÿç¹æ®–å’Œè‡ªç„¶é€‰æ‹©çš„ç”Ÿç‰©è¿‡ç¨‹æ¥æ±‚è§£é—®é¢˜</li><li>ä¸è¿›åŒ–è®ºä¸€æ ·ï¼Œé—ä¼ ç®—æ³•çš„è®¸å¤šè¿‡ç¨‹éƒ½æ˜¯éšæœºçš„ï¼Œä½†å…è®¸äººä»¬è®¾ç½®éšæœºæ°´å¹³å’Œæ§åˆ¶æ°´å¹³ï¼Œæ¯”éšæœºæœç´¢å’Œç©·ä¸¾æœç´¢ç®—æ³•æ›´å¼ºå¤§å’Œæœ‰æ•ˆ</li><li>ä¼˜åŠ¿åœ¨äºä¸éœ€è¦å…³äºç»™å®šé—®é¢˜çš„é¢å¤–ä¿¡æ¯ï¼Œæ‰¾åˆ°å…¶ä»–ä¼˜åŒ–æ–¹æ³•ç”±äºç¼ºä¹è¿ç»­æ€§ã€å¯¼æ•°ã€çº¿æ€§æˆ–å…¶ä»–ç‰¹æ€§è€Œæ— æ³•å¤„ç†çš„é—®é¢˜çš„è§£</li></ul><p><strong>ç®—æ³•çš„æ„æˆ</strong></p><p>æ¨¡æ‹Ÿç”Ÿç‰©è¿‡ç¨‹è®¾è®¡ï¼Œç›¸å…³æœ¯è¯­å¤šä»ç”Ÿç‰©å­¦ä¸­å€Ÿç”¨ï¼Œä½†æ¯”å…¶ç”Ÿç‰©å¯¹åº”ç‰©è¦ç®€å•ã€‚å…·ä½“åŒ…å«å¦‚ä¸‹ç»„æˆéƒ¨åˆ†ï¼š</p><ul><li>ä¸€ä¸ªç”¨äºä¼˜åŒ–çš„é€‚åº”åº¦å‡½æ•°</li><li>ä¸€ä¸ªæŸ“è‰²ä½“ç¾¤ä½“</li><li>é€‰æ‹©å“ªäº›æŸ“è‰²ä½“å°†ç¹æ®–çš„æ–¹å¼</li><li>äº§ç”Ÿä¸‹ä¸€ä»£æŸ“è‰²ä½“çš„äº¤å‰æ–¹å¼</li><li>æ–°ä¸€ä»£æŸ“è‰²ä½“ä¸­çš„éšæœºå˜å¼‚</li></ul><p><strong>é€‚åº”åº¦å‡½æ•°</strong></p><ul><li>é€‚åº”åº¦å‡½æ•°æ˜¯æŒ‡ç®—æ³•åŠ›å›¾ä¼˜åŒ–çš„æŒ‡æ ‡å‡½æ•°</li><li>é€‚åº”åº¦ä¸€è¯æºè‡ªè¿›åŒ–è®ºï¼Œç”¨é€‚åº”åº¦å‡½æ•°æµ‹è¯•å¹¶é‡åŒ–æ¯ä¸ªæ½œåœ¨è§£å†³æ–¹æ¡ˆçš„é€‚åˆç¨‹åº¦</li><li>è®¾è®¡é€‚åº”åº¦å‡½æ•°æ˜¯ç®—æ³•ä¸­æœ€å…³é”®çš„éƒ¨åˆ†ä¹‹ä¸€</li><li>ä»éšæœºé€‰æ‹©çš„æŸ“è‰²ä½“åˆå§‹ç¾¤ä½“å¼€å§‹ï¼Œé—ä¼ ç®—æ³•ç”¨é€‚åº”åº¦å‡½æ•°å¯¹ç¾¤ä½“ä¸­çš„æ¯ä¸€æ¡æŸ“è‰²ä½“è¿›è¡Œè¯„ä¼°ï¼Œæ£€éªŒå®ƒä»¬è§£å†³é—®é¢˜çš„å¥½å</li></ul><h3 id="9ã€æ¼”åŒ–ç®—æ³•-x2F-æ¨¡æ‹Ÿé€€ç«ç®—æ³•"><a href="#9ã€æ¼”åŒ–ç®—æ³•-x2F-æ¨¡æ‹Ÿé€€ç«ç®—æ³•" class="headerlink" title="9ã€æ¼”åŒ–ç®—æ³•&#x2F;æ¨¡æ‹Ÿé€€ç«ç®—æ³•"></a>9ã€æ¼”åŒ–ç®—æ³•&#x2F;æ¨¡æ‹Ÿé€€ç«ç®—æ³•</h3><h4 id="é—ä¼ ç®—æ³•-1"><a href="#é—ä¼ ç®—æ³•-1" class="headerlink" title="é—ä¼ ç®—æ³•"></a>é—ä¼ ç®—æ³•</h4><p><strong>é€‚åº”åº¦å‡½æ•°</strong></p><ul><li>é€‚åº”åº¦å‡½æ•°æ˜¯æŒ‡ç®—æ³•åŠ›å›¾ä¼˜åŒ–çš„æŒ‡æ ‡å‡½æ•°</li><li>é€‚åº”åº¦ä¸€è¯æºè‡ªè¿›åŒ–è®ºï¼Œç”¨é€‚åº”åº¦å‡½æ•°æµ‹è¯•å¹¶é‡åŒ–æ¯ä¸ªæ½œåœ¨è§£å†³æ–¹æ¡ˆçš„é€‚åˆç¨‹åº¦</li><li>è®¾è®¡é€‚åº”åº¦å‡½æ•°æ˜¯ç®—æ³•ä¸­æœ€å…³é”®çš„éƒ¨åˆ†ä¹‹ä¸€</li><li>ä»éšæœºé€‰æ‹©çš„æŸ“è‰²ä½“åˆå§‹ç¾¤ä½“å¼€å§‹ï¼Œé—ä¼ ç®—æ³•ç”¨é€‚åº”åº¦å‡½æ•°å¯¹ç¾¤ä½“ä¸­çš„æ¯ä¸€æ¡æŸ“è‰²ä½“å°†è¿›è¡Œè¯„ä¼°ï¼Œæ£€éªŒå®ƒä»¬è§£å†³é—®é¢˜çš„å¥½å</li></ul><p><strong>æŸ“è‰²ä½“</strong></p><ul><li>æŸ“è‰²ä½“æ˜¯æŒ‡ä»£è¡¨é—ä¼ ç®—æ³•å€™é€‰è§£å†³æ–¹æ¡ˆä¸€ä¸ªæˆ–å¤šä¸ªæ•°å€¼</li><li>æ¯ä¸ªå€™é€‰è§£éƒ½è¢«ç¼–ç ä¸ºä¸€ç»„å‚æ•°å€¼ï¼Œå¦‚æœé—®é¢˜å…·æœ‰ç»´åº¦nï¼Œåˆ™é€šå¸¸æ¯ä¸ªæŸ“è‰²ä½“ç¼–ç ä¸ºnå…ƒæ•°ç»„ï¼š$chromosome&#x3D;[p_1,p_2,â€¦,p_n]$ï¼Œå…¶ä¸­æ¯ä¸ª$p_i$æ˜¯ç¬¬iä¸ªå‚æ•°çš„å–å€¼</li><li>å°†å€™é€‰è§£çš„æ ·æœ¬ç©ºé—´è½¬åŒ–ä¸ºæŸ“è‰²ä½“æ˜¯é—ä¼ ç®—æ³•çš„å…³é”®ï¼Œä¾‹å¦‚äºŒè¿›åˆ¶å¯å°†æ¯ä¸ªå‚æ•°å€¼è½¬æ¢ä¸ºä¸€ä¸ª0&#x2F;1å­—ç¬¦ä¸²ä»¥åˆ›å»ºæŸ“è‰²ä½“</li></ul><p><strong>é€‰æ‹©ç®—å­</strong></p><ul><li>é€‰æ‹©ç®—å­æ ¹æ®ç”¨æˆ·å®šä¹‰çš„æ¦‚ç‡åˆ†å¸ƒé€‰æ‹©ä¸€äº›æŸ“è‰²ä½“è¿›è¡Œå¤åˆ¶</li><li>æŸ“è‰²ä½“fitnessè¶Šé«˜ï¼Œè¢«é€‰ä¸­çš„å¯èƒ½æ€§å°±è¶Šå¤§ã€‚ä¾‹å¦‚ï¼Œå¦‚æœfæ˜¯ä¸€ä¸ªéè´Ÿé€‚åº”åº¦å‡½æ•°ï¼Œé‚£ä¹ˆé€‰æ‹©$C_{25}$æŸ“è‰²ä½“è¿›è¡Œç¹æ®–çš„æ¦‚ç‡å¯ä»¥è®¾æˆ$Pr(C_{25} &#x3D; \frac {f(C_{25})} {\sum_i^n f(C_i)} )$</li><li>é€‰æ‹©ç®—å­ä»¥å¸¦æ›¿æ¢çš„æ–¹å¼é€‰æ‹©æŸ“è‰²ä½“ï¼Œå› æ­¤åŒä¸€æŸ“è‰²ä½“å¯ä»¥å¤šæ¬¡é€‰æ‹©</li></ul><p><strong>Roullete</strong></p><p><img src="/blog/2022/09/01/%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/2022-05-06_200508.png" alt="2022-05-06_200508"></p><p><strong>äº¤å‰ç®—å­ä¸å˜å¼‚ç®—å­</strong></p><ul><li>äº¤å‰ç®—å­ç±»ä¼¼äºç»†èƒå‡æ•°åˆ†è£‚ä¸­æŸ“è‰²ä½“çš„ç”Ÿç‰©äº¤å‰å’Œé‡ç»„</li><li>è¯¥æ“ä½œç¬¦äº¤æ¢ä¸¤æ¡æ‰€é€‰æŸ“è‰²ä½“çš„å­åºåˆ—æ¥äº§ç”Ÿä¸¤ä¸ªåä»£ã€‚ä¾‹å¦‚ï¼Œå¦‚æœçˆ¶ä»£æŸ“è‰²ä½“ä¸º[11010111001000],[01011101010010]ï¼Œåœ¨ç¬¬å››ä½ä¹‹åäº¤æ¢ï¼Œåˆ™å­ä»£æŸ“è‰²ä½“ä¸º[01010111001000],[11011101010010]</li><li>å˜å¼‚ç®—å­éšæœºç¿»è½¬æ–°æŸ“è‰²ä½“ä¸­çš„å•ä¸ªä½(å°†0å˜ä¸º1ï¼Œåä¹‹äº¦ç„¶)ï¼Œé€šå¸¸æŠŠå˜å¼‚å‘ç”Ÿçš„æ¦‚ç‡è®¾ä¸ºå¾ˆä½ï¼Œå¦‚0.001</li></ul><p><strong>é—ä¼ ç®—æ³•çš„æ­¥éª¤</strong></p><ul><li>éšæœºäº§ç”Ÿåˆå§‹ç§ç¾¤</li><li>é€‰æ‹©å…¶ä¸­ä¸€ç»„è¿›è¡Œäº¤é…ï¼Œç¹æ®–ä¸‹ä¸€ä»£ï¼Œä½¿ç”¨äº¤å‰ç®—å­</li><li>ä½¿ç”¨å˜å¼‚ç®—å­</li><li>å¾—åˆ°å­ä»£åï¼Œé‡æ–°è¯„ä¼°é€‚åº”åº¦å‡½æ•°ï¼Œæ¥æ”¶åˆ™åœæ­¢ï¼Œå¦åˆ™è¿”å›ç¬¬äºŒæ­¥</li></ul><p><strong>å•å˜é‡å‡½æ•°çš„ä¼˜åŒ–</strong></p><p><strong>ä»£é™…æ›´æ›¿</strong></p><p><strong>è¿ç»­å€¼é—ä¼ ç®—æ³•</strong></p><p><strong>é—ä¼ ç®—æ³•çš„é—®é¢˜</strong></p><ul><li>å¦‚æœç®—æ³•éœ€è¦æœç´¢è¿ç»­å€¼ï¼Œåˆ™éœ€è¦æŠŠæŸ“è‰²ä½“è½¬æ¢ä¸ºå®æ•°å€¼æ•°ç»„</li><li>ç®—æ³•çš„è§£å—åˆ°æµ®ç‚¹æ•°ç²¾åº¦çš„åˆ¶çº¦</li><li>è¿ç»­å€¼é—ä¼ ç®—æ³•å¯ä»¥æ¯”äºŒè¿›åˆ¶é—ä¼ ç®—æ³•æ›´å¿«ï¼Œå› ä¸ºåœ¨è®¡ç®—é€‚åº”åº¦å€¼æ—¶æ— éœ€é¢„å…ˆè§£ç </li><li>ä¾‹å¦‚ï¼Œé€‚åº”åº¦å‡½æ•°ä¸º$f(x) &#x3D; 2xsin(x)+ysin(2y)$ï¼Œ$chromosone&#x3D;[x,y]$ï¼Œ$0 \le x \le 10,0 \le y \le 10$</li><li>å¯ä»¥æå‡å˜å¼‚æ¦‚ç‡ï¼Œä¿ç•™éƒ¨åˆ†ä¸Šä¸€ä»£çš„ä¸ªä½“è¿›å…¥ä¸‹ä¸€ä»£ã€‚éœ€è¦è®¾è®¡æ–°çš„é€‰æ‹©æ¦‚ç‡å½¢å¼å’Œäº¤å‰ç®—å­</li></ul><p><strong>é—ä¼ ç®—æ³•åº”ç”¨</strong></p><ul><li><p>èƒŒåŒ…é—®é¢˜ï¼šé€‰æ‹©ç‰©å“ï¼Œåœ¨æ»¡è¶³é‡é‡çº¦æŸä¸‹ä½¿ä»·å€¼æœ€é«˜</p></li><li><p>æŸ“è‰²ä½“ç¼–ç ï¼šäºŒè¿›åˆ¶ç¼–ç ï¼Œä½æ•°ä¸ç‰©å“æ•°é‡ä¸€è‡´ï¼Œ1ä»£è¡¨æ”¾å…¥ï¼Œ0è¡¨ç¤ºä¸æ”¾</p></li><li><p>é€‚åº”åº¦å‡½æ•°ï¼šä¸è¶…å‡ºé‡é‡é™åˆ¶æ—¶å–ä»·å€¼ä¹‹å’Œï¼Œå¦åˆ™è®¾ä¸º-1</p></li><li><p>é€‰æ‹©æ¦‚ç‡ï¼š$Pr(x_i) &#x3D; \frac {e^{f(x_i)}} {\sum ^n_j e^{f(x_j)}}$</p></li></ul><p><strong>é—ä¼ ç®—æ³•é—®é¢˜</strong></p><ul><li>æ¯ä¸€ä»£ç§ç¾¤ç›¸å½“äºä¸€ç»„å¯è¡Œè§£</li><li>æŒ‰ç…§æ¦‚ç‡åˆ†å¸ƒæ¢ç´¢è§£ç©ºé—´çš„ä¸åŒåŒºåŸŸ</li><li>ä¼˜ç‚¹ï¼šè¾ƒå°‘çš„è¿­ä»£æ¬¡æ•°ï¼Œè¾ƒä½çš„è®¡ç®—å¼ºåº¦ï¼Œå¯ä»¥è®¾è®¡ä¸åŒçš„é€‚åº”åº¦å‡½æ•°æ±‚è§£å¤æ‚çš„ä¼˜åŒ–é—®é¢˜</li><li>å›°éš¾ï¼šæ”¶æ•›è¿‡å¿«ï¼Œæ˜“äºé™·å…¥å±€éƒ¨æœ€ä¼˜ï¼›äº¤å‰å’Œå˜å¼‚å¯èƒ½å¯¼è‡´è¿›å…¥ä¸å¯è¡Œçš„åŒºåŸŸ</li></ul><h5 id="é—ä¼ ç®—æ³•å®ç°"><a href="#é—ä¼ ç®—æ³•å®ç°" class="headerlink" title="é—ä¼ ç®—æ³•å®ç°"></a>é—ä¼ ç®—æ³•å®ç°</h5><p>ç§ç¾¤åˆå§‹åŒ–ï¼šé€šè¿‡éšæœºç”Ÿæˆçš„æ–¹å¼æ¥åˆ›é€ ä¸€ä¸ªç§ç¾¤ï¼Œé‡‡ç”¨äºŒè¿›åˆ¶å°†ä¸€ä¸ªæŸ“è‰²ä½“ç¼–ç ä¸ºåŸºå› å‹ï¼Œéšåç”¨è¿›åˆ¶è½¬åŒ–ï¼Œå°†äºŒè¿›åˆ¶çš„åŸºå› å‹è½¬åŒ–ä¸ºåè¿›åˆ¶çš„è¡¨ç°å‹ã€‚</p><p>é€‚åº”åº¦è®¡ç®—ï¼ˆç§ç¾¤è¯„ä¼°ï¼‰ï¼šå°†ç›®æ ‡å‡½æ•°å€¼ä½œä¸ºä¸ªä½“çš„é€‚åº”åº¦ã€‚</p><p>é€‰æ‹©ï¼ˆå¤åˆ¶ï¼‰æ“ä½œï¼šæ ¹æ®ç§ç¾¤ä¸­ä¸ªä½“çš„é€‚åº”åº¦å¤§å°ï¼Œé€šè¿‡è½®ç›˜èµŒç­‰æ–¹å¼å°†é€‚åº”åº¦é«˜çš„ä¸ªä½“ä»å½“å‰ç§ç¾¤ä¸­é€‰æ‹©å‡ºæ¥ã€‚å…¶ä¸­è½®ç›˜èµŒå³æ˜¯ä¸é€‚åº”åº¦æˆæ­£æ¯”çš„æ¦‚ç‡æ¥ç¡®å®šå„ä¸ªä¸ªä½“é—ä¼ åˆ°ä¸‹ä¸€ä»£ç¾¤ä½“ä¸­çš„æ•°é‡ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>é¦–å…ˆè®¡ç®—æ‰€æœ‰ä¸ªä½“çš„é€‚åº”åº¦æ€»å’Œ$\sum f_i$</li><li>å…¶æ¬¡è®¡ç®—å‡ºæ¯ä¸ªä¸ªä½“çš„ç›¸å¯¹é€‚åº”åº¦å¤§å°$\frac {f_i} {\sum_{f_i}}$</li><li>å†äº§ç”Ÿä¸€ä¸ª0åˆ°1ä¹‹é—´çš„éšæœºæ•°ï¼Œä¾æ®éšæœºæ•°å‡ºç°åœ¨ä¸Šè¿°å“ªä¸ªæ¦‚ç‡åŒºåŸŸæ¥ç¡®å®šå„ä¸ªä¸ªä½“è¢«é€‰ä¸­çš„æ¬¡æ•°</li></ul><p>äº¤å‰ï¼ˆäº¤é…ï¼‰è¿ç®—ï¼šè¯¥æ­¥éª¤æ˜¯é—ä¼ ç®—æ³•ä¸­äº§ç”Ÿæ–°çš„ä¸ªä½“çš„ä¸»è¦æ“ä½œè¿‡ç¨‹ï¼Œå®ƒç”¨ä¸€å®šçš„äº¤é…æ¦‚ç‡é˜ˆå€¼(pcï¼Œä¸€èˆ¬æ˜¯0.4åˆ°0.99)æ¥æ§åˆ¶æ˜¯å¦é‡‡å–å•ç‚¹äº¤å‰ï¼Œå¤šç‚¹äº¤å‰ç­‰æ–¹å¼ç”Ÿæˆæ–°çš„äº¤å‰ä¸ªä½“ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>å…ˆå¯¹ç¾¤ä½“éšæœºé…å¯¹</li><li>å†éšæœºè®¾å®šäº¤å‰ç‚¹çš„ä½ç½®</li><li>å†äº’æ¢é…å¯¹æŸ“è‰²ä½“é—´çš„éƒ¨åˆ†åŸºå› </li></ul><p>å˜å¼‚è¿ç®—ï¼šè¯¥æ­¥éª¤æ˜¯äº§ç”Ÿæ–°çš„ä¸ªä½“çš„å¦ä¸€ç§æ“ä½œã€‚ä¸€èˆ¬å…ˆéšæœºäº§ç”Ÿå˜å¼‚ç‚¹ï¼Œå†æ ¹æ®å˜å¼‚æ¦‚ç‡é˜ˆå€¼(pmï¼Œä¸€èˆ¬æ˜¯0.0001åˆ°0.1)å°†å˜å¼‚ç‚¹åŸæœ‰åŸºå› å–å</p><p>ç»ˆæ­¢åˆ¤æ–­ï¼šå¦‚æœæ»¡è¶³æ¡ä»¶ï¼ˆè¿­ä»£æ¬¡æ•°ï¼Œä¸€èˆ¬æ˜¯200~500ï¼‰åˆ™ç»ˆæ­¢ç®—æ³•ï¼Œå¦åˆ™è¿”å›é€‚åº”åº¦è®¡ç®—</p><p><strong>ä»£ç å®ç°</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-keyword">from</span> matplotlib <span class="hljs-keyword">import</span> cm<br><span class="hljs-keyword">from</span> mpl_toolkits.mplot3d <span class="hljs-keyword">import</span> Axes3D<br><br><span class="hljs-comment"># sample:è®¡ç®—F(x,y)åœ¨[-3,3]å’Œ[-3,3]é‡Œçš„æœ€å¤§å€¼</span><br><br><span class="hljs-comment"># åˆå§‹åŒ–</span><br>DNA_SIZE = <span class="hljs-number">24</span><br>POP_SIZE = <span class="hljs-number">200</span><br>CROSSOVER_RATE = <span class="hljs-number">0.8</span><br>MUTATION_RATE = <span class="hljs-number">0.005</span><br>N_GENERATIONS = <span class="hljs-number">50</span><br>X_BOUND = [-<span class="hljs-number">3</span>,<span class="hljs-number">3</span>]<br>Y_BOUND = [-<span class="hljs-number">3</span>,<span class="hljs-number">3</span>]<br><br><span class="hljs-comment"># ç›®æ ‡å‡½æ•°</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">F</span>(<span class="hljs-params">x,y</span>):<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">3</span>*(<span class="hljs-number">1</span>-x)**<span class="hljs-number">2</span>*np.exp(-(x**<span class="hljs-number">2</span>)-(y+<span class="hljs-number">1</span>)**<span class="hljs-number">2</span>)-<span class="hljs-number">10</span>*(x/<span class="hljs-number">5</span>- x**<span class="hljs-number">3</span> - y**<span class="hljs-number">5</span>)*np.exp(-x**<span class="hljs-number">2</span>-y**<span class="hljs-number">2</span>)-<span class="hljs-number">1</span>/<span class="hljs-number">3</span>**np.exp(-(x+<span class="hljs-number">1</span>)**<span class="hljs-number">2</span> - y**<span class="hljs-number">2</span>)<br><br><span class="hljs-comment"># é€‚åº”åº¦å‡½æ•°</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_fitness</span>(<span class="hljs-params">pop</span>):<br>    x,y = translateDNA(pop)<br>    pred = F(x,y)<br>    <span class="hljs-keyword">return</span> (pred - np.<span class="hljs-built_in">min</span>(pred)) + <span class="hljs-number">1e-3</span><br><br><span class="hljs-comment"># è§£ç å‡½æ•°</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">translateDNA</span>(<span class="hljs-params">pop</span>):<br>    x_pop = pop[:,<span class="hljs-number">1</span>::<span class="hljs-number">2</span>] <span class="hljs-comment"># å¥‡æ•°åˆ—</span><br>    y_pop = pop[:,::<span class="hljs-number">2</span>] <span class="hljs-comment"># å¶æ•°åˆ—</span><br>    x = x_pop.dot(<span class="hljs-number">2</span>**np.arange(DNA_SIZE)[::-<span class="hljs-number">1</span>])/<span class="hljs-built_in">float</span>(<span class="hljs-number">2</span>**DNA_SIZE-<span class="hljs-number">1</span>)*(X_BOUND[<span class="hljs-number">1</span>]-X_BOUND[<span class="hljs-number">0</span>])+X_BOUND[<span class="hljs-number">0</span>]<br>    y = y_pop.dot(<span class="hljs-number">2</span>**np.arange(DNA_SIZE)[::-<span class="hljs-number">1</span>])/<span class="hljs-built_in">float</span>(<span class="hljs-number">2</span>**DNA_SIZE-<span class="hljs-number">1</span>)*(Y_BOUND[<span class="hljs-number">1</span>]-Y_BOUND[<span class="hljs-number">0</span>])+Y_BOUND[<span class="hljs-number">0</span>]<br>    <span class="hljs-keyword">return</span> x,y<br><br><span class="hljs-comment"># äº¤å‰å˜å¼‚</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">crossover_and_mutation</span>(<span class="hljs-params">pop,CROSSOVER_RATE = <span class="hljs-number">0.8</span></span>):<br>    new_pop = []<br>    <span class="hljs-keyword">for</span> father <span class="hljs-keyword">in</span> pop:<br>        child = father<br>        <span class="hljs-keyword">if</span> np.random.rand() &lt; CROSSOVER_RATE:<br>            mother = pop[np.random.randint(POP_SIZE)]<br>            cross_points = np.random.randint(low=<span class="hljs-number">1</span>,high=DNA_SIZE*<span class="hljs-number">2</span>)<br>            child[cross_points:] = mother[cross_points:]<br>        mutation(child)<br>        new_pop.append(child)<br>    <span class="hljs-keyword">return</span> new_pop<br><br><span class="hljs-comment"># å˜å¼‚</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">mutation</span>(<span class="hljs-params">child,MUTATION_RATE=<span class="hljs-number">0.001</span></span>):<br>    <span class="hljs-keyword">if</span> np.random.rand() &lt; MUTATION_RATE:<br>        mutate_point = np.random.randint(<span class="hljs-number">0</span>,DNA_SIZE*<span class="hljs-number">2</span>)<br>        child[mutate_point] = child[mutate_point]^<span class="hljs-number">1</span><br><br><span class="hljs-comment"># é€‰æ‹©</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">select</span>(<span class="hljs-params">pop, fitness</span>):<br>    idx = np.random.choice(np.arange(POP_SIZE),size=POP_SIZE,replace=<span class="hljs-literal">True</span>,p=(fitness)/(fitness.<span class="hljs-built_in">sum</span>()))<br>    <span class="hljs-keyword">return</span> pop[idx]<br><br><span class="hljs-comment"># æ‰“å°ç»“æœ</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">print_info</span>(<span class="hljs-params">pop</span>):<br>    fitness = get_fitness(pop)<br>    max_fitness_index = np.argmax(fitness)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;max_fitness:&quot;</span>,fitness[max_fitness_index])<br>    x,y = translateDNA(pop)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æœ€ä¼˜çš„åŸºå› å‹ï¼š&quot;</span>,pop[max_fitness_index])<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;(x,y):&quot;</span>,(x[max_fitness_index],y[max_fitness_index]))<br><br><span class="hljs-comment"># å¯è§†åŒ–</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">plot_3d</span>(<span class="hljs-params">ax</span>):<br><br>    X = np.linspace(*X_BOUND, <span class="hljs-number">100</span>)<br>    Y = np.linspace(*Y_BOUND, <span class="hljs-number">100</span>)<br>    X,Y = np.meshgrid(X,Y)<br>    Z = F(X,Y)<br>    ax.plot_surface(X,Y,Z,rstride=<span class="hljs-number">1</span>,cstride=<span class="hljs-number">1</span>,cmap=cm.coolwarm)<br>    ax.set_zlim(-<span class="hljs-number">10</span>,<span class="hljs-number">10</span>)<br>    ax.set_xlabel(<span class="hljs-string">&#x27;x&#x27;</span>)<br>    ax.set_ylabel(<span class="hljs-string">&#x27;y&#x27;</span>)<br>    ax.set_zlabel(<span class="hljs-string">&#x27;z&#x27;</span>)<br>    plt.pause(<span class="hljs-number">3</span>)<br>    plt.show()<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">GAs</span>():<br><br>    fig = plt.figure()<br>    ax = Axes3D(fig)<br>    plt.ion()<br>    plot_3d(ax)<br><br>    <span class="hljs-comment"># éšæœºäº§ç”Ÿåˆå§‹ç§ç¾¤</span><br>    pop = np.random.randint(<span class="hljs-number">2</span>,size=(POP_SIZE,DNA_SIZE*<span class="hljs-number">2</span>))<br><br>    <span class="hljs-comment"># è¿­ä»£Nä»£</span><br>    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N_GENERATIONS):<br>        x,y = translateDNA(pop)<br><br>        <span class="hljs-comment"># å¯è§†åŒ–</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;sca&#x27;</span> <span class="hljs-keyword">in</span> <span class="hljs-built_in">locals</span>():<br>            sca.remove()<br>        sca = ax.scatter(x,y,F(x,y),c=<span class="hljs-string">&#x27;black&#x27;</span>,marker=<span class="hljs-string">&#x27;o&#x27;</span>);plt.show();plt.pause(<span class="hljs-number">0.1</span>)<br><br>        pop = np.array(crossover_and_mutation(pop,CROSSOVER_RATE))<br>        fitness = get_fitness(pop)<br>        pop = select(pop,fitness)<br><br>    print_info(pop)<br>    plt.ioff()<br>    plot_3d(ax)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    GAs()<br></code></pre></td></tr></table></figure><h4 id="æ¨¡æ‹Ÿé€€ç«ç®—æ³•"><a href="#æ¨¡æ‹Ÿé€€ç«ç®—æ³•" class="headerlink" title="æ¨¡æ‹Ÿé€€ç«ç®—æ³•"></a>æ¨¡æ‹Ÿé€€ç«ç®—æ³•</h4><ul><li>æ¨¡æ‹Ÿé€€ç«ç®—æ³•é‡‡ç”¨Monte Carloæ–¹æ³•ï¼Œæ¨¡ä»¿é‡‘å±é€€ç«æ—¶çš„åŠ çƒ­-å†·å´è¿‡ç¨‹æ¥æ±‚è§£æœ€å¤§è§„æ¨¡ç»„åˆä¼˜åŒ–é—®é¢˜</li><li>ä¸é—ä¼ ç®—æ³•ç›¸ä¼¼ï¼Œé‡‡ç”¨éšæœºæ–¹å¼æ¢ç´¢è§£ç©ºé—´ï¼Œå¯ç”¨äºéè¿ç»­ã€ä¸å¯å¾®ã€éå‡¸é—®é¢˜</li><li>ä¸é—ä¼ ç®—æ³•ä¸åŒï¼Œæ¨¡æ‹Ÿé€€ç«åœ¨ç†è®ºä¸Šå…·æœ‰å¯ä»¥ä¿è¯çš„æ”¶æ•›æ€§</li><li>é—ä¼ ç®—æ³•ç§ç¾¤ä¸­çš„æ¯ä¸€ä¸ªç‚¹å…·æœ‰ç‹¬ç«‹æ€§ï¼Œå¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼›æ¨¡æ‹Ÿé€€ç«ç®—æ³•ä»å•ç‚¹å‡ºå‘ï¼Œåœ¨å­˜åœ¨å¾ˆå¤šå±€éƒ¨æœ€ä¼˜è§£çš„æƒ…å†µä¸‹å¯ä»¥è·³å‡ºå±€éƒ¨å¯»æ‰¾å…¨å±€æœ€ä¼˜</li></ul><p> <strong>é€€ç«</strong></p><ul><li><p>å›ºä½“ææ–™åŠ çƒ­åˆ°è¶…è¿‡ç†”ç‚¹ï¼Œç„¶åå†·å´å›å›ºä½“çŠ¶æ€</p></li><li><p>æœ€ç»ˆçš„ç»“æ„å–å†³äºå†·å´çš„æ–¹å¼</p><ul><li>ç¼“æ…¢å†·å´â€“å¤§æ™¶ä½“ï¼ˆèƒ½é‡ä½ï¼‰</li><li>å¿«é€Ÿå†·å´â€“ç¼ºé™·ï¼ˆèƒ½é‡é«˜ï¼‰</li></ul></li><li><p>Metropolisç®—æ³•æ¨¡æ‹Ÿç³»ç»Ÿåœ¨å†·å´è¿‡ç¨‹ä¸­èƒ½é‡å˜åŒ–ï¼Œç³»ç»Ÿä¼šæœ€ç»ˆæ”¶æ•›åˆ°æŸç§èƒ½é‡çš„â€œå†»ç»“â€çŠ¶æ€</p></li><li><p>æ ¹æ®çƒ­åŠ›å­¦ï¼šåœ¨æ¸©åº¦Tæ—¶ï¼Œèƒ½é‡å¢åŠ $\delta E$çš„æ¦‚ç‡ä¸ºï¼š$P(\triangle E) &#x3D; e^{-\frac {\delta E} {kT}}$</p></li></ul><p><strong>æ¨¡æ‹Ÿé€€ç«ç®—æ³•å®æ–½</strong></p><ul><li>ä¸ä¸€èˆ¬çš„çˆ¬å±±æ³•ç›¸ä¼¼ï¼ŒåŒºåˆ«åœ¨äºä¸æ˜¯æ¥å—æœ€ä½³ç§»åŠ¨ï¼Œè€Œæ˜¯æ¥å—ä¸€ä¸ªéšæœºç§»åŠ¨</li><li>å¦‚æœç§»åŠ¨æ”¹è¿›äº†ç»“æœï¼Œåˆ™æ¥å—ï¼›å¦åˆ™ç®—æ³•ä»¥ä¸€ä¸ªå°äº1çš„æ¦‚ç‡é‡‡å–è¿™ç§ç§»åŠ¨ï¼ˆMetropolisåˆ¤æ®ï¼‰</li><li>æ¥å—æ¦‚ç‡ä¸ç§»åŠ¨ä½¿è§£å˜åçš„ç¨‹åº¦$\triangle E$æœ‰å…³ï¼Œä¸å…¶æŒ‡æ•°æˆåæ¯”ï¼š$Pr(\text{accepting uphill move}) \sim 1-e^{\frac {\triangle E} {kT}}$</li><li>å‚æ•°Tè¡¨ç¤ºé€€ç«æ—¶çš„æ¸©åº¦ï¼ŒTè¶Šå¤§ï¼Œæ¥å—çš„æ¦‚ç‡è¶Šå¤§ï¼›kå®è´¨æ˜¯Boltzmannå¸¸æ•°ã€‚é€‰æ‹©å‚æ•°Té€æ­¥ä¸‹é™ï¼Œ$T(k+1)&#x3D;\alpha T(k), \alpha &lt; 1$</li></ul><p><strong>é€€ç«è¿‡ç¨‹</strong></p><ul><li>å‡èšæ€ç‰©ç†ä¸­ï¼Œå›ºä½“æ¶²åŒ–æ—¶åœ¨åŠ çƒ­åéœ€è¦å†·å´ï¼Œä½¿ç²’å­åœ¨ä½èƒ½é‡çŠ¶æ€ä¸‹é‡æ–°ç»„ç»‡ä¸ºæ™¶æ ¼å½¢å¼</li><li>åœ¨å¯»ä¼˜è¿‡ç¨‹ä¸­ï¼Œå…è®¸å¶å‘çš„ä¸Šå‡ï¼Œé€ƒè„±å±€éƒ¨æœ€ä¼˜çš„é™·é˜±</li></ul><p><img src="/blog/2022/09/01/%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/2022-05-07_163131.png" alt="2022-05-07_163131"></p><p><strong>æ¨¡æ‹Ÿé€€ç«è¿‡ç¨‹</strong></p><ul><li>è®¾ç½®åˆå§‹æ¸©åº¦</li><li>é‡å¤ä¸‹åˆ—æ­¥éª¤<ol><li>æŒ‰é¢„å®šæ¬¡æ•°æ‰§è¡Œ<ul><li>ç”Ÿæˆä¸€ä¸ªæ‰°åŠ¨</li><li>å¦‚æœèƒ½é‡ä¸‹é™ï¼Œæ¥å—æ–°çš„çŠ¶æ€ï¼›å¦åˆ™ä»¥$P(\triangle E)$æ¥å—æ–°çš„æ¦‚ç‡çŠ¶æ€</li><li>é™ä½æ¸©åº¦</li></ul></li><li>ç›´åˆ°å†»ç»“</li></ol></li></ul><p><strong>åˆ†æ</strong></p><ul><li>åœ¨é«˜æ¸©ä¸‹ï¼Œæ¥å—æ›´å·®æ­¥éª¤çš„æ¦‚ç‡æ›´æ”¹ã€‚å¦‚æœ$T&#x3D;\infin$ï¼Œæ‰€æœ‰åŠ¨ä½œå‡å¯æ¥å—ï¼Œå¯¹åº”äºéšæœºå±€éƒ¨è¡Œèµ°</li><li>åœ¨ä½æ¸©ä¸‹ï¼Œæ¥å—æ›´å·®æ­¥éª¤çš„æ¦‚ç‡é™ä½ã€‚å¦‚æœ$T&#x3D;0$ï¼Œä¸æ¥å—æ›´å·®çš„ç§»åŠ¨ï¼Œæœç´¢ç­‰åŒäºå±€éƒ¨æœç´¢</li><li>æ¥å—è§£çš„è´¨é‡å¤§å¹…åº¦é€€åŒ–çš„æ¦‚ç‡å‘ˆæŒ‡æ•°ä¸‹é™ï¼Œè¶‹è¿‘äº0</li><li>æ¸©åº¦å¿…é¡»è¶³å¤Ÿé«˜æ‰å…è®¸ç§»åŠ¨åˆ°å‡ ä¹æ‰€æœ‰é‚»è¿‘çŠ¶æ€</li></ul><p><strong>åˆ†æ</strong></p><ul><li>å¹³ç¨³åˆ†å¸ƒï¼ˆç»å°”å…¹æ›¼ï¼‰ï¼š$P(x) âˆ e^{\frac {E(x)} T}$</li><li>å¦‚æœTä¸‹é™çš„è¶³å¤Ÿæ…¢ï¼Œå°±ä¼šæ”¶æ•›åˆ°æœ€ä¼˜çŠ¶æ€</li><li>è€ƒè™‘ä¸¤ä¸ªç›¸é‚»çŠ¶æ€x,yï¼Œ$E(y) &lt; E(x)$</li><li>å‡è®¾xâ†’yå’Œyâ†’xä¸”å‡ºåº¦D(x)&#x3D;D(y)&#x3D;D</li><li>è®¾P(x),P(y)ä¸ºTç‚¹çš„å‡è¡¡å æœ‰æ¦‚ç‡ï¼ŒP(xâ†’y)æ˜¯çŠ¶æ€xè·ƒè¿åˆ°çŠ¶æ€yçš„æ¦‚ç‡</li><li>ä¸ºäº†é¿å¼€å±€éƒ¨æœ€ä¼˜ï¼Œéœ€è¦çš„çˆ¬å¡æ­¥æ•°è¶Šå¤šï¼Œè¶Šä¸å¯èƒ½è¿ç»­çˆ¬å¡</li><li>â€œè¶³å¤Ÿæ…¢â€ä¹Ÿè®¸æ„å‘³ç€æŒ‡æ•°çº§çš„æ…¢</li></ul><h5 id="æ¨¡æ‹Ÿé€€ç«å®ç°"><a href="#æ¨¡æ‹Ÿé€€ç«å®ç°" class="headerlink" title="æ¨¡æ‹Ÿé€€ç«å®ç°"></a>æ¨¡æ‹Ÿé€€ç«å®ç°</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-keyword">import</span> matplotlib.animation <span class="hljs-keyword">as</span> animation<br><span class="hljs-keyword">import</span> math<br><span class="hljs-keyword">import</span> random<br><span class="hljs-keyword">from</span> mpl_toolkits.mplot3d <span class="hljs-keyword">import</span> Axes3D<br><br><span class="hljs-comment"># sample: æ±‚è§£ä¸€å…ƒå‡½æ•°y=x+10sin(5x)+7cos(4x)çš„æœ€å¤§å€¼</span><br><br><span class="hljs-comment"># åˆ¤æ–­å‡½æ•°</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Judge</span>(<span class="hljs-params">deltaE,T</span>):<br>    <span class="hljs-keyword">if</span> deltaE &gt; <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-comment"># probabilityä¼šå˜å¤§</span><br>        probability = math.exp(deltaE/T)<br>        <span class="hljs-comment"># random.random() ç”¨äºç”Ÿæˆä¸€ä¸ª0åˆ°1çš„éšæœºæµ®ç‚¹æ•°</span><br>        <span class="hljs-keyword">if</span> probability &gt; random.random():<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br><br><span class="hljs-comment"># ä¸ºå½“å‰è§£æ·»åŠ éšæœºæ‰°åŠ¨</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Disturbance</span>(<span class="hljs-params">low,high,x_old</span>):<br>    <span class="hljs-keyword">if</span> random.random() &gt; <span class="hljs-number">0.5</span>:<br>        x_new = x_old + (high-x_old)*random.random()<br>    <span class="hljs-keyword">else</span>:<br>        x_new = x_old - (x_old-low)*random.random()<br>    <span class="hljs-keyword">return</span> x_new<br><br><span class="hljs-comment"># ä¼˜åŒ–ç›®æ ‡å‡½æ•°</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Func</span>(<span class="hljs-params">x</span>):<br>    y = x+<span class="hljs-number">10</span>*math.sin(<span class="hljs-number">5</span>*x)+<span class="hljs-number">7</span>*math.cos(<span class="hljs-number">4</span>*x)<br>    <span class="hljs-keyword">return</span> y<br><br><span class="hljs-comment"># é€€ç«è¿‡ç¨‹</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">SA</span>(<span class="hljs-params">low,high,T,T_min,alpha,counter</span>):<br>    c = <span class="hljs-number">0</span><br>    x_old = low+(high-low)*random.random()<br>    x_new = x_old<br>    value_old = Func(x_old)<br>    value_new = Func(x_new)<br>    record_x = []<br>    record_y = []<br>    <span class="hljs-keyword">while</span> T &gt; T_min <span class="hljs-keyword">and</span> c &lt; counter:<br>        x_new = Disturbance(low, high, x_old)<br>        value_new = Func(x_new)<br>        deltaE = value_new - value_old<br>        <span class="hljs-comment"># æ±‚æœ€å¤§å€¼ï¼šdeltaE&gt;0æ›´ä¼˜ deltaE&lt;0æ›´åŠ£ </span><br>        <span class="hljs-keyword">if</span> Judge(deltaE,T) == <span class="hljs-number">1</span>:<br>            value_old = value_new<br>            record_x.append(x_new)<br>            record_y.append(value_new)<br>            x_old = x_new<br>        <span class="hljs-keyword">if</span> deltaE &gt; <span class="hljs-number">0</span>:<br>            T = T*alpha<br>        <span class="hljs-keyword">else</span>:<br>            counter += <span class="hljs-number">1</span><br>    <br>    <span class="hljs-comment"># å¯è§†åŒ–</span><br>    <span class="hljs-comment"># ç¬¬ä¸€ä¸ªå›¾ï¼šæ˜¾ç¤ºx,yå„è‡ªçš„å–å€¼</span><br>    length = <span class="hljs-built_in">len</span>(record_x)<br>    index = [i+<span class="hljs-number">1</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(length)]<br>    plt.plot(index,record_y)<br>    plt.plot(index,record_x)<br>    <br>    <span class="hljs-comment"># ç¬¬äºŒä¸ªå›¾ï¼šæ˜¾ç¤ºx,yæ›²çº¿</span><br>    x = np.linspace(<span class="hljs-number">0</span>,<span class="hljs-number">10</span>,<span class="hljs-number">10000</span>)<br>    y = x+<span class="hljs-number">10</span>*np.sin(<span class="hljs-number">5</span>*x)+<span class="hljs-number">7</span>*np.cos(<span class="hljs-number">4</span>*x)<br>    plt.plot(x,y)<br><br>    <span class="hljs-comment"># ç»˜åˆ¶åŠ¨ç”»</span><br>    fig, ax = plt.subplots()<br>    l = ax.plot(x,y)<br>    dot, = ax.plot([],[],<span class="hljs-string">&#x27;ro&#x27;</span>)<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">init</span>():<br>        ax.set_xlim(<span class="hljs-number">0</span>,<span class="hljs-number">10</span>)<br>        ax.set_ylim(-<span class="hljs-number">16</span>,<span class="hljs-number">25</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">gen_dot</span>():<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> index:<br>            newdot = [record_x[i-<span class="hljs-number">1</span>],record_y[i-<span class="hljs-number">1</span>]]<br>            <span class="hljs-keyword">yield</span> newdot<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">update_dot</span>(<span class="hljs-params">newd</span>):<br>        dot.set_data(newd[<span class="hljs-number">0</span>],newd[<span class="hljs-number">1</span>])<br>        <span class="hljs-keyword">return</span> dot,<br><br>    ani = animation.FuncAnimation(<br>        fig, update_dot, frames = gen_dot, repeat = <span class="hljs-literal">False</span>, <br>        interval = <span class="hljs-number">10</span>, init_func = init)<br><br>    plt.show()<br><br>    <br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    SA(<span class="hljs-number">0</span>,<span class="hljs-number">9</span>,<span class="hljs-number">1e5</span>,<span class="hljs-number">1e-3</span>,<span class="hljs-number">0.98</span>,<span class="hljs-number">1000</span>)<br></code></pre></td></tr></table></figure><p><strong>ç»ƒä¹ </strong></p><ul><li>å‡½æ•°å½¢å¼ï¼š$f(x)&#x3D;x^3-60x^2+900x+100$</li><li>ç¼–ç xï¼š5ä½äºŒè¿›åˆ¶æ•´æ•°</li><li>é‚»åŸŸï¼šéšæœºåè½¬æŸä¸€ä½çš„å€¼</li><li>åˆå§‹å€¼ï¼š$x_0&#x3D;0x10101,T_0&#x3D;800$</li><li>å†·å´æ–¹æ¡ˆï¼š$T_k&#x3D;0.9T_{k-1}$</li></ul><h3 id="10ã€åˆ†æ²»ç®—æ³•å›é¡¾-x2F-çŸ©é˜µè¿ç®—-x2F-æµç®—æ³•-x2F-åœ¨çº¿ç®—æ³•"><a href="#10ã€åˆ†æ²»ç®—æ³•å›é¡¾-x2F-çŸ©é˜µè¿ç®—-x2F-æµç®—æ³•-x2F-åœ¨çº¿ç®—æ³•" class="headerlink" title="10ã€åˆ†æ²»ç®—æ³•å›é¡¾&#x2F;çŸ©é˜µè¿ç®—&#x2F;æµç®—æ³•&#x2F;åœ¨çº¿ç®—æ³•"></a>10ã€åˆ†æ²»ç®—æ³•å›é¡¾&#x2F;çŸ©é˜µè¿ç®—&#x2F;æµç®—æ³•&#x2F;åœ¨çº¿ç®—æ³•</h3><h4 id="å¤§ä½œä¸š"><a href="#å¤§ä½œä¸š" class="headerlink" title="å¤§ä½œä¸š"></a>å¤§ä½œä¸š</h4><p>8min PPTï¼šé—®é¢˜çš„å®šä¹‰ã€ç®—æ³•ã€åˆ†æã€å®ç°åŠä¸¾ä¾‹</p><p> æ—¶é—´ç©ºé—´å¤æ‚åº¦ ä¸è¶³åŠæ”¹è¿›çš„æ€è·¯</p><p>å‘¨å…­å®éªŒè¯¾æ¼”ç¤º</p><p>å¯é€‰ä¸»é¢˜ï¼šå¯»æ‰¾æœ€è¿‘é‚»ç‚¹é—®é¢˜ã€å¯»æ‰¾å‡¸åŒ…é—®é¢˜ã€æœ€é•¿å…¬å…±å­åºåˆ—é—®é¢˜ã€æœ€ä¼˜äºŒå‰æœç´¢æ ‘ã€äººå‘˜åˆ†é…é—®é¢˜ã€æ—…è¡Œå•†é—®é¢˜(TSP)ã€A*ç®—æ³•ã€ç´ æ•°æ£€éªŒé—®é¢˜ã€å­é›†å’Œé—®é¢˜è¿‘ä¼¼æ±‚è§£ã€é¡¶ç‚¹è¦†ç›–é—®é¢˜</p><h4 id="åˆ†æ²»ç®—æ³•å›é¡¾"><a href="#åˆ†æ²»ç®—æ³•å›é¡¾" class="headerlink" title="åˆ†æ²»ç®—æ³•å›é¡¾"></a>åˆ†æ²»ç®—æ³•å›é¡¾</h4><p>çŸ©é˜µè¿ç®—</p><h5 id="Strassenç®—æ³•"><a href="#Strassenç®—æ³•" class="headerlink" title="Strassenç®—æ³•"></a>Strassenç®—æ³•</h5><h4 id="æµç®—æ³•"><a href="#æµç®—æ³•" class="headerlink" title="æµç®—æ³•"></a>æµç®—æ³•</h4><h3 id="11ã€"><a href="#11ã€" class="headerlink" title="11ã€"></a>11ã€</h3><h3 id="12ã€å®éªŒè¯¾ï¼ˆpreï¼‰"><a href="#12ã€å®éªŒè¯¾ï¼ˆpreï¼‰" class="headerlink" title="12ã€å®éªŒè¯¾ï¼ˆpreï¼‰"></a>12ã€å®éªŒè¯¾ï¼ˆpreï¼‰</h3><h4 id="x3D-x3D-å¯»æ‰¾æœ€è¿‘é‚»ç‚¹é—®é¢˜-x3D-x3D"><a href="#x3D-x3D-å¯»æ‰¾æœ€è¿‘é‚»ç‚¹é—®é¢˜-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;å¯»æ‰¾æœ€è¿‘é‚»ç‚¹é—®é¢˜&#x3D;&#x3D;"></a>&#x3D;&#x3D;å¯»æ‰¾æœ€è¿‘é‚»ç‚¹é—®é¢˜&#x3D;&#x3D;</h4><h4 id="x3D-x3D-å¯»æ‰¾å‡¸åŒ…é—®é¢˜-x3D-x3D"><a href="#x3D-x3D-å¯»æ‰¾å‡¸åŒ…é—®é¢˜-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;å¯»æ‰¾å‡¸åŒ…é—®é¢˜&#x3D;&#x3D;"></a>&#x3D;&#x3D;å¯»æ‰¾å‡¸åŒ…é—®é¢˜&#x3D;&#x3D;</h4><h4 id="x3D-x3D-æœ€é•¿å…¬å…±å­åºåˆ—é—®é¢˜-x3D-x3D"><a href="#x3D-x3D-æœ€é•¿å…¬å…±å­åºåˆ—é—®é¢˜-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;æœ€é•¿å…¬å…±å­åºåˆ—é—®é¢˜&#x3D;&#x3D;"></a>&#x3D;&#x3D;æœ€é•¿å…¬å…±å­åºåˆ—é—®é¢˜&#x3D;&#x3D;</h4><h4 id="x3D-x3D-æœ€ä¼˜äºŒå‰æœç´¢æ ‘-x3D-x3D"><a href="#x3D-x3D-æœ€ä¼˜äºŒå‰æœç´¢æ ‘-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;æœ€ä¼˜äºŒå‰æœç´¢æ ‘&#x3D;&#x3D;"></a>&#x3D;&#x3D;æœ€ä¼˜äºŒå‰æœç´¢æ ‘&#x3D;&#x3D;</h4><h4 id="x3D-x3D-äººå‘˜åˆ†é…é—®é¢˜-x3D-x3D"><a href="#x3D-x3D-äººå‘˜åˆ†é…é—®é¢˜-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;äººå‘˜åˆ†é…é—®é¢˜&#x3D;&#x3D;"></a>&#x3D;&#x3D;äººå‘˜åˆ†é…é—®é¢˜&#x3D;&#x3D;</h4><h4 id="x3D-x3D-æ—…è¡Œå•†é—®é¢˜ï¼ˆTSPï¼‰-x3D-x3D"><a href="#x3D-x3D-æ—…è¡Œå•†é—®é¢˜ï¼ˆTSPï¼‰-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;æ—…è¡Œå•†é—®é¢˜ï¼ˆTSPï¼‰&#x3D;&#x3D;"></a>&#x3D;&#x3D;æ—…è¡Œå•†é—®é¢˜ï¼ˆTSPï¼‰&#x3D;&#x3D;</h4><h4 id="x3D-x3D-A-ç®—æ³•-x3D-x3D"><a href="#x3D-x3D-A-ç®—æ³•-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;A*ç®—æ³•&#x3D;&#x3D;"></a>&#x3D;&#x3D;A*ç®—æ³•&#x3D;&#x3D;</h4><h4 id="x3D-x3D-ç´ æ•°æ£€éªŒé—®é¢˜-x3D-x3D"><a href="#x3D-x3D-ç´ æ•°æ£€éªŒé—®é¢˜-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;ç´ æ•°æ£€éªŒé—®é¢˜&#x3D;&#x3D;"></a>&#x3D;&#x3D;ç´ æ•°æ£€éªŒé—®é¢˜&#x3D;&#x3D;</h4><h4 id="x3D-x3D-å­é›†å’Œé—®é¢˜è¿‘ä¼¼æ±‚è§£-x3D-x3D"><a href="#x3D-x3D-å­é›†å’Œé—®é¢˜è¿‘ä¼¼æ±‚è§£-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;å­é›†å’Œé—®é¢˜è¿‘ä¼¼æ±‚è§£&#x3D;&#x3D;"></a>&#x3D;&#x3D;å­é›†å’Œé—®é¢˜è¿‘ä¼¼æ±‚è§£&#x3D;&#x3D;</h4><h4 id="x3D-x3D-é¡¶ç‚¹è¦†ç›–é—®é¢˜-x3D-x3D"><a href="#x3D-x3D-é¡¶ç‚¹è¦†ç›–é—®é¢˜-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;é¡¶ç‚¹è¦†ç›–é—®é¢˜&#x3D;&#x3D;"></a>&#x3D;&#x3D;é¡¶ç‚¹è¦†ç›–é—®é¢˜&#x3D;&#x3D;</h4>]]></content>
    
    
    <categories>
      
      <category>ç®—æ³•</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
      <tag>åŠ¨æ€è§„åˆ’</tag>
      
      <tag>éšæœºåŒ–ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å®è®­æ€»ç»“</title>
    <link href="/blog/2022/09/01/%E5%AE%9E%E8%AE%AD%E6%80%BB%E7%BB%93/"/>
    <url>/blog/2022/09/01/%E5%AE%9E%E8%AE%AD%E6%80%BB%E7%BB%93/</url>
    
    <content type="html"><![CDATA[<h1 id="å®è®­æ€»ç»“"><a href="#å®è®­æ€»ç»“" class="headerlink" title="å®è®­æ€»ç»“"></a>å®è®­æ€»ç»“</h1><h2 id="æ–°å»ºæ•°æ®åº“"><a href="#æ–°å»ºæ•°æ®åº“" class="headerlink" title="æ–°å»ºæ•°æ®åº“"></a>æ–°å»ºæ•°æ®åº“</h2><p>æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯mysql+Navicat Premium15ï¼Œå¼€å‘çš„æ—¶å€™ç”¨æœ¬åœ°çš„è¿æ¥ï¼ˆå› ä¸ºå¼€å‘æ—¶ä¸ºäº†æµ‹è¯•åŠŸèƒ½ä¼šéœ€è¦ä¸€äº›æ•°æ®ï¼Œä¹Ÿäº§ç”Ÿå¾ˆå¤šæ•°æ®ï¼Œå¦‚æœè¦åŒæ—¶ä¿è¯æ•°æ®åº“å®Œæ•´æ€§ä¼šé™ä½æ•ˆç‡ï¼‰ï¼Œæœ€ç»ˆæ¼”ç¤ºæ˜¯ç”¨çš„æ˜¯ç™½å«–æ¥çš„äº‘æœåŠ¡å™¨ï¼Œæ–¹ä¾¿å›¢é˜Ÿä¸­çš„å…¶ä»–æˆå‘˜è¿›è¡Œç®¡ç†ç»´æŠ¤ï¼ŒåŒæ—¶é…åˆé¡¹ç›®åŠŸèƒ½çœ‹å®é™…æ•ˆæœã€‚</p><p>æˆ‘ä»¬æ€»å…±å»ºäº†13å¼ è¡¨ï¼Œschedule_infoè¿™å¼ è¡¨å› ä¸ºæ—¶é—´ä¸å¤Ÿäº†ï¼Œæ•´ä¸ªæ—¥ç¨‹åŠŸèƒ½è¢«æ”¾å¼ƒï¼Œæ‰€ä»¥å¹¶æ²¡æœ‰ç”¨åˆ°ï¼Œå®é™…ç”¨åˆ°çš„æ˜¯13å¼ è¡¨ï¼Œå·²è½¬å‚¨ä¸ºxbb_db.sqlï¼Œåœ¨é¡¹ç›®è¿‡ç¨‹ä¸­èµ°è¿‡çš„ä¸€äº›å…³äºæ•°æ®åº“çš„å°å‘å¦‚ä¸‹ï¼š</p><p><strong>1ã€è¡¨åå°½é‡ç®€å•ã€‚</strong></p><p>æœ€å¼€å§‹å»ºè¡¨çš„æ—¶å€™æ¯å¼ è¡¨éƒ½å¸¦ä¸ªâ€œ_â€ï¼Œdoctor_infoã€nurse_infoç­‰ç­‰ï¼Œäº‹å®è¯æ˜å¤šä½™çš„â€œ__infoâ€åªæ˜¯åœ¨æŠ˜ç£¨è‡ªå·±ï¼Œè¿˜æœ‰ä¸€ä¸ªè¡¨åå­—æ˜¯medicineinfo_baseï¼ŒåæœŸå†™ç›¸å…³å†…å®¹çš„æ—¶å€™éå¸¸æŠ˜ç£¨ã€‚</p><p><strong>2ã€&#x3D;&#x3D;æ•°æ®åº“çš„å­—æ®µåå’Œå®ä½“ç±»çš„å±æ€§åä¸å¯¹åº”&#x3D;&#x3D;</strong></p><p><strong>ä¾‹ï¼š</strong></p><p><code>æ•°æ®åº“å­—æ®µï¼šidnamepwd </code></p><p><code>å®ä½“ç±»å±æ€§ï¼šidnamepassword</code></p><p>æŸ¥è¯¢ç»“æœï¼špasswordæŸ¥è¯¢ä¸ºnull</p><p><strong>åŸå› ï¼š</strong></p><p>sqlè¯­å¥ï¼š<code>select * from mybatis.user where id = #&#123;id&#125; </code></p><p>å…¶å®ä¸ºï¼š<code>select id,name,pwd from mybatis.user where id = #&#123;id&#125; </code></p><p>è€Œè¾“å‡ºçš„userçš„passwordå±æ€§æ²¡æœ‰èµ‹å€¼ï¼Œæ‰€ä»¥ä¸ºnull</p><p><strong>è§£å†³æ–¹æ³•ï¼š</strong></p><p>æ³•ä¸€ï¼šèµ·åˆ«å</p><p><code>select id,name,pwd as password from mybatis.user where id = #&#123;id&#125;</code></p><p>æ³•äºŒï¼šä½¿ç”¨resultMapç»“æœé›†æ˜ å°„</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userMap&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;user&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--propertyå®ä½“ç±»ä¸­çš„å±æ€§,columnæ•°æ®åº“ä¸­çš„å­—æ®µ--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;pwd&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserById&quot;</span>  <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;userMap&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;int&quot;</span>&gt;</span><br>    select * from mybatis.user where id = #&#123;id&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>id æ ‡ç­¾ï¼šç”¨äºæŒ‡å®šä¸»é”®å­—æ®µ<br>result æ ‡ç­¾ï¼šç”¨äºæŒ‡å®šéä¸»é”®å­—æ®µ<br>column å±æ€§ï¼šç”¨äºæŒ‡å®šæ•°æ®åº“åˆ—å<br>property å±æ€§ï¼šç”¨äºæŒ‡å®šå®ä½“ç±»å±æ€§åç§°</p></blockquote><p>æ³•ä¸‰ï¼šMybatis-Plusåœ¨å®ä½“ç±»å±æ€§å’Œæ•°æ®åº“è¡¨å­—æ®µæ˜ å°„æ—¶ï¼Œä¼šè‡ªåŠ¨å°†æ•°æ®åº“è¡¨å­—æ®µåä¸­çš„ä¸‹åˆ’çº¿å»æ‰ï¼Œå¹¶ä¸”ä¸å—å­—æ¯å¤§å°å†™çš„å½±å“ã€‚</p><p>åœ¨application.ymlé…ç½®æ–‡ä»¶ä¸­æ·»åŠ Mybatisçš„é…ç½®</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">mybatis</span>:<span class="hljs-string"></span><br>  <span class="hljs-attr">type-aliases-package</span>: <span class="hljs-string">com.mybatisplus.pojo  # å®ä½“ç±»åŒ…åˆ«åä½œç”¨:å¯ä»¥ç”¨å®ä½“ç±»åç§°ä»£æ›¿å®ä½“ç±»çš„ç›¸å¯¹è·¯å¾„</span><br>  <span class="hljs-attr">configuration</span>:<span class="hljs-string"></span><br>    <span class="hljs-attr">map-underscore-to-camel-case</span>: <span class="hljs-string">true # é©¼å³°å‘½å</span><br></code></pre></td></tr></table></figure><p>é€šè¿‡é©¼å³°å‘½å,å°†æ•°æ®åº“è¡¨å­—æ®µåä¸‹åˆ’çº¿å»æ‰ï¼Œç„¶åå»æ˜ å°„å®ä½“ç±»å±æ€§åï¼ŒåŒæ ·ä¸è€ƒè™‘å­—æ¯å¤§å°å†™é—®é¢˜,è¿™æ ·å°±è¾¾åˆ°äº†å’ŒMybatis-Plusä¸€æ ·çš„æ•ˆæœã€‚</p><p>ï¼ˆä½†ä¾ç„¶å¯èƒ½æœ‰å€¼æ— æ³•è¢«æ˜ å°„åˆ°ï¼‰</p><p>æ³•å››ï¼šåœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­å¯ç”¨ä¸‹åˆ’çº¿ä¸é©¼å³°å¼å‘½åè§„åˆ™çš„æ˜ å°„</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>  <br>     <span class="hljs-tag">&lt;<span class="hljs-name">settings</span>&gt;</span>  <br>          <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;true&quot;</span> /&gt;</span>  <br>     <span class="hljs-tag">&lt;/<span class="hljs-name">settings</span>&gt;</span>  <br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ä»¥ä¸Šæ˜¯ä»ç½‘ä¸Šæœåˆ°çš„è§£å†³åŠæ³•ï¼Œæˆ‘ä»¬è¯•è¿‡æ”¹é…ç½®ï¼Œä½†è¿˜æ˜¯æœ‰é—®é¢˜ï¼Œæ‰€ä»¥ç”¨äº†resultMapï¼Œä½†å…¶å®å¾ˆéº»çƒ¦ï¼Œæ¯ä¸ªå­—æ®µéƒ½è¦å†™ï¼Œæ‰€ä»¥åæ¥ç›´æ¥æŠŠæ•°æ®åº“çš„å­—æ®µåæ”¹æˆäº†è·Ÿå®ä½“ç±»å±æ€§å¯¹åº”çš„é©¼å³°ã€‚</p><p><strong>3ã€ä½¿ç”¨ç®€å†™</strong></p><p>åœ¨application.propertiesä¸­æ·»åŠ <code>mybatis.type-aliases-package=com.xbb.entity</code>åï¼Œæˆ‘ä»¬åœ¨mapper.xmlæ˜ å°„æ–‡ä»¶ä¸­ä¸éœ€è¦å†™å‡ºå®ä½“ç±»çš„å®Œæ•´è·¯å¾„ï¼Œåªéœ€è¦å†™å‡ºç±»åå³å¯ã€‚</p><p>ä¾‹ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-operator">&lt;</span><span class="hljs-keyword">select</span> id<span class="hljs-operator">=</span>&quot;selectByDepartment&quot; resultType<span class="hljs-operator">=</span>&quot;doctor&quot;<span class="hljs-operator">&gt;</span><br>    <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> doctor_info <span class="hljs-keyword">where</span> department <span class="hljs-operator">=</span> #&#123;department&#125;<br><span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span><span class="hljs-keyword">select</span><span class="hljs-operator">&gt;</span><br></code></pre></td></tr></table></figure><p>4ã€ç»™æ¯å¼ è¡¨éƒ½è®¾ç½®è‡ªå¢ä¸»é”®idï¼Œå¯èƒ½ä¸ä¼šå±•ç°ç»™ç”¨æˆ·ï¼Œä½†å¯ä»¥ä½œä¸ºå”¯ä¸€æ ‡å¿—æ¥æŸ¥è¯¢ã€‚</p><p>5ã€æœ¬æ¥è§‰å¾—åœ¨å»ºè¡¨çš„æ—¶å€™è¦è€ƒè™‘åˆ°å±•ç¤ºï¼Œå‰ç«¯çš„ä¸€ä¸ªtableæœ€å¥½æ¥è‡ªä¸€å¼ è¡¨çš„æ•°æ®ï¼Œæ‰€ä»¥å¯èƒ½éœ€è¦ä¸€å®šçš„å†—ä½™ï¼Œåæ¥å‘ç°ï¼Œéœ€è¦å¤šå¼ è¡¨æ•°æ®æ—¶ç›´æ¥é€šè¿‡sqlæ“ä½œä¹Ÿå¯è¡Œï¼ˆleft jointï¼‰ï¼Œå¦‚æœä¹‹åæœ‰æœºä¼šå¯ä»¥å°è¯•ã€‚</p><p>6ã€ç®—æ˜¯ä¸€ç‚¹æ€»ç»“å§ï¼Œä¸ªäººæ„Ÿè§‰æ•°æ®åº“çš„è®¾è®¡æ˜¯å¾ˆéœ€è¦é€»è¾‘çš„ï¼Œä¸€æ—¦å®šä¸‹æ¥æ”¹åŠ¨çš„æˆæœ¬ä¼šå¾ˆé«˜ï¼Œè€Œä¸”ä½œä¸ºæ•´ä¸ªé¡¹ç›®çš„åº•å±‚ï¼Œè®¾è®¡çš„å¥½åä¼šå½±å“åˆ°åé¢æ‰€æœ‰çš„å¼€å‘è¿‡ç¨‹æ˜¯å¦å¤æ‚å¯è¡Œï¼Œæ‰€ä»¥è¦ç”¨å¤šç‚¹å¿ƒï¼Œè€ƒè™‘æ•´ä½“ã€‚</p><h2 id="æ­å»ºåç«¯"><a href="#æ­å»ºåç«¯" class="headerlink" title="æ­å»ºåç«¯"></a>æ­å»ºåç«¯</h2><h3 id="Spring-Bootå…¥é—¨"><a href="#Spring-Bootå…¥é—¨" class="headerlink" title="Spring Bootå…¥é—¨"></a>Spring Bootå…¥é—¨</h3><p><strong>ä»‹ç»ï¼š</strong></p><p>ä¸€èˆ¬æŠŠSpring Bootç§°ä¸ºæ­å»ºç¨‹åºçš„è„šæ‰‹æ¶æˆ–è€…è¯´æ˜¯ä¾¿æ·æ­å»ºåŸºäºSpringçš„å·¥ç¨‹ è„šæ‰‹æ¶ã€‚å…¶æœ€ä¸»è¦ä½œç”¨å°±æ˜¯å¸®åŠ©å¼€å‘äººå‘˜å¿«é€Ÿçš„æ„å»ºåºå¤§çš„springé¡¹ç›®ï¼Œå¹¶ä¸”å°½å¯èƒ½çš„å‡å°‘ä¸€åˆ‡xmlé…ç½®ï¼Œåšåˆ°å¼€ç®±å³ç”¨ï¼Œè¿…é€Ÿä¸Šæ‰‹ï¼Œè®©å¼€å‘äººå‘˜å…³æ³¨ä¸šåŠ¡è€Œéé…ç½®ã€‚ </p><p>javaä¸€ç›´è¢«äººè¯Ÿç—…çš„ä¸€ç‚¹å°±æ˜¯è‡ƒè‚¿ã€éº»çƒ¦ã€‚å½“æˆ‘ä»¬è¿˜åœ¨è¾›è‹¦çš„æ­å»ºé¡¹ç›®æ—¶ï¼Œå¯èƒ½Pythonç¨‹åºå‘˜å·²ç»æŠŠåŠŸèƒ½å†™å¥½äº†ï¼Œç©¶å…¶åŸå› æ³¨æ„æ˜¯ä¸¤ç‚¹ï¼š</p><p>1ã€å¤æ‚çš„é…ç½® </p><p>é¡¹ç›®å„ç§é…ç½®å…¶å®æ˜¯å¼€å‘æ—¶çš„æŸè€—ï¼Œ å› ä¸ºåœ¨æ€è€ƒ Spring ç‰¹æ€§é…ç½®å’Œè§£å†³ä¸šåŠ¡é—®é¢˜ä¹‹é—´éœ€è¦è¿›è¡Œæ€ç»´åˆ‡æ¢ï¼Œæ‰€ä»¥ å†™é…ç½®æŒ¤å äº†å†™åº”ç”¨ç¨‹åºé€»è¾‘çš„æ—¶é—´ã€‚</p><p>2ã€æ··ä¹±çš„ä¾èµ–ç®¡ç†</p><p>é¡¹ç›®çš„ä¾èµ–ç®¡ç†ä¹Ÿæ˜¯ä»¶åƒåŠ›ä¸è®¨å¥½çš„äº‹æƒ…ã€‚å†³å®šé¡¹ç›®é‡Œè¦ç”¨å“ªäº›åº“å°±å·²ç»å¤Ÿè®©äººå¤´ç—›çš„äº†ï¼Œä½ è¿˜è¦çŸ¥é“è¿™äº›åº“çš„å“ªä¸ªç‰ˆæœ¬å’Œå…¶ä»–åº“ä¸ä¼šæœ‰å†²çªï¼Œè¿™éš¾é¢˜å®åœ¨å¤ªæ£˜æ‰‹ã€‚å¹¶ä¸”ï¼Œä¾èµ–ç®¡ç†ä¹Ÿæ˜¯ä¸€ç§æŸè€—ï¼Œæ·»åŠ ä¾èµ–ä¸æ˜¯å†™åº”ç”¨ç¨‹åºä»£ç ã€‚ä¸€æ—¦é€‰é”™äº†ä¾èµ–çš„ç‰ˆæœ¬ï¼Œéšä¹‹è€Œæ¥çš„ä¸å…¼å®¹é—®é¢˜æ¯«æ— ç–‘é—®ä¼šæ˜¯ç”Ÿäº§åŠ›æ€æ‰‹ã€‚</p><p>è€ŒSpring Bootè®©è¿™ä¸€åˆ‡æˆä¸ºè¿‡å»ï¼ </p><p>Spring Boot ç®€åŒ–äº†åŸºäºSpringçš„åº”ç”¨å¼€å‘ï¼Œåªéœ€è¦â€œrunâ€å°±èƒ½åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„ã€ç”Ÿäº§çº§åˆ«çš„Springåº”ç”¨ã€‚ </p><p>Spring Bootä¸ºSpringå¹³å°åŠç¬¬ä¸‰æ–¹åº“æä¾›å¼€ç®±å³ç”¨çš„è®¾ç½®ï¼ˆæä¾›é»˜è®¤è®¾ç½®ï¼Œå­˜æ”¾é»˜è®¤é…ç½®çš„åŒ…å°±æ˜¯å¯åŠ¨å™¨starterï¼‰ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç®€å•çš„å¼€å§‹ã€‚å¤šæ•°Spring Bootåº”ç”¨åªéœ€è¦å¾ˆå°‘çš„Springé…ç½®ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Spring Bootåˆ›å»ºjavaåº”ç”¨ï¼Œå¹¶ä½¿ç”¨java â€“jar å¯åŠ¨å®ƒï¼Œå°±èƒ½å¾—åˆ°ä¸€ä¸ªç”Ÿäº§çº§åˆ«çš„webå·¥ç¨‹ã€‚ </p><p><strong>Spring Boot ä¸»è¦ç‰¹ç‚¹æ˜¯ï¼š</strong> </p><ul><li>åˆ›å»ºç‹¬ç«‹çš„Springåº”ç”¨ï¼Œä¸ºæ‰€æœ‰ Spring çš„å¼€å‘è€…æä¾›ä¸€ä¸ªéå¸¸å¿«é€Ÿçš„ã€å¹¿æ³›æ¥å—çš„å…¥é—¨ä½“éªŒ </li><li>ç›´æ¥åµŒå…¥åº”ç”¨æœåŠ¡å™¨ï¼Œå¦‚tomcatã€jettyã€undertowç­‰ï¼›ä¸éœ€è¦å»éƒ¨ç½²waråŒ… </li><li>æä¾›å›ºå®šçš„å¯åŠ¨å™¨ä¾èµ–å»ç®€åŒ–ç»„ä»¶é…ç½®ï¼›å®ç°å¼€ç®±å³ç”¨ï¼ˆå¯åŠ¨å™¨starterå…¶å®å°±æ˜¯Spring Bootæä¾›çš„ä¸€ä¸ªjar åŒ…ï¼‰ï¼Œé€šè¿‡è‡ªå·±è®¾ç½®å‚æ•°ï¼ˆ.propertiesæˆ–.ymlçš„é…ç½®æ–‡ä»¶ï¼‰ï¼Œå³å¯å¿«é€Ÿä½¿ç”¨ã€‚ </li><li>è‡ªåŠ¨åœ°é…ç½®Springå’Œå…¶å®ƒæœ‰éœ€è¦çš„ç¬¬ä¸‰æ–¹ä¾èµ–     </li><li>æä¾›äº†ä¸€äº›å¤§å‹é¡¹ç›®ä¸­å¸¸è§çš„éåŠŸèƒ½æ€§ç‰¹æ€§ï¼Œå¦‚å†…åµŒæœåŠ¡å™¨ã€å®‰å…¨ã€æŒ‡æ ‡ï¼Œå¥åº·æ£€æµ‹ã€å¤–éƒ¨åŒ–é…ç½®ç­‰     </li><li>ç»å¯¹æ²¡æœ‰ä»£ç ç”Ÿæˆï¼Œä¹Ÿæ— éœ€ XML é…ç½®ã€‚</li></ul><h3 id="æ–°å»ºä¸€ä¸ªSpring-Booté¡¹ç›®"><a href="#æ–°å»ºä¸€ä¸ªSpring-Booté¡¹ç›®" class="headerlink" title="æ–°å»ºä¸€ä¸ªSpring Booté¡¹ç›®"></a>æ–°å»ºä¸€ä¸ªSpring Booté¡¹ç›®</h3><p><strong>1ã€æ–°å»ºä¸€ä¸ªmavenå·¥ç¨‹</strong></p><p>Fileâ€“Newâ€“Projectâ€“Mavenâ€“nextâ€“é€‰å®šNameå’ŒLocationâ€“Finish</p><p>ç”Ÿæˆå¦‚å›¾ï¼š</p><p><img src="/blog/2022/09/01/%E5%AE%9E%E8%AE%AD%E6%80%BB%E7%BB%93/2022-04-04_133833.png" alt="2022-04-04_133833"></p><p><strong>2ã€æ·»åŠ ä¾èµ–</strong></p><p>ç°åœ¨åˆ›å»ºå¥½çš„é¡¹ç›®è¿˜ä¸Spring Bootæ²¡ä»€ä¹ˆå…³è”ï¼ŒSpring Bootæä¾›äº†ä¸€ä¸ªåä¸ºspring-boot-starter-parentçš„å·¥ç¨‹ï¼Œé‡Œé¢å·²ç»å¯¹å„ç§å¸¸ç”¨ä¾èµ–ï¼ˆå¹¶éå…¨éƒ¨ï¼‰çš„ç‰ˆæœ¬è¿›è¡Œäº†ç®¡ç†ï¼Œæˆ‘ä»¬çš„é¡¹ç›®éœ€è¦ä»¥è¿™ä¸ªé¡¹ç›®ä¸ºçˆ¶å·¥ç¨‹ï¼Œè¿™æ ·æˆ‘ä»¬ å°±ä¸ç”¨æ“å¿ƒä¾èµ–çš„ç‰ˆæœ¬é—®é¢˜äº†ï¼Œéœ€è¦ä»€ä¹ˆä¾èµ–ï¼Œç›´æ¥å¼•å…¥åæ ‡å³å¯ï¼ </p><p><strong>2.1 æ·»åŠ çˆ¶å·¥ç¨‹åæ ‡</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.2.5.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>2.2 æ·»åŠ webå¯åŠ¨å™¨</strong></p><p>ä¸ºäº†è®©Spring Bootå¸®æˆ‘ä»¬å®Œæˆå„ç§è‡ªåŠ¨é…ç½®ï¼Œæˆ‘ä»¬å¿…é¡»å¼•å…¥Spring Bootæä¾›çš„è‡ªåŠ¨é…ç½®ä¾èµ–ï¼Œæˆ‘ä»¬ç§°ä¸º å¯åŠ¨å™¨ ã€‚å› ä¸ºæˆ‘ä»¬æ˜¯webé¡¹ç›®ï¼Œè¿™é‡Œæˆ‘ä»¬å¼•å…¥webå¯åŠ¨å™¨ï¼Œåœ¨ pom.xml æ–‡ä»¶ä¸­åŠ å…¥å¦‚ä¸‹ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>  <br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰åœ¨è¿™é‡ŒæŒ‡å®šç‰ˆæœ¬ä¿¡æ¯ã€‚å› ä¸ºSpring Bootçš„çˆ¶å·¥ç¨‹å·²ç»å¯¹ç‰ˆæœ¬è¿›è¡Œäº†ç®¡ç†äº†ã€‚ è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬ä¼šå‘ç°é¡¹ç›®ä¸­å¤šå‡ºäº†å¤§é‡çš„ä¾èµ–ã€‚</p><p>é‚£äº›ä¾èµ–éƒ½æ˜¯Spring Bootæ ¹æ® spring-boot-starter-web è¿™ä¸ªä¾èµ–è‡ªåŠ¨å¼•å…¥çš„ï¼Œè€Œä¸”æ‰€æœ‰çš„ç‰ˆæœ¬éƒ½å·²ç»ç®¡ç†å¥½ï¼Œä¸ä¼šå‡ºç°å†²çªã€‚ </p><p><strong>2.3 ç®¡ç†jdkç‰ˆæœ¬</strong></p><p>å¦‚æœæˆ‘ä»¬æƒ³è¦ä¿®æ”¹Spring Booté¡¹ç›®çš„jdkç‰ˆæœ¬ï¼Œåªéœ€è¦ç®€å•çš„æ·»åŠ ä»¥ä¸‹å±æ€§å³å¯ï¼Œå¦‚æœæ²¡æœ‰éœ€æ±‚ï¼Œåˆ™ä¸æ·»åŠ ã€‚åŒæ ·çš„åœ¨ pom.xml æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ï¼š </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">java.version</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">java.version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>2.4 å®Œæ•´pomæ–‡ä»¶</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> </span><br><span class="hljs-tag"><span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> </span><br><span class="hljs-tag"><span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 </span></span><br><span class="hljs-string"><span class="hljs-tag">http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>    <br>  <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.ccnu.springboot.demo1<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springbootdemo1<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>  <br>  <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.2.5.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br>  <br>  <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">java.version</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">java.version</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">maven-jar-plugin.version</span>&gt;</span>3.1.1<span class="hljs-tag">&lt;/<span class="hljs-name">maven-jar-plugin.version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br>  <br>   <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>  <br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span> <br></code></pre></td></tr></table></figure><p><strong>2.5 å¯åŠ¨ç±»</strong></p><p>Spring Booté¡¹ç›®é€šè¿‡mainå‡½æ•°å³å¯å¯åŠ¨ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªå¯åŠ¨ç±»ï¼š </p><p>ç¼–å†™&#x2F;backend&#x2F;src&#x2F;main&#x2F;java&#x2F;azure&#x2F;Application.javaå¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> azure;<br><br><span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;<br><span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;<br><br><span class="hljs-meta">@MapperScan(&quot;azure.dao&quot;)</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Application</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(Application.class, args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>2.6 ç¼–å†™controller</strong></p><p>ç¼–å†™&#x2F;backend&#x2F;src&#x2F;mian&#x2F;java&#x2F;azure&#x2F;controller&#x2F;NotFoundcontroller.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> azure.controller;<br><br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.GetMapping;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RestController;<br><br><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NotFoundController</span> &#123;<br>    <span class="hljs-meta">@GetMapping(&quot;404&quot;)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">NotFound</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;å¯¹ä¸èµ·ï¼Œæ‚¨çš„é¡µé¢èµ°ä¸¢äº†ï¼&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>2.7 å¯åŠ¨é¡¹ç›®ï¼ŒæŸ¥çœ‹å¯åŠ¨ç«¯å£ï¼š</p><p><img src="/blog/2022/09/01/%E5%AE%9E%E8%AE%AD%E6%80%BB%E7%BB%93/2022-04-04_143417.png" alt="2022-04-04_143417"></p><p>æ‰“å¼€<a href="http://localhost:8080/404">http://localhost:8080/404</a></p><p><img src="/blog/2022/09/01/%E5%AE%9E%E8%AE%AD%E6%80%BB%E7%BB%93/2022-04-04_143125.png" alt="2022-04-04_143125"></p><p>æµ‹è¯•æˆåŠŸ</p><p>2.8 é¡¹ç›®æœ€ç»ˆå®Œæ•´çš„xmlï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--mavenç‰ˆæœ¬å’Œå¤´æ–‡ä»¶--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0</span></span><br><span class="hljs-string"><span class="hljs-tag">http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--    è‡ªå·±é…ç½®çš„GVA--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.ccnu.springboot.demo4<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springbootdemo5<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--    é¡¹ç›®çš„æ‰“åŒ…æ–¹å¼--&gt;</span><br><span class="hljs-comment">&lt;!--    jar:javaåº”ç”¨--&gt;</span><br><span class="hljs-comment">&lt;!--    war:javawebåº”ç”¨--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">packaging</span>&gt;</span>jar<span class="hljs-tag">&lt;/<span class="hljs-name">packaging</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--    çˆ¶å·¥ç¨‹åæ ‡--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.2.5.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--    é…ç½®--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.reporting.outputEncoding</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">java.version</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">java.version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">fastjson.version</span>&gt;</span>1.2.25<span class="hljs-tag">&lt;/<span class="hljs-name">fastjson.version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">mybatis.version</span>&gt;</span>1.3.0<span class="hljs-tag">&lt;/<span class="hljs-name">mybatis.version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">druid.version</span>&gt;</span>1.1.0<span class="hljs-tag">&lt;/<span class="hljs-name">druid.version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">maven-jar-plugin.version</span>&gt;</span>3.1.1<span class="hljs-tag">&lt;/<span class="hljs-name">maven-jar-plugin.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--    é¡¹ç›®ä¾èµ–--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- åˆ†é¡µåŠŸèƒ½ --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.pagehelper<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>pagehelper<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.1.8<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.pagehelper<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>pagehelper-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.13<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>        <span class="hljs-comment">&lt;!-- Spring Bootçš„webå¯åŠ¨å™¨ --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <br>        <span class="hljs-comment">&lt;!-- Thymeleaf --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <br>        <span class="hljs-comment">&lt;!-- MyBatis --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;mybatis.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>        <span class="hljs-comment">&lt;!-- è¿æ¥æ±  --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>druid<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;druid.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- lombok --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- å·¥å…·åŒ… --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.commons<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>commons-lang3<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>fastjson<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>$&#123;fastjson.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jackson-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.9.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jackson-databind<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.9.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jackson-annotations<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.9.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br>    <br>    <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span> <br>            <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>                <span class="hljs-comment">&lt;!-- æ‰“jaråŒ…æ—¶å¦‚æœä¸é…ç½®è¯¥æ’ä»¶ï¼Œæ‰“å‡ºæ¥çš„jaråŒ…æ²¡æœ‰æ¸…å•æ–‡ä»¶ --&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br>    <br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>3ã€æ–°å»ºé…ç½®æ–‡ä»¶</strong></p><p>åœ¨&#x2F;backend&#x2F;src&#x2F;main&#x2F;resourcesä¸‹æ–°å»ºapplication.propertiesæˆ–application.ymlï¼ˆäºŒè€…éƒ½æ˜¯é…ç½®æ–‡ä»¶ï¼Œå†™æ³•ä¸åŒï¼‰</p><p>application.propertiesä¸­ä¸ºï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">project.name</span>=<span class="hljs-string">kanbingbing</span><br><span class="hljs-attr">project.version</span>=<span class="hljs-string">1.0.0</span><br><br><span class="hljs-attr">server.port</span>=<span class="hljs-string">8081</span><br><br><span class="hljs-attr">spring.datasource.url</span>=<span class="hljs-string">jdbc:mysql://114.115.218.247:3307/xbb_db?useSSL=false&amp;useUnicode=true&amp;characterEncoding=utf-8&amp;autoReconnect=true&amp;serverTimezone=Asia/Shanghai</span><br><span class="hljs-comment">#spring.datasource.url=jdbc:mysql://localhost:3306/xbb_db?useSSL=false&amp;useUnicode=true&amp;characterEncoding=utf-8&amp;autoReconnect=true&amp;serverTimezone=Asia/Shanghai</span><br><span class="hljs-attr">spring.datasource.username</span>=<span class="hljs-string">root</span><br><span class="hljs-attr">spring.datasource.password</span>=<span class="hljs-string">123456</span><br><span class="hljs-attr">spring.datasource.driver-class-name</span>=<span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br><span class="hljs-attr">spring.datasource.type</span>=<span class="hljs-string">com.alibaba.druid.pool.DruidDataSource</span><br><br><span class="hljs-attr">spring.jackson.time-zone</span>=<span class="hljs-string">GMT+8</span><br><br><span class="hljs-attr">spring.jackson.date-format</span>=<span class="hljs-string">yyyy-MM-dd HH:mm:ss</span><br><br><span class="hljs-attr">spring.thymeleaf.cache</span>=<span class="hljs-string">false</span><br><span class="hljs-attr">spring.resources.static-locations</span>=<span class="hljs-string">classpath:/static/</span><br><br><span class="hljs-attr">mybatis.type-aliases-package</span>=<span class="hljs-string">com.xbb.entity</span><br><span class="hljs-attr">mybatis.mapper-locations</span>=<span class="hljs-string">classpath:mybatis/mappers/*.xml</span><br><br><span class="hljs-attr">logback.level</span>=<span class="hljs-string">INFO</span><br><span class="hljs-attr">logging.level.com.ccnu</span>=<span class="hljs-string">debug</span><br><br><span class="hljs-attr">file.upload.path</span>=<span class="hljs-string">C:\\Shirley-learning\\apache-tomcat-9.0.24-windows-x64\\apache-tomcat-9.0.24\\webapps\\tanghulu</span><br><br><span class="hljs-attr">spring.servlet.multipart.max-file-size</span>=<span class="hljs-string">2MB</span><br><span class="hljs-attr">spring.servlet.multipart.max-request-size</span>=<span class="hljs-string">2MB</span><br></code></pre></td></tr></table></figure><p>application.ymlä¸­ä¸ºï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">pagehelper:</span><br>  <span class="hljs-attr">helperDialect:</span> <span class="hljs-string">mysql</span><br>  <span class="hljs-attr">reasonable:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">supportMethodsArguments:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">params:</span> <span class="hljs-string">count=countSql</span><br><br></code></pre></td></tr></table></figure><h3 id="ç”¨mybatisç®¡ç†æ•°æ®åº“"><a href="#ç”¨mybatisç®¡ç†æ•°æ®åº“" class="headerlink" title="ç”¨mybatisç®¡ç†æ•°æ®åº“"></a>ç”¨mybatisç®¡ç†æ•°æ®åº“</h3><p>åœ¨&#x2F;backend&#x2F;src&#x2F;main&#x2F;resourcesä¸‹æ–°å»ºmybatis.mappersæ–‡ä»¶å¤¹ï¼Œå­˜æ”¾xmlæ–‡ä»¶ï¼Œç›®å½•å¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="/blog/2022/09/01/%E5%AE%9E%E8%AE%AD%E6%80%BB%E7%BB%93/2022-04-04_153709.png" alt="2022-04-04_153709"></p><h3 id="ä»¥Spring-MVCæ¶æ„ç¼–å†™ç¨‹åº"><a href="#ä»¥Spring-MVCæ¶æ„ç¼–å†™ç¨‹åº" class="headerlink" title="ä»¥Spring MVCæ¶æ„ç¼–å†™ç¨‹åº"></a>ä»¥Spring MVCæ¶æ„ç¼–å†™ç¨‹åº</h3><p>åœ¨&#x2F;backend&#x2F;src&#x2F;main&#x2F;java&#x2F;azureä¸‹</p><p>æ–°å»ºentityæ–‡ä»¶å¤¹å­˜æ”¾å®ä½“ç±»ï¼Œå®ä½“ç±»ç±»ååŠå±æ€§æœ€å¥½ä¸æ•°æ®åº“çš„è¡¨åå’Œå­—æ®µå¯¹åº”ï¼›</p><p>æ–°å»ºdaoæ–‡ä»¶å¤¹ä½œä¸ºæ•°æ®è®¿é—®å±‚ï¼Œä¸ç¼–å†™sqlè¯­è¨€ç›´æ¥æ“ä½œæ•°æ®åº“çš„xmlæ–‡ä»¶ç›¸å¯¹åº”ï¼Œå‘½åå¦‚ï¼šArticleMapperæ¥å£ç±»ï¼›</p><p>æ–°å»ºserviceæ–‡ä»¶å¤¹ä½œä¸ºä¸šåŠ¡å±‚ï¼Œå†åœ¨serviceæ–‡ä»¶å¤¹ä¸‹æ–°å»ºimplæ–‡ä»¶å¤¹ï¼ŒäºŒè€…åˆ†åˆ«å­˜æ”¾serviceæ¥å£ç±»å’ŒserviceImplæ¥å£å®ç°ç±»ï¼Œå‘½åå¦‚ï¼šArticleServiceæ¥å£ç±»å’ŒArticleServiceImplæ¥å£å®ç°ç±»ï¼›</p><p>æ–°å»ºcontrolleræ–‡ä»¶å¤¹ä½œä¸ºæ§åˆ¶å±‚ï¼Œè°ƒç”¨serviceå±‚çš„æ–¹æ³•ä»¥åŠå‘å‰ç«¯æä¾›æ¥å£ï¼Œå‘½åå¦‚ArticleControllerç±»ï¼›</p><p>æ–°å»ºutilsæ–‡ä»¶å¤¹å­˜æ”¾å·¥å…·ç±»ï¼Œå¦‚CodeGeneratorç±»ã€Resultç±»ã€‚</p><p>![æœªå‘½åæ–‡ä»¶ (1)](.&#x2F;æœªå‘½åæ–‡ä»¶ (1).png)</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>è‡³æ­¤ï¼Œä¸€ä¸ªé¡¹ç›®çš„åç«¯æ¡†æ¶å·²ç»æ­å»ºå®Œæ¯•ï¼Œä¹‹åçš„å¼€å‘æŒ‰ç…§ä¸Šè¿°è§„åˆ™è¿›è¡Œã€‚</p><h2 id="æ­å»ºå‰ç«¯"><a href="#æ­å»ºå‰ç«¯" class="headerlink" title="æ­å»ºå‰ç«¯"></a>æ­å»ºå‰ç«¯</h2><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>éœ€è¦çš„ç¯å¢ƒ</p><p>Node.js : <a href="http://nodejs.cn/download/">http://nodejs.cn/download/</a></p><p>å®‰è£…å°±æ— è„‘ä¸‹ä¸€æ­¥å°±å¥½,å®‰è£…åœ¨è‡ªå·±çš„ç¯å¢ƒç›®å½•ä¸‹</p><p>Git : <a href="https://git-scm.com/downloads">https://git-scm.com/downloads</a></p><p>é•œåƒ:<a href="https://npm.taobao.org/mirrors/git-for-windows/">https://npm.taobao.org/mirrors/git-for-windows/</a></p><p>ç¡®è®¤nodejså®‰è£…æˆåŠŸ:</p><p>cmd ä¸‹è¾“å…¥ node -v,æŸ¥çœ‹æ˜¯å¦èƒ½å¤Ÿæ­£ç¡®æ‰“å°å‡ºç‰ˆæœ¬å·å³å¯!</p><p>cmd ä¸‹è¾“å…¥ npm-v,æŸ¥çœ‹æ˜¯å¦èƒ½å¤Ÿæ­£ç¡®æ‰“å°å‡ºç‰ˆæœ¬å·å³å¯!</p><p>è¿™ä¸ªnpm,å°±æ˜¯ä¸€ä¸ªè½¯ä»¶åŒ…ç®¡ç†å·¥å…·,å°±å’Œlinuxä¸‹çš„aptè½¯ä»¶å®‰è£…å·®ä¸å¤š!</p><p>å®‰è£… Node.js æ·˜å®é•œåƒåŠ é€Ÿå™¨ï¼ˆcnpmï¼‰</p><p>è¿™æ ·å­çš„è¯,ä¸‹è½½ä¼šå¿«å¾ˆå¤š~</p><p>åœ¨å‘½ä»¤å°è¾“å…¥-g å°±æ˜¯å…¨å±€å®‰è£…</p><p>npm install cnpm -g</p><p>æˆ–ä½¿ç”¨å¦‚ä¸‹è¯­å¥è§£å†³ npm é€Ÿåº¦æ…¢çš„é—®é¢˜</p><p>npm install â€“registry&#x3D;<a href="https://registry.npm.taobao.org/">https://registry.npm.taobao.org</a></p><p>åœ¨å‘½ä»¤å°è¾“å…¥</p><p>cnpm install vue-cli -g</p><p>æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ</p><p>vue list</p><h3 id="æ–°å»ºvueè„šæ‰‹æ¶"><a href="#æ–°å»ºvueè„šæ‰‹æ¶" class="headerlink" title="æ–°å»ºvueè„šæ‰‹æ¶"></a>æ–°å»ºvueè„šæ‰‹æ¶</h3><p>è¿›å…¥æƒ³æ–°å»ºé¡¹ç›®çš„æ–‡ä»¶å¤¹ï¼Œæ‰“å¼€æ§åˆ¶å°</p><p>åˆ›å»ºè„šæ‰‹æ¶ï¼švue init webpack frontend</p><blockquote><p>å…‹éš†é¡¹ç›®ï¼šgit clone (åœ°å€)</p></blockquote><p>ç„¶åæœ‰ä¸€ç³»åˆ—é€‰é¡¹éœ€è¦è‡ªå®šä¹‰ï¼Œä¸€èˆ¬æ¥è¯´å¯ä»¥ä¸€è·¯defaultï¼Œé€‰æ‹©ç»“æŸåä¼šæ˜¾ç¤ºåœ¨å®‰è£…ä¸­</p><p>è¿è¡Œvueï¼š</p><p>cd frontend</p><p>npm install</p><p>npm run dev</p><p>æ‰“å¼€<a href="http://localhost:8080/#/%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0vue%E8%84%9A%E6%89%8B%E6%9E%B6%E7%9A%84%E4%B8%80%E4%B8%AA%E9%BB%98%E8%AE%A4%E9%A1%B5%E9%9D%A2%EF%BC%8C%E8%87%AA%E5%B7%B1%E5%9C%A8%E5%86%99%E9%A1%B9%E7%9B%AE%E4%B9%8B%E5%89%8D%E9%9C%80%E8%A6%81%E5%B0%86%E5%BE%88%E5%A4%9A%E4%B8%9C%E8%A5%BF%E5%88%A0%E9%99%A4%EF%BC%8C%E8%BF%99%E4%BA%9B%E5%88%9D%E5%A7%8B%E5%8C%96%E6%93%8D%E4%BD%9C%E5%A6%82%E4%B8%8B%EF%BC%9A">http://localhost:8080/#/ï¼Œå¯ä»¥çœ‹åˆ°vueè„šæ‰‹æ¶çš„ä¸€ä¸ªé»˜è®¤é¡µé¢ï¼Œè‡ªå·±åœ¨å†™é¡¹ç›®ä¹‹å‰éœ€è¦å°†å¾ˆå¤šä¸œè¥¿åˆ é™¤ï¼Œè¿™äº›åˆå§‹åŒ–æ“ä½œå¦‚ä¸‹ï¼š</a></p><ul><li><p>å°†src&#x2F;assetsä¸­çš„logo.pngæ›¿æ¢æˆè‡ªå·±çš„logo.png</p></li><li><p>å°†componentsä¸­çš„HelloWorld.vueåˆ é™¤</p></li><li><p>å°†router&#x2F;index.jsä¸­çš„å†…å®¹æ›¿æ¢å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Router</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span><br><br><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">Router</span>)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Router</span>(&#123;<br>  <span class="hljs-attr">routes</span>: [<br>      <span class="hljs-comment">//æ­¤å¤„å¼€å§‹å†™è‡ªå·±çš„è·¯ç”±</span><br>  ]<br>&#125;)<br></code></pre></td></tr></table></figure></li><li><p>å°†App.vueä¸­çš„å†…å®¹æ›¿æ¢å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;template&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>/&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>&lt;/template&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;App&#x27;</span></span></span><br><span class="language-javascript"><span class="language-xml">&#125;</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure></li><li><p>å°†main.jsä¸­çš„å†…å®¹æ›¿æ¢å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// The Vue build version to load with the `import` command</span><br><span class="hljs-comment">// (runtime-only or standalone) has been set in webpack.base.conf with an alias.</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App&#x27;</span><br><span class="hljs-comment">// æ‰«æè·¯ç”±é…ç½®</span><br><span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./router&#x27;</span><br><span class="hljs-comment">// å¯¼å…¥Axios</span><br><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Axios</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-axios&#x27;</span><br><span class="hljs-comment">// å¯¼å…¥vuex</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vuex</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vuex&#x27;</span><br><span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./store&#x27;</span><br><span class="hljs-comment">// å¯¼å…¥element-ui</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">ElementUI</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;element-ui&#x27;</span><br><span class="hljs-comment">// å¯¼å…¥element css</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;element-ui/lib/theme-chalk/index.css&#x27;</span><br><span class="hljs-comment">// å¯¼å…¥echarts</span><br><span class="hljs-comment">// import echarts from &#x27;echarts&#x27;</span><br><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> echarts <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;echarts&#x27;</span>;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">ElementUI</span>)<br><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(router)<br><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">Axios</span>, axios)<br><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">Vuex</span>)<br><span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span><br><span class="hljs-title class_">Vue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">$echarts</span> = echarts<br><br><span class="hljs-comment">/* eslint-disable no-new */</span><br><span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;<br>  <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,<br>  router,<br>  store,<br>  <span class="hljs-comment">// components: &#123;App&#125;,</span><br>  <span class="hljs-comment">// template: &#x27;&lt;App/&gt;&#x27;</span><br>  <span class="hljs-comment">// elementUI</span><br>  <span class="hljs-attr">render</span>: <span class="hljs-function"><span class="hljs-params">h</span> =&gt;</span> <span class="hljs-title function_">h</span>(<span class="hljs-title class_">App</span>)<br>&#125;)<br></code></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼šå¼•å…¥å‰éœ€è¦é…å¥—å®‰è£…ï¼Œå®‰è£…æ–¹å¼åŸºæœ¬éƒ½ä¸ºï¼šnpm install xxx</p></blockquote></li></ul><p>è¿˜æœ‰ä¸€äº›è¦æ ¹æ®é¡¹ç›®æƒ…å†µæ”¹å˜çš„å°ç»†èŠ‚å¦‚ä¸‹ï¼š</p><p>1ã€åœ¨å†™è·¯å¾„æ—¶å¯ç”¨@æ¥ä»£æ›¿srcï¼Œç›¸å…³é…ç½®åœ¨build&#x2F;webpack.base.conf.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-attr">context</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">&#x27;../&#x27;</span>),<br>  <span class="hljs-attr">entry</span>: &#123;<br>    <span class="hljs-attr">app</span>: <span class="hljs-string">&#x27;./src/main.js&#x27;</span><br>  &#125;,<br>  <span class="hljs-attr">resolve</span>: &#123;<br>    <span class="hljs-attr">extensions</span>: [<span class="hljs-string">&#x27;.js&#x27;</span>, <span class="hljs-string">&#x27;.vue&#x27;</span>, <span class="hljs-string">&#x27;.json&#x27;</span>],<br>    <span class="hljs-attr">alias</span>: &#123;<br>      <span class="hljs-string">&#x27;vue$&#x27;</span>: <span class="hljs-string">&#x27;vue/dist/vue.esm.js&#x27;</span>,<br>      <span class="hljs-string">&#x27;@&#x27;</span>: <span class="hljs-title function_">resolve</span>(<span class="hljs-string">&#x27;src&#x27;</span>),<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>2ã€è®¾ç½®å‰åç«¯äº¤äº’çš„ç«¯å£ï¼Œç›¸å…³é…ç½®åœ¨config&#x2F;index.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-attr">dev</span>: &#123;<br>    <span class="hljs-comment">// Paths</span><br>    <span class="hljs-attr">assetsSubDirectory</span>: <span class="hljs-string">&#x27;static&#x27;</span>,<br>    <span class="hljs-attr">assetsPublicPath</span>: <span class="hljs-string">&#x27;/&#x27;</span>,<br>    <span class="hljs-attr">proxyTable</span>: &#123;<br>      <span class="hljs-string">&#x27;/api&#x27;</span>: &#123;<br>        <span class="hljs-comment">// æ­¤å¤„å†™åç«¯å¯åŠ¨çš„ç«¯å£å·</span><br>        <span class="hljs-attr">target</span>: <span class="hljs-string">&#x27;http://localhost:8081&#x27;</span>,<br>        <span class="hljs-attr">changeOrigin</span>: <span class="hljs-literal">true</span>,<br>        <span class="hljs-attr">pathRewrite</span>: &#123;<br>          <span class="hljs-string">&#x27;^/api&#x27;</span>: <span class="hljs-string">&#x27;&#x27;</span><br>        &#125;<br>      &#125;<br>    &#125;,<br>    <span class="hljs-attr">host</span>: <span class="hljs-string">&#x27;localhost&#x27;</span>, <span class="hljs-comment">// can be overwritten by process.env.HOST</span><br>    <span class="hljs-comment">// æ­¤å¤„å†™å‰ç«¯å¯åŠ¨çš„ç«¯å£å·</span><br>    <span class="hljs-attr">port</span>: <span class="hljs-number">8080</span>, <span class="hljs-comment">// can be overwritten by process.env.PORT, if port is in use, a free one will be determined</span><br>    <span class="hljs-attr">autoOpenBrowser</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">errorOverlay</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">notifyOnErrors</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">poll</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// https://webpack.js.org/configuration/dev-server/#devserver-watchoptions-</span><br><br>    <span class="hljs-attr">useEslint</span>: <span class="hljs-literal">true</span>,<br><br>    <span class="hljs-attr">showEslintErrorsInOverlay</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">devtool</span>: <span class="hljs-string">&#x27;cheap-module-eval-source-map&#x27;</span>,<br>    <span class="hljs-attr">cacheBusting</span>: <span class="hljs-literal">true</span>,<br><br>    <span class="hljs-attr">cssSourceMap</span>: <span class="hljs-literal">true</span><br>  &#125;,<br></code></pre></td></tr></table></figure><p>3ã€è®¾ç½®æ‰“å¼€æ—¶çš„ç½‘é¡µåç§°ï¼Œåœ¨index.htmlä¸­è¿›è¡Œä¿®æ”¹</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width,initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- æ­¤å¤„å†™ç½‘é¡µåç§° --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>xbb-frontend<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- built files will be auto injected --&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="é¡¹ç›®ä¸»è¦åŠŸèƒ½å®ç°"><a href="#é¡¹ç›®ä¸»è¦åŠŸèƒ½å®ç°" class="headerlink" title="é¡¹ç›®ä¸»è¦åŠŸèƒ½å®ç°"></a>é¡¹ç›®ä¸»è¦åŠŸèƒ½å®ç°</h2><h3 id="1ã€åŸºç¡€å¢åˆ æ”¹æŸ¥åŠåˆ†ç±»"><a href="#1ã€åŸºç¡€å¢åˆ æ”¹æŸ¥åŠåˆ†ç±»" class="headerlink" title="1ã€åŸºç¡€å¢åˆ æ”¹æŸ¥åŠåˆ†ç±»"></a>1ã€åŸºç¡€å¢åˆ æ”¹æŸ¥åŠåˆ†ç±»</h3><p>ä»¥doctorä¸ºä¾‹</p><p>&#x3D;&#x3D;åç«¯å†…å®¹&#x3D;&#x3D;</p><p>åœ¨src&#x2F;main&#x2F;resources&#x2F;mybatis.mappersä¸­æ–°å»ºDoctorMapper.xmlï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span> ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.xbb.dao.DoctorMapper&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- å¢åŠ  --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;addDoctor&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;com.xbb.entity.Doctor&quot;</span>&gt;</span><br>        insert into doctor_info(id,name,sex,idCard,age,birth,image,introduction,department,sort,fee,telephone)<br>        values(#&#123;id&#125;,#&#123;name&#125;,#&#123;sex&#125;,#&#123;idCard&#125;,#&#123;age&#125;,#&#123;birth&#125;,#&#123;image&#125;,#&#123;introduction&#125;,#&#123;department&#125;,#&#123;sort&#125;,#&#123;fee&#125;,#&#123;telephone&#125;)<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span><br><span class="hljs-comment">&lt;!-- åˆ é™¤ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">delete</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;deleteDoctor&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;com.xbb.entity.Doctor&quot;</span>&gt;</span><br>        delete from doctor_info where id=#&#123;id&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">delete</span>&gt;</span><br>    <br>    <span class="hljs-comment">&lt;!-- ä¿®æ”¹ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;updateDoctor&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;com.xbb.entity.Doctor&quot;</span>&gt;</span><br>        update doctor_info set name=#&#123;name&#125;,sex=#&#123;sex&#125;,idCard=#&#123;idCard&#125;,age=#&#123;age&#125;,birth=#&#123;birth&#125;,image=#&#123;image&#125;,introduction=#&#123;introduction&#125;,department=#&#123;department&#125;,sort=#&#123;sort&#125;,fee=#&#123;fee&#125;,telephone=#&#123;telephone&#125;<br>        where id=#&#123;id&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- æŸ¥è¯¢ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectAll&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;doctor&quot;</span>&gt;</span><br>        select * from doctor_info<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- æ ¹æ®ç§‘å®¤æŸ¥è¯¢åŒ»ç”Ÿ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectByDepartment&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;doctor&quot;</span>&gt;</span><br>        select * from doctor_info where department = #&#123;department&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br>    <br>    <span class="hljs-comment">&lt;!-- æ¨¡ç³ŠæŸ¥è¯¢ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;search&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;doctor&quot;</span>&gt;</span><br>    select * from doctor_info where name like concat(&#x27;%&#x27;,#&#123;val&#125;,&#x27;%&#x27;)<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p>utilsä¸­æ–°å»ºResultå·¥å…·ç±»ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.xbb.utils;<br><span class="hljs-keyword">import</span> lombok.Data;<br><br><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Result</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> total;<span class="hljs-comment">//å†…å®¹é•¿åº¦</span><br>    <span class="hljs-keyword">private</span> Object data;<span class="hljs-comment">// å†…å®¹</span><br>&#125;<br><br></code></pre></td></tr></table></figure><p>entityä¸­æ–°å»ºDoctorå®ä½“ç±»ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.xbb.entity;<br><span class="hljs-keyword">import</span> lombok.Data;<br><br><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Doctor</span> &#123;<br>    <span class="hljs-keyword">private</span> Long id;<span class="hljs-comment">//å·¥å·</span><br>    <span class="hljs-keyword">private</span> String name;<span class="hljs-comment">//å§“å</span><br>    <span class="hljs-keyword">private</span> String sex;<span class="hljs-comment">//æ€§åˆ«</span><br>    <span class="hljs-keyword">private</span> String idCard;<span class="hljs-comment">//èº«ä»½è¯å·</span><br>    <span class="hljs-keyword">private</span> String telephone;<span class="hljs-comment">//ç”µè¯å·ç </span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<span class="hljs-comment">//å¹´é¾„</span><br>    <span class="hljs-keyword">private</span> String birth;<span class="hljs-comment">//å‡ºç”Ÿæ—¥æœŸ</span><br>    <span class="hljs-keyword">private</span> String image;<span class="hljs-comment">//ä¸ªäººç…§ç‰‡</span><br>    <span class="hljs-keyword">private</span> String introduction;<span class="hljs-comment">//ä¸ªäººç®€ä»‹</span><br>    <span class="hljs-keyword">private</span> String department;<span class="hljs-comment">//ç§‘å®¤</span><br>    <span class="hljs-keyword">private</span> String sort;<span class="hljs-comment">//èŒç§°</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> fee;<span class="hljs-comment">//æŒ‚å·è´¹</span><br>&#125;<br><br></code></pre></td></tr></table></figure><p>daoä¸­æ–°å»ºDcotorMapper.interfaceï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.xbb.dao;<br><span class="hljs-keyword">import</span> com.xbb.entity.Doctor;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">DoctorMapper</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">addDoctor</span><span class="hljs-params">(Doctor doctor)</span>;<span class="hljs-comment">//æ·»åŠ åŒ»ç”Ÿä¿¡æ¯ï¼ˆåŒ»ç”Ÿï¼‰</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">deleteDoctor</span><span class="hljs-params">(Long id)</span>;<span class="hljs-comment">//åˆ é™¤ä¸€æ¡åŒ»ç”Ÿä¿¡æ¯è®°å½•ï¼ˆç®¡ç†å‘˜ï¼‰</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">updateDoctor</span><span class="hljs-params">(Doctor doctor)</span>;<span class="hljs-comment">//ä¿®æ”¹åŒ»ç”Ÿä¿¡æ¯ï¼ˆåŒ»ç”Ÿï¼‰</span><br>    <span class="hljs-keyword">public</span> List&lt;Doctor&gt; <span class="hljs-title function_">selectAll</span><span class="hljs-params">()</span>;<span class="hljs-comment">//æŸ¥è¯¢æ‰€æœ‰åŒ»ç”Ÿä¿¡æ¯ï¼ˆç®¡ç†å‘˜ï¼‰</span><br>    <span class="hljs-keyword">public</span> List&lt;Doctor&gt; <span class="hljs-title function_">selectByDepartment</span><span class="hljs-params">(String department)</span>;<span class="hljs-comment">//æ ¹æ®ç§‘å®¤æŸ¥è¯¢åŒ»ç”Ÿä¿¡æ¯ï¼ˆç—…äººï¼‰</span><br>    <span class="hljs-keyword">public</span> List&lt;Doctor&gt; <span class="hljs-title function_">search</span><span class="hljs-params">(String val)</span>;<span class="hljs-comment">//æ ¹æ®åŒ»ç”Ÿåæ¨¡ç³ŠæŸ¥è¯¢ï¼ˆç®¡ç†å‘˜ï¼‰</span><br>&#125;<br></code></pre></td></tr></table></figure><p>serviceä¸­æ–°å»ºDoctorService.interfaceï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.xbb.service;<br><span class="hljs-keyword">import</span> com.xbb.entity.Doctor;<br><span class="hljs-keyword">import</span> com.xbb.utils.Result;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">DoctorService</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">addDoctor</span><span class="hljs-params">(Doctor doctor)</span>;<span class="hljs-comment">//æ·»åŠ åŒ»ç”Ÿä¿¡æ¯ï¼ˆåŒ»ç”Ÿï¼‰</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">deleteDoctor</span><span class="hljs-params">(Long id)</span>;<span class="hljs-comment">//åˆ é™¤ä¸€æ¡åŒ»ç”Ÿä¿¡æ¯è®°å½•ï¼ˆç®¡ç†å‘˜ï¼‰</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">updateDoctor</span><span class="hljs-params">(Doctor doctor)</span>;<span class="hljs-comment">//ä¿®æ”¹åŒ»ç”Ÿä¿¡æ¯ï¼ˆåŒ»ç”Ÿï¼‰</span><br>    <span class="hljs-keyword">public</span> List&lt;Doctor&gt; <span class="hljs-title function_">selectAllOnce</span><span class="hljs-params">()</span>;<span class="hljs-comment">//ä¸€æ¬¡è·å–æ‰€æœ‰åŒ»ç”Ÿä¿¡æ¯ï¼ˆç®¡ç†å‘˜ï¼‰</span><br>    <span class="hljs-keyword">public</span> Result <span class="hljs-title function_">selectAll</span><span class="hljs-params">(<span class="hljs-type">int</span> current,<span class="hljs-type">int</span> size)</span>;<span class="hljs-comment">//åˆ†é¡µæŸ¥è¯¢æ‰€æœ‰åŒ»ç”Ÿä¿¡æ¯ï¼ˆç®¡ç†å‘˜ï¼‰</span><br>    <span class="hljs-keyword">public</span> List&lt;Doctor&gt; <span class="hljs-title function_">selectByDepartment</span><span class="hljs-params">(String department)</span>;<span class="hljs-comment">//æ ¹æ®ç§‘å®¤æŸ¥è¯¢åŒ»ç”Ÿä¿¡æ¯ï¼ˆç—…äººï¼‰</span><br>    Result <span class="hljs-title function_">search</span><span class="hljs-params">(Integer current, Integer size, String val)</span>;<span class="hljs-comment">//æ ¹æ®åŒ»ç”Ÿåæ¨¡ç³ŠæŸ¥è¯¢å¹¶åˆ†ç±»</span><br>&#125;<br></code></pre></td></tr></table></figure><p>Implä¸­æ–°å»ºDoctorServiceImplæ¥å£å®ç°ç±»ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.xbb.service.impl;<br><br><span class="hljs-keyword">import</span> com.github.pagehelper.Page;<br><span class="hljs-keyword">import</span> com.github.pagehelper.PageHelper;<br><span class="hljs-keyword">import</span> com.xbb.dao.DoctorMapper;<br><span class="hljs-keyword">import</span> com.xbb.entity.Doctor;<br><span class="hljs-keyword">import</span> com.xbb.service.DoctorService;<br><span class="hljs-keyword">import</span> com.xbb.utils.Result;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Service;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DoctorServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">DoctorService</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> DoctorMapper doctorMapper;<span class="hljs-comment">//è¿™é‡Œæ€»ä¼šæŠ¥é”™ï¼Œä¸çŸ¥ä¸ºä½•ï¼Œä½†ä¸å½±å“è¿è¡Œ</span><br><br>    <span class="hljs-comment">// æ’å…¥ï¼šæ·»åŠ åŒ»ç”Ÿ</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">addDoctor</span><span class="hljs-params">(Doctor doctor)</span> &#123;<br>        <span class="hljs-keyword">return</span> doctorMapper.addDoctor(doctor);<br>    &#125;<br><br>    <span class="hljs-comment">// åˆ é™¤ï¼šåˆ é™¤åŒ»ç”Ÿ</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">deleteDoctor</span><span class="hljs-params">(Long id)</span> &#123;<br>        <span class="hljs-keyword">return</span> doctorMapper.deleteDoctor(id);<br>    &#125;<br>    <br>    <span class="hljs-comment">// ä¿®æ”¹ï¼šä¿®æ”¹åŒ»ç”Ÿä¿¡æ¯</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">updateDoctor</span><span class="hljs-params">(Doctor doctor)</span> &#123;<br>        <span class="hljs-keyword">return</span> doctorMapper.updateDoctor(doctor);<br>    &#125;<br>    <br>    <span class="hljs-comment">// æŸ¥è¯¢ï¼šä¸€æ¬¡è·å–æ‰€æœ‰åŒ»ç”Ÿåˆ—è¡¨</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> List&lt;Doctor&gt; <span class="hljs-title function_">selectAllOnce</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> doctorMapper.selectAll();<br>    &#125;<br><br>    <span class="hljs-comment">// æŸ¥è¯¢ï¼šä¸€æ¬¡è·å–æ‰€æœ‰åŒ»ç”Ÿåˆ—è¡¨å¹¶åˆ†é¡µ</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Result <span class="hljs-title function_">selectAll</span><span class="hljs-params">(<span class="hljs-type">int</span> current ,<span class="hljs-type">int</span> size)</span> &#123;<br>        Page&lt;Doctor&gt; doctors = PageHelper.startPage(current, size);<br>        doctorMapper.selectAll();<br>        <span class="hljs-type">Result</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Result</span>();<br>        result.setData(doctors.getResult());<br>        result.setTotal(doctors.getTotal());<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br><br>    <span class="hljs-comment">// æŸ¥è¯¢ï¼šæ ¹æ®ç§‘å®¤åæŸ¥è¯¢åŒ»ç”Ÿ</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> List&lt;Doctor&gt; <span class="hljs-title function_">selectByDepartment</span><span class="hljs-params">(String department)</span> &#123;<br>        <span class="hljs-keyword">return</span> doctorMapper.selectByDepartment(department);<br>    &#125;<br>    <br>    <span class="hljs-comment">// æ¨¡ç³ŠæŸ¥è¯¢ï¼šæ ¹æ®åŒ»ç”Ÿåè¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢å¹¶åˆ†ç±»</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Result <span class="hljs-title function_">search</span><span class="hljs-params">(Integer current, Integer size, String val)</span> &#123;<br>        Page&lt;Doctor&gt; doctors = PageHelper.startPage(current, size);<br>        doctorMapper.search(val);<br>        <span class="hljs-type">Result</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Result</span>();<br>        result.setData(doctors.getResult());<br>        result.setTotal(doctors.getTotal());<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>åœ¨controllerä¸­æ–°å»ºDoctorControllerç±»ï¼Œå†…å®¹å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.xbb.controller;<br><br><span class="hljs-keyword">import</span> com.xbb.entity.Doctor;<br><span class="hljs-keyword">import</span> com.xbb.entity.User;<br><span class="hljs-keyword">import</span> com.xbb.service.impl.DoctorServiceImpl;<br><span class="hljs-keyword">import</span> com.xbb.service.impl.UserServiceImpl;<br><span class="hljs-keyword">import</span> com.xbb.utils.Result;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestBody;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestParam;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RestController;<br><br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-meta">@RestController</span><br><span class="hljs-meta">@RequestMapping(value = &quot;/doctor&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DoctorController</span> &#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> DoctorServiceImpl doctorService;<br><br>    <span class="hljs-comment">// æ·»åŠ åŒ»ç”Ÿ</span><br>    <span class="hljs-meta">@RequestMapping(value = &quot;/addDoctor&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">addDoctor</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> Doctor doctor)</span>&#123;<br>        <span class="hljs-keyword">return</span> doctorService.addDoctor(doctor);<br>    &#125;<br><br>    <span class="hljs-comment">// åˆ é™¤åŒ»ç”Ÿ</span><br>    <span class="hljs-meta">@RequestMapping(value = &quot;/deleteDoctor&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">deleteDoctor</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam</span> Long id)</span>&#123;<br>        <span class="hljs-keyword">return</span> doctorService.deleteDoctor(id);<br>    &#125;<br><br>    <span class="hljs-comment">// ä¿®æ”¹åŒ»ç”Ÿä¿¡æ¯</span><br>    <span class="hljs-meta">@RequestMapping(value = &quot;/updateDoctor&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">updateDoctor</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> Doctor doctor)</span>&#123;<br>        <span class="hljs-keyword">return</span> doctorService.updateDoctor(doctor);<br>    &#125;<br>    <br>    <span class="hljs-comment">// ä¸€æ¬¡è·å–æ‰€æœ‰åŒ»ç”Ÿåˆ—è¡¨</span><br>    <span class="hljs-meta">@RequestMapping(value = &quot;selectAllOnce&quot;)</span><br>    <span class="hljs-keyword">public</span> List&lt;Doctor&gt; <span class="hljs-title function_">selectAllOnce</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> doctorService.selectAllOnce();<br>    &#125;<br>    <br>    <span class="hljs-comment">// è·å–æ‰€æœ‰åŒ»ç”Ÿå¹¶åˆ†é¡µ</span><br>    <span class="hljs-meta">@RequestMapping(value = &quot;/selectAll&quot;)</span><br>    <span class="hljs-keyword">public</span> Result <span class="hljs-title function_">selectAll</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam</span> Integer current,<span class="hljs-meta">@RequestParam</span> Integer size)</span>&#123;<br>        <span class="hljs-keyword">return</span> doctorService.selectAll(current,size);<br>    &#125;<br><br>    <span class="hljs-comment">// æ ¹æ®ç§‘å®¤åæŸ¥è¯¢åŒ»ç”Ÿåˆ—è¡¨</span><br>    <span class="hljs-meta">@RequestMapping(value=&quot;/selectByDepartment&quot;)</span><br>    <span class="hljs-keyword">public</span> List&lt;Doctor&gt; <span class="hljs-title function_">selectByDepartment</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam</span> String department)</span>&#123;<br>        <span class="hljs-keyword">return</span> doctorService.selectByDepartment(department);<br>    &#125;<br>    <br>    <span class="hljs-comment">// æ¨¡ç³ŠæŸ¥è¯¢å¹¶åˆ†é¡µ</span><br>    <span class="hljs-meta">@RequestMapping(value = &quot;/search&quot;)</span><br>    <span class="hljs-keyword">public</span> Result <span class="hljs-title function_">search</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam</span> Integer current,<span class="hljs-meta">@RequestParam</span> Integer size,<span class="hljs-meta">@RequestParam</span> String val)</span>&#123;<br>        <span class="hljs-keyword">return</span> doctorService.search(current,size,val);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>&#x3D;&#x3D;å‰ç«¯å†…å®¹&#x3D;&#x3D;</p><p>åœ¨srcä¸‹æ–°å»ºutilsæ–‡ä»¶å¤¹ï¼Œåœ¨utilsä¸‹æ–°å»ºrequest.jsï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Message</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;element-ui&#x27;</span><br><br><span class="hljs-comment">// create an axios instance</span><br><span class="hljs-keyword">const</span> service = axios.<span class="hljs-title function_">create</span>(&#123;<br>  <span class="hljs-attr">baseURL</span>: <span class="hljs-string">&#x27;/api&#x27;</span>, <span class="hljs-comment">// url = base url + request url</span><br>  <span class="hljs-attr">timeout</span>: <span class="hljs-number">5000</span> <span class="hljs-comment">// request timeout</span><br>&#125;)<br><br>service.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(<br>  <span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> res = response.<span class="hljs-property">data</span><br>    <span class="hljs-keyword">if</span> (res.<span class="hljs-property">code</span> !== <span class="hljs-number">200</span>) &#123;<br>      <span class="hljs-keyword">return</span> res<br>      <span class="hljs-comment">// return Promise.reject(new Error(res.message || &#x27;Error&#x27;))</span><br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-keyword">return</span> res<br>    &#125;<br>  &#125;,<br>  <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;<br>    <span class="hljs-title class_">Message</span>(&#123;<br>      <span class="hljs-attr">message</span>: error.<span class="hljs-property">message</span>,<br>      <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;error&#x27;</span>,<br>      <span class="hljs-attr">duration</span>: <span class="hljs-number">5</span> * <span class="hljs-number">1000</span><br>    &#125;)<br>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error)<br>  &#125;<br>)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> service<br></code></pre></td></tr></table></figure><p>åœ¨srcä¸‹æ–°å»ºapiæ–‡ä»¶å¤¹ï¼Œåœ¨apiä¸­æ–°å»ºdoctor.jsï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> request <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../utils/request&#x27;</span><br><br><span class="hljs-comment">// æ·»åŠ åŒ»ç”Ÿä¿¡æ¯</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">addDoctor</span> (data) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>(&#123;<br>    <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/doctor/addDoctor&#x27;</span>,<br>    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;post&#x27;</span>,<br>    data<br>  &#125;)<br>&#125;<br><br><span class="hljs-comment">// åˆ é™¤åŒ»ç”Ÿä¿¡æ¯</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">deleteDoctor</span> (data) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>(&#123;<br>    <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/doctor/deleteDoctor&#x27;</span>,<br>    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;post&#x27;</span>,<br>    <span class="hljs-attr">params</span>: &#123;<br>      <span class="hljs-attr">id</span>: data<br>    &#125;<br>  &#125;)<br>&#125;<br><br><span class="hljs-comment">// ä¿®æ”¹åŒ»ç”Ÿä¿¡æ¯</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">editDoctor</span> (data) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>(&#123;<br>    <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/doctor/updateDoctor&#x27;</span>,<br>    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;post&#x27;</span>,<br>    data<br>  &#125;)<br>&#125;<br><br><span class="hljs-comment">// ä¸€æ¬¡æ€§è·å–æ‰€æœ‰åŒ»ç”Ÿ</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getDoctorOnce</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>(&#123;<br>    <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/doctor/selectAllOnce&#x27;</span>,<br>    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;get&#x27;</span><br>  &#125;)<br>&#125;<br><br><span class="hljs-comment">// è·å–æ‰€æœ‰åŒ»ç”Ÿå¹¶åˆ†é¡µ</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getDoctor</span> (data) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>(&#123;<br>    <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/doctor/selectAll&#x27;</span>,<br>    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;get&#x27;</span>,<br>    <span class="hljs-attr">params</span>: data<br>  &#125;)<br>&#125;<br><br><span class="hljs-comment">// æ ¹æ®ç§‘å®¤åè·å–åŒ»ç”Ÿ</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getDoctorByDepartment</span> (department) &#123;<br>  <span class="hljs-keyword">return</span> request (&#123;<br>    <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/doctor/selectByDepartment&#x27;</span>,<br>    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;get&#x27;</span>,<br>    <span class="hljs-attr">params</span>: &#123;<br>      <span class="hljs-attr">department</span>: department<br>    &#125;<br>  &#125;)<br>&#125;<br><br><span class="hljs-comment">// æ ¹æ®åŒ»ç”Ÿåæ¨¡ç³Šæœç´¢</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">searchByDoctorName</span>(<span class="hljs-params">val,current,size</span>)&#123;<br>  <span class="hljs-keyword">return</span> request (&#123;<br>    <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/doctor/search&#x27;</span>,<br>    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;get&#x27;</span>,<br>    <span class="hljs-attr">params</span>: &#123;<br>        val : val,<br>        current : current,<br>        <span class="hljs-attr">size</span>: size<br>    &#125;<br>  &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨srcä¸‹æ–°å»ºadminï¼Œadminä¸‹æ–°å»ºindex.vueå’Œsubadminæ–‡ä»¶å¤¹ï¼Œsubadminæ–‡ä»¶å¤¹ç»§ç»­æ–°å»ºDoctor.vue</p><p>Doctor.vueå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;!-- templateé‡Œçš„æ‰€æœ‰ä¸œè¥¿å¿…é¡»ç”¨ä¸€ä¸ªdivåŒ…è£¹ï¼Œè§„å®š --&gt;<br>  &lt;div&gt;<br>    &lt;div class=&quot;tab-container&quot;&gt;<br>      &lt;!-- æ·»åŠ æŒ‰é’®ï¼šæ ·å¼ã€å›¾æ ‡ã€ç‚¹å‡»äº‹ä»¶ --&gt;  <br>      &lt;el-button<br>        type=&quot;primary&quot;<br>        icon=&quot;el-icon-edit&quot;<br>        @click=&quot;handleCreate&quot;<br>      &gt;æ·»åŠ <br>      &lt;/el-button&gt;<br>      &lt;br&gt;<br>      &lt;!-- element-uiçš„å¼¹æ¡†ï¼ŒdialogFormVisibleé»˜è®¤ä¸ºfalse --&gt;<br>      &lt;el-dialog :visible.sync=&quot;dialogFormVisible&quot;&gt;<br>        &lt;!-- è¡¨å•ï¼šå‘åç«¯æäº¤æ•°æ®ï¼Œå±æ€§ï¼šmodelï¼šv-bind:modelçš„ç¼©å†™ï¼Œå°†è¡¨å•æ•°æ®ç»‘å®šåˆ°doctorFormï¼›å…ƒç´ ç»‘å®šrefä¹‹åï¼Œç›´æ¥é€šè¿‡this.$refså³å¯è°ƒç”¨ï¼›ï¼šrulesï¼šå†™è¡¨å•é¡¹æäº¤è§„åˆ™ï¼›label-position=&quot;left&quot;ï¼šæ ‡ç­¾æ”¾åœ¨å·¦è¾¹--&gt;<br>        &lt;el-form<br>          :model=&quot;doctorForm&quot;<br>          ref=&quot;doctorForm&quot;<br>          :rules=&quot;rules&quot;<br>          label-position=&quot;left&quot;<br>        &gt;<br>            <br>          &lt;!-- el-form-itemå³ä¸ºè¡¨å•é¡¹ --&gt;<br>          &lt;el-form-item label=&quot;å§“å&quot; prop=&quot;name&quot;&gt;<br>            &lt;el-input v-model=&quot;doctorForm.name&quot;&gt;&lt;/el-input&gt;<br>          &lt;/el-form-item&gt;<br>            <br>          &lt;el-form-item label=&quot;æ€§åˆ«&quot; prop=&quot;sex&quot;&gt;<br>            &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>            &lt;el-radio v-model=&quot;doctorForm.sex&quot; label=&quot;ç”·&quot;&gt;ç”·&lt;/el-radio&gt;<br>            &lt;el-radio v-model=&quot;doctorForm.sex&quot; label=&quot;å¥³&quot;&gt;å¥³&lt;/el-radio&gt;<br>          &lt;/el-form-item&gt;<br>            <br>          &lt;el-form-item label=&quot;èº«ä»½è¯å·&quot; prop=&quot;idCard&quot;&gt;<br>            &lt;el-input v-model=&quot;doctorForm.idCard&quot;&gt;&lt;/el-input&gt;<br>          &lt;/el-form-item&gt;<br>            <br>          &lt;el-form-item label=&quot;ç”µè¯å·ç &quot; prop=&quot;telephone&quot;&gt;<br>            &lt;el-input v-model=&quot;doctorForm.telephone&quot;&gt;&lt;/el-input&gt;<br>          &lt;/el-form-item&gt;<br>            <br>          &lt;el-form-item label=&quot;å¹´é¾„&quot; prop=&quot;age&quot;&gt;<br>            &lt;el-input-number v-model=&quot;doctorForm.age&quot; :min=&quot;1&quot;<br>                             :max=&quot;160&quot;&gt;&lt;/el-input-number&gt;<br>          &lt;/el-form-item&gt;<br>            <br>          &lt;el-form-item label=&quot;ç”Ÿæ—¥&quot; prop=&quot;birth&quot;&gt;<br>            &lt;el-input v-model=&quot;doctorForm.birth&quot;&gt;&lt;/el-input&gt;<br>          &lt;/el-form-item&gt;<br><br>          &lt;el-form-item label=&quot;ç§‘å®¤&quot; prop=&quot;department&quot;&gt;<br>            &lt;el-select<br>              v-model=&quot;doctorForm.department&quot;<br>              class=&quot;filter-item&quot;<br>              placeholder=&quot;é€‰æ‹©ç§‘å®¤&quot;<br>            &gt;<br>              &lt;el-option<br>                v-for=&quot;item in tabMapDepartments&quot;<br>                :key=&quot;item.key&quot;<br>                :label=&quot;item.label&quot;<br>                :value=&quot;item.key&quot;<br>              /&gt;<br>            &lt;/el-select&gt;<br>          &lt;/el-form-item&gt;<br>            <br>          &lt;el-form-item label=&quot;èŒç§°&quot; prop=&quot;sort&quot;&gt;<br>            &lt;el-select<br>              v-model=&quot;doctorForm.sort&quot;<br>              class=&quot;filter-item&quot;<br>              placeholder=&quot;é€‰æ‹©èŒç§°&quot;<br>            &gt;<br>              &lt;el-option<br>                v-for=&quot;item in tabMapSorts&quot;<br>                :key=&quot;item.key&quot;<br>                :label=&quot;item.label&quot;<br>                :value=&quot;item.key&quot;<br>              /&gt;<br>            &lt;/el-select&gt;<br>          &lt;/el-form-item&gt;<br>            <br>          &lt;el-form-item label=&quot;æŒ‚å·è´¹&quot; prop=&quot;fee&quot;&gt;<br>            &lt;el-input-number v-model=&quot;doctorForm.fee&quot; :min=&quot;0&quot;<br>                             :max=&quot;10000&quot;&gt;&lt;/el-input-number&gt;<br>          &lt;/el-form-item&gt;<br>            <br>          &lt;el-form-item label=&quot;ä¸ªäººä»‹ç»&quot; prop=&quot;introduction&quot;&gt;<br>            &lt;el-input type=&quot;textarea&quot; autosize v-model=&quot;doctorForm.introduction&quot;<br>                      style=&quot;width: 50%;&quot;&gt;&lt;/el-input&gt;<br>          &lt;/el-form-item&gt;<br><br>        &lt;/el-form&gt;<br>          <br>        &lt;!-- å¼¹å‡ºæ¡†åº•éƒ¨æŒ‰é’® --&gt;<br>        &lt;div slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;<br>          &lt;el-button @click=&quot;dialogFormVisible = false&quot;&gt;å–æ¶ˆ&lt;/el-button&gt;<br>          &lt;el-button type=&quot;primary&quot; @click=&quot; createData(&#x27;doctorForm&#x27;) &quot;&gt;ç¡®å®š&lt;/el-button&gt;<br>        &lt;/div&gt;<br>          <br>      &lt;/el-dialog&gt;<br>    &lt;/div&gt;<br><br>    &lt;div&gt;<br>      &lt;!-- è¡¨æ ¼ --&gt;<br>      &lt;el-table<br>        ref=&quot;filterTable&quot;<br>        :data=&quot;tableData&quot;<br>        stript<br>        style=&quot;width: 100%&quot;<br>        :default-sort=&quot;&#123;prop: &#x27;data&#x27;, order: &#x27;descending&#x27;&#125;&quot;<br>      &gt;<br>          <br>        &lt;!--        è¯¦æƒ…æ¡†--&gt;<br>        &lt;el-table-column type=&quot;expand&quot;&gt;<br>          &lt;template slot-scope=&quot;props&quot;&gt;<br>            &lt;el-form label-position=&quot;left&quot;<br>                     class=&quot;demo-table-expand&quot;<br>                     style=&quot;margin-left: 100px; width: 800px;&quot;&gt;<br>              &lt;el-form-item label=&quot;å§“å:&quot;&gt;<br>                &lt;span&gt;&#123;&#123; props.row.name &#125;&#125;&lt;/span&gt;<br>              &lt;/el-form-item&gt;<br>              &lt;el-form-item label=&quot;æ€§åˆ«:&quot;&gt;<br>                &lt;span&gt;&#123;&#123; props.row.sex &#125;&#125;&lt;/span&gt;<br>              &lt;/el-form-item&gt;<br>              &lt;el-form-item label=&quot;èº«ä»½è¯å·:&quot;&gt;<br>                &lt;span&gt;&#123;&#123; props.row.idCard &#125;&#125;&lt;/span&gt;<br>              &lt;/el-form-item&gt;<br>              &lt;el-form-item label=&quot;ç”µè¯å·ç :&quot;&gt;<br>                &lt;span&gt;&#123;&#123; props.row.telephone &#125;&#125;&lt;/span&gt;<br>              &lt;/el-form-item&gt;<br>              &lt;el-form-item label=&quot;å¹´é¾„:&quot;&gt;<br>                &lt;span&gt;&#123;&#123; props.row.age &#125;&#125;&lt;/span&gt;<br>              &lt;/el-form-item&gt;<br>              &lt;el-form-item label=&quot;ç”Ÿæ—¥:&quot;&gt;<br>                &lt;span&gt;&#123;&#123; props.row.birth &#125;&#125;&lt;/span&gt;<br>              &lt;/el-form-item&gt;<br>&lt;!--              &lt;el-form-item label=&quot;å¤´åƒ:&quot;&gt;--&gt;<br>&lt;!--                &lt;span&gt;&#123;&#123; props.row.image &#125;&#125;&lt;/span&gt;--&gt;<br>&lt;!--              &lt;/el-form-item&gt;--&gt;<br>              &lt;el-form-item label=&quot;èŒç§°:&quot;&gt;<br>                &lt;span&gt;&#123;&#123; props.row.sort &#125;&#125;&lt;/span&gt;<br>              &lt;/el-form-item&gt;<br>              &lt;el-form-item label=&quot;è´¹ç”¨:&quot;&gt;<br>                &lt;span&gt;&#123;&#123; props.row.fee &#125;&#125;&lt;/span&gt;<br>              &lt;/el-form-item&gt;<br>              &lt;el-form-item label=&quot;ç§‘å®¤:&quot;&gt;<br>                &lt;span&gt;&#123;&#123; props.row.department &#125;&#125;&lt;/span&gt;<br>              &lt;/el-form-item&gt;<br>              &lt;el-form-item label=&quot;ä¸ªäººä»‹ç»:&quot; style=&quot;width: 700px;&quot;&gt;<br>                &lt;span&gt;&#123;&#123; props.row.introduction &#125;&#125;&lt;/span&gt;<br>              &lt;/el-form-item&gt;<br>            &lt;/el-form&gt;<br>          &lt;/template&gt;<br>        &lt;/el-table-column&gt;<br><br>        &lt;!--        ä¸»è¦è¡¨å•--&gt;<br>        &lt;el-table-column<br>          prop=&quot;name&quot;<br>          label=&quot;å§“å&quot;<br>          width=&quot;100&quot;<br>        &gt;<br>          &lt;template slot-scope=&quot;scope&quot;&gt;<br>            &lt;el-popover trigger=&quot;hover&quot; placement=&quot;top&quot;&gt;<br>              &lt;p&gt;å§“åï¼š&#123;&#123; scope.row.name &#125;&#125;&lt;/p&gt;<br>              &lt;p&gt;åŒ»ç”Ÿä»‹ç»ï¼š&#123;&#123; scope.row.introduction &#125;&#125;&lt;/p&gt;<br>              &lt;div slot=&quot;reference&quot; class=&quot;name-wrapper&quot;&gt;<br>                &lt;el-tag size=&quot;medium&quot;&gt;&#123;&#123; scope.row.name &#125;&#125;&lt;/el-tag&gt;<br>              &lt;/div&gt;<br>            &lt;/el-popover&gt;<br>          &lt;/template&gt;<br>        &lt;/el-table-column&gt;<br><br>        &lt;el-table-column<br>          prop=&quot;sex&quot;<br>          label=&quot;æ€§åˆ«&quot;<br>          width=&quot;70&quot;<br>          :sex=&quot;sex&quot;<br>        &gt;&lt;/el-table-column&gt;<br><br>        &lt;el-table-column<br>          prop=&quot;sort&quot;<br>          label=&quot;èŒç§°&quot;<br>          width=&quot;150&quot;<br>          :sort=&quot;sort&quot;<br>        &gt;&lt;/el-table-column&gt;<br><br>        &lt;el-table-column<br>          prop=&quot;age&quot;<br>          label=&quot;å¹´é¾„&quot;<br>          width=&quot;100&quot;<br>          :age=&quot;age&quot;<br>        &gt;&lt;/el-table-column&gt;<br><br>        &lt;el-table-column<br>          prop=&quot;department&quot;<br>          label=&quot;ç§‘å®¤&quot;<br>          width=&quot;150&quot;<br>          :filters=&quot;[<br>            &#123; text : &#x27;ç¥ç»å†…ç§‘&#x27;, value : &#x27;ç¥ç»å†…ç§‘&#x27;&#125;,<br>            &#123; text : &#x27;å†…ç§‘&#x27;, value : &#x27;å†…ç§‘&#x27;&#125;,<br>            &#123; text : &#x27;å¤–ç§‘&#x27;, value : &#x27;å¤–ç§‘&#x27;&#125;,<br>            &#123; text : &#x27;å¦‡äº§ç§‘&#x27;, value : &#x27;å¦‡äº§ç§‘&#x27;&#125;,<br>            &#123; text : &#x27;å„¿ç§‘&#x27;, value : &#x27;å„¿ç§‘&#x27;&#125;,<br>            &#123; text : &#x27;çœ¼ç§‘&#x27;, value : &#x27;çœ¼ç§‘&#x27;&#125;,<br>            &#123; text : &#x27;è€³é¼»å–‰ç§‘&#x27;, value : &#x27;è€³é¼»å–‰ç§‘&#x27;&#125;,<br>            &#123; text : &#x27;å£è…”ç§‘&#x27;, value : &#x27;å£è…”ç§‘&#x27;&#125;,<br>            &#123; text : &#x27;çš®è‚¤ç§‘&#x27;, value : &#x27;çš®è‚¤ç§‘&#x27;&#125;,<br>            &#123; text : &#x27;è‚¿ç˜¤ç§‘&#x27;, value : &#x27;è‚¿ç˜¤ç§‘&#x27;&#125;,<br>            &#123; text : &#x27;ä¸­åŒ»ç§‘&#x27;, value : &#x27;ä¸­åŒ»ç§‘&#x27;&#125;,<br>            &#123; text : &#x27;ä½“æ£€ä¸­å¿ƒ&#x27;, value : &#x27;ä½“æ£€ä¸­å¿ƒ&#x27;&#125;<br>          ]&quot;<br>          :filter-method=&quot;filterTag&quot;<br>          filter-placement=&quot;bottom-end&quot;<br>        &gt;<br>          &lt;template slot-scope=&quot;scope&quot;&gt;<br>            &lt;el-tag&gt;&#123;&#123; scope.row.department &#125;&#125;<br>            &lt;/el-tag&gt;<br>          &lt;/template&gt;<br>        &lt;/el-table-column&gt;<br><br>        &lt;el-table-column<br>          fixed=&quot;right&quot;<br>          label=&quot;æ“ä½œ&quot;<br>          width=&quot;200&quot;<br>        &gt;<br>          &lt;template slot=&quot;header&quot; slot-scope=&quot;scope&quot;&gt;<br>            &lt;el-input<br>              v-model=&quot;val&quot;<br>              size=&quot;medium&quot;<br>              placeholder=&quot;è¾“å…¥å…³é”®å­—æœç´¢&quot;<br>              @keyup.enter.native=&quot;search&quot;/&gt;<br>            &lt;el-button style=&quot;margin-right: 10px&quot; @click=&quot;search()&quot;&gt;æœç´¢&lt;/el-button&gt;<br>          &lt;/template&gt;<br><br>          &lt;template slot-scope=&quot;scope&quot;&gt;<br>            &lt;el-button<br>              size=&quot;mini&quot;<br>              @click=&quot;handleEdit(scope.$index, scope.row)&quot;<br>            &gt;ç¼–è¾‘<br>            &lt;/el-button&gt;<br>            &lt;el-button<br>              size=&quot;mini&quot;<br>              type=&quot;danger&quot;<br>              @click=&quot;handleDelete(scope.$index, scope.row)&quot;<br>            &gt;åˆ é™¤<br>            &lt;/el-button&gt;<br>          &lt;/template&gt;<br>        &lt;/el-table-column&gt;<br>      &lt;/el-table&gt;<br>      &lt;pagination<br>        v-show=&quot;total &gt; 0&quot;<br>        :total=&quot;total&quot;<br>        :page.sync=&quot;page.current&quot;<br>        :limit.sync=&quot;page.size&quot;<br>        @pagination=&quot;getDoctor&quot;/&gt;<br>    &lt;/div&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br><br>import &#123;<br>  deleteDoctor,<br>  addDoctor,<br>  getDoctor,<br>  editDoctor,<br>  searchByDoctorName, addDoctorUser<br>&#125; from &#x27;@/api/admin&#x27;<br>import &#123; register &#125; from &#x27;@/api/register&#x27;<br>import Pagination from &#x27;@/components/Pagination&#x27;<br><br>export default &#123;<br>  name: &#x27;Doctor&#x27;,<br>  edit: false,<br>  components: &#123;Pagination&#125;,<br>  created () &#123;<br>    this.getDoctor()<br>  &#125;,<br>  data () &#123;<br>    return &#123;<br>      fileList: [],<br>      val: &#x27;&#x27;,<br>      tableData: [],<br>      total: 10,<br>      page: &#123;<br>        current: 1,<br>        size: 10<br>      &#125;,<br>      dialogFormVisible: false,<br>      doctorForm: &#123;<br>        name: &#x27;&#x27;,<br>        sex: &#x27;&#x27;,<br>        idCard: &#x27;&#x27;,<br>        age: &#x27;&#x27;,<br>        birth: &#x27;&#x27;,<br>        image: &#x27;&#x27;,<br>        introduction: &#x27;&#x27;,<br>        department: &#x27;&#x27;,<br>        sort: &#x27;&#x27;,<br>        fee: &#x27;&#x27;,<br>        telephone: &#x27;&#x27;,<br>        password: &#x27;&#x27;,<br>        flag: &#x27;&#x27;<br>      &#125;,<br>      // è¡¨å•éªŒè¯ï¼Œéœ€è¦åœ¨el-form-itemå…ƒç´ ä¸­å¢åŠ propå±æ€§<br>      rules: &#123;<br>        name: [<br>          &#123;required: true, message: &#x27;å§“åä¸å¯ä¸ºç©º&#x27;, trigger: &#x27;blur&#x27;&#125;<br>        ],<br>        sex: [<br>          &#123;required: true, message: &#x27;æ€§åˆ«ä¸å¯ä¸ºç©º&#x27;, trigger: &#x27;blur&#x27;&#125;<br>        ],<br>        idCard: [<br>          &#123;required: true, message: &#x27;èº«ä»½è¯å·ä¸å¯ä¸ºç©º&#x27;, trigger: &#x27;blur&#x27;&#125;<br>        ],<br>        age: [<br>          &#123;required: true, message: &#x27;å¹´é¾„ä¸å¯ä¸ºç©º&#x27;, trigger: &#x27;blur&#x27;&#125;<br>        ],<br>        birth: [<br>          &#123;required: true, message: &#x27;ç”Ÿæ—¥ä¸å¯ä¸ºç©º&#x27;, trigger: &#x27;blur&#x27;&#125;<br>        ],<br>        // image: [<br>        //   &#123;required: true, message: &#x27;ç…§ç‰‡ä¸å¯ä¸ºç©º&#x27;, trigger: &#x27;blur&#x27;&#125;<br>        // ],<br>        introduction: [<br>          &#123;required: true, message: &#x27;ä¸ªäººä»‹ç»ä¸å¯ä¸ºç©º&#x27;, trigger: &#x27;blur&#x27;&#125;<br>        ],<br>        sort: [<br>          &#123;required: true, message: &#x27;èŒç§°ä¸å¯ä¸ºç©º&#x27;,  trigger: &#x27;blur&#x27;&#125;<br>        ],<br>        department: [<br>          &#123;required: true, message: &#x27;ç§‘å®¤ä¸å¯ä¸ºç©º&#x27;,  trigger: &#x27;blur&#x27;&#125;<br>        ],<br>        fee: [<br>          &#123;required: true, message: &#x27;è´¹ç”¨ä¸å¯ä¸ºç©º&#x27;, trigger: &#x27;blur&#x27;&#125;<br>        ],<br>        telephone: [<br>          &#123;required: true, message: &#x27;ç”µè¯ä¸å¯ä¸ºç©º&#x27;, trigger: &#x27;blur&#x27;&#125;<br>        ],<br>        password: [<br>          &#123;required: true, message: &#x27;å¯†ç ä¸å¯ä¸ºç©º&#x27;, trigger: &#x27;blur&#x27;&#125;<br>        ],<br>      &#125;,<br>      // å¯¹è¯æ¡†å’Œæ˜¾ç¤º<br>      dialogVisible: false,<br>      tabMapDepartments: [<br>        &#123;label: &#x27;ç¥ç»å†…ç§‘&#x27;, key: &#x27;ç¥ç»å†…ç§‘&#x27;&#125;,<br>        &#123;label: &#x27;å†…ç§‘&#x27;, key: &#x27;å†…ç§‘&#x27;&#125;,<br>        &#123;label: &#x27;å¤–ç§‘&#x27;, key: &#x27;å¤–ç§‘&#x27;&#125;,<br>        &#123;label: &#x27;å¦‡äº§ç§‘&#x27;, key: &#x27;å¦‡äº§ç§‘&#x27;&#125;,<br>        &#123;label: &#x27;å„¿ç§‘&#x27;, key: &#x27;å„¿ç§‘&#x27;&#125;,<br>        &#123;label: &#x27;çœ¼ç§‘&#x27;, key: &#x27;çœ¼ç§‘&#x27;&#125;,<br>        &#123;label: &#x27;è€³é¼»å–‰ç§‘&#x27;, key: &#x27;è€³é¼»å–‰ç§‘&#x27;&#125;,<br>        &#123;label: &#x27;å£è…”ç§‘&#x27;, key: &#x27;å£è…”ç§‘&#x27;&#125;,<br>        &#123;label: &#x27;çš®è‚¤ç§‘&#x27;, key: &#x27;çš®è‚¤ç§‘&#x27;&#125;,<br>        &#123;label: &#x27;è‚¿ç˜¤ç§‘&#x27;, key: &#x27;è‚¿ç˜¤ç§‘&#x27;&#125;,<br>        &#123;label: &#x27;ä¸­åŒ»ç§‘&#x27;, key: &#x27;ä¸­åŒ»ç§‘&#x27;&#125;,<br>        &#123;label: &#x27;ä½“æ£€ä¸­å¿ƒ&#x27;, key: &#x27;ä½“æ£€ä¸­å¿ƒ&#x27;&#125;,<br>      ],<br>      tabMapSorts: [<br>        &#123;label: &#x27;ç§‘å®¤ä¸»ä»»&#x27;, key: &#x27;ç§‘å®¤ä¸»ä»»&#x27;&#125;,<br>        &#123;label: &#x27;ç§‘å®¤å‰¯ä¸»ä»»&#x27;, key: &#x27;ç§‘å®¤å‰¯ä¸»ä»»&#x27;&#125;,<br>        &#123;label: &#x27;ç§‘å®¤ä¸“å®¶&#x27;, key: &#x27;ç§‘å®¤ä¸“å®¶&#x27;&#125;,<br>        &#123;label: &#x27;ä¸»æ²»åŒ»å¸ˆ&#x27;, key: &#x27;ä¸»æ²»åŒ»å¸ˆ&#x27;&#125;,<br>        &#123;label: &#x27;å‰¯ä¸»æ²»åŒ»å¸ˆ&#x27;, key: &#x27;å‰¯ä¸»æ²»åŒ»å¸ˆ&#x27;&#125;,<br>      ],<br>    &#125;<br>  &#125;,<br>  methods: &#123;<br>    getDoctor () &#123;<br>      getDoctor(this.page).then((res) =&gt; &#123;<br>        this.tableData = res.data<br>        this.total = res.total<br>      &#125;)<br>    &#125;,<br>    search () &#123;<br>      searchByDoctorName(this.val, this.page.current, this.page.size).then((res) =&gt; &#123;<br>        this.tableData = res.data<br>        this.total = res.total<br>      &#125;)<br>    &#125;,<br>    handleCreate () &#123;<br>      this.dialogFormVisible = true<br>      this.doctorForm = &#123;<br>        name: &#x27;&#x27;,<br>        sex: &#x27;&#x27;,<br>        idCard: &#x27;&#x27;,<br>        telephone: &#x27;&#x27;,<br>        age: &#x27;&#x27;,<br>        birth: &#x27;&#x27;,<br>        image: &#x27;&#x27;,<br>        sort: &#x27;&#x27;,<br>        department: &#x27;&#x27;,<br>        fee: &#x27;&#x27;,<br>        introduction: &#x27;&#x27;,<br>        password: &#x27;&#x27;,<br>        flag: &#x27;&#x27;<br>      &#125;<br>    &#125;,<br>    createData (formName) &#123;<br>      this.$refs[formName].validate((vaild) =&gt; &#123;<br>        if (vaild) &#123;<br>          if (this.editDoctor) &#123;<br>            // ä¸ºè¡¨å•ç»‘å®šéªŒè¯åŠŸèƒ½<br>            editDoctor(this.doctorForm)<br>            this.editDoctor = false<br>            this.$notify(&#123;<br>              title: &#x27;æç¤ºä¿¡æ¯&#x27;,<br>              message: &#x27;ä¿®æ”¹æˆåŠŸ&#x27;,<br>              type: &#x27;success&#x27;<br>            &#125;)<br>            this.getDoctor()<br>            this.getDoctor()<br>            this.dialogFormVisible = false<br>          &#125; else &#123;<br>            console.log(&#x27;start&#x27;)<br>            addDoctor(this.doctorForm)<br>            addDoctorUser(this.doctorForm.telephone, this.doctorForm.password, this.doctorForm.name, this.doctorForm.flag)<br>            this.editDoctor = false<br>            this.$notify(&#123;<br>              title: &#x27;æç¤ºä¿¡æ¯&#x27;,<br>              message: &#x27;æ·»åŠ æˆåŠŸ&#x27;,<br>              type: &#x27;success&#x27;<br>            &#125;)<br>            this.getDoctor()<br>            this.getDoctor()<br>            this.dialogFormVisible = false<br>          &#125;<br>        &#125; else &#123;<br>          this.dialogVisible = true<br>          this.getDoctor()<br>          this.getDoctor()<br>          return false<br>        &#125;<br>      &#125;)<br>    &#125;,<br>    sex (row, column) &#123;<br>      return row.sex<br>    &#125;,<br>    department (row, column) &#123;<br>      return row.department<br>    &#125;,<br>    sort (row, column) &#123;<br>      return row.sort<br>    &#125;,<br>    telephone (row, column) &#123;<br>      return row.telephone<br>    &#125;,<br>    age (row, column) &#123;<br>      return row.age<br>    &#125;,<br>    image (row, column) &#123;<br>      return row.image<br>    &#125;,<br>    handleEdit (index, row) &#123;<br>      this.dialogFormVisible = true<br>      this.editDoctor = true<br>      this.doctorForm = row<br>    &#125;,<br>    handleDelete (index, row) &#123;<br>      this.$confirm(&#x27;ç¡®è®¤åˆ é™¤ï¼Ÿ&#x27;, &#x27;ç¡®è®¤ä¿¡æ¯&#x27;, &#123;<br>        distinguishCancelAndClose: true,<br>        confirmButtonText: &#x27;åˆ é™¤&#x27;,<br>        cancelButtonText: &#x27;æ”¾å¼ƒåˆ é™¤&#x27;<br>      &#125;).then(() =&gt; &#123;<br>        deleteDoctor(row.id)<br>        this.getDoctor()<br>        this.$message(&#123;<br>          type: &#x27;info&#x27;,<br>          message: &#x27;åˆ é™¤æˆåŠŸ&#x27;<br>        &#125;);<br>      &#125;).catch(action =&gt; &#123;<br>      &#125;);<br>    &#125;,<br>    //æ ¹æ®æ ‡ç­¾åˆ·æ–°<br>    filterHandler(value, row, column) &#123;<br>      const property = column[&#x27;property&#x27;];<br>      return row[property] === value;<br>    &#125;,<br>    filterTag(value, row) &#123;<br>      console.log(this.tableData)<br>      return row.department=== value<br>    &#125;,<br>    //æ¸…é™¤æ ‡ç­¾<br>    clearFilter() &#123;<br>      this.$refs.filterTable.clearFilter()<br>    &#125;,<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style scoped&gt;<br>.demo-table-expand &#123;<br>  font-size: 0;<br>&#125;<br><br>.demo-table-expand label &#123;<br>  width: 90px;<br>  color: #99a9bf;<br>&#125;<br><br>.demo-table-expand .el-form-item &#123;<br>  margin-right: 0;<br>  margin-bottom: 0;<br>  width: 50%;<br>&#125;<br><br>.block &#123;<br>  position: absolute;<br>  left: 30%;<br>  margin: 30px auto;<br>&#125;<br>&lt;/style&gt;<br><br></code></pre></td></tr></table></figure><p>index.vueå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div&gt;<br>      &lt;el-header style=&quot;text-align: right; fontsize: 20px&quot;&gt;<br>        &lt;el-dropdown&gt;<br>          &lt;span&gt;ä½ å¥½ï¼Œç®¡ç†å‘˜&lt;/span&gt;<br>        &lt;/el-dropdown&gt;<br>      &lt;/el-header&gt;<br>    <br>      &lt;el-container&gt;<br>      &lt;el-aside width=&quot;200px&quot;&gt;<br>        &lt;div class=&quot;title&quot;&gt;&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ç®¡ ç† å‘˜ å å°&lt;/div&gt;<br>        &lt;br&gt;&lt;br&gt;<br>        &lt;el-menu&gt;<br>          &lt;el-menu-item index=&quot;5&quot; @click=&quot;toDoctor()&quot;&gt;<br>              &lt;i class=&quot;el-icon-setting&quot;&gt;&lt;/i&gt;<br>              &lt;template slot=&quot;title&quot;&gt;åŒ»ç”Ÿä¿¡æ¯ç®¡ç†&lt;/template&gt;<br>          &lt;/el-menu-item&gt;<br>        &lt;/el-menu&gt;<br>      &lt;/el-aside&gt;<br><br>      &lt;el-container&gt;<br>        &lt;el-main class=&quot;main&quot;&gt;<br>          &lt;!--          æ­¤å¤„å±•ç¤ºè§†å›¾--&gt;<br>          &lt;transition name=&quot;scale&quot; mode=&quot;out-in&quot;&gt;<br>            &lt;router-view/&gt;<br>          &lt;/transition&gt;<br>        &lt;/el-main&gt;<br>      &lt;/el-container&gt;<br><br>    &lt;/el-container&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import &#123;getCurrent, logout&#125; from &#x27;@/api/login&#x27;<br><br>export default &#123;<br>  name: &#x27;Admin&#x27;,<br>  data () &#123;<br>    return &#123;<br>      circleUrl: &#x27;https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png&#x27;<br>    &#125;<br>  &#125;,<br>  mounted() &#123;<br>    this.getCurrent()<br>  &#125;,<br>  methods: &#123;<br>    toDoctor () &#123;<br>      this.$router.push(&#x27;/admin/doctor&#x27;)<br>    &#125;,<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style scoped&gt;<br><br>.title &#123;<br>  height: 100px;<br>  width: 200px;<br>  background-color: #3d504c;<br>  color: white;<br>&#125;<br><br>.main &#123;<br>  height: 100%;<br>  /*border-radius: 30px;*/<br>  background-image: url(&quot;../../assets/background.png&quot;);<br>  background-size: 270px;<br>  background-color: #ebf3f2;<br>  /*text-align: center;*/<br>&#125;<br><br>.scale-enter, .scale-leave-to &#123;<br>  transform: scale(0)<br>&#125;<br>.scale-leave, .scale-enter-to &#123;<br>  transform: scale(1)<br>&#125;<br>.scale-enter-active, .scale-leave-active &#123;<br>  transition: all .5s<br>&#125;<br><br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><p>vueä¸­æ‰€æœ‰çš„é¡µé¢éƒ½éœ€è¦é…ç½®è·¯ç”±ï¼Œä»¥ä¸Šè¿°ä¸¤ä¸ªé¡µé¢ä¸ºä¾‹ï¼š</p><p>åœ¨routerä¸­å›½æ–°å»ºmodulesæ–‡ä»¶å¤¹ï¼Œåœ¨modulesæ–‡ä»¶å¤¹ä¸­æ–°å»ºadmin.jsï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Admin</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/views/admin/index&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Doctor</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/views/admin/subadmin/Doctor&#x27;</span><br><br><span class="hljs-keyword">const</span> adminRouter = &#123;<br>  <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/admin&#x27;</span>,<br>  <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Admin&#x27;</span>,<br>  <span class="hljs-attr">component</span>: <span class="hljs-title class_">Admin</span>,<br>  <span class="hljs-attr">meta</span>: &#123;<br>    <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;ç®¡ç†å‘˜ç•Œé¢&#x27;</span>,<br>    <span class="hljs-attr">icon</span>: <span class="hljs-string">&#x27;el-icon-s-help&#x27;</span><br>  &#125;,<br>  <span class="hljs-attr">children</span>: [<br>    &#123;<br>      <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;doctor&#x27;</span>,<br>      <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Doctor&#x27;</span>,<br>      <span class="hljs-attr">component</span>: <span class="hljs-title class_">Doctor</span>,<br>      <span class="hljs-attr">meta</span>: &#123;<br>        <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;åŒ»ç”Ÿä¿¡æ¯ç®¡ç†&#x27;</span><br>      &#125;<br>    &#125;<br>  ]<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> adminRouter<br></code></pre></td></tr></table></figure><p>router&#x2F;index.jsä¸­å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-comment">// å¯¼å…¥vue-router</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Router</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span><br><span class="hljs-comment">// å¯¼å…¥ç»„ä»¶</span><br><span class="hljs-keyword">import</span> adminRouter <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/router/modules/admin&#x27;</span><br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">Router</span>)<br><br><span class="hljs-comment">// å¯¼å‡º</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Router</span>(&#123;<br>  <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;history&#x27;</span>,<br>  <span class="hljs-attr">routes</span>: [<br>    adminRouter,<br>  ]<br>&#125;)<br></code></pre></td></tr></table></figure><p>åŸºæœ¬å®Œæˆï¼Œå¯é€šè¿‡<a href="http://localhost:8080/admin/doctor%E6%9D%A5%E6%9F%A5%E7%9C%8B%E6%95%88%E6%9E%9C">http://localhost:8080/admin/doctoræ¥æŸ¥çœ‹æ•ˆæœ</a></p><h3 id="2ã€ç™»å½•æ³¨å†Œä¿®æ”¹å¯†ç åŠè·å–å½“å‰ç”¨æˆ·"><a href="#2ã€ç™»å½•æ³¨å†Œä¿®æ”¹å¯†ç åŠè·å–å½“å‰ç”¨æˆ·" class="headerlink" title="2ã€ç™»å½•æ³¨å†Œä¿®æ”¹å¯†ç åŠè·å–å½“å‰ç”¨æˆ·"></a>2ã€ç™»å½•æ³¨å†Œä¿®æ”¹å¯†ç åŠè·å–å½“å‰ç”¨æˆ·</h3><p>&#x3D;&#x3D;åç«¯&#x3D;&#x3D;</p><p>resources&#x2F;mybatis&#x2F;mappers&#x2F;UserMapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span> ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.xbb.dao.UserMapper&quot;</span>&gt;</span><br>    <br>    <span class="hljs-comment">&lt;!-- æ³¨å†Œ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;checkRegister&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;java.lang.String&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;user&quot;</span>&gt;</span><br>        select * from user_login where id=#&#123;id&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br>    <br>    <span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;addUser&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;com.xbb.entity.User&quot;</span>&gt;</span><br>        insert into user_login(id,password,flag,username) values(#&#123;id&#125;,#&#123;password&#125;,#&#123;flag&#125;,#&#123;username&#125;)<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span><br><br>   <span class="hljs-comment">&lt;!-- ç™»å½• --&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;checkLogin&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;user&quot;</span>&gt;</span><br>        select * from user_login where id=#&#123;id&#125; and password=#&#123;password&#125; and flag=#&#123;flag&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- ä¿®æ”¹å¯†ç  --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;updateUser&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;java.lang.String&quot;</span>&gt;</span><br>        update user_login set password=#&#123;password&#125; where id=#&#123;id&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p>entity&#x2F;Userï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.xbb.entity;<br><span class="hljs-keyword">import</span> lombok.Data;<br><br><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> &#123;<br>    <span class="hljs-keyword">private</span> String id;<span class="hljs-comment">//æ‰‹æœºå·</span><br>    <span class="hljs-keyword">private</span> String password;<span class="hljs-comment">//å¯†ç </span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> flag;<span class="hljs-comment">//ç”¨æˆ·èº«ä»½ï¼Œ0ä»£è¡¨ç®¡ç†å‘˜ï¼Œ1ä»£è¡¨æ‚£è€…ï¼Œ2ä»£è¡¨åŒ»ç”Ÿï¼Œ3ä»£è¡¨æŠ¤å£«</span><br>    <span class="hljs-keyword">private</span> String username;<span class="hljs-comment">//ç”¨æˆ·å</span><br>&#125;<br></code></pre></td></tr></table></figure><p>dao&#x2F;UserMapperï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.xbb.dao;<br><span class="hljs-keyword">import</span> com.xbb.entity.User;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserMapper</span> &#123;<br>    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">checkRegister</span><span class="hljs-params">(String id)</span>;<span class="hljs-comment">//åˆ¤æ–­idæ˜¯å¦å·²ç»å­˜åœ¨</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">addUser</span><span class="hljs-params">(User user)</span>;<span class="hljs-comment">//æ·»åŠ ç”¨æˆ·ï¼ˆæ³¨å†Œï¼‰</span><br>    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">checkLogin</span><span class="hljs-params">(User user)</span>;<span class="hljs-comment">//åˆ¤æ–­æ‰‹æœºå·ã€å¯†ç å’Œflagæ˜¯å¦æ­£ç¡®</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">updateUser</span><span class="hljs-params">(String id,String password)</span>;<span class="hljs-comment">//ä¿®æ”¹å¯†ç ï¼ˆç”¨æˆ·ï¼‰</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">logout</span><span class="hljs-params">()</span>;<span class="hljs-comment">//ç™»å‡º</span><br>&#125;<br></code></pre></td></tr></table></figure><p>service&#x2F;UserServiceï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserService</span> &#123;<br>    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">checkRegister</span><span class="hljs-params">(String id)</span>;<span class="hljs-comment">//åˆ¤æ–­idæ˜¯å¦å·²ç»å­˜åœ¨</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">addUser</span><span class="hljs-params">(User user)</span>;<span class="hljs-comment">//æ·»åŠ ç”¨æˆ·ï¼ˆæ³¨å†Œï¼‰</span><br>    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">checkLogin</span><span class="hljs-params">(User user)</span>;<span class="hljs-comment">//åˆ¤æ–­æ‰‹æœºå·ã€å¯†ç å’Œflagæ˜¯å¦æ­£ç¡®</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">updateUser</span><span class="hljs-params">(String id,String password)</span>;<span class="hljs-comment">//ä¿®æ”¹å¯†ç ï¼ˆç”¨æˆ·ï¼‰</span><br>    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">current</span><span class="hljs-params">()</span>;<span class="hljs-comment">//è·å–å½“å‰çš„ç™»å½•ä¿¡æ¯</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">logout</span><span class="hljs-params">()</span>;<span class="hljs-comment">//ç™»å‡º</span><br>&#125;<br></code></pre></td></tr></table></figure><p>UserServiceImplï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.xbb.service.impl;<br><br><span class="hljs-keyword">import</span> com.xbb.dao.UserMapper;<br><span class="hljs-keyword">import</span> com.xbb.entity.User;<br><span class="hljs-keyword">import</span> com.xbb.service.UserService;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Service;<br><br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserService</span> &#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> UserMapper userMapper;<br>    <span class="hljs-meta">@Autowired</span><br>    HttpServletRequest httpServletRequest;<br>    <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">checkRegister</span><span class="hljs-params">(String id)</span> &#123;<br>        <span class="hljs-keyword">return</span> userMapper.checkRegister(id);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">addUser</span><span class="hljs-params">(User user)</span> &#123;<br>        <span class="hljs-keyword">return</span> userMapper.addUser(user);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">checkLogin</span><span class="hljs-params">(User user)</span> &#123;<br>        <span class="hljs-type">User</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> userMapper.checkLogin(user);<br>        <span class="hljs-keyword">if</span> (res != <span class="hljs-literal">null</span>) httpServletRequest.getSession().setAttribute(<span class="hljs-string">&quot;id&quot;</span>, res.getId());<br>        <span class="hljs-keyword">return</span> res;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">updateUser</span><span class="hljs-params">(String id,String password)</span> &#123;<br>        <span class="hljs-keyword">return</span> userMapper.updateUser(id,password);<br>    &#125;<br>    <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">current</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> (String) httpServletRequest.getSession().getAttribute(<span class="hljs-string">&quot;id&quot;</span>);<br>        <span class="hljs-keyword">return</span> userMapper.getById(id);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">logout</span><span class="hljs-params">()</span> &#123;<br>        httpServletRequest.getSession().removeAttribute(<span class="hljs-string">&quot;id&quot;</span>);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>controller&#x2F;UserControllerï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.xbb.controller;<br><br><span class="hljs-keyword">import</span> com.xbb.entity.User;<br><span class="hljs-keyword">import</span> com.xbb.service.impl.UserServiceImpl;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.*;<br><br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-meta">@RestController</span><br><span class="hljs-meta">@RequestMapping(value = &quot;/user&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> &#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> UserServiceImpl userService;<br><br>    <span class="hljs-meta">@RequestMapping(value = &quot;/checkRegister&quot;)</span><br>    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">checkRegister</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam</span> String id)</span>&#123;<br>        <span class="hljs-keyword">return</span> userService.checkRegister(id);<br>    &#125;<br>    <br>    <span class="hljs-meta">@RequestMapping(value= &quot;/addUser&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">addUser</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> User user)</span>&#123;<br>        <span class="hljs-keyword">return</span> userService.addUser(user);<br>    &#125;<br><br>    <span class="hljs-meta">@RequestMapping(value = &quot;/checkLogin&quot;)</span><br>    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">checkLogin</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> User user)</span>&#123;<br>        <span class="hljs-keyword">return</span> userService.checkLogin(user);<br>    &#125;<br>    <br>    <span class="hljs-meta">@RequestMapping(value = &quot;/updateUser&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">updateUser</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam</span> String id,<span class="hljs-meta">@RequestParam</span> String password)</span>&#123;<br>        <span class="hljs-keyword">return</span> userService.updateUser(id,password);<br>    &#125;<br><br>    <span class="hljs-meta">@GetMapping(&quot;/current&quot;)</span><br>    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">current</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> userService.current();<br>    &#125;<br><br>    <span class="hljs-meta">@GetMapping(&quot;/logout&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">logout</span><span class="hljs-params">()</span>&#123;<br>        userService.logout();<br>    &#125;<br>    <br>    <span class="hljs-meta">@GetMapping(&quot;/current&quot;)</span><br>    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">current</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> userService.current();<br>    &#125;<br>    <br>    <span class="hljs-meta">@RequestMapping(value = &quot;/addDNUser&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">addDNUser</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam</span> String id,<span class="hljs-meta">@RequestParam</span> String password,</span><br><span class="hljs-params">                         <span class="hljs-meta">@RequestParam</span> String username,<span class="hljs-meta">@RequestParam</span> <span class="hljs-type">int</span> flag)</span>&#123;<br>        User user=<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();<br>        user.setId(id);<br>        user.setPassword(password);<br>        user.setUsername(username);<br>        user.setFlag(flag);<br>        <span class="hljs-keyword">return</span> userService.addUser(user);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>&#x3D;&#x3D;å‰ç«¯&#x3D;&#x3D;</p><p>viewsä¸‹æ–°å»ºloginæ–‡ä»¶å¤¹ï¼Œloginæ–‡ä»¶å¤¹ä¸‹æ–°å»ºLogin.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div&gt;<br>    &lt;el-form ref=&quot;loginForm&quot; :model=&quot;form&quot; :rules=&quot;rules&quot;<br>             label-width=&quot;80px&quot; class=&quot;login-box&quot;&gt;<br>      &lt;h3 class=&quot;title&quot;&gt;å°å®è´çœ‹ç—…ç—…&lt;/h3&gt;<br>      &lt;h3 class=&quot;login-title&quot;&gt;æ¬¢è¿ç™»å½•&lt;/h3&gt;<br><br>      &lt;el-form-item label=&quot;è´¦å·&quot; prop=&quot;id&quot;&gt;<br>        &lt;el-input type=&quot;text&quot; placeholder=&quot;è¯·è¾“å…¥è´¦å·&quot; v-model=&quot;form.id&quot;/&gt;<br>      &lt;/el-form-item&gt;<br><br>      &lt;el-form-item label=&quot;å¯†ç &quot; prop=&quot;password&quot;&gt;<br>         <br>        &lt;el-input type=&quot;password&quot; placeholder=&quot;è¯·è¾“å…¥å¯†ç &quot; v-model=&quot;form.password&quot;/&gt;<br>      &lt;/el-form-item&gt;<br><br>      &lt;el-radio-group v-model=&quot;form.flag&quot;&gt;<br>        &lt;el-radio :label=&quot;0&quot;&gt;ç”¨æˆ·&lt;/el-radio&gt;<br>        &lt;el-radio :label=&quot;1&quot;&gt;åŒ»ç”Ÿ&lt;/el-radio&gt;<br>        &lt;el-radio :label=&quot;2&quot;&gt;æŠ¤å£«&lt;/el-radio&gt;<br>        &lt;el-radio :label=&quot;3&quot;&gt;ç®¡ç†å‘˜&lt;/el-radio&gt;<br>      &lt;/el-radio-group&gt;<br><br>      &lt;el-form-item class=&quot;buttons&quot; style=&quot;margin-left: -60px&quot;&gt;<br>        &lt;el-button @click=&quot;toRegister()&quot;&gt;è·³è½¬æ³¨å†Œé¡µ&lt;/el-button&gt;<br>        &lt;el-button @click=&quot;toUpdatePassword()&quot;&gt;ä¿®æ”¹å¯†ç &lt;/el-button&gt;<br>        &lt;el-button type=&quot;primary&quot; @click=&quot;onSubmit(&#x27;loginForm&#x27;)&quot;&gt;ç™»å½•&lt;/el-button&gt;<br>      &lt;/el-form-item&gt;<br><br>    &lt;/el-form&gt;<br><br>    &lt;el-dialog<br>      title=&quot;æ¸©é¦¨æç¤º&quot;<br>      :visible.sync=&quot;dialogVisible&quot;<br>      width=&quot;30%&quot;&gt;<br>&lt;!--      :before-close=&quot;handleClose&quot;--&gt;<br>      &lt;span&gt;è¯·è¾“å…¥æ­£ç¡®çš„æ ¼å¼&lt;/span&gt;<br>      &lt;span slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;<br>        &lt;el-button type=&quot;primary&quot; @click=&quot;dialogVisible = false&quot;&gt;ç¡®å®š&lt;/el-button&gt;<br>      &lt;/span&gt;<br>    &lt;/el-dialog&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import &#123;login&#125; from &#x27;@/api/login&#x27;<br>export default &#123;<br>  name: &#x27;Login.vue&#x27;,<br>  data () &#123;<br>    return &#123;<br>      form: &#123;<br>        id: &#x27;&#x27;,<br>        password: &#x27;&#x27;,<br>        flag: &#x27;&#x27;<br>      &#125;,<br>      // è¡¨å•éªŒè¯ï¼Œéœ€è¦åœ¨el-form-itemå…ƒç´ ä¸­å¢åŠ propå±æ€§<br>      rules: &#123;<br>        id: [<br>          &#123;required: true, message: &#x27;è´¦å·ä¸å¯ä¸ºç©º&#x27;, trigger: &#x27;blur&#x27;&#125;<br>        ],<br>        password: [<br>          &#123;required: true, message: &#x27;å¯†ç ä¸å¯ä¸ºç©º&#x27;, trigger: &#x27;blur&#x27;&#125;<br>        ],<br>        flag: [<br>          &#123;required: true, message: &#x27;å¯†ç ä¸å¯ä¸ºç©º&#x27;, trigger: &#x27;blur&#x27;&#125;<br>        ]<br>      &#125;,<br>      // å¯¹è¯æ¡†å’Œæ˜¾ç¤º<br>      dialogVisible: false<br>    &#125;<br>  &#125;,<br>  methods: &#123;<br>    toUpdatePassword() &#123;<br>      this.$router.push(&#x27;/updatepassword&#x27;)<br>    &#125;,<br>    showPwd () &#123;<br>      if (this.passwordType === &#x27;password&#x27;) &#123;<br>        this.passwordType = &#x27;&#x27;<br>      &#125; else &#123;<br>        this.passwordType = &#x27;password&#x27;<br>      &#125;<br>      this.$nextTick(() =&gt; &#123;<br>        this.$refs.password.focus()<br>      &#125;)<br>    &#125;,<br>    onSubmit (formName) &#123;<br>      // ä¸ºè¡¨å•ç»‘å®šéªŒè¯åŠŸèƒ½<br>      this.$refs[formName].validate((vaild) =&gt; &#123;<br>        if (vaild) &#123;<br>          login(this.form).then((res) =&gt; &#123;<br>            console.log(res)<br>            if (res.id !== undefined) &#123;<br>              this.$notify(&#123;<br>                title: &#x27;æç¤ºä¿¡æ¯&#x27;,<br>                message: &#x27;ç™»å½•æˆåŠŸ&#x27;,<br>                type: &#x27;success&#x27;<br>              &#125;)<br>              // ä½¿ç”¨vue-routerè·¯ç”±åˆ°æŒ‡å®šé¡µé¢ï¼Œè¯¥æ–¹å¼æˆä¸ºç¼–ç¨‹å¼å¯¼èˆª<br>              if (res.flag === 0)&#123;<br>                this.$router.push(&#x27;/patient&#x27;)<br>              &#125;else if(res.flag === 1)&#123;<br>                this.$router.push(&#x27;/doctor&#x27;)<br>              &#125;else if(res.flag === 2)&#123;<br>                this.$router.push(&#x27;/nurse&#x27;)<br>              &#125;else &#123;<br>                this.$router.push(&#x27;admin&#x27;)<br>              &#125;<br>            &#125; else &#123;<br>              this.$notify(&#123;<br>                title: &#x27;æç¤ºä¿¡æ¯&#x27;,<br>                message: &#x27;è´¦å·æˆ–å¯†ç é”™è¯¯&#x27;,<br>                type: &#x27;error&#x27;<br>              &#125;)<br>            &#125;<br>          &#125;)<br>          // // ä½¿ç”¨vue-routerè·¯ç”±åˆ°æŒ‡å®šé¡µé¢ï¼Œè¯¥æ–¹å¼æˆä¸ºç¼–ç¨‹å¼å¯¼èˆª<br>          // this.$router.push(&#x27;/main&#x27;)<br>        &#125; else &#123;<br>          this.dialogVisible = true<br>          return false<br>        &#125;<br>      &#125;)<br>    &#125;,<br>    toRegister () &#123;<br>      this.$router.push(&#x27;/register&#x27;)<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style lang=&quot;scss&quot; scoped&gt;<br>.title &#123;<br>  margin: 0 auto 30px auto;<br>  text-align: center;<br>  color: #707070;<br>&#125;<br><br>.login-box &#123;<br>  border: 1px green solid;<br>  width: 350px;<br>  margin: 80px auto;<br>  padding: 35px 35px 15px 35px;<br>  border-radius: 5px;<br>  -webkit-border-radius: 5px;<br>  -moz-border-radius: 5px;<br>  box-shadow: 0 0 25px #2c3e90;<br>&#125;<br><br>.login-title &#123;<br>  text-align: center;<br>  margin: 0 auto 40px auto;<br>  color: #af4f7e;<br>&#125;<br><br>.buttons &#123;<br>  //margin: 30px auto;<br>  margin-top: 40px;<br>  margin-left: 25px;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><p>loginä¸‹æ–°å»ºRegister.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div&gt;<br>    &lt;el-form ref=&quot;registerForm&quot; :model=&quot;form&quot; :rules=&quot;rules&quot;<br>             label-width=&quot;80px&quot; class=&quot;register-box&quot;&gt;<br>      &lt;h3 class=&quot;title&quot;&gt;å°å®è´çœ‹ç—…ç—…&lt;/h3&gt;<br>      &lt;h3 class=&quot;register-title&quot;&gt;æ¬¢è¿æ³¨å†Œ&lt;/h3&gt;<br><br>      &lt;el-form-item label=&quot;ç”¨æˆ·å&quot; prop=&quot;username&quot;&gt;<br>        &lt;el-input type=&quot;text&quot; placeholder=&quot;è¯·è¾“å…¥ç”¨æˆ·å&quot; v-model=&quot;form.username&quot;/&gt;<br>      &lt;/el-form-item&gt;<br><br>      &lt;el-form-item label=&quot;æ‰‹æœºå·&quot; prop=&quot;id&quot;&gt;<br>        &lt;el-input type=&quot;text&quot; placeholder=&quot;è¯·è¾“å…¥æ‰‹æœºå·&quot; v-model=&quot;form.id&quot;/&gt;<br>      &lt;/el-form-item&gt;<br><br>      &lt;el-form-item label=&quot;å¯†ç &quot; prop=&quot;password&quot;&gt;<br>        &lt;el-input type=&quot;password&quot; placeholder=&quot;è¯·è¾“å…¥å¯†ç &quot; v-model=&quot;form.password&quot;/&gt;<br>      &lt;/el-form-item&gt;<br><br>      &lt;el-form-item label=&quot;ç¡®è®¤å¯†ç &quot; prop=&quot;confirmPassword&quot;&gt;<br>        &lt;el-input type=&quot;password&quot; placeholder=&quot;è¯·è¾“å…¥å¯†ç &quot; v-model=&quot;form.confirmPassword&quot;/&gt;<br>      &lt;/el-form-item&gt;<br><br>      &lt;el-form-item class=&quot;register-button&quot; style=&quot;margin-left: 0px&quot;&gt;<br>        &lt;el-button type=&quot;primary&quot; @click=&quot;onSubmit(&#x27;registerForm&#x27;)&quot;&gt;æ³¨å†Œ&lt;/el-button&gt;<br>        &lt;el-button @click=&quot;toLogin()&quot;&gt;è·³è½¬ç™»å½•é¡µ&lt;/el-button&gt;<br>      &lt;/el-form-item&gt;<br><br>    &lt;/el-form&gt;<br><br>    &lt;el-dialog<br>      title=&quot;æ¸©é¦¨æç¤º&quot;<br>      :visible.sync=&quot;dialogVisible&quot;<br>      width=&quot;30%&quot;<br>      &gt;<br>      &lt;span&gt;è¯·é‡æ–°éªŒè¯æ ¼å¼&lt;/span&gt;<br>      &lt;span slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;<br>        &lt;el-button type=&quot;primary&quot; @click=&quot;dialogVisible = false&quot;&gt;é‡æ–°è¾“å…¥&lt;/el-button&gt;<br>&lt;!--        &lt;el-button type=&quot;primary&quot; @click=&quot;toLogin()&quot;&gt;å›åˆ°ç™»å½•&lt;/el-button&gt;--&gt;<br>      &lt;/span&gt;<br>    &lt;/el-dialog&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import &#123;register, checkRegister&#125; from &#x27;@/api/register&#x27;<br>import &#123;<br>  validateContacts,<br>  validatePhone,<br>  validatePsdReg<br>&#125; from &#x27;@/views/login/validation&#x27;<br>import &#123;addPatient&#125; from &#x27;@/api/admin&#x27;<br>export default &#123;<br>  name: &#x27;Register&#x27;,<br>  data () &#123;<br>    return &#123;<br>      form: &#123;<br>        username: &#x27;&#x27;,<br>        id: &#x27;&#x27;,<br>        password: &#x27;&#x27;,<br>        confirmPassword: &#x27;&#x27;,<br>        // flag: &#x27;&#x27;<br>      &#125;,<br>      patientForm: &#123;<br>        telephone: &#x27;&#x27;<br>      &#125;,<br>      // è¡¨å•éªŒè¯ï¼Œéœ€è¦åœ¨el-form-itemå…ƒç´ ä¸­å¢åŠ propå±æ€§<br>      rules: &#123;<br>        username: [<br>          &#123;required: true, message: &#x27;ç”¨æˆ·åä¸å¯ä¸ºç©º&#x27;, trigger: &#x27;blur&#x27;&#125;,<br>          &#123; validator: validateContacts, message: validateContacts.callback, trigger: &#x27;blur&#x27; &#125;<br>        ],<br>        id: [<br>          &#123;required: true, message: &#x27;æ‰‹æœºå·ä¸å¯ä¸ºç©º&#x27;, trigger: &#x27;blur&#x27;&#125;,<br>          &#123; min: 11, max: 11, message: &#x27;æ‰‹æœºå·æ ¼å¼é”™è¯¯&#x27;, trigger: &#x27;blur&#x27; &#125;,<br>          &#123; validator: validatePhone, message: &#x27;æ‰‹æœºå·æ ¼å¼é”™è¯¯&#x27;, trigger: &#x27;blur&#x27; &#125;<br>        ],<br>        password: [<br>          &#123;required: true, message: &#x27;å¯†ç ä¸å¯ä¸ºç©º&#x27;, trigger: &#x27;blur&#x27;&#125;,<br>          &#123;validator:validatePsdReg, message: validatePsdReg.callback, trigger: &#x27;blur&#x27;&#125;<br>        ],<br>        confirmPassword: [<br>          &#123;required: true, message: &#x27;å¯†ç ä¸å¯ä¸ºç©º&#x27;, trigger: &#x27;blur&#x27;&#125;,<br>          &#123;<br>            validator:(rule,value,callback)=&gt;&#123;<br>              if(value===&#x27;&#x27;)&#123;<br>                callback(new Error(&#x27;è¯·å†æ¬¡è¾“å…¥å¯†ç &#x27;))<br>              &#125;else if(value!==this.form.password)&#123;<br>                callback(new Error(&#x27;ä¸¤æ¬¡è¾“å…¥å¯†ç ä¸ä¸€è‡´&#x27;))<br>              &#125;else&#123;<br>                callback( )<br>              &#125;<br>            &#125;,<br>            trigger:&#x27;blur&#x27;<br>          &#125;<br>        ]<br>      &#125;,<br>      // å¯¹è¯æ¡†å’Œæ˜¾ç¤º<br>      dialogVisible: false<br>    &#125;<br>  &#125;,<br>  methods: &#123;<br>    toLogin() &#123;<br>      this.dialogVisible = false<br>      this.$router.push(&#x27;/login&#x27;)<br>    &#125;,<br>    onSubmit (formName) &#123;<br>      // ä¸ºè¡¨å•ç»‘å®šéªŒè¯åŠŸèƒ½<br>      this.$refs[formName].validate((vaild) =&gt; &#123;<br>        console.log(this.form.id)<br>        checkRegister(this.form.id).then((res) =&gt; &#123;<br>          console.log(res.id)<br>          if (vaild) &#123;<br>            if (res.id === undefined) &#123;<br>              // ä½¿ç”¨vue-routerè·¯ç”±åˆ°æŒ‡å®šé¡µé¢ï¼Œè¯¥æ–¹å¼æˆä¸ºç¼–ç¨‹å¼å¯¼èˆª<br>              register(this.form).then((res) =&gt; &#123;<br>                console.log(res)<br>              &#125;)<br>              this.patientForm.telephone = this.form.id<br>              addPatient(this.patientForm)<br>              this.$notify(&#123;<br>                title: &#x27;æç¤ºä¿¡æ¯&#x27;,<br>                message: &#x27;æ³¨å†ŒæˆåŠŸ&#x27;,<br>                type: &#x27;success&#x27;<br>              &#125;)<br>              this.$router.push(&#x27;/login&#x27;)<br>              return true<br>            &#125; else &#123;<br>              this.$notify(&#123;<br>                title: &#x27;æç¤ºä¿¡æ¯&#x27;,<br>                message: &#x27;è¯¥æ‰‹æœºå·å·²æ³¨å†Œ&#x27;,<br>                type: &#x27;error&#x27;<br>              &#125;)<br>            &#125;<br>          &#125; else &#123;<br>            this.dialogVisible = true<br>            return false<br>          &#125;<br>        &#125;)<br><br>      &#125;)<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style lang=&quot;scss&quot; scoped&gt;<br>.title &#123;<br>  margin: 0 auto 30px auto;<br>  text-align: center;<br>  color: #707070;<br>&#125;<br>.register-box &#123;<br>  border: 1px green solid;<br>  width: 350px;<br>  margin: 80px auto;<br>  padding: 35px 35px 15px 35px;<br>  border-radius: 5px;<br>  -webkit-border-radius: 5px;<br>  -moz-border-radius: 5px;<br>  box-shadow: 0 0 25px #2c3e90;<br>&#125;<br>.register-title &#123;<br>  text-align: center;<br>  margin: 0 auto 40px auto;<br>  color: #af4f7e;<br>&#125;<br>.register-button &#123;<br>  margin-left: 60px;<br>  margin-top: 30px;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><p>loginä¸‹æ–°å»ºUpdatePassword.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div&gt;<br>    &lt;el-form ref=&quot;updatePasswordForm&quot; :model=&quot;form&quot; :rules=&quot;rules&quot;<br>             label-width=&quot;120px&quot; class=&quot;login-box&quot;&gt;<br>      &lt;br&gt;<br>      &lt;h3 class=&quot;title&quot;&gt;å°å®è´çœ‹ç—…ç—…&lt;/h3&gt;<br>      &lt;h3 class=&quot;login-title&quot;&gt;ä¿®æ”¹å¯†ç &lt;/h3&gt;<br>      &lt;br&gt;<br>      &lt;el-form-item label=&quot;è´¦å·&quot; prop=&quot;id&quot;&gt;<br>        &lt;el-input type=&quot;text&quot; placeholder=&quot;è¯·è¾“å…¥è´¦å·&quot; v-model=&quot;form.id&quot;/&gt;<br>      &lt;/el-form-item&gt;<br><br>      &lt;el-form-item label=&quot;è¯·è¾“å…¥åŸå¯†ç &quot; prop=&quot;password&quot;&gt;<br>        &lt;el-input type=&quot;password&quot; placeholder=&quot;è¯·è¾“å…¥åŸå¯†ç &quot; v-model=&quot;form.password&quot;/&gt;<br>      &lt;/el-form-item&gt;<br>      &lt;br&gt;<br>      &lt;el-form-item label=&quot;è¯·è¾“å…¥æ–°å¯†ç &quot; prop=&quot;newPassword&quot;&gt;<br>        &lt;el-input type=&quot;password&quot; placeholder=&quot;è¯·è¾“å…¥æ–°å¯†ç &quot; v-model=&quot;form.newPassword&quot;/&gt;<br>      &lt;/el-form-item&gt;<br>      &lt;br&gt;<br>      &lt;el-form-item label=&quot;è¯·ç¡®è®¤æ–°å¯†ç &quot; prop=&quot;confirmPassword&quot;&gt;<br>        &lt;el-input type=&quot;password&quot; placeholder=&quot;è¯·ç¡®è®¤æ–°å¯†ç &quot; v-model=&quot;form.confirmPassword&quot;/&gt;<br>      &lt;/el-form-item&gt;<br><br>      &lt;el-form-item class=&quot;buttons&quot; style=&quot;margin-left: -100px&quot;&gt;<br>        &lt;el-button @click=&quot;toRegister()&quot;&gt;è·³è½¬æ³¨å†Œé¡µ&lt;/el-button&gt;<br>        &lt;el-button @click=&quot;toLogin()&quot;&gt;è·³è½¬ç™»å½•é¡µ&lt;/el-button&gt;<br>        &lt;el-button type=&quot;primary&quot; @click=&quot;updatePassword(&#x27;updatePasswordForm&#x27;)&quot;&gt;ç¡®è®¤ä¿®æ”¹å¯†ç &lt;/el-button&gt;<br>      &lt;/el-form-item&gt;<br><br>    &lt;/el-form&gt;<br><br>    &lt;el-dialog<br>      title=&quot;æ¸©é¦¨æç¤º&quot;<br>      :visible.sync=&quot;dialogVisible&quot;<br>      width=&quot;30%&quot;&gt;<br>      &lt;!--      :before-close=&quot;handleClose&quot;--&gt;<br>      &lt;span&gt;è¯·è¾“å…¥è´¦å·å’Œå¯†ç &lt;/span&gt;<br>      &lt;span slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;<br>        &lt;el-button type=&quot;primary&quot; @click=&quot;dialogVisible = false&quot;&gt;ç¡®å®š&lt;/el-button&gt;<br>      &lt;/span&gt;<br>    &lt;/el-dialog&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import &#123;checkPassword, login, updatePassword&#125; from &#x27;@/api/login&#x27;<br>import &#123;validatePsdReg&#125; from &#x27;@/views/login/validation&#x27;<br>export default &#123;<br>  name: &#x27;Login.vue&#x27;,<br>  data () &#123;<br>    return &#123;<br>      form: &#123;<br>        id: &#x27;&#x27;,<br>        password: &#x27;&#x27;,<br>        newPassword: &#x27;&#x27;,<br>        confirmPassword: &#x27;&#x27;,<br>        flag: &#x27;&#x27;<br>      &#125;,<br>      // è¡¨å•éªŒè¯ï¼Œéœ€è¦åœ¨el-form-itemå…ƒç´ ä¸­å¢åŠ propå±æ€§<br>      rules: &#123;<br>        id: [<br>          &#123;required: true, message: &#x27;è´¦å·ä¸å¯ä¸ºç©º&#x27;, trigger: &#x27;blur&#x27;&#125;<br>        ],<br>        password: [<br>          &#123;required: true, message: &#x27;åŸå¯†ç ä¸å¯ä¸ºç©º&#x27;, trigger: &#x27;blur&#x27;&#125;,<br>          &#123;<br>            validator: validatePsdReg,<br>            message: validatePsdReg.callback,<br>            trigger: &#x27;blur&#x27;<br>          &#125;<br>        ],<br>        newPassword: [<br>          &#123;required: true, message: &#x27;æ–°å¯†ç ä¸å¯ä¸ºç©º&#x27;, trigger: &#x27;blur&#x27;&#125;,<br>          &#123;<br>            validator: validatePsdReg,<br>            message: validatePsdReg.callback,<br>            trigger: &#x27;blur&#x27;<br>          &#125;<br>        ],<br>        confirmPassword: [<br>          &#123;required: true, message: &#x27;è¯·å†æ¬¡è¾“å…¥æ–°å¯†ç &#x27;, trigger: &#x27;blur&#x27;&#125;,<br>          &#123;<br>            validator:(rule,value,callback)=&gt;&#123;<br>              if(value===&#x27;&#x27;)&#123;<br>                callback(new Error(&#x27;è¯·å†æ¬¡è¾“å…¥å¯†ç &#x27;))<br>              &#125;else if(value!==this.form.password)&#123;<br>                callback(new Error(&#x27;ä¸¤æ¬¡è¾“å…¥å¯†ç ä¸ä¸€è‡´&#x27;))<br>              &#125;else&#123;<br>                callback( )<br>              &#125;<br>            &#125;,<br>            trigger:&#x27;blur&#x27;<br>          &#125;<br>        ]<br>      &#125;,<br>      // å¯¹è¯æ¡†å’Œæ˜¾ç¤º<br>      dialogVisible: false<br>    &#125;<br>  &#125;,<br>  methods: &#123;<br>    updatePassword(formName) &#123;<br>      console.log(&#x27;start&#x27;)<br>      this.$refs[formName].validate((vaild) =&gt; &#123;<br>        if (vaild) &#123;<br>          checkPassword(this.form.id,this.form.password).then((res) =&gt; &#123;<br>            if(res.id !== undefined)&#123;<br>              updatePassword(this.form.id, this.form.newPassword)<br>              this.$notify(&#123;<br>                title: &#x27;æç¤ºä¿¡æ¯&#x27;,<br>                message: &#x27;æ›´æ”¹å¯†ç æˆåŠŸ&#x27;,<br>                type: &#x27;success&#x27;<br>              &#125;)<br>            &#125;else &#123;<br>              this.$notify(&#123;<br>                title: &#x27;æç¤ºä¿¡æ¯&#x27;,<br>                message: &#x27;å¯†ç ä¸è´¦å·ä¸åŒ¹é…&#x27;,<br>                type: &#x27;error&#x27;<br>              &#125;)<br>            &#125;<br>          &#125;)<br>        &#125; else &#123;<br>          this.dialogVisible = true<br>          return false<br>        &#125;<br>      &#125;)<br>    &#125;,<br>    toLogin()&#123;<br>      this.$router.push(&#x27;/login&#x27;)<br>    &#125;,<br>    showPwd () &#123;<br>      if (this.passwordType === &#x27;password&#x27;) &#123;<br>        this.passwordType = &#x27;&#x27;<br>      &#125; else &#123;<br>        this.passwordType = &#x27;password&#x27;<br>      &#125;<br>      this.$nextTick(() =&gt; &#123;<br>        this.$refs.password.focus()<br>      &#125;)<br>    &#125;,<br>    toRegister () &#123;<br>      this.$router.push(&#x27;/register&#x27;)<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style lang=&quot;scss&quot; scoped&gt;<br>.title &#123;<br>  margin: 0 auto 30px auto;<br>  text-align: center;<br>  color: #707070;<br>&#125;<br><br>.login-box &#123;<br>  border: 1px green solid;<br>  width: 420px;<br>  margin: 80px auto;<br>  padding: 35px 35px 15px 35px;<br>  border-radius: 5px;<br>  -webkit-border-radius: 5px;<br>  -moz-border-radius: 5px;<br>  box-shadow: 0 0 25px #2c3e90;<br>&#125;<br><br>.login-title &#123;<br>  text-align: center;<br>  margin: 0 auto 40px auto;<br>  color: #af4f7e;<br>&#125;<br><br>.buttons &#123;<br>  //margin: 30px auto;<br>  margin-top: 40px;<br>  margin-left: 25px;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><p>loginæ–‡ä»¶å¤¹ä¸‹æ–°å»ºvalidation.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// æ˜¯å¦ç”µè¯å·ç </span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">validatePhone</span>(<span class="hljs-params">rule, value,callback</span>) &#123;<br>  <span class="hljs-keyword">const</span> reg =<span class="hljs-regexp">/^[1][3-9][0-9]&#123;9&#125;$/</span>;<br>  <span class="hljs-keyword">if</span>(value==<span class="hljs-string">&#x27;&#x27;</span>||value==<span class="hljs-literal">undefined</span>||value==<span class="hljs-literal">null</span>)&#123;<br>    <span class="hljs-title function_">callback</span>();<br>  &#125;<span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-keyword">if</span> ((!reg.<span class="hljs-title function_">test</span>(value)) &amp;&amp; value != <span class="hljs-string">&#x27;&#x27;</span>) &#123;<br>      <span class="hljs-title function_">callback</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;è¯·è¾“å…¥æ­£ç¡®çš„ç”µè¯å·ç &#x27;</span>));<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-title function_">callback</span>();<br>    &#125;<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">//æ˜¯å¦é‚®ç®±å·</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">validateEMail</span>(<span class="hljs-params">rule, value,callback</span>) &#123;<br>  <span class="hljs-keyword">const</span> reg =<span class="hljs-regexp">/^([a-zA-Z0-9]+[-_\.]?)+@[a-zA-Z0-9]+\.[a-z]+$/</span>;<br>  <span class="hljs-keyword">if</span>(value==<span class="hljs-string">&#x27;&#x27;</span>||value==<span class="hljs-literal">undefined</span>||value==<span class="hljs-literal">null</span>)&#123;<br>    <span class="hljs-title function_">callback</span>();<br>  &#125;<span class="hljs-keyword">else</span>&#123;<br>    <span class="hljs-keyword">if</span> (!reg.<span class="hljs-title function_">test</span>(value))&#123;<br>      <span class="hljs-title function_">callback</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;è¯·è¾“å…¥æ­£ç¡®çš„é‚®ç®±&#x27;</span>));<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-title function_">callback</span>();<br>    &#125;<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">//æ˜¯å¦èº«ä»½è¯å·</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">validateIdNo</span>(<span class="hljs-params">rule, value,callback</span>) &#123;<br>  <span class="hljs-keyword">const</span> reg = <span class="hljs-regexp">/(^\d&#123;15&#125;$)|(^\d&#123;18&#125;$)|(^\d&#123;17&#125;(\d|X|x)$)/</span>;<br>  <span class="hljs-keyword">if</span>(value==<span class="hljs-string">&#x27;&#x27;</span>||value==<span class="hljs-literal">undefined</span>||value==<span class="hljs-literal">null</span>)&#123;<br>    <span class="hljs-title function_">callback</span>();<br>  &#125;<span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-keyword">if</span> ((!reg.<span class="hljs-title function_">test</span>(value)) &amp;&amp; value != <span class="hljs-string">&#x27;&#x27;</span>) &#123;<br>      <span class="hljs-title function_">callback</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;è¯·è¾“å…¥æ­£ç¡®çš„èº«ä»½è¯å·ç &#x27;</span>));<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-title function_">callback</span>();<br>    &#125;<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// æ£€æŸ¥å¯†ç æ ¼å¼</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">validatePsdReg</span> = (<span class="hljs-params">rule, value, callback</span>) =&gt; &#123;<br>  <span class="hljs-keyword">if</span> (!value) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">callback</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;è¯·è¾“å…¥å¯†ç &#x27;</span>))<br>  &#125;<br>  <span class="hljs-keyword">if</span> (!<span class="hljs-regexp">/^(?![\d]+$)(?![a-zA-Z]+$)(?![^\da-zA-Z]+$)([^\u4e00-\u9fa5\s])&#123;6,20&#125;$/</span>.<span class="hljs-title function_">test</span>(value)) &#123;<br>    <span class="hljs-title function_">callback</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;è¯·è¾“å…¥6-20ä½è‹±æ–‡å­—æ¯ã€æ•°å­—æˆ–è€…ç¬¦å·ï¼ˆé™¤ç©ºæ ¼ï¼‰ï¼Œä¸”å­—æ¯ã€æ•°å­—å’Œæ ‡ç‚¹ç¬¦å·è‡³å°‘åŒ…å«ä¸¤ç§&#x27;</span>))<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-title function_">callback</span>()<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦ä¸ºä¸­æ–‡</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">validateContacts</span> = (<span class="hljs-params">rule, value, callback</span>) =&gt; &#123;<br>  <span class="hljs-keyword">if</span> (!value) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">callback</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;è¯·è¾“å…¥ä¸­æ–‡&#x27;</span>))<br>  &#125;<br>  <span class="hljs-keyword">if</span> (!<span class="hljs-regexp">/^[\u0391-\uFFE5A-Za-z]+$/</span>.<span class="hljs-title function_">test</span>(value)) &#123;<br>    <span class="hljs-title function_">callback</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;ä¸å¯è¾“å…¥ç‰¹æ®Šå­—ç¬¦&#x27;</span>))<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-title function_">callback</span>()<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>é…ç½®è·¯ç”±ç±»ä¼¼ä¸Šä¸ªéƒ¨åˆ†ï¼Œä¸å†å¤è¿°ã€‚</p><h3 id="3ã€Echartså›¾"><a href="#3ã€Echartså›¾" class="headerlink" title="3ã€Echartså›¾"></a>3ã€Echartså›¾</h3><p>&#x3D;&#x3D;åç«¯&#x3D;&#x3D;</p><p>ä¸»è¦æ˜¯ç®—æ•°æ®ç»™æ•°æ®</p><p>OrderMapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;countAge&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;java.lang.Integer&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;java.lang.Integer&quot;</span>&gt;</span><br>    select count(*) from order_info where patient_age<span class="hljs-symbol">&amp;gt;</span>=#&#123;age1&#125; and patient_age<span class="hljs-symbol">&amp;lt;</span>#&#123;age2&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;countDepartment&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;java.lang.String&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;java.lang.Integer&quot;</span>&gt;</span><br>    select count(*) from order_info where department=#&#123;department&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;countOrderByDoctorName&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;java.lang.String&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;java.lang.Integer&quot;</span>&gt;</span><br>    select count(*) from order_info where doctor_name=#&#123;doctorName&#125; and order_day &gt;= date(now()) - interval 7 day group by order_day ORDER BY order_day<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;countOrder&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;java.lang.Integer&quot;</span>&gt;</span><br>    select count(*) from order_info where order_day &gt;= date(now()) - interval 7 day group by order_day ORDER BY order_day;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure><p>dao&#x2F;OrderMapper</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.xbb.dao;<br><span class="hljs-keyword">import</span> com.xbb.entity.Order;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">OrderMapper</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">countAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age1,<span class="hljs-type">int</span> age2)</span>;<span class="hljs-comment">//æŸ¥è¯¢å°±è¯Šå¹´é¾„æ®µå¯¹åº”çš„è®°å½•æ¡æ•°</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">countDepartment</span><span class="hljs-params">(String department)</span>;<span class="hljs-comment">//æŸ¥è¯¢æ‰€æŒ‚ç§‘å®¤çš„è®°å½•æ•°</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span>[] countOrder();<span class="hljs-comment">//æŸ¥è¯¢æœªæ¥ä¸€å‘¨é¢„çº¦äººæ•°</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span>[] countOrderByDoctorName(String name);<span class="hljs-comment">//æ ¹æ®åŒ»ç”ŸåæŸ¥è¯¢æœªæ¥ä¸€å‘¨é¢„çº¦äººæ•°</span><br>&#125;<br></code></pre></td></tr></table></figure><p>OrderService</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.xbb.service;<br><span class="hljs-keyword">import</span> com.xbb.entity.Order;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">OrderService</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">countAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age1,<span class="hljs-type">int</span> age2)</span>;<span class="hljs-comment">//æŸ¥è¯¢å°±è¯Šå¹´é¾„æ®µå¯¹åº”çš„è®°å½•æ¡æ•°</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">countDepartment</span><span class="hljs-params">(String department)</span>;<span class="hljs-comment">//æŸ¥è¯¢æ‰€æŒ‚ç§‘å®¤çš„è®°å½•æ•°</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span>[] countOrder();<span class="hljs-comment">//æŸ¥è¯¢æœªæ¥ä¸€å‘¨é¢„çº¦äººæ•°</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span>[] countOrderByDoctorName(String name);<span class="hljs-comment">//æ ¹æ®åŒ»ç”ŸåæŸ¥è¯¢æœªæ¥ä¸€å‘¨é¢„çº¦äººæ•°</span><br>&#125;<br></code></pre></td></tr></table></figure><p>OrderServiceImpl</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.xbb.service.impl;<br><span class="hljs-keyword">import</span> com.xbb.dao.OrderMapper;<br><span class="hljs-keyword">import</span> com.xbb.entity.Order;<br><span class="hljs-keyword">import</span> com.xbb.service.OrderService;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Service;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">OrderService</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> OrderMapper orderMapper;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">countAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age1, <span class="hljs-type">int</span> age2)</span> &#123;<br>        <span class="hljs-keyword">return</span> orderMapper.countAge(age1,age2);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">countDepartment</span><span class="hljs-params">(String department)</span> &#123;<br>        <span class="hljs-keyword">return</span> orderMapper.countDepartment(department);<br>    &#125;<br>    <br>        <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span>[] countOrder() &#123;<br>        <span class="hljs-keyword">return</span> orderMapper.countOrder();<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span>[] countOrderByDoctorName(String name) &#123;<br>        <span class="hljs-keyword">return</span> orderMapper.countOrderByDoctorName(name);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>OrderController</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.xbb.controller;<br><br><span class="hljs-keyword">import</span> com.xbb.entity.MedicalRecord;<br><span class="hljs-keyword">import</span> com.xbb.entity.Order;<br><span class="hljs-keyword">import</span> com.xbb.service.impl.MedicalRecordServiceImpl;<br><span class="hljs-keyword">import</span> com.xbb.service.impl.OrderServiceImpl;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.beans.propertyeditors.CustomDateEditor;<br><span class="hljs-keyword">import</span> org.springframework.beans.propertyeditors.CustomNumberEditor;<br><span class="hljs-keyword">import</span> org.springframework.beans.propertyeditors.StringTrimmerEditor;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.WebDataBinder;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.*;<br><span class="hljs-keyword">import</span> java.text.DateFormat;<br><span class="hljs-keyword">import</span> java.text.SimpleDateFormat;<br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.Date;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-meta">@RestController</span><br><span class="hljs-meta">@RequestMapping(value = &quot;/order&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderController</span> &#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> OrderServiceImpl orderService;<br>    <span class="hljs-keyword">private</span> MedicalRecordServiceImpl medicalRecordService;<br><br>    <span class="hljs-meta">@RequestMapping(value = &quot;/countAge&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span>[] countAge()&#123;<br>        <span class="hljs-type">int</span>[] countAge=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">11</span>];<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">11</span>;i++)&#123;<br>            countAge[i]=orderService.countAge(i*<span class="hljs-number">10</span>,(i+<span class="hljs-number">1</span>)*<span class="hljs-number">10</span>);<br>        &#125;<br>        <span class="hljs-keyword">return</span> countAge;<br>    &#125;<br><br>    <span class="hljs-meta">@RequestMapping(value = &quot;/countDepartment&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span>[] countDepartment()&#123;<br>        <span class="hljs-type">int</span>[] count=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">12</span>];<br>        count[<span class="hljs-number">0</span>]=orderService.countDepartment(<span class="hljs-string">&quot;ç¥ç»å†…ç§‘&quot;</span>);<br>        count[<span class="hljs-number">1</span>]=orderService.countDepartment(<span class="hljs-string">&quot;å†…ç§‘&quot;</span>);<br>        count[<span class="hljs-number">2</span>]=orderService.countDepartment(<span class="hljs-string">&quot;å¤–ç§‘&quot;</span>);<br>        count[<span class="hljs-number">3</span>]=orderService.countDepartment(<span class="hljs-string">&quot;å¦‡äº§ç§‘&quot;</span>);<br>        count[<span class="hljs-number">4</span>]=orderService.countDepartment(<span class="hljs-string">&quot;å„¿ç§‘&quot;</span>);<br>        count[<span class="hljs-number">5</span>]=orderService.countDepartment(<span class="hljs-string">&quot;çœ¼ç§‘&quot;</span>);<br>        count[<span class="hljs-number">6</span>]=orderService.countDepartment(<span class="hljs-string">&quot;è€³é¼»å’½å–‰ç§‘&quot;</span>);<br>        count[<span class="hljs-number">7</span>]=orderService.countDepartment(<span class="hljs-string">&quot;å£è…”ç§‘&quot;</span>);<br>        count[<span class="hljs-number">8</span>]=orderService.countDepartment(<span class="hljs-string">&quot;çš®è‚¤ç§‘&quot;</span>);<br>        count[<span class="hljs-number">9</span>]=orderService.countDepartment(<span class="hljs-string">&quot;è‚¿ç˜¤ç§‘&quot;</span>);<br>        count[<span class="hljs-number">10</span>]=orderService.countDepartment(<span class="hljs-string">&quot;ä¸­åŒ»ç§‘&quot;</span>);<br>        count[<span class="hljs-number">11</span>]=orderService.countDepartment(<span class="hljs-string">&quot;ä½“æ£€ä¸­å¿ƒ&quot;</span>);<br>        <span class="hljs-keyword">return</span> count;<br>    &#125;<br><br>    <span class="hljs-meta">@RequestMapping(value = &quot;/countOrderByDoctorName&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span>[] countOrderByDoctorName(<span class="hljs-meta">@RequestParam</span> String name)&#123;<br>        <span class="hljs-keyword">return</span> orderService.countOrderByDoctorName(name);<br>    &#125;<br><br>    <span class="hljs-meta">@RequestMapping(value = &quot;/countOrder&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span>[] countOrder()&#123;<br>        <span class="hljs-keyword">return</span> orderService.countOrder();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>&#x3D;&#x3D;å‰ç«¯&#x3D;&#x3D;</p><p>å‰ç«¯æ˜¯æ ¹æ®ä»åç«¯æ‹¿åˆ°çš„æ•°æ®ç»˜å›¾ï¼Œå†™æ³•å‚è€ƒ<a href="https://echarts.apache.org/handbook/zh/get-started/">https://echarts.apache.org/handbook/zh/get-started/</a></p><p>æˆ‘ä»¬çš„å†™æ³•å¦‚ä¸‹ï¼š</p><p>admin.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> request <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../utils/request&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getOrderCount</span> () &#123;<br>  <span class="hljs-keyword">return</span> request (&#123;<br>    <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/order/count&#x27;</span>,<br>    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;get&#x27;</span><br>  &#125;)<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getAgeCount</span> () &#123;<br>  <span class="hljs-keyword">return</span> request (&#123;<br>    <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/order/countAge&#x27;</span>,<br>    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;get&#x27;</span><br>  &#125;)<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">countOrder</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> request (&#123;<br>    <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/order/countOrder&#x27;</span>,<br>    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;get&#x27;</span>,<br>  &#125;)<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">countOrderByDoctorName</span>(<span class="hljs-params">name</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>(&#123;<br>    <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/order/countOrderByDoctorName&#x27;</span>,<br>    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;get&#x27;</span>,<br>    <span class="hljs-attr">params</span>: &#123;<br>      <span class="hljs-attr">name</span>: name<br>    &#125;<br>  &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>ç»™å‚æ•°çš„å†™æ³•å¾ˆå®¹æ˜“é”™ï¼ŒæŠ¥é”™ä¸€èˆ¬æ˜¯xxx is not present</p><p>ç¨å¾®æ€»ç»“ï¼š</p><p>1ã€ä¼ å¤šä¸ªå‚æ•°æ‹¿åˆ°çš„æ•°æ®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">method</span>:<span class="hljs-string">&#x27;get&#x27;</span>,<br><span class="hljs-attr">params</span>: &#123;<br>    <span class="hljs-attr">val</span>:val,<br>    <span class="hljs-attr">current</span>: current<br>&#125;<br></code></pre></td></tr></table></figure><p>2ã€ä¼ ä¸€ä¸ªè¡¨å•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;post&#x27;</span>,<br>data <span class="hljs-comment">//æˆ–å†™ä¸º params: data</span><br><span class="hljs-comment">// åç«¯éœ€è¦å¤šä¸ªå‚æ•°æ—¶ï¼Œå‰ç«¯å¯ä»¥ä½œä¸ºè¡¨å•æäº¤</span><br><span class="hljs-comment">// å®šä¹‰æ–¹å¼ä¾‹ï¼š</span><br><span class="hljs-attr">page</span>: &#123;<br>    <span class="hljs-attr">current</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">size</span>: <span class="hljs-number">10</span><br>&#125;,<br></code></pre></td></tr></table></figure><p>3ã€ä¸ä¼ å‚ï¼šç›´æ¥ä¸å†™</p></blockquote><p>æ¥ä¸‹æ¥é€‰æ‹©æ¯”è¾ƒå¤æ‚çš„OrderEchartsByDoctorä¸ºä¾‹ï¼Œæ•ˆæœæ˜¯æ‹¿åˆ°ä»å½“å¤©èµ·åŠåå…­å¤©å…±ä¸ƒå¤©çš„å•ä¸ªåŒ»ç”Ÿçš„è¢«é¢„çº¦æ•°ï¼Œç„¶åå±•ç¤ºï¼Œå› ä¸ºåç«¯åªæ‹¿åˆ°äº†æ•°æ®æ•°ç»„ï¼Œæ‰€ä»¥å‰ç«¯è¿˜å†™äº†è·å–è¿‘ä¸ƒå¤©æ—¥æœŸçš„æ–¹æ³•ä¸åç«¯æ•°æ®å¯¹åº”ï¼Œå¦å¤–è¿™é‡Œæœ¬æ¥æƒ³çš„æ˜¯ä»çˆ¶ç»„ä»¶æ‹¿åŒ»ç”Ÿåï¼Œç»“æœè²Œä¼¼å­ç»„ä»¶å…ˆåŠ è½½æ‰€ä»¥æ‹¿ä¸åˆ°ï¼Œæœ€åæ”¾å¼ƒäº†ç»„ä»¶é—´ä¼ å€¼ï¼Œç›´æ¥åœ¨è¿™ä¸ªå­ç»„ä»¶è·å–ã€‚</p><p>åœ¨componentsé‡Œæ–°å»ºOrderEchartsByDoctor.vueï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div&gt;<br>    &lt;div id=&quot;orderEchartsByDoctor&quot; :style=&quot;&#123;width: &#x27;400px&#x27;, height: &#x27;400px&#x27;&#125;&quot; class=&quot;chart&quot;&gt;&lt;/div&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import &#123;countOrder, getOrderCount&#125; from &#x27;@/api/admin&#x27;<br>import &#123;countOrderByDoctorName&#125; from &#x27;@/api/doctor&#x27;<br>import &#123;getCurrent&#125; from &#x27;@/api/login&#x27;<br><br>export default &#123;<br>  name: &#x27;OrderEchartsByDoctor&#x27;,<br>  props: [&#x27;name&#x27;],<br>  created()&#123;<br>    console.log(&quot;é¡µé¢åˆæ¬¡è¿›æ¥æ—¶ï¼Œæ˜¯å¦å­˜åœ¨ï¼š&quot;, this.nameNow)<br>    this.getDate();<br>    this.countOrder();<br>  &#125;,<br>  data () &#123;<br>    return &#123;<br>      count: [],<br>      same_week: [],<br>      same_day: &#x27;&#x27;,<br>      singleDate: [],<br>      nameNow:&#x27;&#x27;<br>    &#125;<br>  &#125;,<br>  methods: &#123;<br>    countOrder()&#123;<br>      getCurrent().then((res) =&gt; &#123;<br>        this.nameNow = res.username<br>        console.log(res)<br>        countOrderByDoctorName(this.nameNow).then((res) =&gt; &#123;<br>          this.count = res;<br>          this.drawLine()<br>        &#125;)<br>      &#125;)<br><br>    &#125;,<br><br>    getDate()&#123;<br>      // é»˜è®¤æ˜¾ç¤ºå½“å¤©å‰ä¸€å‘¨çš„æ•°æ®<br>      let data = [];<br>      for (let i = 6; i &gt;= 0; i--) &#123;<br>        data.push(this.getDay(+i)) // å<br>      &#125;<br>      console.log(data)<br>      // let date = data.reverse(); //å¾—å‡ºä¸€å‘¨çš„æ—¥æœŸè¿›è¡Œæ’åº<br>      let date = data;<br>      let pkc = []; /* ç”¨äºå­˜å‚¨å±•ç¤ºçš„æ—¥æœŸæ•°æ® */<br>      let weekday = [<br>        &#x27;æ˜ŸæœŸæ—¥&#x27;,<br>        &#x27;æ˜ŸæœŸä¸€&#x27;,<br>        &#x27;æ˜ŸæœŸäºŒ&#x27;,<br>        &#x27;æ˜ŸæœŸä¸‰&#x27;,<br>        &#x27;æ˜ŸæœŸå››&#x27;,<br>        &#x27;æ˜ŸæœŸäº”&#x27;,<br>        &#x27;æ˜ŸæœŸå…­&#x27;,<br>      ];<br>      date.forEach((item, index) =&gt; &#123;<br>        //å¾ªåæ—¥æœŸ<br>        let f = new Date(item);<br>        let week = f.getDay(); //è®¡ç®—å‡ºæ˜ŸæœŸå‡ <br>        let str1 = item.split(&#x27;-&#x27;);<br>        let strs = str1[0] + &#x27;-&#x27; + str1[1] + &#x27;-&#x27; + str1[2];<br><br>        let weeks = weekday[week]; /* å°†è®¡ç®—å‡ºæ¥çš„æ—¶é—´å¸¦å…¥æ•°å­—å¾—å‡ºä¸­æ–‡ */<br>        let time = Math.round(new Date(item) / 1000); //æ—¶é—´æˆ³è½¬æ¢<br>        let s = &#123;&#125;; //ç”¨äºå­˜å‚¨æ¯ä¸ªæ—¥æœŸå¯¹è±¡<br>        s.date = item;<br>        s.name = strs;<br>        s.week = weeks;<br>        s.times = time;<br>        pkc.push(s);<br>      &#125;);<br>      this.same_week = pkc;<br>      //pkcå­˜å‚¨ç€ä»Šå¤©çš„å¹´æœˆæ—¥æ˜ŸæœŸå‡ ï¼Œæ—¶é—´æˆ³ç­‰<br>      this.same_day = pkc[0].date; //ä»Šå¤©çš„æ•°æ®<br>      for (let i = 0; i &lt; this.same_week.length; i++) &#123;<br>        this.singleDate = this.singleDate.concat(this.same_week[i].date)<br>      &#125;<br>    &#125;,<br>    getDay(day) &#123;<br>      let today = new Date();<br>      let targetday_milliseconds = today.getTime() + 1000 * 60 * 60 * 24 * day;<br>      today.setTime(targetday_milliseconds); //æ³¨æ„ï¼Œè¿™è¡Œæ˜¯å…³é”®ä»£ç <br>      let tYear = today.getFullYear();<br>      let tMonth = today.getMonth();<br>      let tDate = today.getDate();<br>      tMonth = this.doHandleMonth(tMonth + 1);<br>      tDate = this.doHandleMonth(tDate);<br>      // return tYear + &#x27;-&#x27; + tMonth + &#x27;-&#x27; + tDate;<br>      return tMonth + &#x27;-&#x27; + tDate;<br>    &#125;,<br>    doHandleMonth(month) &#123;<br>      let m = month;<br>      if (month.toString().length == 1) &#123;<br>        m = month;<br>      &#125;<br>      return m;<br>    &#125;,<br><br>    drawLine()&#123;<br>      // åŸºäºå‡†å¤‡å¥½çš„domï¼Œåˆå§‹åŒ–echartså®ä¾‹<br>      let orderChart = this.$echarts.init(document.getElementById(&#x27;orderEchartsByDoctor&#x27;))<br>      // ç»˜åˆ¶å›¾è¡¨<br>      orderChart.setOption(&#123;<br>        title: &#123;<br>          text: &#x27;æœ€è¿‘ä¸ƒå¤©-æˆ‘çš„é¢„çº¦&#x27;,<br>          subtext: &#x27;å•ä½ï¼ˆä¸ªï¼‰&#x27;<br>        &#125;,<br>        tooltip: &#123;&#125;,<br>        yAxis: &#123;<br>          type: &#x27;category&#x27;,<br>          // data: [&quot;Mon&quot;,&quot;Tue&quot;,&quot;Wed&quot;,&quot;Thu&quot;,&quot;Fri&quot;,&quot;Sat&quot;,&quot;Sun&quot;]<br>          data: this.singleDate<br>        &#125;,<br>        xAxis: &#123;<br><br>        &#125;,<br>        series: [&#123;<br>          name: &#x27;æŒ‚å·&#x27;,<br>          type: &#x27;bar&#x27;,<br>          color: &#x27;#86a185&#x27;,<br>          // data: [&quot;0&quot;,&quot;8&quot;,&quot;7&quot;,&quot;4&quot;,&quot;2&quot;,&quot;4&quot;,&quot;4&quot;]<br>          data: this.count.reverse()<br>        &#125;]<br>      &#125;);<br>    &#125;,<br>  &#125;<br>&#125;<br><br>&lt;/script&gt;<br><br>&lt;style&gt;<br>.chart&#123;<br>  margin-left: 100px;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><p>ç„¶ååœ¨view&#x2F;doctor&#x2F;subdoctor&#x2F;AddPatienté‡Œä½¿ç”¨ç»„ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;div&gt;<br>&lt;el-card&gt;<br>  &lt;order-echarts-by-doctor<br>    id=&quot;orderEchartsByDoctor&quot;<br>    :style=&quot;&#123;width: &#x27;400px&#x27;, height: &#x27;400px&#x27;&#125;&quot;<br>    :name=&quot;name&quot;<br>  &gt;&lt;/order-echarts-by-doctor&gt;<br>&lt;/el-card&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import OrderEchartsByDoctor from &#x27;@/components/OrderEchartsByDoctor&#x27;<br>export default &#123;<br>  name: &#x27;addPatient&#x27;,<br>  components: &#123; OrderEchartsByDoctor &#125;,<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style scoped&gt;<br>.demo-draw__content &#123;<br>  text-align: left;<br>&#125;<br>.button &#123;<br>  text-align: center;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œå†æŠŠå‰ç«¯è·å–å½“å‰æ—¶é—´å•æ‹‰å‡ºæ¥ï¼š</p><p>æ³•ä¸€ï¼š</p><p>ä½¿ç”¨ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;template&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;&#123; nowDate &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>&lt;/template&gt;<br></code></pre></td></tr></table></figure><p>å®šä¹‰ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script&gt;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      <span class="hljs-attr">nowDate</span>: <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-comment">// å½“å‰æ—¥æœŸ</span><br>    &#125;;<br>  &#125;,<br>  <span class="hljs-attr">methods</span>: &#123;<br>    <span class="hljs-title function_">currentTime</span>(<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-built_in">setInterval</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">formatDate</span>, <span class="hljs-number">500</span>);<br>    &#125;,<br>    <span class="hljs-title function_">formatDate</span>(<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">let</span> date = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();<br>      <span class="hljs-keyword">let</span> year = date.<span class="hljs-title function_">getFullYear</span>(); <span class="hljs-comment">// å¹´</span><br>      <span class="hljs-keyword">let</span> month = date.<span class="hljs-title function_">getMonth</span>() + <span class="hljs-number">1</span>; <span class="hljs-comment">// æœˆ</span><br>      <span class="hljs-keyword">let</span> day = date.<span class="hljs-title function_">getDate</span>(); <span class="hljs-comment">// æ—¥</span><br>      <span class="hljs-keyword">let</span> week = date.<span class="hljs-title function_">getDay</span>(); <span class="hljs-comment">// æ˜ŸæœŸ</span><br>      <span class="hljs-keyword">let</span> weekArr = [ <span class="hljs-string">&quot;æ˜ŸæœŸæ—¥&quot;</span>, <span class="hljs-string">&quot;æ˜ŸæœŸä¸€&quot;</span>, <span class="hljs-string">&quot;æ˜ŸæœŸäºŒ&quot;</span>, <span class="hljs-string">&quot;æ˜ŸæœŸä¸‰&quot;</span>, <span class="hljs-string">&quot;æ˜ŸæœŸå››&quot;</span>, <span class="hljs-string">&quot;æ˜ŸæœŸäº”&quot;</span>, <span class="hljs-string">&quot;æ˜ŸæœŸå…­&quot;</span> ];<br>      <span class="hljs-keyword">let</span> hour = date.<span class="hljs-title function_">getHours</span>(); <span class="hljs-comment">// æ—¶</span><br>      hour = hour &lt; <span class="hljs-number">10</span> ? <span class="hljs-string">&quot;0&quot;</span> + hour : hour; <span class="hljs-comment">// å¦‚æœåªæœ‰ä¸€ä½ï¼Œåˆ™å‰é¢è¡¥é›¶</span><br>      <span class="hljs-keyword">let</span> minute = date.<span class="hljs-title function_">getMinutes</span>(); <span class="hljs-comment">// åˆ†</span><br>      minute = minute &lt; <span class="hljs-number">10</span> ? <span class="hljs-string">&quot;0&quot;</span> + minute : minute; <span class="hljs-comment">// å¦‚æœåªæœ‰ä¸€ä½ï¼Œåˆ™å‰é¢è¡¥é›¶</span><br>      <span class="hljs-keyword">let</span> second = date.<span class="hljs-title function_">getSeconds</span>(); <span class="hljs-comment">// ç§’</span><br>      second = second &lt; <span class="hljs-number">10</span> ? <span class="hljs-string">&quot;0&quot;</span> + second : second; <span class="hljs-comment">// å¦‚æœåªæœ‰ä¸€ä½ï¼Œåˆ™å‰é¢è¡¥é›¶</span><br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">nowDate</span> = <span class="hljs-string">`<span class="hljs-subst">$&#123;year&#125;</span>/<span class="hljs-subst">$&#123;month&#125;</span>/<span class="hljs-subst">$&#123;day&#125;</span> <span class="hljs-subst">$&#123;hour&#125;</span>:<span class="hljs-subst">$&#123;minute&#125;</span>:<span class="hljs-subst">$&#123;second&#125;</span> <span class="hljs-subst">$&#123;weekArr[week]&#125;</span>`</span>;<br>    &#125;<br>  &#125;,<br>  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">currentTime</span>();<br>  &#125;,<br>  <span class="hljs-comment">// é”€æ¯å®šæ—¶å™¨</span><br>  <span class="hljs-title function_">beforeDestroy</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">formatDate</span>) &#123;<br>      <span class="hljs-built_in">clearInterval</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">formatDate</span>); <span class="hljs-comment">// åœ¨Vueå®ä¾‹é”€æ¯å‰ï¼Œæ¸…é™¤æ—¶é—´å®šæ—¶å™¨</span><br>    &#125;<br>  &#125;<br>&#125;;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>æ³•äºŒï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs js">  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span>&#123;<br>    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>)&#123;<br>      <span class="hljs-keyword">return</span>&#123;<br>        <span class="hljs-attr">date</span>:<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()<br>      &#125;<br>    &#125;,<br>    <span class="hljs-attr">methods</span>:&#123;<br>      <span class="hljs-title function_">dateFormat</span>(<span class="hljs-params">time</span>) &#123;<br>          <span class="hljs-keyword">var</span> date=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(time);<br>          <span class="hljs-keyword">var</span> year=date.<span class="hljs-title function_">getFullYear</span>();<br>          <span class="hljs-comment">/* åœ¨æ—¥æœŸæ ¼å¼ä¸­ï¼Œæœˆä»½æ˜¯ä»0å¼€å§‹çš„ï¼Œå› æ­¤è¦åŠ 0</span><br><span class="hljs-comment">          * ä½¿ç”¨ä¸‰å…ƒè¡¨è¾¾å¼åœ¨å°äº10çš„å‰é¢åŠ 0ï¼Œä»¥è¾¾åˆ°æ ¼å¼ç»Ÿä¸€  å¦‚ 09:11:05</span><br><span class="hljs-comment">          * */</span><br>          <span class="hljs-keyword">var</span> month= date.<span class="hljs-title function_">getMonth</span>()+<span class="hljs-number">1</span>&lt;<span class="hljs-number">10</span> ? <span class="hljs-string">&quot;0&quot;</span>+(date.<span class="hljs-title function_">getMonth</span>()+<span class="hljs-number">1</span>) : date.<span class="hljs-title function_">getMonth</span>()+<span class="hljs-number">1</span>;<br>          <span class="hljs-keyword">var</span> day=date.<span class="hljs-title function_">getDate</span>()&lt;<span class="hljs-number">10</span> ? <span class="hljs-string">&quot;0&quot;</span>+date.<span class="hljs-title function_">getDate</span>() : date.<span class="hljs-title function_">getDate</span>();<br>          <span class="hljs-keyword">var</span> hours=date.<span class="hljs-title function_">getHours</span>()&lt;<span class="hljs-number">10</span> ? <span class="hljs-string">&quot;0&quot;</span>+date.<span class="hljs-title function_">getHours</span>() : date.<span class="hljs-title function_">getHours</span>();<br>          <span class="hljs-keyword">var</span> minutes=date.<span class="hljs-title function_">getMinutes</span>()&lt;<span class="hljs-number">10</span> ? <span class="hljs-string">&quot;0&quot;</span>+date.<span class="hljs-title function_">getMinutes</span>() : date.<span class="hljs-title function_">getMinutes</span>();<br>          <span class="hljs-keyword">var</span> seconds=date.<span class="hljs-title function_">getSeconds</span>()&lt;<span class="hljs-number">10</span> ? <span class="hljs-string">&quot;0&quot;</span>+date.<span class="hljs-title function_">getSeconds</span>() : date.<span class="hljs-title function_">getSeconds</span>();<br>          <span class="hljs-comment">// æ‹¼æ¥</span><br>          <span class="hljs-keyword">return</span> year+<span class="hljs-string">&quot;-&quot;</span>+month+<span class="hljs-string">&quot;-&quot;</span>+day+<span class="hljs-string">&quot; &quot;</span>+hours+<span class="hljs-string">&quot;:&quot;</span>+minutes+<span class="hljs-string">&quot;:&quot;</span>+seconds;<br>      &#125;<br>    &#125;,<br>    <span class="hljs-title function_">mounted</span>(<span class="hljs-params"></span>) &#123;<br>          <span class="hljs-comment">//æ˜¾ç¤ºå½“å‰æ—¥æœŸæ—¶é—´</span><br>          <span class="hljs-keyword">let</span> _this = <span class="hljs-variable language_">this</span><span class="hljs-comment">// å£°æ˜ä¸€ä¸ªå˜é‡æŒ‡å‘Vueå®ä¾‹thisï¼Œä¿è¯ä½œç”¨åŸŸä¸€è‡´</span><br>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">timer</span> = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>           _this.<span class="hljs-property">date</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(); <span class="hljs-comment">// ä¿®æ”¹æ•°æ®date</span><br>           &#125;, <span class="hljs-number">1000</span>)<br>       &#125;,<br>      <span class="hljs-title function_">beforeDestroy</span>(<span class="hljs-params"></span>) &#123;<br>       <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">timer</span>) &#123;<br>        <span class="hljs-built_in">clearInterval</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">timer</span>); <span class="hljs-comment">// åœ¨Vueå®ä¾‹é”€æ¯å‰ï¼Œæ¸…é™¤æˆ‘ä»¬çš„å®šæ—¶å™¨</span><br>      &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;div&gt;&#123;&#123;<span class="hljs-title function_">dateFormat</span>(date)&#125;&#125;&lt;/div&gt;<br></code></pre></td></tr></table></figure><p><strong>å¤©æ°”</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">mounted</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getWeather</span>();<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">timer</span> = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getWeather</span>();<br>  &#125;, <span class="hljs-number">1000</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span>)<br>&#125;,<br><span class="hljs-attr">methods</span>: &#123;<br>  <span class="hljs-title function_">getWeather</span>(<span class="hljs-params"></span>) &#123; <span class="hljs-comment">// ç¬¬ä¸‰æ–¹å¤©æ°”apiæ¥å£</span><br>    axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;https://www.tianqiapi.com/api/&#x27;</span>, &#123;<br>      <span class="hljs-attr">params</span>: &#123;<br>        <span class="hljs-attr">appid</span>: <span class="hljs-string">&#x27;26148275&#x27;</span>,<br>        <span class="hljs-attr">appsecret</span>: <span class="hljs-string">&#x27;2id6H48Y&#x27;</span>,<br>        <span class="hljs-attr">version</span>: <span class="hljs-string">&#x27;v6&#x27;</span><br>      &#125;<br>    &#125;).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> &#123;<br>      <span class="hljs-keyword">if</span> (res.<span class="hljs-property">data</span>) &#123;<br>        <span class="hljs-keyword">if</span> (res.<span class="hljs-property">data</span>.<span class="hljs-property">wea_img</span> == <span class="hljs-string">&#x27;xue&#x27;</span>) &#123;<br>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">imgSrc</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;../assets/img/brand/xue.png&#x27;</span>);<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (res.<span class="hljs-property">data</span>.<span class="hljs-property">wea_img</span> == <span class="hljs-string">&#x27;yin&#x27;</span>) &#123;<br>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">imgSrc</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;../assets/img/brand/yin.png&#x27;</span>);<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (res.<span class="hljs-property">data</span>.<span class="hljs-property">wea_img</span> == <span class="hljs-string">&#x27;yu&#x27;</span> || res.<span class="hljs-property">data</span>.<span class="hljs-property">wea_img</span> == <span class="hljs-string">&#x27;bingbao&#x27;</span>) &#123;<br>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">imgSrc</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;../assets/img/brand/yu.png&#x27;</span>);<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (res.<span class="hljs-property">data</span>.<span class="hljs-property">wea_img</span> == <span class="hljs-string">&#x27;yun&#x27;</span>) &#123;<br>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">imgSrc</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;../assets/img/brand/yun.png&#x27;</span>);<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (res.<span class="hljs-property">data</span>.<span class="hljs-property">wea_img</span> == <span class="hljs-string">&#x27;wu&#x27;</span>) &#123;<br>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">imgSrc</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;../assets/img/brand/wu.png&#x27;</span>);<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (res.<span class="hljs-property">data</span>.<span class="hljs-property">wea_img</span> == <span class="hljs-string">&#x27;shachen&#x27;</span>) &#123;<br>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">imgSrc</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;../assets/img/brand/shachen.png&#x27;</span>);<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (res.<span class="hljs-property">data</span>.<span class="hljs-property">wea_img</span> == <span class="hljs-string">&#x27;lei&#x27;</span>) &#123;<br>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">imgSrc</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;../assets/img/brand/lei.png&#x27;</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">imgSrc</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;../assets/img/brand/qing.png&#x27;</span>);<br>        &#125;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">weatcherData</span> = res.<span class="hljs-property">data</span>;<br>      &#125;<br>    &#125;).<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err)<br>    &#125;)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4ã€ä¸‹æ‹‰æ¡†çš„é€‰é¡¹è§¦å‘äº‹ä»¶"><a href="#4ã€ä¸‹æ‹‰æ¡†çš„é€‰é¡¹è§¦å‘äº‹ä»¶" class="headerlink" title="4ã€ä¸‹æ‹‰æ¡†çš„é€‰é¡¹è§¦å‘äº‹ä»¶"></a>4ã€ä¸‹æ‹‰æ¡†çš„é€‰é¡¹è§¦å‘äº‹ä»¶</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;el-form-item&gt;<br>    &lt;span&gt;ç—…&amp;nbsp;&amp;nbsp;æˆ¿&amp;nbsp;&amp;nbsp;å·&lt;/span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>    &lt;el-select v-model=&quot;patientForm.wardId&quot; placeholder=&quot;è¯·é€‰æ‹©&quot;&gt;<br>        &lt;el-option<br>                   v-for=&quot;item in bedInfo&quot;<br>                   :key=&quot;item&quot;<br>                   :label=&quot;item&quot;<br>                   :value=&quot;item&quot;<br>                   @click.native=&quot;getBedList()&quot;<br>                   &gt;<br>        &lt;/el-option&gt;<br>    &lt;/el-select&gt;<br>&lt;/el-form-item&gt;<br></code></pre></td></tr></table></figure><blockquote><p> ç»™vueç»„ä»¶ç»‘å®šäº‹ä»¶æ—¶å€™ï¼Œå¿…é¡»åŠ ä¸Šnative ï¼Œå¦åˆ™ä¼šè®¤ä¸ºç›‘å¬çš„æ˜¯æ¥è‡ªItemç»„ä»¶è‡ªå®šä¹‰çš„äº‹ä»¶ã€‚</p><p> ä¾‹å­ï¼šå¦‚æœä½¿ç”¨router-linkæ ‡ç­¾ï¼ŒåŠ ä¸Š@clickäº‹ä»¶ï¼Œç»‘å®šçš„äº‹ä»¶ä¼šæ— æ•ˆå› ä¸ºï¼šrouter-linkçš„ä½œç”¨æ˜¯å•çº¯çš„è·¯ç”±è·³è½¬ï¼Œä¼šé˜»æ­¢clickäº‹ä»¶ï¼Œä½ å¯ä»¥è¯•è¯•åªç”¨clickä¸ç”¨native,äº‹ä»¶æ˜¯ä¸ä¼šè§¦å‘çš„ã€‚æ­¤æ—¶åŠ ä¸Š.nativeï¼Œæ‰ä¼šè§¦å‘äº‹ä»¶ã€‚</p><p> &#x3D;&#x3D;è¿™é‡Œä¹Ÿç”¨åˆ°äº†ç”¨v-foråŠ¨æ€ç”Ÿæˆ&#x3D;&#x3D;</p></blockquote><h3 id="5ã€æ˜¾ç¤ºå·²æœ‰å€¼ï¼Œä½†å¯ä»¥ä¿®æ”¹"><a href="#5ã€æ˜¾ç¤ºå·²æœ‰å€¼ï¼Œä½†å¯ä»¥ä¿®æ”¹" class="headerlink" title="5ã€æ˜¾ç¤ºå·²æœ‰å€¼ï¼Œä½†å¯ä»¥ä¿®æ”¹"></a>5ã€æ˜¾ç¤ºå·²æœ‰å€¼ï¼Œä½†å¯ä»¥ä¿®æ”¹</h3><blockquote><p>ä¹‹å‰åœ¨åˆ«çš„ç»„ä»¶é‡Œè¯•è¿‡å¾ˆå¤šæ¬¡ï¼Œä¸ºäº†è®©ç”¨æˆ·æ¯æ¬¡æäº¤æ—¶ä¸ç”¨ä¿®æ”¹æ‰€æœ‰å€¼ï¼Œä½†å‘ç°el-inputè¿™ä¸ªä¸œè¥¿ä¼šè®©v-modelå¤±æ•ˆæ‰€ä»¥ä¸è¡Œï¼Œä½†åæ¥åœ¨å†™ä¸ªäººä¿¡æ¯ä¿®æ”¹çš„æ—¶å€™åˆæˆäº†ï¼Œè®°å½•åœ¨è¿™é‡Œï¼š</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div&gt;<br>    &lt;el-card class=&quot;box-card&quot;&gt;<br>      &lt;el-form ref=&quot;personalForm&quot; :model=&quot;personalForm&quot;&gt;<br>        &lt;el-form-item&gt;<br>          &lt;span&gt;å§“&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;å&lt;/span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>          &lt;el-input v-model=&quot;personalForm.name&quot; style=&quot;width: 50%;&quot;&gt;&lt;/el-input&gt;<br>        &lt;/el-form-item&gt;<br>        &lt;el-form-item&gt;<br>          &lt;span&gt;æ€§&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;åˆ«&lt;/span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>          &lt;el-radio-group v-model=&quot;personalForm.sex&quot;&gt;<br>            &lt;el-radio label=&quot;ç”·&quot;&gt;&lt;/el-radio&gt;<br>            &lt;el-radio label=&quot;å¥³&quot;&gt;&lt;/el-radio&gt;<br>          &lt;/el-radio-group&gt;<br>        &lt;/el-form-item&gt;<br>        &lt;el-form-item&gt;<br>          &lt;span&gt;èº«ä»½è¯å·&lt;/span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>          &lt;el-input v-model=&quot;personalForm.idCard&quot; style=&quot;width: 50%;&quot;&gt;&lt;/el-input&gt;<br>        &lt;/el-form-item&gt;<br>        &lt;el-form-item&gt;<br>          &lt;span&gt;å¹´&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;é¾„&lt;/span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>          &lt;el-input-number v-model=&quot;personalForm.age&quot; @change=&quot;handleChange&quot; :min=&quot;1&quot; :max=&quot;110&quot; label=&quot;æè¿°æ–‡å­—&quot;&gt;&lt;/el-input-number&gt;<br>        &lt;/el-form-item&gt;<br>        &lt;el-form-item&gt;<br>          &lt;span&gt;ç”Ÿ&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;æ—¥&lt;/span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>          &lt;el-date-picker v-model=&quot;personalForm.birth&quot; type=&quot;date&quot; placeholder=&quot;é€‰æ‹©æ—¥æœŸ&quot;&gt;&lt;/el-date-picker&gt;<br>        &lt;/el-form-item&gt;<br>        &lt;el-form-item&gt;<br>          &lt;span&gt;å©š&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;å§»&lt;/span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>          &lt;el-radio-group v-model=&quot;personalForm.marriage&quot;&gt;<br>            &lt;el-radio label=&quot;æœªå©š&quot;&gt;&lt;/el-radio&gt;<br>            &lt;el-radio label=&quot;å·²å©š&quot;&gt;&lt;/el-radio&gt;<br>          &lt;/el-radio-group&gt;<br>        &lt;/el-form-item&gt;<br>        &lt;el-form-item&gt;<br>          &lt;span&gt;å®¶åº­ä½å€&lt;/span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<br>          &lt;el-input v-model=&quot;personalForm.address&quot; style=&quot;width: 50%;&quot;&gt;&lt;/el-input&gt;<br>        &lt;/el-form-item&gt;<br>        &lt;el-button type=&quot;primary&quot; @click=&quot;updatePatient()&quot; class=&quot;button&quot;&gt;æäº¤&lt;/el-button&gt;<br>      &lt;/el-form&gt;<br>    &lt;/el-card&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import &#123;getPatientInfo, updatePatient&#125; from &#x27;@/api/patient&#x27;<br>import &#123;getCurrent&#125; from &#x27;@/api/login&#x27;<br><br>export default &#123;<br>  name: &#x27;PersonalInfo&#x27;,<br>  data()&#123;<br>    return&#123;<br>      updateInfo:[],<br>      personalForm: &#123;<br>        name: &#x27;&#x27;,<br>        sex: &#x27;&#x27;,<br>        idCard: &#x27;&#x27;,<br>        age: &#x27;&#x27;,<br>        birth: &#x27;&#x27;,<br>        telephone: &#x27;&#x27;,<br>        marriage: &#x27;&#x27;,<br>        address: &#x27;&#x27;<br>      &#125;,<br>      username: &#x27;&#x27;,<br>      id: &#x27;&#x27;,<br>    &#125;<br>  &#125;,<br>  mounted() &#123;<br>    this.getCurrent()<br>  &#125;,<br>  methods: &#123;<br>    handleChange(value) &#123;<br>      console.log(value);<br>    &#125;,<br>    getCurrent() &#123;<br>      getCurrent().then((res) =&gt; &#123;<br>        this.username = res.username<br>        getPatientInfo(res.id).then((res) =&gt; &#123;<br>          this.personalForm = res<br>        &#125;)<br>      &#125;)<br>    &#125;,<br>    updatePatient() &#123;<br>      console.log(&#x27;start&#x27;)<br>      getCurrent().then((res) =&gt; &#123;<br>        this.personalForm.telephone = res.id<br>        updatePatient(this.personalForm)<br>        this.$notify(&#123;<br>          title: &#x27;æç¤ºä¿¡æ¯&#x27;,<br>          message: &#x27;æ›´æ–°æˆåŠŸ&#x27;,<br>          type: &#x27;success&#x27;<br>        &#125;)<br>      &#125;)<br>    &#125;<br>  &#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style scoped&gt;<br>.box-card&#123;<br>  width: 60%;<br>  margin-left: 10%;<br>  margin-top: 5%;<br>&#125;<br>.button&#123;<br>  margin-left: 22%;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><h3 id="6ã€è¿‡æ»¤é‡å¤å€¼"><a href="#6ã€è¿‡æ»¤é‡å¤å€¼" class="headerlink" title="6ã€è¿‡æ»¤é‡å¤å€¼"></a>6ã€è¿‡æ»¤é‡å¤å€¼</h3><p>è¿™ä¸ªå¦‚æœåœ¨sqlè¯­å¥é‡Œå†™åªéœ€è¦ä¸€å¥ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-operator">&lt;</span><span class="hljs-keyword">select</span> id<span class="hljs-operator">=</span>&quot;selectAllInIdle&quot; resultType<span class="hljs-operator">=</span>&quot;java.lang.Integer&quot;<span class="hljs-operator">&gt;</span><br>    <span class="hljs-keyword">select</span> <span class="hljs-keyword">DISTINCT</span> bed_info.wardId <span class="hljs-keyword">from</span> bed_info <span class="hljs-keyword">where</span> flag<span class="hljs-operator">=</span>&quot;ç©ºé—²&quot;<br><span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span><span class="hljs-keyword">select</span><span class="hljs-operator">&gt;</span><br></code></pre></td></tr></table></figure><p>å‰ç«¯ä¹Ÿèƒ½åšï¼š</p><p>1ã€æ•°ç»„çš„å½“å‰é¡¹å’Œä¸‹ä¸€é¡¹æ¯”è¾ƒï¼Œå¦‚æœä¸¤è€…ç›¸åŒï¼Œåˆ é™¤å…¶ä¸€</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js">arr.<span class="hljs-title function_">sort</span>();<br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;arr.<span class="hljs-property">length</span>;i++)&#123;<br>    <span class="hljs-keyword">if</span>(arr[i] == arr[i+<span class="hljs-number">1</span>])&#123;<br>        arr.<span class="hljs-title function_">splice</span>(i,<span class="hljs-number">1</span>)<br>        i--<br>    &#125;<br>&#125;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr)<br></code></pre></td></tr></table></figure><p>2ã€åˆ©ç”¨å¯¹è±¡çš„keyæ˜¯å”¯ä¸€çš„è¿›è¡Œæ“ä½œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> json = &#123;&#125;;<br><span class="hljs-keyword">var</span> newArr = [];<br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;arr.<span class="hljs-property">length</span>;i++)&#123;<br>    <span class="hljs-keyword">if</span>(!json[arr[i]])&#123;<br>        json[arr[i]] = <span class="hljs-literal">true</span>;<br>        newArr.<span class="hljs-title function_">push</span>(arr[i]);<br>    &#125;<br>&#125;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(newArr);<br></code></pre></td></tr></table></figure><p>3ã€åˆ©ç”¨indexOfæ“ä½œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> newArr = [];<br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;arr.<span class="hljs-property">length</span>;i++)&#123;<br>    <span class="hljs-keyword">if</span>(newArr.<span class="hljs-title function_">indexOf</span>(arr[i]) == -<span class="hljs-number">1</span>)&#123;<br>        newArr.<span class="hljs-title function_">push</span>(arr[i]);<br>    &#125;<br>&#125;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(newArr);<br></code></pre></td></tr></table></figure><p>å¦é™„ï¼š&#x3D;&#x3D;vueå¤„ç†æ•°ç»„çš„å‡ ç§æ–¹æ³•&#x3D;&#x3D;</p><p><strong>æ•°ç»„è¿½åŠ </strong></p><p>é¡¹ç›®é‡Œçš„å†™æ³•æ˜¯ï¼š<code>arr = arr.cancat(res[i])</code></p><p>å†™æ³•äºŒï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js">array.<span class="hljs-title function_">push</span>(element1[, ...[, elementN]])<br><span class="hljs-keyword">const</span> array = []<br><br>array.<span class="hljs-title function_">push</span>(<span class="hljs-number">1</span>)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(array) <span class="hljs-comment">//=&gt; [1]</span><br><br>array.<span class="hljs-title function_">push</span>(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(array) <span class="hljs-comment">//=&gt; [1, 2, 3]</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(array.<span class="hljs-property">length</span>) <span class="hljs-comment">//=&gt; 3</span><br></code></pre></td></tr></table></figure><p><strong>é¦–ç«¯æ·»åŠ </strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js">array.<span class="hljs-title function_">unshift</span>(element1[, ...[, elementN]])<br><span class="hljs-keyword">const</span> array = [ <span class="hljs-number">4</span>, <span class="hljs-number">5</span> ]<br><br>array.<span class="hljs-title function_">unshift</span>(<span class="hljs-number">3</span>)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(array) <span class="hljs-comment">//=&gt; [3, 4, 5]</span><br><br>array.<span class="hljs-title function_">unshift</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(array) <span class="hljs-comment">//=&gt; [1, 2, 3, 4, 5]</span><br></code></pre></td></tr></table></figure><p><strong>æ’å…¥åˆ°ä¸­é—´æŸä½ç½®</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js">array.<span class="hljs-title function_">splice</span>(start, deleteCount, element1[, ...[, elementN]])<br><span class="hljs-string">`ç¬¬äºŒä¸ªå‚æ•°æ˜¯åˆ é™¤è‹¥å¹²ä¸ªå…ƒç´ ï¼Œè®¾ç½®0ä¸ºä¸åˆ é™¤ä»»ä½•å…ƒç´ `</span><br><span class="hljs-keyword">const</span> array = [ <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span> ]<br><br>array.<span class="hljs-title function_">splice</span>(<span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(array) <span class="hljs-comment">//=&gt; [1, 2, 3, 6, 7]</span><br><br>array.<span class="hljs-title function_">splice</span>(<span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(array) <span class="hljs-comment">//=&gt; [1, 2, 3, 4, 5, 6, 7]</span><br></code></pre></td></tr></table></figure><p><strong>åˆ é™¤æŸä½ç½®å…ƒç´ </strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js">array.<span class="hljs-title function_">splice</span>(start, deleteCount, element1[, ...[, elementN]])<br><span class="hljs-keyword">const</span> array = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">10</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]<br><br>array.<span class="hljs-title function_">splice</span>(<span class="hljs-number">3</span>, <span class="hljs-number">1</span>)<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(array) <span class="hljs-comment">//=&gt; [1, 2, 3, 4, 5]</span><br></code></pre></td></tr></table></figure><p><strong>æ›¿æ¢æ•°ç»„æŸå…ƒç´ </strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-number">1.</span><br><span class="hljs-keyword">const</span> array = [ <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span> ]<br><br>array[<span class="hljs-number">0</span>] = <span class="hljs-number">10</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(array) <span class="hljs-comment">//=&gt; [10, 2, 3, 4, 5]</span><br><br><span class="hljs-number">2.</span><br><span class="hljs-keyword">const</span> array = [ <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span> ]<br>array.<span class="hljs-title function_">splice</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">6</span>)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(array) <span class="hljs-comment">//=&gt; [ 1, 6, 3, 4, 5 ]</span><br><br><span class="hljs-comment">//splice(inde,howmany,item)å‚æ•° æè¿°</span><br><span class="hljs-comment">//index   å¿…éœ€ã€‚è§„å®šä»ä½•å¤„æ·»åŠ /åˆ é™¤å…ƒç´ ã€‚è¯¥å‚æ•°æ˜¯å¼€å§‹æ’å…¥å’Œï¼ˆæˆ–ï¼‰åˆ é™¤çš„æ•°ç»„å…ƒç´ çš„ä¸‹æ ‡ï¼Œå¿…é¡»æ˜¯æ•°å­—ã€‚</span><br><span class="hljs-comment">//howmany å¿…éœ€ã€‚è§„å®šåº”è¯¥åˆ é™¤å¤šå°‘å…ƒç´ ã€‚å¿…é¡»æ˜¯æ•°å­—ï¼Œä½†å¯ä»¥æ˜¯ &quot;0&quot;ã€‚å¦‚æœæœªè§„å®šæ­¤å‚æ•°ï¼Œåˆ™åˆ é™¤ä» index å¼€å§‹åˆ°åŸæ•°ç»„ç»“å°¾çš„æ‰€æœ‰å…ƒç´ ã€‚</span><br><span class="hljs-comment">//itemï¼Œè¦æ·»åŠ åˆ°æ•°ç»„çš„æ–°å…ƒç´ </span><br></code></pre></td></tr></table></figure><p><strong>è¿‡æ»¤å™¨</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js">array.<span class="hljs-title function_">filter</span>(fn)<br><span class="hljs-keyword">const</span> array = [ <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span> ]<br><span class="hljs-keyword">const</span> evenNumbers = array.<span class="hljs-title function_">filter</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">x</span>) &#123;<br>  <span class="hljs-keyword">return</span> x % <span class="hljs-number">2</span> == <span class="hljs-number">0</span><br>&#125;)<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(evenNumbers) <span class="hljs-comment">//=&gt; [2, 4, 6, 8]</span><br></code></pre></td></tr></table></figure><p><strong>æ•°æ®è½¬æ¢</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> array = [ <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span> ]<br><br><span class="hljs-keyword">const</span> addedArray = array.<span class="hljs-title function_">map</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">x</span>) &#123;<br>  <span class="hljs-keyword">return</span> x + <span class="hljs-number">2</span><br>&#125;)<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(addedArray) <span class="hljs-comment">//=&gt; [3,4,5,6,7]</span><br></code></pre></td></tr></table></figure><p><strong>èšåˆå‡½æ•°</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> array = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>]<br><br><span class="hljs-number">1.</span><br>array.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">left,right</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> left + right<br>&#125;)<br><br><span class="hljs-string">`é’ˆå¯¹æ¯æ¬¡æ‰€éœ€è¦ç”¨åˆ°çš„èšåˆæƒ…å†µåšäº›å°è£…`</span><br><span class="hljs-keyword">const</span> arrayUtils = &#123;<br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">sum</span>(<span class="hljs-params">array</span>) &#123;<br>    <span class="hljs-keyword">return</span>  array.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">left,right</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">return</span> letf + right<br>    &#125;)<br>  &#125;<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">multi</span>(<span class="hljs-params">array</span>) &#123;<br>    <span class="hljs-keyword">return</span> array.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">left,right</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">return</span> left * right<br>    &#125;)<br>  &#125;<br>&#125; <br><br><span class="hljs-string">`æˆ–è€…æ›´ä¸ºæŠ½è±¡çš„æ–¹å¼ï¼Œæ¶‰åŠä¸€äº›å‡½æ•°å¼ç¼–ç¨‹çš„æ¦‚å¿µ`</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">reduceFn</span>(<span class="hljs-params">fn</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">array</span>) &#123;<br>    <span class="hljs-keyword">return</span> array.<span class="hljs-title function_">reduce</span>(fn)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>åˆ¤æ–­ä¸¤ä¸ªæ•°ç»„ä¸­ä¸€ä¸ªæ˜¯å¦å®Œå…¨åŒ…å«å¦ä¸€ä¸ª</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js">isInclude (aa, bb) &#123;<br>            <span class="hljs-keyword">return</span> aa.<span class="hljs-title function_">every</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> &#123;<br>                <span class="hljs-keyword">return</span> bb.<span class="hljs-title function_">some</span>(<span class="hljs-function">(<span class="hljs-params">sub</span>) =&gt;</span> &#123;<br>                    <span class="hljs-keyword">return</span> sub === item;<br>                &#125;);<br>            &#125;);<br>        &#125;,<br></code></pre></td></tr></table></figure><p><strong>æ•°ç»„å»é‡ï¼Œè¿”å›æ–°æ•°ç»„</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js">isInclude (aa, bb) &#123;<br>            <span class="hljs-keyword">return</span> aa.<span class="hljs-title function_">every</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> &#123;<br>                <span class="hljs-keyword">return</span> bb.<span class="hljs-title function_">some</span>(<span class="hljs-function">(<span class="hljs-params">sub</span>) =&gt;</span> &#123;<br>                    <span class="hljs-keyword">return</span> sub === item;<br>                &#125;);<br>            &#125;);<br>        &#125;,<br></code></pre></td></tr></table></figure><h3 id="7ã€æ ¹æ®èº«ä»½è¯å·è®¡ç®—å¹´é¾„sql"><a href="#7ã€æ ¹æ®èº«ä»½è¯å·è®¡ç®—å¹´é¾„sql" class="headerlink" title="7ã€æ ¹æ®èº«ä»½è¯å·è®¡ç®—å¹´é¾„sql"></a>7ã€æ ¹æ®èº«ä»½è¯å·è®¡ç®—å¹´é¾„sql</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> id,<br>idCard,<br>(<span class="hljs-built_in">substring</span>(now(),<span class="hljs-number">1</span>,<span class="hljs-number">4</span>)<span class="hljs-operator">-</span><span class="hljs-built_in">substring</span>(idCard,<span class="hljs-number">7</span>,<span class="hljs-number">4</span>))<span class="hljs-operator">-</span>(<span class="hljs-built_in">substring</span>(idCard,<span class="hljs-number">11</span>,<span class="hljs-number">4</span>)<span class="hljs-operator">-</span>date_format(now(),<span class="hljs-string">&#x27;%m%d&#x27;</span>)<span class="hljs-operator">&gt;</span><span class="hljs-number">0</span>) <span class="hljs-keyword">as</span> age<br><span class="hljs-keyword">from</span> patient_info<br></code></pre></td></tr></table></figure><h3 id="8ã€ç»™æç¤ºä¿¡æ¯"><a href="#8ã€ç»™æç¤ºä¿¡æ¯" class="headerlink" title="8ã€ç»™æç¤ºä¿¡æ¯"></a>8ã€ç»™æç¤ºä¿¡æ¯</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable language_">this</span>.$notify(&#123;<br>                <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;æç¤ºä¿¡æ¯&#x27;</span>,<br>                <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;è´¦å·æˆ–å¯†ç é”™è¯¯&#x27;</span>,<br>                <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;error&#x27;</span><br>              &#125;)<br><br><span class="hljs-variable language_">this</span>.$notify(&#123;<br>                <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;æç¤ºä¿¡æ¯&#x27;</span>,<br>                <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;ç™»å½•æˆåŠŸ&#x27;</span>,<br>                <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;success&#x27;</span><br>              &#125;)<br></code></pre></td></tr></table></figure><h3 id="9ã€inputæ¡†çš„ä¸€äº›å±æ€§"><a href="#9ã€inputæ¡†çš„ä¸€äº›å±æ€§" class="headerlink" title="9ã€inputæ¡†çš„ä¸€äº›å±æ€§"></a>9ã€inputæ¡†çš„ä¸€äº›å±æ€§</h3><p>9.1 ä½¿ç”¨valueå¯è®¾ç½®é»˜è®¤å€¼</p><p>9.2 ä½¿ç”¨<code>@keyup.enter.native=&quot;search&quot;</code>å¯ä»¥æ•²å›è½¦è°ƒç”¨æ–¹æ³•</p><p>9.3 ä½ å¯ä»¥ç”¨ <code>v-model</code> æŒ‡ä»¤åœ¨è¡¨å• <code>&lt;input&gt;</code>ã€<code>&lt;textarea&gt;</code> åŠ <code>&lt;select&gt;</code> å…ƒç´ ä¸Šåˆ›å»ºåŒå‘æ•°æ®ç»‘å®šã€‚<code>v-model</code> ä¼šå¿½ç•¥æ‰€æœ‰è¡¨å•å…ƒç´ çš„ <code>value</code>ã€<code>checked</code>ã€<code>selected</code> attribute çš„åˆå§‹å€¼è€Œæ€»æ˜¯å°† Vue å®ä¾‹çš„æ•°æ®ä½œä¸ºæ•°æ®æ¥æºã€‚ä½ åº”è¯¥é€šè¿‡ JavaScript åœ¨ç»„ä»¶çš„ <code>data</code> é€‰é¡¹ä¸­å£°æ˜åˆå§‹å€¼ã€‚</p><p>9.4 <code>placeholder=&quot;è¾“å…¥å…³é”®å­—æœç´¢&quot;</code>é»˜è®¤å€¼</p><h3 id="10ã€å‰ç«¯æ—¥æœŸä¼ ç»™åç«¯å‡ºç°jsonæ ¼å¼é”™è¯¯"><a href="#10ã€å‰ç«¯æ—¥æœŸä¼ ç»™åç«¯å‡ºç°jsonæ ¼å¼é”™è¯¯" class="headerlink" title="10ã€å‰ç«¯æ—¥æœŸä¼ ç»™åç«¯å‡ºç°jsonæ ¼å¼é”™è¯¯"></a>10ã€å‰ç«¯æ—¥æœŸä¼ ç»™åç«¯å‡ºç°jsonæ ¼å¼é”™è¯¯</h3><p>åœ¨å®ä½“ç±»é‡ŒåŠ æ³¨è§£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.xbb.entity;<br><span class="hljs-keyword">import</span> com.fasterxml.jackson.annotation.JsonFormat;<br><span class="hljs-keyword">import</span> lombok.Data;<br><span class="hljs-keyword">import</span> org.springframework.format.annotation.DateTimeFormat;<br><span class="hljs-keyword">import</span> java.util.Date;<br><br><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Order</span> &#123;<br>    <span class="hljs-keyword">private</span> Long id;<span class="hljs-comment">//è‡ªå¢ä¸»é”®</span><br>    <span class="hljs-meta">@JsonFormat(pattern = &quot;yyyy-MM-dd&quot;, timezone = &quot;GMT+8&quot;)</span><br>    <span class="hljs-keyword">private</span> Date createTime;<span class="hljs-comment">//è®¢å•åˆ›å»ºæ—¶é—´</span><br>    <span class="hljs-meta">@JsonFormat(pattern = &quot;yyyy-MM-dd&quot;, timezone = &quot;GMT+8&quot;)</span><br>    <span class="hljs-keyword">private</span> Date orderDay;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å¤§è‡´å°±æƒ³åˆ°è¿™äº›ï¼Œå¯èƒ½å†æœ‰å°±æ˜¯ä¸€äº›å°ç»†èŠ‚ï¼Œæƒ³è¯´å®Œå…¨ä¸å¤ªå¯èƒ½ï¼Œæ€»çš„æ¥è¯´è¿˜æ˜¯æ”¶è·é¢‡ä¸°çš„ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>web</category>
      
    </categories>
    
    
    <tags>
      
      <tag>web</tag>
      
      <tag>springboot</tag>
      
      <tag>vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>react</title>
    <link href="/blog/2022/08/12/react/"/>
    <url>/blog/2022/08/12/react/</url>
    
    <content type="html"><![CDATA[<h1 id="react"><a href="#react" class="headerlink" title="react"></a>react</h1><p>å¸¸çœ‹å¸¸æ–°</p><h3 id="1-npxå¯ä»¥ä¸ç”¨ç®¡nodeç‰ˆæœ¬çš„é™åˆ¶ï¼Œå…ˆä¸‹è½½ï¼Œä¹‹ååˆ æ‰ï¼Œä¸å ç”µè„‘ç©ºé—´"><a href="#1-npxå¯ä»¥ä¸ç”¨ç®¡nodeç‰ˆæœ¬çš„é™åˆ¶ï¼Œå…ˆä¸‹è½½ï¼Œä¹‹ååˆ æ‰ï¼Œä¸å ç”µè„‘ç©ºé—´" class="headerlink" title="1. npxå¯ä»¥ä¸ç”¨ç®¡nodeç‰ˆæœ¬çš„é™åˆ¶ï¼Œå…ˆä¸‹è½½ï¼Œä¹‹ååˆ æ‰ï¼Œä¸å ç”µè„‘ç©ºé—´"></a>1. npxå¯ä»¥ä¸ç”¨ç®¡nodeç‰ˆæœ¬çš„é™åˆ¶ï¼Œå…ˆä¸‹è½½ï¼Œä¹‹ååˆ æ‰ï¼Œä¸å ç”µè„‘ç©ºé—´</h3><p>å¿«é€Ÿæ–°å»ºä¸€ä¸ªreacté¡¹ç›®ï¼š<code>npx create-react-app demo</code></p><h3 id="2-ç»„ä»¶åç§°è¦å¤§å†™"><a href="#2-ç»„ä»¶åç§°è¦å¤§å†™" class="headerlink" title="2. ç»„ä»¶åç§°è¦å¤§å†™"></a>2. ç»„ä»¶åç§°è¦å¤§å†™</h3><h3 id="3-æœ€ç®€æ˜“çš„reactå®ä¾‹"><a href="#3-æœ€ç®€æ˜“çš„reactå®ä¾‹" class="headerlink" title="3. æœ€ç®€æ˜“çš„reactå®ä¾‹"></a>3. æœ€ç®€æ˜“çš„reactå®ä¾‹</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello, world!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>,<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;root&#x27;</span>)<br>);<br></code></pre></td></tr></table></figure><p>å¼€å§‹è¿›è¡Œæå–ï¼šå¯¹å€¼å’Œæ–¹æ³•</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">formatName</span>(<span class="hljs-params">user</span>) &#123;<br>  <span class="hljs-keyword">return</span> user.<span class="hljs-property">firstName</span> + <span class="hljs-string">&#x27; &#x27;</span> + user.<span class="hljs-property">lastName</span>;<br>&#125;<br><br><span class="hljs-keyword">const</span> user = &#123;<br>  <span class="hljs-attr">firstName</span>: <span class="hljs-string">&#x27;Harper&#x27;</span>,<br>  <span class="hljs-attr">lastName</span>: <span class="hljs-string">&#x27;Perez&#x27;</span><br>&#125;;<br><br><span class="hljs-keyword">const</span> element = (<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">    Hello, &#123;formatName(user)&#125;!</span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br>);<br><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<br>  element,<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;root&#x27;</span>)<br>);<br></code></pre></td></tr></table></figure><h3 id="4-JSä¸­å‡ºç°-ä»£è¡¨å…¶ä¸­æƒ³è¦å†™htmlï¼Œhtmlä¸­å‡ºç°-ä»£è¡¨å…¶ä¸­æƒ³è¦å†™js"><a href="#4-JSä¸­å‡ºç°-ä»£è¡¨å…¶ä¸­æƒ³è¦å†™htmlï¼Œhtmlä¸­å‡ºç°-ä»£è¡¨å…¶ä¸­æƒ³è¦å†™js" class="headerlink" title="4. JSä¸­å‡ºç°()ä»£è¡¨å…¶ä¸­æƒ³è¦å†™htmlï¼Œhtmlä¸­å‡ºç°{}ä»£è¡¨å…¶ä¸­æƒ³è¦å†™js"></a>4. JSä¸­å‡ºç°()ä»£è¡¨å…¶ä¸­æƒ³è¦å†™htmlï¼Œhtmlä¸­å‡ºç°{}ä»£è¡¨å…¶ä¸­æƒ³è¦å†™js</h3><h3 id="5-è¯­æ³•ğŸ¬ï¼š"><a href="#5-è¯­æ³•ğŸ¬ï¼š" class="headerlink" title="5. è¯­æ³•ğŸ¬ï¼š"></a>5. è¯­æ³•ğŸ¬ï¼š</h3><p>åœ¨vs codeä¸­é…ç½®jsxçš„è¯­æ³•ï¼šåœ¨è®¾ç½®ä¸­æœç´ include languagesï¼Œæ·»åŠ â€javascriptâ€: â€œjavascriptreactâ€œï¼Œå°†Trigger Expansion On Tabè®¾ç½®ä¸ºå¯ç”¨</p><p>å®‰è£…es7æ’ä»¶ï¼Œrcc+tabæˆ–rfc+tabæ”¹å˜äººç”Ÿï¼ˆç±»ç»„ä»¶å’Œå‡½æ•°å¼ç»„ä»¶</p><p>åœ¨settings.jsonä¸­æ·»åŠ     â€œeditor.formatOnSaveâ€: true,  å¯ä»¥åœ¨ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç </p><h3 id="6-æ™®é€šå˜é‡çš„å€¼å˜åŒ–ä¸ä¼šè§¦å‘è§†å›¾æ›´æ–°ï¼Œå¯ä»¥ä½¿ç”¨setStateæ¥æ›´æ–°è§†å›¾"><a href="#6-æ™®é€šå˜é‡çš„å€¼å˜åŒ–ä¸ä¼šè§¦å‘è§†å›¾æ›´æ–°ï¼Œå¯ä»¥ä½¿ç”¨setStateæ¥æ›´æ–°è§†å›¾" class="headerlink" title="6. æ™®é€šå˜é‡çš„å€¼å˜åŒ–ä¸ä¼šè§¦å‘è§†å›¾æ›´æ–°ï¼Œå¯ä»¥ä½¿ç”¨setStateæ¥æ›´æ–°è§†å›¾"></a>6. æ™®é€šå˜é‡çš„å€¼å˜åŒ–ä¸ä¼šè§¦å‘è§†å›¾æ›´æ–°ï¼Œå¯ä»¥ä½¿ç”¨setStateæ¥æ›´æ–°è§†å›¾</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Component</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">const</span> num = <span class="hljs-number">1</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) &#123;<br>        <span class="hljs-variable language_">super</span>(props)<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>            <span class="hljs-attr">num</span>: <span class="hljs-number">1</span><br>        &#125;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">addNum</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">addNum</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>)<br>    &#125;<br>    <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> (<br>            <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>æ•°å­—ä¸ºï¼š&#123;this.state.num&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">                &#123;/* æ”¹å˜å€¼ä¸”åˆ·æ–°é¡µé¢çš„å››ç§å†™æ³• */&#125;</span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> this.setState(&#123; num: this.state.num + 1 &#125;)&#125;&gt;ç´¯åŠ 1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;this.addNum.bind(this)&#125;</span>&gt;</span>ç´¯åŠ 2<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> this.addNum()&#125;&gt;ç´¯åŠ 3<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;this.addNum&#125;</span>&gt;</span>ç´¯åŠ 3<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>        )<br>    &#125;<br>    <span class="hljs-title function_">addNum</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123; <span class="hljs-attr">num</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">num</span> + <span class="hljs-number">1</span> &#125;)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="7-ç»™è‡ªå®šä¹‰çš„æ–¹æ³•ä¼ é€’å‚æ•°ï¼š"><a href="#7-ç»™è‡ªå®šä¹‰çš„æ–¹æ³•ä¼ é€’å‚æ•°ï¼š" class="headerlink" title="7. ç»™è‡ªå®šä¹‰çš„æ–¹æ³•ä¼ é€’å‚æ•°ï¼š"></a>7. ç»™è‡ªå®šä¹‰çš„æ–¹æ³•ä¼ é€’å‚æ•°ï¼š</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;button onClick=&#123;<span class="hljs-variable language_">this</span>.<span class="hljs-property">btnClick</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-number">1</span>)&#125;&gt;æŒ‰é’®<span class="hljs-number">1</span>&lt;/button&gt;<br><span class="hljs-title function_">btnClick</span>(<span class="hljs-params">num</span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(num)<br>    &#125;<br></code></pre></td></tr></table></figure><h3 id="8-å‡½æ•°å¼ç»„ä»¶æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸï¼Œæ²¡æœ‰thisï¼Œå‡½æ•°å¼ç»„ä»¶æ²¡æœ‰stateçŠ¶æ€ï¼Œä¸»è¦ç”¨Hookï¼šReactå®˜æ–¹æä¾›çš„hook-x2F-å¼€å‘äººå‘˜è‡ªå®šä¹‰çš„hook"><a href="#8-å‡½æ•°å¼ç»„ä»¶æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸï¼Œæ²¡æœ‰thisï¼Œå‡½æ•°å¼ç»„ä»¶æ²¡æœ‰stateçŠ¶æ€ï¼Œä¸»è¦ç”¨Hookï¼šReactå®˜æ–¹æä¾›çš„hook-x2F-å¼€å‘äººå‘˜è‡ªå®šä¹‰çš„hook" class="headerlink" title="8. å‡½æ•°å¼ç»„ä»¶æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸï¼Œæ²¡æœ‰thisï¼Œå‡½æ•°å¼ç»„ä»¶æ²¡æœ‰stateçŠ¶æ€ï¼Œä¸»è¦ç”¨Hookï¼šReactå®˜æ–¹æä¾›çš„hook&#x2F;å¼€å‘äººå‘˜è‡ªå®šä¹‰çš„hook"></a>8. å‡½æ•°å¼ç»„ä»¶æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸï¼Œæ²¡æœ‰thisï¼Œå‡½æ•°å¼ç»„ä»¶æ²¡æœ‰stateçŠ¶æ€ï¼Œä¸»è¦ç”¨Hookï¼šReactå®˜æ–¹æä¾›çš„hook&#x2F;å¼€å‘äººå‘˜è‡ªå®šä¹‰çš„hook</h3><h3 id="9-hook-åªèƒ½ç”¨åœ¨ç»„ä»¶å‡½æ•°çš„æœ€é¡¶å±‚"><a href="#9-hook-åªèƒ½ç”¨åœ¨ç»„ä»¶å‡½æ•°çš„æœ€é¡¶å±‚" class="headerlink" title="9. hook: åªèƒ½ç”¨åœ¨ç»„ä»¶å‡½æ•°çš„æœ€é¡¶å±‚"></a>9. hook: åªèƒ½ç”¨åœ¨ç»„ä»¶å‡½æ•°çš„æœ€é¡¶å±‚</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// æœ€ç®€å•çš„hookï¼šuseState</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">let</span> msg = <span class="hljs-string">&quot;good&quot;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App5</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> [msg, setMsg] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">1</span>)<br><br>    <span class="hljs-comment">// const fn = () =&gt; &#123;</span><br>    <span class="hljs-comment">//     setMsg(&#x27;changed&#x27;)</span><br>    <span class="hljs-comment">// &#125;</span><br><br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">fn</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-title function_">setMsg</span>(<span class="hljs-number">0</span>)<br><br>    <span class="hljs-keyword">return</span> (<br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;msg&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;fn&#125;</span>&gt;</span>ä¿®æ”¹1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> setMsg(0)&#125;&gt;ä¿®æ”¹2<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> setMsg(msg + 1)&#125;&gt;ç´¯åŠ <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="10-æ•°æ®è¯·æ±‚ã€æ£€æµ‹æ•°æ®æ›´æ–°ã€åƒåœ¾å›æ”¶çš„å®ç°ï¼šuseEffect"><a href="#10-æ•°æ®è¯·æ±‚ã€æ£€æµ‹æ•°æ®æ›´æ–°ã€åƒåœ¾å›æ”¶çš„å®ç°ï¼šuseEffect" class="headerlink" title="10. æ•°æ®è¯·æ±‚ã€æ£€æµ‹æ•°æ®æ›´æ–°ã€åƒåœ¾å›æ”¶çš„å®ç°ï¼šuseEffect"></a>10. æ•°æ®è¯·æ±‚ã€æ£€æµ‹æ•°æ®æ›´æ–°ã€åƒåœ¾å›æ”¶çš„å®ç°ï¼šuseEffect</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123; useState, useEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App6</span>(<span class="hljs-params"></span>) &#123;<br><br>    <span class="hljs-keyword">const</span> [num1, setNum1] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">const</span> [num2, setNum2] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">2</span>)<br><br>    <span class="hljs-comment">// æ¨¡æ‹Ÿmountedï¼Œä¸€èˆ¬åœ¨è¿™ä¸ªä½ç½®å†™ajaxï¼šæ•°æ®è¯·æ±‚ï¼Œä¹Ÿå¯ä»¥æ£€æµ‹æ•°æ®æ›´æ–°</span><br>    <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;mounted&#x27;</span>)<br>    &#125;)<br><br>    <span class="hljs-comment">// æ£€æµ‹ç‰¹å®šæ•°æ®æ›´æ–°ï¼Œå†™åœ¨æ•°ç»„ä¸­ï¼Œä¸å†™çš„è¯é»˜è®¤æ£€æµ‹æ‰€æœ‰å˜é‡æ›´æ–°</span><br>    <span class="hljs-comment">// ä¸æƒ³æ£€æµ‹å¯ä»¥ç»™ç©ºæ•°ç»„</span><br>    <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;num1æ›´æ–°äº†&#x27;</span>)<br>    &#125;, [num1])<br><br>    <span class="hljs-comment">// æ¨¡æ‹ŸbeforeDestoryï¼Œä¸€èˆ¬åœ¨è¿™ä¸ªé˜¶æ®µå¤„ç†è„æ•°æ®å’Œåƒåœ¾å›æ”¶</span><br>    <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> &#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;destory&#x27;</span>)<br>        &#125;<br>    &#125;)<br><br>    <span class="hljs-keyword">return</span> (<br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>æ•°å­—1ä¸ºï¼š&#123;num1&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> setNum1(num1 + 1)&#125;&gt;ç´¯åŠ 1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> /&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>æ•°å­—2ä¸ºï¼š&#123;num2&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> setNum2(num2 + 1)&#125;&gt;ç´¯åŠ 2<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><br>    )<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="11-ç»„ä»¶é—´ä¼ å‚"><a href="#11-ç»„ä»¶é—´ä¼ å‚" class="headerlink" title="11. ç»„ä»¶é—´ä¼ å‚"></a>11. ç»„ä»¶é—´ä¼ å‚</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-comment">// çˆ¶ä¼ å­ï¼šä½¿ç”¨props</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Child</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>        <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å­ç»„ä»¶ - &#123;props.num&#125; - <span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> props.setNum(333)&#125;&gt;ä¿®æ”¹å€¼<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/&gt;</span></span><br>    )<br>&#125;<br><br><span class="hljs-comment">// çˆ¶ç»„ä»¶</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Father</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Child</span> <span class="hljs-attr">num</span>=<span class="hljs-string">&#123;props.num&#125;</span> <span class="hljs-attr">setNum</span>=<span class="hljs-string">&#123;props.setNum&#125;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Child</span>&gt;</span></span><br>&#125;<br><br><span class="hljs-comment">// é¡¶çº§ç»„ä»¶</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App7</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> [num, setNum] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">123</span>)<br>    <span class="hljs-comment">// æä¾›ç»™å­ç»„ä»¶ç”¨æ¥ä¿®æ”¹numçš„å‡½æ•°</span><br>    <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Father</span> <span class="hljs-attr">num</span>=<span class="hljs-string">&#123;num&#125;</span> <span class="hljs-attr">setNum</span>=<span class="hljs-string">&#123;setNum&#125;</span> /&gt;</span></span><br>&#125;<br><br><span class="hljs-comment">// å­ä¼ çˆ¶ï¼ŒçœŸæ­£åœ¨å¹²æ´»çš„æ˜¯çˆ¶ç»„ä»¶: æä¾›ç”¨äºä¿®æ”¹çš„å‡½æ•°</span><br></code></pre></td></tr></table></figure><h3 id="12-å¤šçº§ç»„ä»¶çš„ä¼ å€¼ä¸€èˆ¬ä¼šä½¿ç”¨ä¸Šä¸‹æ–‡ç©ºé—´"><a href="#12-å¤šçº§ç»„ä»¶çš„ä¼ å€¼ä¸€èˆ¬ä¼šä½¿ç”¨ä¸Šä¸‹æ–‡ç©ºé—´" class="headerlink" title="12. å¤šçº§ç»„ä»¶çš„ä¼ å€¼ä¸€èˆ¬ä¼šä½¿ç”¨ä¸Šä¸‹æ–‡ç©ºé—´"></a>12. å¤šçº§ç»„ä»¶çš„ä¼ å€¼ä¸€èˆ¬ä¼šä½¿ç”¨ä¸Šä¸‹æ–‡ç©ºé—´</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState, createContext, useContext &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-comment">// åˆ›å»ºä¸Šä¸‹æ–‡ç©ºé—´ï¼ˆæä¾›è€…ã€æ¶ˆè´¹è€…ï¼‰ï¼ˆprovider, consumerï¼‰</span><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">NumContext</span> = <span class="hljs-title function_">createContext</span>()<br><br><span class="hljs-comment">// çˆ¶ä¼ å­ï¼šä½¿ç”¨props</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Child</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-keyword">const</span> &#123; num, setNum &#125; = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">NumContext</span>)<br>    <span class="hljs-keyword">return</span> (<br>        <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;num&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> setNum(876)&#125;&gt;ä¿®æ”¹num<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/&gt;</span></span><br>    )<br>&#125;<br><br><span class="hljs-comment">//çˆ¶ç»„ä»¶</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">Father</span> = (<span class="hljs-params"></span>) =&gt; <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Child</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Child</span>&gt;</span></span><br><br><span class="hljs-comment">// é¡¶çº§ç»„ä»¶</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App9</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> [num, setNum] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">123</span>)<br>    <span class="hljs-comment">// æä¾›ç»™å­ç»„ä»¶ç”¨æ¥ä¿®æ”¹numçš„å‡½æ•°</span><br>    <span class="hljs-keyword">return</span> (<br>        <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">NumContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;&#123;</span> <span class="hljs-attr">num</span>, <span class="hljs-attr">setNum</span> &#125;&#125;&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">Father</span> /&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">NumContext.Provider</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/&gt;</span></span><br>    )<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="13-å—æ§ç»„ä»¶å’Œä¸å—æ§ç»„ä»¶ï¼Œåªå­˜åœ¨äºè¡¨å•å…ƒç´ ï¼Œå—æ§ç»„ä»¶å°±æ˜¯è¡¨å•å…ƒç´ çš„valueéœ€è¦stateï¼ˆæˆ–useSateï¼‰å®šä¹‰"><a href="#13-å—æ§ç»„ä»¶å’Œä¸å—æ§ç»„ä»¶ï¼Œåªå­˜åœ¨äºè¡¨å•å…ƒç´ ï¼Œå—æ§ç»„ä»¶å°±æ˜¯è¡¨å•å…ƒç´ çš„valueéœ€è¦stateï¼ˆæˆ–useSateï¼‰å®šä¹‰" class="headerlink" title="13. å—æ§ç»„ä»¶å’Œä¸å—æ§ç»„ä»¶ï¼Œåªå­˜åœ¨äºè¡¨å•å…ƒç´ ï¼Œå—æ§ç»„ä»¶å°±æ˜¯è¡¨å•å…ƒç´ çš„valueéœ€è¦stateï¼ˆæˆ–useSateï¼‰å®šä¹‰"></a>13. å—æ§ç»„ä»¶å’Œä¸å—æ§ç»„ä»¶ï¼Œåªå­˜åœ¨äºè¡¨å•å…ƒç´ ï¼Œå—æ§ç»„ä»¶å°±æ˜¯è¡¨å•å…ƒç´ çš„valueéœ€è¦stateï¼ˆæˆ–useSateï¼‰å®šä¹‰</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App10</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> [value, setValue] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&#x27;asd&#x27;</span>)<br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">inputChange</span> = (<span class="hljs-params">e</span>) =&gt; &#123;<br>        <span class="hljs-title function_">setValue</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>)<br>    &#125;<br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">clickFn</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value)<br>    <span class="hljs-keyword">return</span> (<br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;value&#125;</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;inputChange&#125;</span> /&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;clickFn&#125;</span>&gt;</span>è·å–è¾“å…¥æ¡†çš„å€¼<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>&#125; <br><br><span class="hljs-comment">// ä¸å—æ§ç»„ä»¶ï¼šå€¼ä¸ä¼šè¢«valueå’ŒonChangeå½±å“</span><br><span class="hljs-comment">// æ„å‘³ç€è¡¨å•å…ƒç´ çš„valueæ— æ³•é€šè¿‡stateè·å–ï¼Œåªèƒ½ä½¿ç”¨refï¼ˆæˆ–useRefï¼‰è·å–</span><br></code></pre></td></tr></table></figure><h3 id="14-ä½¿ç”¨memoä½¿çˆ¶ç»„ä»¶æ›´æ–°ä¸å½±å“å­ç»„ä»¶"><a href="#14-ä½¿ç”¨memoä½¿çˆ¶ç»„ä»¶æ›´æ–°ä¸å½±å“å­ç»„ä»¶" class="headerlink" title="14. ä½¿ç”¨memoä½¿çˆ¶ç»„ä»¶æ›´æ–°ä¸å½±å“å­ç»„ä»¶"></a>14. ä½¿ç”¨memoä½¿çˆ¶ç»„ä»¶æ›´æ–°ä¸å½±å“å­ç»„ä»¶</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState, memo &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">Child</span> = <span class="hljs-title function_">memo</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">123</span>)<br>    <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>child<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>&#125;)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App11</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> [num, setNum] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">return</span> (<br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>æ•°å­—ä¸ºï¼š&#123;num&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> setNum(num + 1)&#125;&gt;</span><br><span class="language-xml">                ç´¯åŠ </span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> /&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">Child</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Child</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½†æ˜¯memoåªæœ‰åœ¨å­ç»„ä»¶æ˜¯çº¯é™æ€çš„æ—¶å€™æ‰æœ‰æ•ˆï¼Œ<br>ä¸æ˜¯çº¯é™æ€æ—¶ï¼Œå¯ä»¥ä½¿ç”¨useCallBack<br>memoå¯ä»¥é…åˆuseCallbackä½¿ç”¨</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState, memo, useCallback &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">Child</span> = <span class="hljs-title function_">memo</span>(<span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">123</span>)<br>    <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> props.doSth()&#125;&gt;ç´¯åŠ <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br>&#125;)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App11</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> [num, setNum] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">1</span>)<br>    <span class="hljs-comment">// setNum(newValue) ä½¿ç”¨æ–°å€¼å¼ºè¡Œè¦†ç›–åˆå§‹å€¼</span><br>    <span class="hljs-comment">// serNum(num =&gt; num+1) ä¸æ–­ä½¿ç”¨æ–°å€¼è¦†ç›–æ—§å€¼</span><br>    <span class="hljs-keyword">const</span> doSth = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-title function_">setNum</span>(<span class="hljs-function"><span class="hljs-params">num</span> =&gt;</span> num + <span class="hljs-number">1</span>)<br>    &#125;, [])<br>    <span class="hljs-keyword">return</span> (<br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>æ•°å­—ä¸ºï¼š&#123;num&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> /&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">Child</span> <span class="hljs-attr">doSth</span>=<span class="hljs-string">&#123;doSth&#125;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Child</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>&#125;<br><br>ä¹Ÿå¯ä»¥ä½¿ç”¨useMemo<br>    <span class="hljs-comment">// å‡½æ•°ä¸­è¿”å›å‡½æ•°ï¼šé«˜é˜¶å‡½æ•°</span><br>    <span class="hljs-keyword">const</span> doSth = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">setNum</span>(<span class="hljs-function"><span class="hljs-params">num</span> =&gt;</span> num + <span class="hljs-number">1</span>)<br>    &#125;, [])<br></code></pre></td></tr></table></figure><h3 id="15-React-Reduxï¼šjavascriptçŠ¶æ€å®¹å™¨ï¼Œæä¾›å¯é¢„æµ‹åŒ–çš„çŠ¶æ€ç®¡ç†"><a href="#15-React-Reduxï¼šjavascriptçŠ¶æ€å®¹å™¨ï¼Œæä¾›å¯é¢„æµ‹åŒ–çš„çŠ¶æ€ç®¡ç†" class="headerlink" title="15. React Reduxï¼šjavascriptçŠ¶æ€å®¹å™¨ï¼Œæä¾›å¯é¢„æµ‹åŒ–çš„çŠ¶æ€ç®¡ç†"></a>15. React Reduxï¼šjavascriptçŠ¶æ€å®¹å™¨ï¼Œæä¾›å¯é¢„æµ‹åŒ–çš„çŠ¶æ€ç®¡ç†</h3><p>åœ¨srcä¸‹åˆ›å»ºindex.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// ä»“åº“çš„å…¥å£æ–‡ä»¶ï¼Œå†™å¥½ååŸºæœ¬ä¸å˜</span><br><br><span class="hljs-comment">// å¼•å…¥reducer</span><br><br><span class="hljs-keyword">import</span> reducer <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./reducer&#x27;</span><br><br><span class="hljs-keyword">import</span> &#123; createStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;redux&#x27;</span><br><br><span class="hljs-keyword">const</span> store = <span class="hljs-title function_">createStore</span>(reducer)<br><br><span class="hljs-comment">// å¯¼å‡ºä»“åº“</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> store;<br></code></pre></td></tr></table></figure><p>å†åˆ›å»ºreducer.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// åˆ›å»ºåˆå§‹çŠ¶æ€ï¼Œå¹¶å¯¼å‡ºä¸€ä¸ªå‡½æ•°</span><br><br><span class="hljs-keyword">const</span> defaultSate = &#123;<br>    <span class="hljs-attr">num</span>: <span class="hljs-number">1</span><br>&#125;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">reducerState</span> = (<span class="hljs-params">state = defaultSate, action</span>) =&gt; &#123;<br>    <span class="hljs-comment">// ä¸èƒ½ç›´æ¥å¯¹stateè¿›è¡Œä¿®æ”¹ï¼ŒåŠ ä¸€å±‚æ·±æ‹·è´</span><br>    <span class="hljs-keyword">let</span> newState = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(state))<br>    <span class="hljs-keyword">switch</span> (action.<span class="hljs-property">type</span>) &#123;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;addNum&quot;</span>:<br>            newState.<span class="hljs-property">num</span> += action.<span class="hljs-property">value</span>;<br>            <span class="hljs-keyword">break</span>;<br>        <span class="hljs-attr">default</span>:<br>            <span class="hljs-keyword">break</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> newState;<br>&#125;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> reducerState<br></code></pre></td></tr></table></figure><p>æ–°å»ºç»„ä»¶</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> &#123; connect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-redux&#x27;</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">App13</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>æ•°å­—ä¸ºï¼š&#123;props.num&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> props.addN()&#125;&gt;ç´¯åŠ <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>&#125;<br><span class="hljs-comment">// çŠ¶æ€æ˜ å°„ï¼šå°†reducerä¸­çš„stateæ˜ å°„æˆprops</span><br><span class="hljs-comment">// è®©å¼€å‘è€…å¯ä»¥åœ¨ç»„ä»¶ä¸­ä½¿ç”¨props.numå»è°ƒç”¨stateä¸­çš„num</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">mapStateToProps</span> = (<span class="hljs-params">state</span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>        <span class="hljs-attr">num</span>: state.<span class="hljs-property">num</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">mapDispatchToProps</span> = (<span class="hljs-params">dispatch</span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>        <span class="hljs-title function_">addN</span>(<span class="hljs-params"></span>) &#123;<br>            <span class="hljs-keyword">const</span> action = &#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;addNum&quot;</span>, value : <span class="hljs-number">2</span> &#125;<br>            <span class="hljs-title function_">dispatch</span>(action)<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// äº‹ä»¶æ´¾å‘æ˜ å°„ï¼šå°†reducerä¸­çš„äº‹ä»¶æ˜ å°„æˆpropsï¼Œè®©å¼€å‘è€…å¯ä»¥åœ¨ç»„ä»¶ä¸­ä½¿ç”¨æ–¹æ³•</span><br><span class="hljs-comment">// export default connect(stateæ˜ å°„, dispatchæ˜ å°„)(å½“å‰ç»„ä»¶åç§°)</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">connect</span>(mapStateToProps, mapDispatchToProps)(<span class="hljs-title class_">App13</span>)<br></code></pre></td></tr></table></figure><h3 id="16-è·¯ç”±"><a href="#16-è·¯ç”±" class="headerlink" title="16. è·¯ç”±"></a>16. è·¯ç”±</h3><p>å…¥å£æ–‡ä»¶ï¼šsrc&#x2F;index.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// door file</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDOM</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-dom&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Router</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./router&#x27;</span><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Provider</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-redux&#x27;</span><br><span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./store&#x27;</span><br><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Router</span> /&gt;</span></span>,<br>    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;root&#x27;</span>)<br>)<span class="hljs-string">``</span><span class="hljs-string">`</span><br><span class="hljs-string"></span><br><span class="hljs-string">App14.jsx</span><br><span class="hljs-string">`</span><span class="hljs-string">``</span>jsx<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Outlet</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-router-dom&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App14</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>App14<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">Outlet</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Outlet</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>&#125;<br></code></pre></td></tr></table></figure><p>è·¯ç”±æ–‡ä»¶ï¼šæ–°å»ºsrc&#x2F;router&#x2F;index.jsx</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// åŸºæœ¬æ€è·¯ï¼šApp &gt; Home + List + Detail</span><br><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../App14&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../pages/Home&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">List</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../pages/List&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Detail</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../pages/Detail&#x27;</span><br><br><span class="hljs-comment">// BrowserRouterï¼ˆhistoryæ¨¡å¼ï¼‰ä¸å¸¦#éœ€è¦é…ç½®ï¼ŒHashRouterï¼ˆHashæ¨¡å¼ï¼‰å¸¦#æ‰“åŒ…åå³å¯</span><br><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">BrowserRouter</span>, <span class="hljs-title class_">Routes</span>, <span class="hljs-title class_">Route</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-router-dom&#x27;</span><br><br><span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªè·¯ç”±</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">BaseRouter</span> = (<span class="hljs-params"></span>) =&gt; (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">BrowserRouter</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Routes</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/&quot;</span> <span class="hljs-attr">element</span>=<span class="hljs-string">&#123;</span>&lt;<span class="hljs-attr">App</span> /&gt;</span>&#125;&gt;</span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/home&quot;</span> <span class="hljs-attr">element</span>=<span class="hljs-string">&#123;</span>&lt;<span class="hljs-attr">Home</span> /&gt;</span>&#125;&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">Route</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/list&quot;</span> <span class="hljs-attr">element</span>=<span class="hljs-string">&#123;</span>&lt;<span class="hljs-attr">List</span> /&gt;</span>&#125;&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">Route</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/detail&quot;</span> <span class="hljs-attr">element</span>=<span class="hljs-string">&#123;</span>&lt;<span class="hljs-attr">Detail</span> /&gt;</span>&#125;&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">Route</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">Route</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">Routes</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">BrowserRouter</span>&gt;</span></span><br>)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">BaseRouter</span>;<br></code></pre></td></tr></table></figure><p>ç‚¹å‡»è·³è½¬ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Outlet</span>, <span class="hljs-title class_">Link</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-router-dom&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App14</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/home&quot;</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/list&quot;</span>&gt;</span>åˆ—è¡¨é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/detail&quot;</span>&gt;</span>è¯¦æƒ…é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> /&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">Outlet</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Outlet</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥å†™æˆæ–¹æ³•ç»™buttonä½¿ç”¨</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">goDetail</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-comment">// è·³è½¬è¯¦æƒ…é¡µ</span><br>    <span class="hljs-title function_">navigate</span>(<span class="hljs-string">&#x27;/detail&#x27;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>æºå¸¦å‚æ•°ï¼š<br>æ–œæ ä¹Ÿå¯ä»¥ä¼ å‚<br>åœ¨List.jsxä¸­ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> &#123; useParams &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-router-dom&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">List</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> &#123; id &#125; = <span class="hljs-title function_">useParams</span>()<br>    <span class="hljs-keyword">return</span> (<br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>åˆ—è¡¨é¡µ - &#123;id&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>&#125;<br></code></pre></td></tr></table></figure><p>è·¯ç”±æ–‡ä»¶ä¸­ï¼š<code>&lt;Route path=&quot;/list/:id&quot; element=&#123;&lt;List /&gt;&#125;&gt;&lt;/Route&gt;</code><br>ä¼ å‚æ—¶ï¼š<code>&lt;li&gt;&lt;Link to=&quot;/list/123&quot;&gt;åˆ—è¡¨é¡µ&lt;/Link&gt;&lt;/li&gt;</code></p><p>å¦ä¸€ç§ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Home</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> [searchParams, setSearchParams] = <span class="hljs-title function_">useSearchParams</span>()<br>    <span class="hljs-keyword">let</span> id = searchParams.<span class="hljs-title function_">getAll</span>(<span class="hljs-string">&#x27;id&#x27;</span>)[<span class="hljs-number">0</span>]<br>    <span class="hljs-keyword">return</span> (<br><br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>ä¸»é¡µ - &#123;id&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><br>    )<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¼ å‚æ—¶ï¼š<code>&lt;li&gt;&lt;Link to=&quot;/home?id=456&quot;&gt;é¦–é¡µ&lt;/Link&gt; &lt;/li&gt;</code></p><p>ä»¥ä¸Šæºå¸¦çš„æ•°æ®æœ‰é™ï¼Œå½“æƒ³è¦æºå¸¦å¤§é‡æ•°æ®æ—¶ï¼Œæ¯”è¾ƒéº»çƒ¦ï¼Œå¯ä»¥â†“</p><pre><code class="hljs">const goDetail = () =&gt; &#123;    // è·³è½¬è¯¦æƒ…é¡µ    navigate(&#39;/detail&#39;, &#123;        state: &#123; username: &#39;azure&#39; &#125;    &#125;)&#125;&lt;button onClick=&#123;goDetail&#125;&gt;è·³è½¬è¯¦æƒ…é¡µ&lt;/button&gt;</code></pre><p>åœ¨å­ç»„ä»¶å®šä¹‰<code>let location = useLocation()</code>æ¥æ¥æ”¶<br>å±•ç¤ºï¼š<code>&lt;div&gt;&lt;h2&gt;è¯¦æƒ…é¡µ -- &#123;location.state ? location.state.username : &#39;&#39;&#125;&lt;/h2&gt;&lt;/div&gt;</code></p><h3 id="17-ç»™404"><a href="#17-ç»™404" class="headerlink" title="17. ç»™404"></a>17. ç»™404</h3><p>ç•Œé¢å†™æ³•ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">ErrorImg</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../assets/404.jpg&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Error</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/Users/azure/Desktop/ABC/react/&#123;ErrorImg&#125;&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;404&quot;</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>&#125;<br></code></pre></td></tr></table></figure><p>è·¯ç”±é¡µï¼š<br><code>&lt;Route path=&quot;*&quot; element=&#123;&lt;Error /&gt;&#125;&gt;&lt;/Route&gt;</code></p><blockquote><p>Ref: </p><p>react å®˜æ–¹ç½‘ç«™ï¼š<a href="https://react.docschina.org/">https://react.docschina.org</a></p><p>ç§äººæ•™ç¨‹ï¼š<a href="http://codesohigh.com/subject/reactnew/">http://codesohigh.com/subject/reactnew/</a></p><p>react-reduxï¼š<a href="https://react-redux.js.org/">https://react-redux.js.org/</a></p><p>reactrouterï¼š<a href="https://reactrouter.com/en/main">https://reactrouter.com/en/main</a></p></blockquote><h3 id="18-å…ƒç´ æ¸²æŸ“"><a href="#18-å…ƒç´ æ¸²æŸ“" class="headerlink" title="18. å…ƒç´ æ¸²æŸ“"></a>18. å…ƒç´ æ¸²æŸ“</h3><p>React å…ƒç´ æ˜¯ä¸å¯å˜å¯¹è±¡ã€‚ä¸€æ—¦è¢«åˆ›å»ºï¼Œä½ å°±æ— æ³•æ›´æ”¹å®ƒçš„å­å…ƒç´ æˆ–è€…å±æ€§ï¼Œæ›´æ–° UI å”¯ä¸€çš„æ–¹å¼æ˜¯åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„å…ƒç´ ï¼Œå¹¶å°†å…¶ä¼ å…¥ <code>ReactDOM.render()</code></p><p>è€ƒè™‘ä¸€ä¸ªè®¡æ—¶å™¨å®æ—¶æ›´æ–°çš„ä¾‹å­ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">tick</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> element = (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello, world!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>It is &#123;new Date().toLocaleTimeString()&#125;.<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>  <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(element, <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;root&#x27;</span>));<br>&#125;<br><br><span class="hljs-built_in">setInterval</span>(tick, <span class="hljs-number">1000</span>);<br></code></pre></td></tr></table></figure><blockquote><p>è¿™ä¸ªä¾‹å­ä¼šåœ¨ <code>setInterval()</code>å›è°ƒå‡½æ•°ï¼Œæ¯ç§’éƒ½è°ƒç”¨<code>ReactDOM.render()</code>ï¼Œåœ¨å®è·µä¸­ï¼Œå¤§å¤šæ•° React åº”ç”¨åªä¼šè°ƒç”¨ä¸€æ¬¡<code>ReactDOM.render()</code>ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™äº›ä»£ç å°è£…åˆ°æœ‰çŠ¶æ€ç»„ä»¶ä¸­ã€‚</p></blockquote><p>React DOM ä¼šå°†å…ƒç´ å’Œå®ƒçš„å­å…ƒç´ ä¸å®ƒä»¬ä¹‹å‰çš„çŠ¶æ€è¿›è¡Œæ¯”è¾ƒï¼Œå¹¶åªä¼šè¿›è¡Œå¿…è¦çš„æ›´æ–°æ¥ä½¿ DOM è¾¾åˆ°é¢„æœŸçš„çŠ¶æ€ã€‚å°½ç®¡æ¯ä¸€ç§’æˆ‘ä»¬éƒ½ä¼šæ–°å»ºä¸€ä¸ªæè¿°æ•´ä¸ª UI æ ‘çš„å…ƒç´ ï¼ŒReact DOM åªä¼šæ›´æ–°å®é™…æ”¹å˜äº†çš„å†…å®¹ï¼Œè€ƒè™‘ UI åœ¨ä»»æ„ç»™å®šæ—¶åˆ»çš„çŠ¶æ€ï¼Œè€Œä¸æ˜¯éšæ—¶é—´å˜åŒ–çš„è¿‡ç¨‹ï¼Œèƒ½å¤Ÿæ¶ˆç­ä¸€æ•´ç±»çš„ bugã€‚</p><h3 id="19-ç»„ä»¶"><a href="#19-ç»„ä»¶" class="headerlink" title="19. ç»„ä»¶"></a>19. ç»„ä»¶</h3><p>ç»„ä»¶å…è®¸ä½ å°† UI æ‹†åˆ†ä¸ºç‹¬ç«‹å¯å¤ç”¨çš„ä»£ç ç‰‡æ®µï¼Œä»æ¦‚å¿µä¸Šç±»ä¼¼äº JavaScript å‡½æ•°ã€‚å®ƒæ¥å—ä»»æ„çš„å…¥å‚ï¼ˆå³ â€œpropsâ€ï¼‰ï¼Œå¹¶è¿”å›ç”¨äºæè¿°é¡µé¢å±•ç¤ºå†…å®¹çš„ React å…ƒç´ ã€‚</p><p><strong>å‡½æ•°ç»„ä»¶</strong>ï¼šæ¥æ”¶å”¯ä¸€å¸¦æœ‰æ•°æ®çš„ â€œpropsâ€ï¼ˆä»£è¡¨å±æ€§ï¼‰å¯¹è±¡ä¸å¹¶è¿”å›ä¸€ä¸ª React å…ƒç´ </p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Welcome</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span> hello, &#123; props.name &#125; <span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>classç»„ä»¶</strong>ï¼šä¸å‡½æ•°ç»„ä»¶ç­‰æ•ˆ</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Welcome</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello, &#123;this.props.name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å½“ React å…ƒç´ ä¸ºç”¨æˆ·è‡ªå®šä¹‰ç»„ä»¶æ—¶ï¼Œå®ƒä¼šå°† JSX æ‰€æ¥æ”¶çš„å±æ€§ï¼ˆattributesï¼‰ä»¥åŠå­ç»„ä»¶ï¼ˆchildrenï¼‰è½¬æ¢ä¸ºå•ä¸ªå¯¹è±¡ä¼ é€’ç»™ç»„ä»¶ï¼Œè¿™ä¸ªå¯¹è±¡è¢«ç§°ä¹‹ä¸º â€œpropsâ€ã€‚</p><p>ä¾‹å¦‚ï¼Œè¿™æ®µä»£ç ä¼šåœ¨é¡µé¢ä¸Šæ¸²æŸ“ â€œHello, Saraâ€ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Welcome</span>(<span class="hljs-params">props</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello, &#123;props.name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;<br>&#125;<br><br><span class="hljs-keyword">const</span> element = <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Welcome</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Sara&quot;</span> /&gt;</span></span>;<br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<br>  element,<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;root&#x27;</span>)<br>);<br></code></pre></td></tr></table></figure><p><strong>æå–ç»„ä»¶</strong>ï¼šå°†ç»„ä»¶æ‹†åˆ†ä¸ºæ›´å°çš„ç»„ä»¶</p><p>ä»¥å¦‚ä¸‹ç»„ä»¶ä¸ºä¾‹ï¼šæè¿°ä¸€ä¸ªç¤¾äº¤åª’ä½“ç½‘ç«™ä¸Šçš„è¯„è®ºåŠŸèƒ½ï¼Œå®ƒæ¥æ”¶ <code>author</code>ï¼ˆå¯¹è±¡ï¼‰ï¼Œ<code>text</code> ï¼ˆå­—ç¬¦ä¸²ï¼‰ä»¥åŠ <code>date</code>ï¼ˆæ—¥æœŸï¼‰ä½œä¸º propsã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Comment</span>(<span class="hljs-params">props</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;Comment&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;UserInfo&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;Avatar&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">src</span>=<span class="hljs-string">&#123;props.author.avatarUrl&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">alt</span>=<span class="hljs-string">&#123;props.author.name&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;UserInfo-name&quot;</span>&gt;</span></span><br><span class="language-xml">          &#123;props.author.name&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;Comment-text&quot;</span>&gt;</span></span><br><span class="language-xml">        &#123;props.text&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;Comment-date&quot;</span>&gt;</span></span><br><span class="language-xml">        &#123;formatDate(props.date)&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><p>æå–<code>Avatar</code> ç»„ä»¶ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Avatar</span>(<span class="hljs-params">props</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;Avatar&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">src</span>=<span class="hljs-string">&#123;props.user.avatarUrl&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">alt</span>=<span class="hljs-string">&#123;props.user.name&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">    /&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><p>å»ºè®®ä»ç»„ä»¶è‡ªèº«çš„è§’åº¦å‘½å<code>props</code>ï¼Œè€Œä¸æ˜¯ä¾èµ–äºè°ƒç”¨ç»„ä»¶çš„ä¸Šä¸‹æ–‡å‘½åã€‚</p><p>ç»§ç»­æå–<code>UserInfo</code>ç»„ä»¶ï¼Œè¯¥ç»„ä»¶åœ¨ç”¨æˆ·åæ—æ¸²æŸ“<code>Avatar</code>ç»„ä»¶ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">UserInfo</span>(<span class="hljs-params">props</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;UserInfo&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Avatar</span> <span class="hljs-attr">user</span>=<span class="hljs-string">&#123;props.user&#125;</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;UserInfo-name&quot;</span>&gt;</span></span><br><span class="language-xml">        &#123;props.user.name&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><p>ç®€åŒ–åçš„<code>Comment</code>ç»„ä»¶ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Comment</span>(<span class="hljs-params">props</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;Comment&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">UserInfo</span> <span class="hljs-attr">user</span>=<span class="hljs-string">&#123;props.author&#125;</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;Comment-text&quot;</span>&gt;</span></span><br><span class="language-xml">        &#123;props.text&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;Comment-date&quot;</span>&gt;</span></span><br><span class="language-xml">        &#123;formatDate(props.date)&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨å¤§å‹åº”ç”¨ä¸­ï¼Œæ„å»ºå¯å¤ç”¨ç»„ä»¶åº“æ˜¯å®Œå…¨å€¼å¾—çš„ã€‚æ ¹æ®ç»éªŒæ¥çœ‹ï¼Œå¦‚æœ UI ä¸­æœ‰ä¸€éƒ¨åˆ†è¢«å¤šæ¬¡ä½¿ç”¨ï¼ˆ<code>Button</code>ï¼Œ<code>Panel</code>ï¼Œ<code>Avatar</code>ï¼‰ï¼Œæˆ–è€…ç»„ä»¶æœ¬èº«å°±è¶³å¤Ÿå¤æ‚ï¼ˆ<code>App</code>ï¼Œ<code>FeedStory</code>ï¼Œ<code>Comment</code>ï¼‰ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ä¸€ä¸ªå¯æå–å‡ºç‹¬ç«‹ç»„ä»¶çš„å€™é€‰é¡¹ã€‚</p><p><strong>propsçš„åªè¯»æ€§</strong>ï¼šæ‰€æœ‰ React ç»„ä»¶éƒ½å¿…é¡»åƒçº¯å‡½æ•°ä¸€æ ·ä¿æŠ¤å®ƒä»¬çš„ props ä¸è¢«æ›´æ”¹ï¼Œ â€œstateâ€åœ¨ä¸è¿åä¸Šè¿°è§„åˆ™çš„æƒ…å†µä¸‹ï¼Œstate å…è®¸ React ç»„ä»¶éšç”¨æˆ·æ“ä½œã€ç½‘ç»œå“åº”æˆ–è€…å…¶ä»–å˜åŒ–è€ŒåŠ¨æ€æ›´æ”¹è¾“å‡ºå†…å®¹ã€‚</p><h3 id="20-State-amp-ç”Ÿå‘½å‘¨æœŸ"><a href="#20-State-amp-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="20.State&amp;ç”Ÿå‘½å‘¨æœŸ"></a>20.State&amp;ç”Ÿå‘½å‘¨æœŸ</h3><p>å‘ class ç»„ä»¶ä¸­æ·»åŠ å±€éƒ¨çš„ stateï¼Œä½†æ²¡æœ‰å³æ—¶æ›´æ–°æ•ˆæœï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Clock</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(props);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<span class="hljs-attr">date</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()&#125;;<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello, world!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>It is &#123;this.state.date.toLocaleTimeString()&#125;.<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Clock</span> /&gt;</span></span>,<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;root&#x27;</span>)<br>);<br></code></pre></td></tr></table></figure><p>è¿ç”¨ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å’Œ<code>this.setState()</code>æ¥æ—¶åˆ»æ›´æ–°ç»„ä»¶<code>state</code>ï¼Œè®©æ—¶é’Ÿæ¯ç§’åˆ·æ–°ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Clock</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(props);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<span class="hljs-attr">date</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()&#125;;<br>  &#125;<br><br>  <span class="hljs-comment">//componentDidMount() æ–¹æ³•ä¼šåœ¨ç»„ä»¶å·²ç»è¢«æ¸²æŸ“åˆ° DOM ä¸­åè¿è¡Œ</span><br>  <span class="hljs-title function_">componentDidMount</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">timerID</span> = <span class="hljs-built_in">setInterval</span>(<br>      <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">tick</span>(),<br>      <span class="hljs-number">1000</span><br>    );<br>  &#125;<br><br>  <span class="hljs-comment">//componentWillUnmount() æ–¹æ³•ä¼šåœ¨ç»„ä»¶ä»domä¸­è¢«ç§»é™¤æ—¶è°ƒç”¨</span><br>  <span class="hljs-title function_">componentWillUnmount</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-built_in">clearInterval</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">timerID</span>);<br>  &#125;<br><br>  <span class="hljs-title function_">tick</span>(<span class="hljs-params"></span>) &#123;    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;      <span class="hljs-attr">date</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()    &#125;);  &#125;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello, world!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>It is &#123;this.state.date.toLocaleTimeString()&#125;.<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Clock</span> /&gt;</span></span>,<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;root&#x27;</span>)<br>);<br></code></pre></td></tr></table></figure><p><strong>æ­£ç¡®ä½¿ç”¨<code>state</code></strong></p><ol><li><p>ä¸è¦ç›´æ¥ä¿®æ”¹<code>state</code>ï¼Œè€Œåº”è¯¥ä½¿ç”¨<code>setState()</code>ï¼Œæ„é€ å‡½æ•°æ˜¯å”¯ä¸€å¯ä»¥ç»™<code>this.state</code>èµ‹å€¼çš„åœ°æ–¹ã€‚</p></li><li><p><code>state</code>çš„æ›´æ–°å¯èƒ½æ˜¯å¼‚æ­¥çš„ï¼Œå‡ºäºæ€§èƒ½è€ƒè™‘ï¼Œreactå¯èƒ½ä¼šæŠŠå¤šä¸ª<code>setState()</code>è°ƒç”¨åˆå¹¶æˆä¸€ä¸ªè°ƒç”¨ï¼Œå› ä¸º <code>this.props</code> å’Œ <code>this.state</code> å¯èƒ½ä¼šå¼‚æ­¥æ›´æ–°ï¼Œæ‰€ä»¥ä½ ä¸è¦ä¾èµ–ä»–ä»¬çš„å€¼æ¥æ›´æ–°ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚</p><p>ä¾‹å¦‚ï¼Œä¸‹ä¾‹å¯èƒ½ä¸ä¼šæ›´æ–°è®¡æ—¶å™¨ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// Wrong</span><br><span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<br>  <span class="hljs-attr">counter</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">counter</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">increment</span>,<br>&#125;);<br></code></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// Correct</span><br><span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(<span class="hljs-function">(<span class="hljs-params">state, props</span>) =&gt;</span> (&#123;<br>  <span class="hljs-attr">counter</span>: state.<span class="hljs-property">counter</span> + props.<span class="hljs-property">increment</span><br>&#125;));<br></code></pre></td></tr></table></figure></li><li><p><code>state</code>çš„æ›´æ–°ä¼šè¢«åˆå¹¶ï¼Œå½“ä½ è°ƒç”¨ <code>setState()</code> çš„æ—¶å€™ï¼ŒReact ä¼šæŠŠä½ æä¾›çš„å¯¹è±¡åˆå¹¶åˆ°å½“å‰çš„ stateã€‚</p><p>ä¾‹å¦‚ï¼Œä½ çš„ state åŒ…å«å‡ ä¸ªç‹¬ç«‹çš„å˜é‡ï¼š</p></li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) &#123;<br>  <span class="hljs-variable language_">super</span>(props);<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>    <span class="hljs-attr">posts</span>: [],      <span class="hljs-attr">comments</span>: []    &#125;;<br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹ç„¶åä½ å¯ä»¥åˆ†åˆ«è°ƒç”¨ <code>setState()</code> æ¥å•ç‹¬åœ°æ›´æ–°å®ƒä»¬ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-title function_">componentDidMount</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-title function_">fetchPosts</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<br>      <span class="hljs-attr">posts</span>: response.<span class="hljs-property">posts</span>      &#125;);<br>  &#125;);<br><br>  <span class="hljs-title function_">fetchComments</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<br>      <span class="hljs-attr">comments</span>: response.<span class="hljs-property">comments</span>      &#125;);<br>  &#125;);<br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹è¿™é‡Œçš„åˆå¹¶æ˜¯æµ…åˆå¹¶ï¼Œæ‰€ä»¥ <code>this.setState(&#123;comments&#125;)</code> å®Œæ•´ä¿ç•™äº† <code>this.state.posts</code>ï¼Œ ä½†æ˜¯å®Œå…¨æ›¿æ¢äº† <code>this.state.comments</code>ã€‚</p><ol start="4"><li>æ•°æ®æ˜¯å‘ä¸‹æµåŠ¨çš„</li></ol><p>ä¸ç®¡æ˜¯çˆ¶ç»„ä»¶æˆ–æ˜¯å­ç»„ä»¶éƒ½æ— æ³•çŸ¥é“æŸä¸ªç»„ä»¶æ˜¯æœ‰çŠ¶æ€çš„è¿˜æ˜¯æ— çŠ¶æ€çš„ï¼Œå¹¶ä¸”å®ƒä»¬ä¹Ÿå¹¶ä¸å…³å¿ƒå®ƒæ˜¯å‡½æ•°ç»„ä»¶è¿˜æ˜¯ class ç»„ä»¶ã€‚</p><p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆç§° state ä¸ºå±€éƒ¨çš„æˆ–æ˜¯å°è£…çš„çš„åŸå› ã€‚é™¤äº†æ‹¥æœ‰å¹¶è®¾ç½®äº†å®ƒçš„ç»„ä»¶ï¼Œå…¶ä»–ç»„ä»¶éƒ½æ— æ³•è®¿é—®ã€‚</p><p>å¦‚ä¸‹ä¾‹ï¼Œ<code>FormattedDate</code> ç»„ä»¶ä¼šåœ¨å…¶ props ä¸­æ¥æ”¶å‚æ•° <code>date</code>ï¼Œä½†æ˜¯ç»„ä»¶æœ¬èº«æ— æ³•çŸ¥é“å®ƒæ˜¯æ¥è‡ªäº <code>Clock</code> çš„ stateï¼Œæˆ–æ˜¯ <code>Clock</code> çš„ propsï¼Œè¿˜æ˜¯æ‰‹åŠ¨è¾“å…¥çš„ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">FormattedDate</span>(<span class="hljs-params">props</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>It is &#123;props.date.toLocaleTimeString()&#125;.<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span>;<br>&#125;<br>&lt;<span class="hljs-title class_">FormattedDate</span> date=&#123;<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">date</span>&#125; /&gt;<br></code></pre></td></tr></table></figure><p>è¿™é€šå¸¸ä¼šè¢«å«åšâ€œè‡ªä¸Šè€Œä¸‹â€æˆ–æ˜¯â€œå•å‘â€çš„æ•°æ®æµã€‚ä»»ä½•çš„ state æ€»æ˜¯æ‰€å±äºç‰¹å®šçš„ç»„ä»¶ï¼Œè€Œä¸”ä»è¯¥ state æ´¾ç”Ÿçš„ä»»ä½•æ•°æ®æˆ– UI åªèƒ½å½±å“æ ‘ä¸­â€œä½äºâ€å®ƒä»¬çš„ç»„ä»¶ã€‚</p><p>å¦‚æœä½ æŠŠä¸€ä¸ªä»¥ç»„ä»¶æ„æˆçš„æ ‘æƒ³è±¡æˆä¸€ä¸ª props çš„æ•°æ®ç€‘å¸ƒçš„è¯ï¼Œé‚£ä¹ˆæ¯ä¸€ä¸ªç»„ä»¶çš„ state å°±åƒæ˜¯åœ¨ä»»æ„ä¸€ç‚¹ä¸Šç»™ç€‘å¸ƒå¢åŠ é¢å¤–çš„æ°´æºï¼Œä½†æ˜¯å®ƒåªèƒ½å‘ä¸‹æµåŠ¨ã€‚</p><h4 id="ç”Ÿå‘½å‘¨æœŸ"><a href="#ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸ"></a><strong>ç”Ÿå‘½å‘¨æœŸ</strong></h4><p>æ¯ä¸ªç»„ä»¶éƒ½åŒ…å«â€œç”Ÿå‘½å‘¨æœŸæ–¹æ³•â€ï¼Œä½ å¯ä»¥é‡å†™è¿™äº›æ–¹æ³•ï¼Œä»¥ä¾¿äºåœ¨è¿è¡Œè¿‡ç¨‹ä¸­ç‰¹å®šçš„é˜¶æ®µæ‰§è¡Œè¿™äº›æ–¹æ³•ã€‚</p><p><a href="https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/">https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/</a></p><p><img src="https://cdn.jsdelivr.net/gh/Yoonalis/img@master/blog/1151667355557_.pic-20221102%2010:22:44.jpg" alt="1151667355557_.pic">æŒ‚è½½</p><p>å½“ç»„ä»¶å®ä¾‹è¢«åˆ›å»ºå¹¶æ’å…¥ DOM ä¸­æ—¶ï¼Œå…¶ç”Ÿå‘½å‘¨æœŸè°ƒç”¨é¡ºåºå¦‚ä¸‹ï¼š</p><ul><li><a href="https://react.docschina.org/docs/react-component.html#constructor"><strong><code>constructor()</code></strong></a></li><li><a href="https://react.docschina.org/docs/react-component.html#static-getderivedstatefromprops"><code>static getDerivedStateFromProps()</code></a></li><li><a href="https://react.docschina.org/docs/react-component.html#render"><strong><code>render()</code></strong></a></li><li><a href="https://react.docschina.org/docs/react-component.html#componentdidmount"><strong><code>componentDidMount()</code></strong></a></li></ul><p>æ›´æ–°</p><p>å½“ç»„ä»¶çš„ props æˆ– state å‘ç”Ÿå˜åŒ–æ—¶ä¼šè§¦å‘æ›´æ–°ã€‚ç»„ä»¶æ›´æ–°çš„ç”Ÿå‘½å‘¨æœŸè°ƒç”¨é¡ºåºå¦‚ä¸‹ï¼š</p><ul><li><a href="https://react.docschina.org/docs/react-component.html#static-getderivedstatefromprops"><code>static getDerivedStateFromProps()</code></a></li><li><a href="https://react.docschina.org/docs/react-component.html#shouldcomponentupdate"><code>shouldComponentUpdate()</code></a></li><li><a href="https://react.docschina.org/docs/react-component.html#render"><strong><code>render()</code></strong></a></li><li><a href="https://react.docschina.org/docs/react-component.html#getsnapshotbeforeupdate"><code>getSnapshotBeforeUpdate()</code></a></li><li><a href="https://react.docschina.org/docs/react-component.html#componentdidupdate"><strong><code>componentDidUpdate()</code></strong></a></li></ul><p>å¸è½½</p><p>å½“ç»„ä»¶ä» DOM ä¸­ç§»é™¤æ—¶ä¼šè°ƒç”¨å¦‚ä¸‹æ–¹æ³•ï¼š</p><ul><li><a href="https://react.docschina.org/docs/react-component.html#componentwillunmount"><strong><code>componentWillUnmount()</code></strong></a></li></ul><p>é”™è¯¯å¤„ç†</p><p>å½“æ¸²æŸ“è¿‡ç¨‹ï¼Œç”Ÿå‘½å‘¨æœŸï¼Œæˆ–å­ç»„ä»¶çš„æ„é€ å‡½æ•°ä¸­æŠ›å‡ºé”™è¯¯æ—¶ï¼Œä¼šè°ƒç”¨å¦‚ä¸‹æ–¹æ³•ï¼š</p><ul><li><a href="https://react.docschina.org/docs/react-component.html#static-getderivedstatefromerror"><code>static getDerivedStateFromError()</code></a></li><li><a href="https://react.docschina.org/docs/react-component.html#componentdidcatch"><code>componentDidCatch()</code></a></li></ul><p>ç»„ä»¶è¿˜æä¾›äº†ä¸€äº›é¢å¤–çš„ APIï¼š</p><ul><li><a href="https://react.docschina.org/docs/react-component.html#setstate"><code>setState()</code></a></li><li><a href="https://react.docschina.org/docs/react-component.html#forceupdate"><code>forceUpdate()</code></a></li></ul><p>class å±æ€§</p><ul><li><a href="https://react.docschina.org/docs/react-component.html#defaultprops"><code>defaultProps</code></a></li><li><a href="https://react.docschina.org/docs/react-component.html#displayname"><code>displayName</code></a></li></ul><p>å®ä¾‹å±æ€§</p><ul><li><a href="https://react.docschina.org/docs/react-component.html#props"><code>props</code></a></li><li><a href="https://react.docschina.org/docs/react-component.html#state"><code>state</code></a></li></ul><p><code>render()</code> æ–¹æ³•æ˜¯ class ç»„ä»¶ä¸­å”¯ä¸€å¿…é¡»å®ç°çš„æ–¹æ³•ã€‚</p><p>å½“ <code>render</code> è¢«è°ƒç”¨æ—¶ï¼Œå®ƒä¼šæ£€æŸ¥ <code>this.props</code> å’Œ <code>this.state</code> çš„å˜åŒ–å¹¶è¿”å›ä»¥ä¸‹ç±»å‹ä¹‹ä¸€ï¼š</p><ul><li><strong>React å…ƒç´ </strong>ã€‚é€šå¸¸é€šè¿‡ JSX åˆ›å»ºã€‚ä¾‹å¦‚ï¼Œ<code>&lt;div /&gt;</code> ä¼šè¢« React æ¸²æŸ“ä¸º DOM èŠ‚ç‚¹ï¼Œ<code>&lt;MyComponent /&gt;</code> ä¼šè¢« React æ¸²æŸ“ä¸ºè‡ªå®šä¹‰ç»„ä»¶ï¼Œæ— è®ºæ˜¯ <code>&lt;div /&gt;</code> è¿˜æ˜¯ <code>&lt;MyComponent /&gt;</code> å‡ä¸º React å…ƒç´ ã€‚</li><li><strong>æ•°ç»„æˆ– fragments</strong>ã€‚ ä½¿å¾— render æ–¹æ³•å¯ä»¥è¿”å›å¤šä¸ªå…ƒç´ ã€‚æ¬²äº†è§£æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… <a href="https://react.docschina.org/docs/fragments.html">fragments</a> æ–‡æ¡£ã€‚</li><li><strong>Portals</strong>ã€‚å¯ä»¥æ¸²æŸ“å­èŠ‚ç‚¹åˆ°ä¸åŒçš„ DOM å­æ ‘ä¸­ã€‚æ¬²äº†è§£æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…æœ‰å…³ <a href="https://react.docschina.org/docs/portals.html">portals</a> çš„æ–‡æ¡£</li><li><strong>å­—ç¬¦ä¸²æˆ–æ•°å€¼ç±»å‹</strong>ã€‚å®ƒä»¬åœ¨ DOM ä¸­ä¼šè¢«æ¸²æŸ“ä¸ºæ–‡æœ¬èŠ‚ç‚¹</li><li>**å¸ƒå°”ç±»å‹æˆ– <code>null</code>**ã€‚ä»€ä¹ˆéƒ½ä¸æ¸²æŸ“ã€‚ï¼ˆä¸»è¦ç”¨äºæ”¯æŒè¿”å› <code>test &amp;&amp; &lt;Child /&gt;</code> çš„æ¨¡å¼ï¼Œå…¶ä¸­ test ä¸ºå¸ƒå°”ç±»å‹ã€‚)</li></ul><p><code>render()</code> å‡½æ•°åº”è¯¥ä¸ºçº¯å‡½æ•°ï¼Œè¿™æ„å‘³ç€åœ¨ä¸ä¿®æ”¹ç»„ä»¶ state çš„æƒ…å†µä¸‹ï¼Œæ¯æ¬¡è°ƒç”¨æ—¶éƒ½è¿”å›ç›¸åŒçš„ç»“æœï¼Œå¹¶ä¸”å®ƒä¸ä¼šç›´æ¥ä¸æµè§ˆå™¨äº¤äº’ã€‚</p><p>å¦‚éœ€ä¸æµè§ˆå™¨è¿›è¡Œäº¤äº’ï¼Œè¯·åœ¨ <code>componentDidMount()</code> æˆ–å…¶ä»–ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­æ‰§è¡Œä½ çš„æ“ä½œã€‚ä¿æŒ <code>render()</code> ä¸ºçº¯å‡½æ•°ï¼Œå¯ä»¥ä½¿ç»„ä»¶æ›´å®¹æ˜“æ€è€ƒã€‚</p><p>æ›´å¤šç»†èŠ‚å‚è€ƒï¼š<a href="https://react.docschina.org/docs/react-component.html">ç”Ÿå‘½å‘¨æœŸ</a></p><h3 id="21-äº‹ä»¶å¤„ç†"><a href="#21-äº‹ä»¶å¤„ç†" class="headerlink" title="21. äº‹ä»¶å¤„ç†"></a>21. äº‹ä»¶å¤„ç†</h3><p>React å…ƒç´ çš„äº‹ä»¶å¤„ç†å’Œ DOM å…ƒç´ çš„å¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹è¯­æ³•ä¸Šçš„ä¸åŒï¼š</p><ul><li>React äº‹ä»¶çš„å‘½åé‡‡ç”¨å°é©¼å³°å¼ï¼ˆcamelCaseï¼‰ï¼Œè€Œä¸æ˜¯çº¯å°å†™ã€‚</li><li>ä½¿ç”¨ JSX è¯­æ³•æ—¶ä½ éœ€è¦ä¼ å…¥ä¸€ä¸ªå‡½æ•°ä½œä¸ºäº‹ä»¶å¤„ç†å‡½æ•°ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;button onClick=&#123;activateLasers&#125;&gt;<br>  <span class="hljs-title class_">Activate</span> <span class="hljs-title class_">Lasers</span><br>&lt;/button&gt;<br></code></pre></td></tr></table></figure><p>å¦ä¸€ä¸ªä¸åŒç‚¹æ˜¯ä½ ä¸èƒ½é€šè¿‡è¿”å› <code>false</code> çš„æ–¹å¼é˜»æ­¢é»˜è®¤è¡Œä¸ºã€‚ä½ å¿…é¡»æ˜¾å¼çš„ä½¿ç”¨ <code>preventDefault</code> ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ActionLink</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleClick</span>(<span class="hljs-params">e</span>) &#123;<br>    e.<span class="hljs-title function_">preventDefault</span>();<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;The link was clicked.&#x27;</span>);<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;handleClick&#125;</span>&gt;</span></span><br><span class="language-xml">      Click me</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œï¼Œ<code>e</code> æ˜¯ä¸€ä¸ªåˆæˆäº‹ä»¶ã€‚</p><p>å½“ä½ ä½¿ç”¨ ES6 classè¯­æ³•å®šä¹‰ä¸€ä¸ªç»„ä»¶çš„æ—¶å€™ï¼Œé€šå¸¸çš„åšæ³•æ˜¯å°†äº‹ä»¶å¤„ç†å‡½æ•°å£°æ˜ä¸º class ä¸­çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ <code>Toggle</code> ç»„ä»¶ä¼šæ¸²æŸ“ä¸€ä¸ªè®©ç”¨æˆ·åˆ‡æ¢å¼€å…³çŠ¶æ€çš„æŒ‰é’®ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Toggle</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(props);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<span class="hljs-attr">isToggleOn</span>: <span class="hljs-literal">true</span>&#125;;<br><br>    <span class="hljs-comment">// ä¸ºäº†åœ¨å›è°ƒä¸­ä½¿ç”¨ `this`ï¼Œè¿™ä¸ªç»‘å®šæ˜¯å¿…ä¸å¯å°‘çš„</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleClick</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleClick</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);<br>  &#125;<br><br>  <span class="hljs-title function_">handleClick</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(<span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> (&#123;<br>      <span class="hljs-attr">isToggleOn</span>: !state.<span class="hljs-property">isToggleOn</span><br>    &#125;));<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;this.handleClick&#125;</span>&gt;</span></span><br><span class="language-xml">        &#123;this.state.isToggleOn ? &#x27;ON&#x27; : &#x27;OFF&#x27;&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Toggle</span> /&gt;</span></span>,<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;root&#x27;</span>)<br>);<br></code></pre></td></tr></table></figure><p>å‘äº‹ä»¶å¤„ç†å‡½æ•°ä¼ é€’å‚æ•°ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;button onClick=&#123;<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">deleteRow</span>(id, e)&#125;&gt;<span class="hljs-title class_">Delete</span> <span class="hljs-title class_">Row</span>&lt;/button&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;this.deleteRow.bind(this,</span> <span class="hljs-attr">id</span>)&#125;&gt;</span>Delete Row<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>ä¸Šè¿°ä¸¤ç§æ–¹å¼æ˜¯ç­‰ä»·çš„ï¼Œåˆ†åˆ«é€šè¿‡<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions">ç®­å¤´å‡½æ•°</a>å’Œ <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_objects/Function/bind"><code>Function.prototype.bind</code></a> æ¥å®ç°ã€‚</p><p>åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼ŒReact çš„äº‹ä»¶å¯¹è±¡ <code>e</code> ä¼šè¢«ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ã€‚å¦‚æœé€šè¿‡ç®­å¤´å‡½æ•°çš„æ–¹å¼ï¼Œäº‹ä»¶å¯¹è±¡å¿…é¡»æ˜¾å¼çš„è¿›è¡Œä¼ é€’ï¼Œè€Œé€šè¿‡ <code>bind</code> çš„æ–¹å¼ï¼Œäº‹ä»¶å¯¹è±¡ä»¥åŠæ›´å¤šçš„å‚æ•°å°†ä¼šè¢«éšå¼çš„è¿›è¡Œä¼ é€’ã€‚</p><h3 id="22-æ¡ä»¶æ¸²æŸ“"><a href="#22-æ¡ä»¶æ¸²æŸ“" class="headerlink" title="22. æ¡ä»¶æ¸²æŸ“"></a>22. æ¡ä»¶æ¸²æŸ“</h3><p>React ä¸­çš„æ¡ä»¶æ¸²æŸ“å’Œ JavaScript ä¸­çš„ä¸€æ ·ï¼Œä½¿ç”¨ JavaScript è¿ç®—ç¬¦ <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/if...else"><code>if</code></a> æˆ–è€…<a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Conditional_Operator">æ¡ä»¶è¿ç®—ç¬¦</a>å»åˆ›å»ºå…ƒç´ æ¥è¡¨ç°å½“å‰çš„çŠ¶æ€ï¼Œç„¶åè®© React æ ¹æ®å®ƒä»¬æ¥æ›´æ–° UIã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginControl</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(props);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleLoginClick</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleLoginClick</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleLogoutClick</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleLogoutClick</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<span class="hljs-attr">isLoggedIn</span>: <span class="hljs-literal">false</span>&#125;;<br>  &#125;<br><br>  <span class="hljs-title function_">handleLoginClick</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<span class="hljs-attr">isLoggedIn</span>: <span class="hljs-literal">true</span>&#125;);<br>  &#125;<br><br>  <span class="hljs-title function_">handleLogoutClick</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<span class="hljs-attr">isLoggedIn</span>: <span class="hljs-literal">false</span>&#125;);<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> isLoggedIn = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">isLoggedIn</span>;<br>    <span class="hljs-keyword">let</span> button;<br>    <span class="hljs-keyword">if</span> (isLoggedIn) &#123;<br>      button = <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">LogoutButton</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;this.handleLogoutClick&#125;</span> /&gt;</span></span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      button = <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">LoginButton</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;this.handleLoginClick&#125;</span> /&gt;</span></span>;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Greeting</span> <span class="hljs-attr">isLoggedIn</span>=<span class="hljs-string">&#123;isLoggedIn&#125;</span> /&gt;</span></span><br><span class="language-xml">        &#123;button&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">LoginControl</span> /&gt;</span></span>,<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;root&#x27;</span>)<br>);<br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥å€ŸåŠ©è¿ç®—ç¬¦&amp;&amp;</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Mailbox</span>(<span class="hljs-params">props</span>) &#123;<br>  <span class="hljs-keyword">const</span> unreadMessages = props.<span class="hljs-property">unreadMessages</span>;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">      &#123;unreadMessages.length &gt; 0 &amp;&amp;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">          You have &#123;unreadMessages.length&#125; unread messages.</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">      &#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">const</span> messages = [<span class="hljs-string">&#x27;React&#x27;</span>, <span class="hljs-string">&#x27;Re: React&#x27;</span>, <span class="hljs-string">&#x27;Re:Re: React&#x27;</span>];<br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Mailbox</span> <span class="hljs-attr">unreadMessages</span>=<span class="hljs-string">&#123;messages&#125;</span> /&gt;</span></span>,<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;root&#x27;</span>)<br>);<br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥å€ŸåŠ©ä¸‰ç›®è¿ç®—ç¬¦</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> isLoggedIn = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">isLoggedIn</span>;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      &#123;isLoggedIn</span><br><span class="language-xml">        ? <span class="hljs-tag">&lt;<span class="hljs-name">LogoutButton</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;this.handleLogoutClick&#125;</span> /&gt;</span></span><br><span class="language-xml">        : <span class="hljs-tag">&lt;<span class="hljs-name">LoginButton</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;this.handleLoginClick&#125;</span> /&gt;</span></span><br><span class="language-xml">      &#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><p>é˜»æ­¢ç»„ä»¶æ¸²æŸ“ï¼šåœ¨æå°‘æ•°æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½å¸Œæœ›èƒ½éšè—ç»„ä»¶ï¼Œå³ä½¿å®ƒå·²ç»è¢«å…¶ä»–ç»„ä»¶æ¸²æŸ“ã€‚è‹¥è¦å®Œæˆæ­¤æ“ä½œï¼Œä½ å¯ä»¥è®© <code>render</code> æ–¹æ³•ç›´æ¥è¿”å› <code>null</code>ï¼Œè€Œä¸è¿›è¡Œä»»ä½•æ¸²æŸ“ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">if</span> (!props.<span class="hljs-property">warn</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="23-åˆ—è¡¨-amp-key"><a href="#23-åˆ—è¡¨-amp-key" class="headerlink" title="23. åˆ—è¡¨ &amp; key"></a>23. åˆ—è¡¨ &amp; key</h3><p>ä¸»è¦ä½¿ç”¨<code>map()</code>å‡½æ•°ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">NumberList</span>(<span class="hljs-params">props</span>) &#123;<br>  <span class="hljs-keyword">const</span> numbers = props.<span class="hljs-property">numbers</span>;<br>  <span class="hljs-keyword">const</span> listItems = numbers.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">number</span>) =&gt;</span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;number.toString()&#125;</span>&gt;</span></span><br><span class="language-xml">      &#123;number&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br>  );<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>&#123;listItems&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">const</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];<br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">NumberList</span> <span class="hljs-attr">numbers</span>=<span class="hljs-string">&#123;numbers&#125;</span> /&gt;</span></span>,<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;root&#x27;</span>)<br>);<br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><ol><li><p>key å¸®åŠ© React è¯†åˆ«å“ªäº›å…ƒç´ æ”¹å˜äº†ï¼Œæ¯”å¦‚è¢«æ·»åŠ æˆ–åˆ é™¤ã€‚å› æ­¤åº”å½“&#x3D;&#x3D;ç»™æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ èµ‹äºˆä¸€ä¸ªç¡®å®šçš„æ ‡è¯†&#x3D;&#x3D;ï¼Œå¦‚ä¸Šä¾‹ä½¿ç”¨<code>number.toString()</code>ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<code>number.id</code>ã€‚å½“å…ƒç´ æ²¡æœ‰ç¡®å®š id çš„æ—¶å€™ï¼Œä¸‡ä¸å¾—å·²ä½ å¯ä»¥ä½¿ç”¨å…ƒç´ ç´¢å¼• index ä½œä¸º keyï¼š<code>index</code>ï¼Œä½†ä¸å»ºè®®ï¼Œå› ä¸ºä¼šå¯¼è‡´æ€§èƒ½å˜å·®ï¼Œè¿˜å¯èƒ½å¼•èµ·ç»„ä»¶çŠ¶æ€çš„é—®é¢˜ã€‚</p></li><li><p>å…ƒç´ çš„ key åªæœ‰æ”¾åœ¨å°±è¿‘çš„æ•°ç»„ä¸Šä¸‹æ–‡ä¸­æ‰æœ‰æ„ä¹‰ã€‚æ¯”æ–¹è¯´ï¼Œå¦‚æœæå–å‡ºä¸€ä¸ª <code>ListItem</code> ç»„ä»¶ï¼Œåº”è¯¥æŠŠ key ä¿ç•™åœ¨æ•°ç»„ä¸­çš„è¿™ä¸ª <code>&lt;ListItem /&gt;</code> å…ƒç´ ä¸Šï¼Œè€Œä¸æ˜¯æ”¾åœ¨ <code>ListItem</code> ç»„ä»¶ä¸­çš„ <code>&lt;li&gt;</code> å…ƒç´ ä¸Šã€‚ä¸€ä¸ªå¥½çš„ç»éªŒæ³•åˆ™æ˜¯ï¼šåœ¨ <code>map()</code> æ–¹æ³•ä¸­çš„å…ƒç´ éœ€è¦è®¾ç½® key å±æ€§ã€‚</p></li><li><p>keyåªæ˜¯åœ¨å…„å¼ŸèŠ‚ç‚¹ä¹‹é—´å¿…é¡»å”¯ä¸€ï¼Œä¸éœ€è¦æ˜¯å…¨å±€å”¯ä¸€ï¼Œå½“ç”Ÿæˆä¸¤ä¸ªä¸åŒçš„æ•°ç»„æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ç›¸åŒçš„keyå€¼ã€‚</p></li><li><p>key ä¼šä¼ é€’ä¿¡æ¯ç»™ React ï¼Œä½†ä¸ä¼šä¼ é€’ç»™ä½ çš„ç»„ä»¶ã€‚å¦‚æœä½ çš„ç»„ä»¶ä¸­éœ€è¦ä½¿ç”¨ <code>key</code> å±æ€§çš„å€¼ï¼Œè¯·ç”¨å…¶ä»–å±æ€§åæ˜¾å¼ä¼ é€’è¿™ä¸ªå€¼ï¼š</p></li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> content = posts.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">post</span>) =&gt;</span><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Post</span></span></span><br><span class="hljs-tag"><span class="language-xml">    <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;post.id&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">    <span class="hljs-attr">id</span>=<span class="hljs-string">&#123;post.id&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">    <span class="hljs-attr">title</span>=<span class="hljs-string">&#123;post.title&#125;</span> /&gt;</span></span><br>);<br></code></pre></td></tr></table></figure><p>ä¸Šé¢ä¾‹å­ä¸­ï¼Œ<code>Post</code> ç»„ä»¶å¯ä»¥è¯»å‡º <code>props.id</code>ï¼Œä½†æ˜¯ä¸èƒ½è¯»å‡º <code>props.key</code>ã€‚</p><p>JSX å…è®¸åœ¨å¤§æ‹¬å·ä¸­åµŒå…¥ä»»ä½•è¡¨è¾¾å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å†…è” <code>map()</code> è¿”å›çš„ç»“æœï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">NumberList</span>(<span class="hljs-params">props</span>) &#123;<br>  <span class="hljs-keyword">const</span> numbers = props.<span class="hljs-property">numbers</span>;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">      &#123;numbers.map((number) =&gt;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">ListItem</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;number.toString()&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">                  <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;number&#125;</span> /&gt;</span></span><br><span class="language-xml">      )&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="24-è¡¨å•"><a href="#24-è¡¨å•" class="headerlink" title="24.è¡¨å•"></a>24.è¡¨å•</h3><p>åœ¨ React é‡Œï¼ŒHTML è¡¨å•å…ƒç´ çš„å·¥ä½œæ–¹å¼å’Œå…¶ä»–çš„ DOM å…ƒç´ æœ‰äº›ä¸åŒï¼Œè¿™æ˜¯å› ä¸ºè¡¨å•å…ƒç´ é€šå¸¸ä¼šä¿æŒä¸€äº›å†…éƒ¨çš„ stateã€‚ä¾‹å¦‚è¿™ä¸ªçº¯ HTML è¡¨å•åªæ¥å—ä¸€ä¸ªåç§°ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;form&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">    åå­—:</span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> /&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;æäº¤&quot;</span> /&gt;</span></span><br>&lt;/form&gt;<br></code></pre></td></tr></table></figure><p>æ­¤è¡¨å•å…·æœ‰é»˜è®¤çš„ HTML è¡¨å•è¡Œä¸ºï¼Œå³åœ¨ç”¨æˆ·æäº¤è¡¨å•åæµè§ˆåˆ°æ–°é¡µé¢ã€‚å¦‚æœä½ åœ¨ React ä¸­æ‰§è¡Œç›¸åŒçš„ä»£ç ï¼Œå®ƒä¾ç„¶æœ‰æ•ˆã€‚ä½†å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½¿ç”¨ JavaScript å‡½æ•°å¯ä»¥å¾ˆæ–¹ä¾¿çš„å¤„ç†è¡¨å•çš„æäº¤ï¼Œ åŒæ—¶è¿˜å¯ä»¥è®¿é—®ç”¨æˆ·å¡«å†™çš„è¡¨å•æ•°æ®ã€‚å®ç°è¿™ç§æ•ˆæœçš„æ ‡å‡†æ–¹å¼æ˜¯ä½¿ç”¨&#x3D;&#x3D;å—æ§ç»„ä»¶&#x3D;&#x3D;ã€‚</p><p><strong>å—æ§ç»„ä»¶</strong></p><p>ä½¿ React çš„ state æˆä¸ºâ€œå”¯ä¸€æ•°æ®æºâ€ã€‚æ¸²æŸ“è¡¨å•çš„ React ç»„ä»¶è¿˜æ§åˆ¶ç€ç”¨æˆ·è¾“å…¥è¿‡ç¨‹ä¸­è¡¨å•å‘ç”Ÿçš„æ“ä½œã€‚è¢« React ä»¥è¿™ç§æ–¹å¼æ§åˆ¶å–å€¼çš„è¡¨å•è¾“å…¥å…ƒç´ å°±å«åšâ€œå—æ§ç»„ä»¶â€ã€‚</p><p>ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æƒ³åœ¨æäº¤æ—¶æ‰“å°å‡ºåç§°ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¡¨å•å†™ä¸ºå—æ§ç»„ä»¶ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">NameForm</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(props);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<span class="hljs-attr">value</span>: <span class="hljs-string">&#x27;&#x27;</span>&#125;;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleChange</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleChange</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleSubmit</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleSubmit</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);<br>  &#125;<br><br>  <span class="hljs-title function_">handleChange</span>(<span class="hljs-params">event</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<span class="hljs-attr">value</span>: event.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>&#125;);<br>  &#125;<br><br>  <span class="hljs-title function_">handleSubmit</span>(<span class="hljs-params">event</span>) &#123;<br>    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;æäº¤çš„åå­—: &#x27;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">value</span>);<br>    event.<span class="hljs-title function_">preventDefault</span>();<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">&#123;this.handleSubmit&#125;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">          åå­—:</span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;this.state.value&#125;</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;this.handleChange&#125;</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;æäº¤&quot;</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç”±äºåœ¨è¡¨å•å…ƒç´ ä¸Šè®¾ç½®äº† <code>value</code> å±æ€§ï¼Œå› æ­¤æ˜¾ç¤ºçš„å€¼å°†å§‹ç»ˆä¸º <code>this.state.value</code>ï¼Œè¿™ä½¿å¾— React çš„ state æˆä¸ºå”¯ä¸€æ•°æ®æºã€‚ç”±äº <code>handlechange</code> åœ¨æ¯æ¬¡æŒ‰é”®æ—¶éƒ½ä¼šæ‰§è¡Œå¹¶æ›´æ–° React çš„ stateï¼Œå› æ­¤æ˜¾ç¤ºçš„å€¼å°†éšç€ç”¨æˆ·è¾“å…¥è€Œæ›´æ–°ã€‚</p><p>å¯¹äºå—æ§ç»„ä»¶æ¥è¯´ï¼Œè¾“å…¥çš„å€¼å§‹ç»ˆç”± React çš„ state é©±åŠ¨ã€‚ä½ ä¹Ÿå¯ä»¥å°† value ä¼ é€’ç»™å…¶ä»– UI å…ƒç´ ï¼Œæˆ–è€…é€šè¿‡å…¶ä»–äº‹ä»¶å¤„ç†å‡½æ•°é‡ç½®ï¼Œä½†è¿™æ„å‘³ç€ä½ éœ€è¦ç¼–å†™æ›´å¤šçš„ä»£ç ã€‚</p><p><strong>textareaæ ‡ç­¾</strong></p><p>åœ¨ React ä¸­ï¼Œ<code>&lt;textarea&gt;</code> ä½¿ç”¨ <code>value</code> å±æ€§ä»£æ›¿ã€‚ä½¿å¾—ä½¿ç”¨ <code>&lt;textarea&gt;</code> çš„è¡¨å•å’Œä½¿ç”¨å•è¡Œ input çš„è¡¨å•éå¸¸ç±»ä¼¼ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">EssayForm</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(props);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;      <span class="hljs-attr">value</span>: <span class="hljs-string">&#x27;è¯·æ’°å†™ä¸€ç¯‡å…³äºä½ å–œæ¬¢çš„ DOM å…ƒç´ çš„æ–‡ç« .&#x27;</span>    &#125;;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleChange</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleChange</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleSubmit</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleSubmit</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);<br>  &#125;<br><br>  <span class="hljs-title function_">handleChange</span>(<span class="hljs-params">event</span>) &#123;    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<span class="hljs-attr">value</span>: event.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>&#125;);  &#125;<br>  <span class="hljs-title function_">handleSubmit</span>(<span class="hljs-params">event</span>) &#123;<br>    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;æäº¤çš„æ–‡ç« : &#x27;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">value</span>);<br>    event.<span class="hljs-title function_">preventDefault</span>();<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">&#123;this.handleSubmit&#125;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">          æ–‡ç« :</span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;this.state.value&#125;</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;this.handleChange&#125;</span> /&gt;</span>        <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;æäº¤&quot;</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¯·æ³¨æ„ï¼Œ<code>this.state.value</code> åˆå§‹åŒ–äºæ„é€ å‡½æ•°ä¸­ï¼Œå› æ­¤æ–‡æœ¬åŒºåŸŸé»˜è®¤æœ‰åˆå€¼ã€‚</p><p><strong>selectæ ‡ç­¾</strong></p><p>React å¹¶ä¸ä¼šä½¿ç”¨ <code>selected</code> å±æ€§ï¼Œè€Œæ˜¯åœ¨æ ¹ <code>select</code> æ ‡ç­¾ä¸Šä½¿ç”¨ <code>value</code> å±æ€§ã€‚è¿™åœ¨å—æ§ç»„ä»¶ä¸­æ›´ä¾¿æ·ï¼Œå› ä¸ºæ‚¨åªéœ€è¦åœ¨æ ¹æ ‡ç­¾ä¸­æ›´æ–°å®ƒã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">FlavorForm</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(props);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<span class="hljs-attr">value</span>: <span class="hljs-string">&#x27;coconut&#x27;</span>&#125;;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleChange</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleChange</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleSubmit</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleSubmit</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);<br>  &#125;<br><br>  <span class="hljs-title function_">handleChange</span>(<span class="hljs-params">event</span>) &#123;    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<span class="hljs-attr">value</span>: event.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>&#125;);  &#125;<br>  <span class="hljs-title function_">handleSubmit</span>(<span class="hljs-params">event</span>) &#123;<br>    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;ä½ å–œæ¬¢çš„é£å‘³æ˜¯: &#x27;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">value</span>);<br>    event.<span class="hljs-title function_">preventDefault</span>();<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">&#123;this.handleSubmit&#125;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">          é€‰æ‹©ä½ å–œæ¬¢çš„é£å‘³:</span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;this.state.value&#125;</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;this.handleChange&#125;</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;grapefruit&quot;</span>&gt;</span>è‘¡è„æŸš<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;lime&quot;</span>&gt;</span>é…¸æ©™<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;coconut&quot;</span>&gt;</span>æ¤°å­<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;mango&quot;</span>&gt;</span>èŠ’æœ<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;æäº¤&quot;</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»çš„æ¥è¯´ï¼Œè¿™ä½¿å¾— <code>&lt;input type=&quot;text&quot;&gt;</code>, <code>&lt;textarea&gt;</code> å’Œ <code>&lt;select&gt;</code> ä¹‹ç±»çš„æ ‡ç­¾éƒ½éå¸¸ç›¸ä¼¼â€”å®ƒä»¬éƒ½æ¥å—ä¸€ä¸ª <code>value</code> å±æ€§ï¼Œä½ å¯ä»¥ä½¿ç”¨å®ƒæ¥å®ç°å—æ§ç»„ä»¶ã€‚å¦å¤–ï¼Œ<code>value</code>å±æ€§æ”¯æŒä¼ å…¥æ•°ç»„ï¼Œå¯ä»¥åœ¨<code>select</code>æ ‡ç­¾ä¸­é€‰æ‹©å¤šä¸ªé€‰é¡¹ï¼š<code>&lt;select multiple=&#123;true&#125; value=&#123;[&#39;B&#39;, &#39;C&#39;]&#125;&gt;</code>ã€‚</p><p><strong>æ–‡ä»¶inputæ ‡ç­¾</strong></p><p><code>&lt;input type=&quot;file&quot;&gt;</code> å…è®¸ç”¨æˆ·ä»å­˜å‚¨è®¾å¤‡ä¸­é€‰æ‹©ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ï¼Œå°†å…¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œæˆ–é€šè¿‡ä½¿ç”¨ JavaScript çš„File APIè¿›è¡Œæ§åˆ¶ã€‚</p><p>å› ä¸ºå®ƒçš„ value åªè¯»ï¼Œæ‰€ä»¥å®ƒæ˜¯ React ä¸­çš„ä¸€ä¸ª&#x3D;&#x3D;éå—æ§ç»„ä»¶&#x3D;&#x3D;ã€‚å°†ä¸å…¶ä»–éå—æ§ç»„ä»¶åœ¨åç»­æ–‡æ¡£ä¸­ä¸€èµ·è®¨è®ºã€‚</p><p><strong>å¤„ç†å¤šä¸ªè¾“å…¥</strong></p><p>å½“éœ€è¦å¤„ç†å¤šä¸ª <code>input</code> å…ƒç´ æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç»™æ¯ä¸ªå…ƒç´ æ·»åŠ  <code>name</code> å±æ€§ï¼Œå¹¶è®©å¤„ç†å‡½æ•°æ ¹æ® <code>event.target.name</code> çš„å€¼é€‰æ‹©è¦æ‰§è¡Œçš„æ“ä½œï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Reservation</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(props);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>      <span class="hljs-attr">isGoing</span>: <span class="hljs-literal">true</span>,<br>      <span class="hljs-attr">numberOfGuests</span>: <span class="hljs-number">2</span><br>    &#125;;<br><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleInputChange</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleInputChange</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);<br>  &#125;<br><br>  <span class="hljs-title function_">handleInputChange</span>(<span class="hljs-params">event</span>) &#123;<br>    <span class="hljs-keyword">const</span> target = event.<span class="hljs-property">target</span>;<br>    <span class="hljs-keyword">const</span> value = target.<span class="hljs-property">name</span> === <span class="hljs-string">&#x27;isGoing&#x27;</span> ? target.<span class="hljs-property">checked</span> : target.<span class="hljs-property">value</span>;<br>    <span class="hljs-keyword">const</span> name = target.<span class="hljs-property">name</span>;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<br>      [name]: value    &#125;);<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">          å‚ä¸:</span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;isGoing&quot;</span>            <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">checked</span>=<span class="hljs-string">&#123;this.state.isGoing&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;this.handleInputChange&#125;</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">          æ¥å®¾äººæ•°:</span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;numberOfGuests&quot;</span>            <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;number&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;this.state.numberOfGuests&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;this.handleInputChange&#125;</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œä½¿ç”¨äº† ES6 <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Object_initializer#Computed_property_names">è®¡ç®—å±æ€§åç§°</a>çš„è¯­æ³•æ›´æ–°ç»™å®šè¾“å…¥åç§°å¯¹åº”çš„ state å€¼ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<br>  [name]: value<br>&#125;);<br></code></pre></td></tr></table></figure><p>å¦å¤–ï¼Œç”±äº <code>setState()</code> è‡ªåŠ¨[å°†éƒ¨åˆ† state åˆå¹¶åˆ°å½“å‰ stateï¼Œåªéœ€è°ƒç”¨å®ƒæ›´æ”¹éƒ¨åˆ† state å³å¯ã€‚</p><p><strong>å—æ§è¾“å…¥ç©ºå€¼</strong></p><p>åœ¨<a href="https://react.docschina.org/docs/forms.html#controlled-components">å—æ§ç»„ä»¶</a>ä¸ŠæŒ‡å®š value çš„ prop ä¼šé˜»æ­¢ç”¨æˆ·æ›´æ”¹è¾“å…¥ã€‚å¦‚æœä½ æŒ‡å®šäº† <code>value</code>ï¼Œä½†è¾“å…¥ä»å¯ç¼–è¾‘ï¼Œåˆ™å¯èƒ½æ˜¯ä½ æ„å¤–åœ°å°†<code>value</code> è®¾ç½®ä¸º <code>undefined</code> æˆ– <code>null</code>ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;hi&quot;</span> /&gt;</span></span>, mountNode);<br><br><span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;null&#125;</span> /&gt;</span></span>, mountNode);<br>&#125;, <span class="hljs-number">1000</span>);<br></code></pre></td></tr></table></figure><p><strong>å—æ§ç»„ä»¶çš„æ›¿ä»£å“</strong></p><p>æœ‰æ—¶ä½¿ç”¨å—æ§ç»„ä»¶ä¼šå¾ˆéº»çƒ¦ï¼Œå› ä¸ºä½ éœ€è¦ä¸ºæ•°æ®å˜åŒ–çš„æ¯ç§æ–¹å¼éƒ½ç¼–å†™äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œå¹¶é€šè¿‡ä¸€ä¸ª React ç»„ä»¶ä¼ é€’æ‰€æœ‰çš„è¾“å…¥ stateã€‚å½“ä½ å°†ä¹‹å‰çš„ä»£ç åº“è½¬æ¢ä¸º React æˆ–å°† React åº”ç”¨ç¨‹åºä¸é React åº“é›†æˆæ—¶ï¼Œè¿™å¯èƒ½ä¼šä»¤äººåŒçƒ¦ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½å¸Œæœ›ä½¿ç”¨&#x3D;&#x3D;éå—æ§ç»„ä»¶&#x3D;&#x3D;ï¼Œè¿™æ˜¯å®ç°è¾“å…¥è¡¨å•çš„å¦ä¸€ç§æ–¹å¼ã€‚</p><p><strong>æˆç†Ÿçš„è§£å†³æ–¹æ¡ˆ</strong></p><p>å¦‚æœä½ æƒ³å¯»æ‰¾åŒ…å«éªŒè¯ã€è¿½è¸ªè®¿é—®å­—æ®µä»¥åŠå¤„ç†è¡¨å•æäº¤çš„å®Œæ•´è§£å†³æ–¹æ¡ˆï¼Œä½¿ç”¨ <a href="https://jaredpalmer.com/formik">Formik</a> æ˜¯ä¸é”™çš„é€‰æ‹©ã€‚ç„¶è€Œï¼Œå®ƒä¹Ÿæ˜¯å»ºç«‹åœ¨å—æ§ç»„ä»¶å’Œç®¡ç† state çš„åŸºç¡€ä¹‹ä¸Š â€”â€” æ‰€ä»¥ä¸è¦å¿½è§†å­¦ä¹ å®ƒä»¬ã€‚</p><p><strong>&#x3D;&#x3D;éå—æ§ç»„ä»¶&#x3D;&#x3D;</strong></p><p>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ¨èä½¿ç”¨ <a href="https://react.docschina.org/docs/forms.html#controlled-components">å—æ§ç»„ä»¶</a> æ¥å¤„ç†è¡¨å•æ•°æ®ã€‚åœ¨ä¸€ä¸ªå—æ§ç»„ä»¶ä¸­ï¼Œè¡¨å•æ•°æ®æ˜¯ç”± React ç»„ä»¶æ¥ç®¡ç†çš„ã€‚å¦ä¸€ç§æ›¿ä»£æ–¹æ¡ˆæ˜¯ä½¿ç”¨éå—æ§ç»„ä»¶ï¼Œè¿™æ—¶è¡¨å•æ•°æ®å°†äº¤ç”± DOM èŠ‚ç‚¹æ¥å¤„ç†ã€‚</p><p>è¦ç¼–å†™ä¸€ä¸ªéå—æ§ç»„ä»¶ï¼Œè€Œä¸æ˜¯ä¸ºæ¯ä¸ªçŠ¶æ€æ›´æ–°éƒ½ç¼–å†™æ•°æ®å¤„ç†å‡½æ•°ï¼Œä½ å¯ä»¥ <a href="https://react.docschina.org/docs/refs-and-the-dom.html">ä½¿ç”¨ ref</a> æ¥ä» DOM èŠ‚ç‚¹ä¸­è·å–è¡¨å•æ•°æ®ã€‚</p><p>ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç ä½¿ç”¨éå—æ§ç»„ä»¶æ¥å—ä¸€ä¸ªè¡¨å•çš„å€¼ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">NameForm</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(props);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleSubmit</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleSubmit</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">input</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createRef</span>();<br>  &#125;<br><br>  <span class="hljs-title function_">handleSubmit</span>(<span class="hljs-params">event</span>) &#123;<br>    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;A name was submitted: &#x27;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">input</span>.<span class="hljs-property">current</span>.<span class="hljs-property">value</span>);<br>    event.<span class="hljs-title function_">preventDefault</span>();<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">&#123;this.handleSubmit&#125;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">          Name:</span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;this.input&#125;</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Submit&quot;</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å› ä¸ºéå—æ§ç»„ä»¶å°†çœŸå®æ•°æ®å‚¨å­˜åœ¨ DOM èŠ‚ç‚¹ä¸­ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨éå—æ§ç»„ä»¶æ—¶ï¼Œæœ‰æ—¶å€™åè€Œæ›´å®¹æ˜“åŒæ—¶é›†æˆ React å’Œé React ä»£ç ã€‚å¦‚æœä½ ä¸ä»‹æ„ä»£ç ç¾è§‚æ€§ï¼Œå¹¶ä¸”å¸Œæœ›å¿«é€Ÿç¼–å†™ä»£ç ï¼Œä½¿ç”¨éå—æ§ç»„ä»¶å¾€å¾€å¯ä»¥å‡å°‘ä½ çš„ä»£ç é‡ã€‚å¦åˆ™ï¼Œä½ åº”è¯¥ä½¿ç”¨å—æ§ç»„ä»¶ã€‚</p><p>å¦‚æœä½ è¿˜æ˜¯ä¸æ¸…æ¥šåœ¨æŸä¸ªç‰¹æ®Šåœºæ™¯ä¸­åº”è¯¥ä½¿ç”¨å“ªç§ç»„ä»¶ï¼Œé‚£ä¹ˆ <a href="https://goshakkk.name/controlled-vs-uncontrolled-inputs-react/">è¿™ç¯‡å…³äºå—æ§å’Œéå—æ§è¾“å…¥ç»„ä»¶çš„æ–‡ç« </a> ä¼šå¾ˆæœ‰å¸®åŠ©ã€‚</p><p><strong>é»˜è®¤å€¼</strong></p><p>åœ¨ React æ¸²æŸ“ç”Ÿå‘½å‘¨æœŸæ—¶ï¼Œè¡¨å•å…ƒç´ ä¸Šçš„ <code>value</code> å°†ä¼šè¦†ç›– DOM èŠ‚ç‚¹ä¸­çš„å€¼ï¼Œåœ¨éå—æ§ç»„ä»¶ä¸­ï¼Œä½ ç»å¸¸å¸Œæœ› React èƒ½èµ‹äºˆç»„ä»¶ä¸€ä¸ªåˆå§‹å€¼ï¼Œä½†æ˜¯ä¸å»æ§åˆ¶åç»­çš„æ›´æ–°ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹, ä½ å¯ä»¥æŒ‡å®šä¸€ä¸ª <code>defaultValue</code> å±æ€§ï¼Œè€Œä¸æ˜¯ <code>value</code>ã€‚</p><p>åŒæ ·ï¼Œ<code>&lt;input type=&quot;checkbox&quot;&gt;</code> å’Œ <code>&lt;input type=&quot;radio&quot;&gt;</code> æ”¯æŒ <code>defaultChecked</code>ï¼Œ<code>&lt;select&gt;</code> å’Œ <code>&lt;textarea&gt;</code> æ”¯æŒ <code>defaultValue</code>ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">&#123;this.handleSubmit&#125;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">        Name:</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">defaultValue</span>=<span class="hljs-string">&quot;Bob&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;this.input&#125;</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Submit&quot;</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨ React ä¸­ï¼Œ<code>&lt;input type=&quot;file&quot; /&gt;</code> å§‹ç»ˆæ˜¯ä¸€ä¸ªéå—æ§ç»„ä»¶ï¼Œå› ä¸ºå®ƒçš„å€¼åªèƒ½ç”±ç”¨æˆ·è®¾ç½®ï¼Œè€Œä¸èƒ½é€šè¿‡ä»£ç æ§åˆ¶ã€‚</p><p>æ‚¨åº”è¯¥ä½¿ç”¨ File API ä¸æ–‡ä»¶è¿›è¡Œäº¤äº’ã€‚ä¸‹é¢çš„ä¾‹å­æ˜¾ç¤ºäº†å¦‚ä½•åˆ›å»ºä¸€ä¸ª <a href="https://react.docschina.org/docs/refs-and-the-dom.html">DOM èŠ‚ç‚¹çš„ ref</a> ä»è€Œåœ¨æäº¤è¡¨å•æ—¶è·å–æ–‡ä»¶çš„ä¿¡æ¯ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">FileInput</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(props);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleSubmit</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleSubmit</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fileInput</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createRef</span>();<br>  &#125;<br>  <span class="hljs-title function_">handleSubmit</span>(<span class="hljs-params">event</span>) &#123;<br>    event.<span class="hljs-title function_">preventDefault</span>();<br>    <span class="hljs-title function_">alert</span>(<br>      <span class="hljs-string">`Selected file - <span class="hljs-subst">$&#123;<span class="hljs-variable language_">this</span>.fileInput.current.files[<span class="hljs-number">0</span>].name&#125;</span>`</span><br>    );<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">&#123;this.handleSubmit&#125;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">          Upload file:</span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;file&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;this.fileInput&#125;</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">FileInput</span> /&gt;</span></span>,<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;root&#x27;</span>)<br>)<br></code></pre></td></tr></table></figure><h3 id="25-çŠ¶æ€æå‡"><a href="#25-çŠ¶æ€æå‡" class="headerlink" title="25.çŠ¶æ€æå‡"></a>25.çŠ¶æ€æå‡</h3><p>é€šå¸¸ï¼Œå¤šä¸ªç»„ä»¶éœ€è¦åæ˜ ç›¸åŒçš„å˜åŒ–æ•°æ®ï¼Œè¿™æ—¶æˆ‘ä»¬å»ºè®®å°†å…±äº«çŠ¶æ€æå‡åˆ°æœ€è¿‘çš„å…±åŒçˆ¶ç»„ä»¶ä¸­å»ã€‚</p><p>å¦‚ä¸‹æƒ…å†µï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">BoilingVerdict</span>(<span class="hljs-params">props</span>) &#123;<br>  <span class="hljs-keyword">if</span> (props.<span class="hljs-property">celsius</span> &gt;= <span class="hljs-number">100</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>The water would boil.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>;  &#125;<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>The water would not boil.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>;&#125;<br></code></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> scaleNames = &#123;<br>  <span class="hljs-attr">c</span>: <span class="hljs-string">&#x27;Celsius&#x27;</span>,<br>  <span class="hljs-attr">f</span>: <span class="hljs-string">&#x27;Fahrenheit&#x27;</span><br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TemperatureInput</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(props);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleChange</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleChange</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<span class="hljs-attr">temperature</span>: <span class="hljs-string">&#x27;&#x27;</span>&#125;;<br>  &#125;<br><br>  <span class="hljs-title function_">handleChange</span>(<span class="hljs-params">e</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<span class="hljs-attr">temperature</span>: e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>&#125;);<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> temperature = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">temperature</span>;<br>    <span class="hljs-keyword">const</span> scale = <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">scale</span>;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">fieldset</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">legend</span>&gt;</span>Enter temperature in &#123;scaleNames[scale]&#125;:<span class="hljs-tag">&lt;/<span class="hljs-name">legend</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;temperature&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">               <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;this.handleChange&#125;</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">fieldset</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬ç°åœ¨å¯ä»¥ä¿®æ”¹ <code>Calculator</code> ç»„ä»¶è®©å®ƒæ¸²æŸ“ä¸¤ä¸ªç‹¬ç«‹çš„æ¸©åº¦è¾“å…¥æ¡†ç»„ä»¶ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Calculator</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">TemperatureInput</span> <span class="hljs-attr">scale</span>=<span class="hljs-string">&quot;c&quot;</span> /&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">TemperatureInput</span> <span class="hljs-attr">scale</span>=<span class="hljs-string">&quot;f&quot;</span> /&gt;</span>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬ç°åœ¨æœ‰äº†ä¸¤ä¸ªè¾“å…¥æ¡†ï¼Œä½†å½“ä½ åœ¨å…¶ä¸­ä¸€ä¸ªè¾“å…¥æ¸©åº¦æ—¶ï¼Œå¦ä¸€ä¸ªå¹¶ä¸ä¼šæ›´æ–°ã€‚è¿™ä¸æˆ‘ä»¬çš„è¦æ±‚ç›¸çŸ›ç›¾ï¼šæˆ‘ä»¬å¸Œæœ›è®©å®ƒä»¬ä¿æŒåŒæ­¥ã€‚</p><p>å¦å¤–ï¼Œæˆ‘ä»¬ä¹Ÿä¸èƒ½é€šè¿‡ <code>Calculator</code> ç»„ä»¶å±•ç¤º <code>BoilingVerdict</code> ç»„ä»¶çš„æ¸²æŸ“ç»“æœã€‚å› ä¸º <code>Calculator</code> ç»„ä»¶å¹¶ä¸çŸ¥é“éšè—åœ¨ <code>TemperatureInput</code> ç»„ä»¶ä¸­çš„å½“å‰æ¸©åº¦æ˜¯å¤šå°‘ã€‚</p><p>åœ¨ React ä¸­ï¼Œå°†å¤šä¸ªç»„ä»¶ä¸­éœ€è¦å…±äº«çš„ state å‘ä¸Šç§»åŠ¨åˆ°å®ƒä»¬çš„æœ€è¿‘å…±åŒçˆ¶ç»„ä»¶ä¸­ï¼Œä¾¿å¯å®ç°å…±äº« stateã€‚è¿™å°±æ˜¯æ‰€è°“çš„â€œçŠ¶æ€æå‡â€ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°† <code>TemperatureInput</code> ç»„ä»¶ä¸­çš„ state ç§»åŠ¨è‡³ <code>Calculator</code> ç»„ä»¶ä¸­å»ã€‚</p><p>å¦‚æœ <code>Calculator</code> ç»„ä»¶æ‹¥æœ‰äº†å…±äº«çš„ stateï¼Œå®ƒå°†æˆä¸ºä¸¤ä¸ªæ¸©åº¦è¾“å…¥æ¡†ä¸­å½“å‰æ¸©åº¦çš„â€œæ•°æ®æºâ€ã€‚å®ƒèƒ½å¤Ÿä½¿å¾—ä¸¤ä¸ªæ¸©åº¦è¾“å…¥æ¡†çš„æ•°å€¼å½¼æ­¤ä¿æŒä¸€è‡´ã€‚ç”±äºä¸¤ä¸ª <code>TemperatureInput</code> ç»„ä»¶çš„ props å‡æ¥è‡ªå…±åŒçš„çˆ¶ç»„ä»¶ <code>Calculator</code>ï¼Œå› æ­¤ä¸¤ä¸ªè¾“å…¥æ¡†ä¸­çš„å†…å®¹å°†å§‹ç»ˆä¿æŒä¸€è‡´ã€‚</p><p>ä¿®æ”¹åï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">TemperatureInput</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(props);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleChange</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleChange</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);<br>  &#125;<br><br>  <span class="hljs-title function_">handleChange</span>(<span class="hljs-params">e</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-title function_">onTemperatureChange</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>);<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> temperature = <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">temperature</span>;<br>    <span class="hljs-keyword">const</span> scale = <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">scale</span>;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">fieldset</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">legend</span>&gt;</span>Enter temperature in &#123;scaleNames[scale]&#125;:<span class="hljs-tag">&lt;/<span class="hljs-name">legend</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;temperature&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">               <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;this.handleChange&#125;</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">fieldset</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Calculator</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(props);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleCelsiusChange</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleCelsiusChange</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleFahrenheitChange</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleFahrenheitChange</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<span class="hljs-attr">temperature</span>: <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-attr">scale</span>: <span class="hljs-string">&#x27;c&#x27;</span>&#125;;  &#125;<br><br>  <span class="hljs-title function_">handleCelsiusChange</span>(<span class="hljs-params">temperature</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<span class="hljs-attr">scale</span>: <span class="hljs-string">&#x27;c&#x27;</span>, temperature&#125;);  &#125;<br><br>  <span class="hljs-title function_">handleFahrenheitChange</span>(<span class="hljs-params">temperature</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<span class="hljs-attr">scale</span>: <span class="hljs-string">&#x27;f&#x27;</span>, temperature&#125;);  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> scale = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">scale</span>;    <span class="hljs-keyword">const</span> temperature = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">temperature</span>;    <span class="hljs-keyword">const</span> celsius = scale === <span class="hljs-string">&#x27;f&#x27;</span> ? <span class="hljs-title function_">tryConvert</span>(temperature, toCelsius) : temperature;    <span class="hljs-keyword">const</span> fahrenheit = scale === <span class="hljs-string">&#x27;c&#x27;</span> ? <span class="hljs-title function_">tryConvert</span>(temperature, toFahrenheit) : temperature;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">TemperatureInput</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">scale</span>=<span class="hljs-string">&quot;c&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">temperature</span>=<span class="hljs-string">&#123;celsius&#125;</span>          <span class="hljs-attr">onTemperatureChange</span>=<span class="hljs-string">&#123;this.handleCelsiusChange&#125;</span> /&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">TemperatureInput</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">scale</span>=<span class="hljs-string">&quot;f&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">temperature</span>=<span class="hljs-string">&#123;fahrenheit&#125;</span>          <span class="hljs-attr">onTemperatureChange</span>=<span class="hljs-string">&#123;this.handleFahrenheitChange&#125;</span> /&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">BoilingVerdict</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">celsius</span>=<span class="hljs-string">&#123;parseFloat(celsius)&#125;</span> /&gt;</span>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>é™„å¸¦ä¸€äº›è½¬æ¢å‡½æ•°</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">toCelsius</span>(<span class="hljs-params">fahrenheit</span>) &#123;<br>  <span class="hljs-keyword">return</span> (fahrenheit - <span class="hljs-number">32</span>) * <span class="hljs-number">5</span> / <span class="hljs-number">9</span>;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">toFahrenheit</span>(<span class="hljs-params">celsius</span>) &#123;<br>  <span class="hljs-keyword">return</span> (celsius * <span class="hljs-number">9</span> / <span class="hljs-number">5</span>) + <span class="hljs-number">32</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">tryConvert</span>(<span class="hljs-params">temperature, convert</span>) &#123;<br>  <span class="hljs-keyword">const</span> input = <span class="hljs-built_in">parseFloat</span>(temperature);<br>  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Number</span>.<span class="hljs-built_in">isNaN</span>(input)) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&#x27;</span>;<br>  &#125;<br>  <span class="hljs-keyword">const</span> output = <span class="hljs-title function_">convert</span>(input);<br>  <span class="hljs-keyword">const</span> rounded = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(output * <span class="hljs-number">1000</span>) / <span class="hljs-number">1000</span>;<br>  <span class="hljs-keyword">return</span> rounded.<span class="hljs-title function_">toString</span>();<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>å°ç»“</strong></p><p>åœ¨ React åº”ç”¨ä¸­ï¼Œä»»ä½•å¯å˜æ•°æ®åº”å½“åªæœ‰ä¸€ä¸ªç›¸å¯¹åº”çš„å”¯ä¸€â€œæ•°æ®æºâ€ã€‚é€šå¸¸ï¼Œstate éƒ½æ˜¯é¦–å…ˆæ·»åŠ åˆ°éœ€è¦æ¸²æŸ“æ•°æ®çš„ç»„ä»¶ä¸­å»ã€‚ç„¶åï¼Œå¦‚æœå…¶ä»–ç»„ä»¶ä¹Ÿéœ€è¦è¿™ä¸ª stateï¼Œé‚£ä¹ˆä½ å¯ä»¥å°†å®ƒæå‡è‡³è¿™äº›ç»„ä»¶çš„æœ€è¿‘å…±åŒçˆ¶ç»„ä»¶ä¸­ã€‚ä½ åº”å½“ä¾é <a href="https://react.docschina.org/docs/state-and-lifecycle.html#the-data-flows-down">è‡ªä¸Šè€Œä¸‹çš„æ•°æ®æµ</a>ï¼Œè€Œä¸æ˜¯å°è¯•åœ¨ä¸åŒç»„ä»¶é—´åŒæ­¥ stateã€‚</p><p>è™½ç„¶æå‡ state æ–¹å¼æ¯”åŒå‘ç»‘å®šæ–¹å¼éœ€è¦ç¼–å†™æ›´å¤šçš„â€œæ ·æ¿â€ä»£ç ï¼Œä½†å¸¦æ¥çš„å¥½å¤„æ˜¯ï¼Œæ’æŸ¥å’Œéš”ç¦» bug æ‰€éœ€çš„å·¥ä½œé‡å°†ä¼šå˜å°‘ã€‚ç”±äºâ€œå­˜åœ¨â€äºç»„ä»¶ä¸­çš„ä»»ä½• stateï¼Œä»…æœ‰ç»„ä»¶è‡ªå·±èƒ½å¤Ÿä¿®æ”¹å®ƒï¼Œå› æ­¤ bug çš„æ’æŸ¥èŒƒå›´è¢«å¤§å¤§ç¼©å‡äº†ã€‚æ­¤å¤–ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰é€»è¾‘æ¥æ‹’ç»æˆ–è½¬æ¢ç”¨æˆ·çš„è¾“å…¥ã€‚</p><p>å¦‚æœæŸäº›æ•°æ®å¯ä»¥ç”± props æˆ– state æ¨å¯¼å¾—å‡ºï¼Œé‚£ä¹ˆå®ƒå°±ä¸åº”è¯¥å­˜åœ¨äº state ä¸­ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæœ¬ä¾‹ä¸­æˆ‘ä»¬æ²¡æœ‰å°† <code>celsiusValue</code> å’Œ <code>fahrenheitValue</code> ä¸€èµ·ä¿å­˜ï¼Œè€Œæ˜¯ä»…ä¿å­˜äº†æœ€åä¿®æ”¹çš„ <code>temperature</code> å’Œå®ƒçš„ <code>scale</code>ã€‚è¿™æ˜¯å› ä¸ºå¦ä¸€ä¸ªè¾“å…¥æ¡†çš„æ¸©åº¦å€¼å§‹ç»ˆå¯ä»¥é€šè¿‡è¿™ä¸¤ä¸ªå€¼ä»¥åŠç»„ä»¶çš„ <code>render()</code> æ–¹æ³•è·å¾—ã€‚è¿™ä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿæ¸…é™¤è¾“å…¥æ¡†å†…å®¹ï¼Œäº¦æˆ–æ˜¯ï¼Œåœ¨ä¸æŸå¤±ç”¨æˆ·æ“ä½œçš„è¾“å…¥æ¡†å†…æ•°å€¼ç²¾åº¦çš„å‰æä¸‹å¯¹å¦ä¸€ä¸ªè¾“å…¥æ¡†å†…çš„è½¬æ¢æ•°å€¼åšå››èˆäº”å…¥çš„æ“ä½œã€‚</p><p>å½“ä½ åœ¨ UI ä¸­å‘ç°é”™è¯¯æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <a href="https://github.com/facebook/react/tree/master/packages/react-devtools">React å¼€å‘è€…å·¥å…·</a> æ¥æ£€æŸ¥é—®é¢˜ç»„ä»¶çš„ propsï¼Œå¹¶ä¸”æŒ‰ç…§ç»„ä»¶æ ‘ç»“æ„é€çº§å‘ä¸Šæœå¯»ï¼Œç›´åˆ°å®šä½åˆ°è´Ÿè´£æ›´æ–° state çš„é‚£ä¸ªç»„ä»¶ã€‚è¿™ä½¿å¾—ä½ èƒ½å¤Ÿè¿½è¸ªåˆ°äº§ç”Ÿ bug çš„æºå¤´ï¼š</p><h3 id="26-Reactç»„åˆ"><a href="#26-Reactç»„åˆ" class="headerlink" title="26. Reactç»„åˆ"></a>26. Reactç»„åˆ</h3><p><strong>åŒ…å«å…³ç³»</strong></p><p>æœ‰äº›ç»„ä»¶æ— æ³•æå‰çŸ¥æ™“å®ƒä»¬å­ç»„ä»¶çš„å…·ä½“å†…å®¹ã€‚åœ¨ <code>Sidebar</code>ï¼ˆä¾§è¾¹æ ï¼‰å’Œ <code>Dialog</code>ï¼ˆå¯¹è¯æ¡†ï¼‰ç­‰å±•ç°é€šç”¨å®¹å™¨ï¼ˆboxï¼‰çš„ç»„ä»¶ä¸­ç‰¹åˆ«å®¹æ˜“é‡åˆ°è¿™ç§æƒ…å†µã€‚</p><p>æˆ‘ä»¬å»ºè®®è¿™äº›ç»„ä»¶ä½¿ç”¨ä¸€ä¸ªç‰¹æ®Šçš„ <code>children</code> prop æ¥å°†ä»–ä»¬çš„å­ç»„ä»¶ä¼ é€’åˆ°æ¸²æŸ“ç»“æœä¸­ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">FancyBorder</span>(<span class="hljs-params">props</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&#123;</span>&#x27;<span class="hljs-attr">FancyBorder</span> <span class="hljs-attr">FancyBorder-</span>&#x27; + <span class="hljs-attr">props.color</span>&#125;&gt;</span></span><br><span class="language-xml">      &#123;props.children&#125;    </span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™ä½¿å¾—åˆ«çš„ç»„ä»¶å¯ä»¥é€šè¿‡ JSX åµŒå¥—ï¼Œå°†ä»»æ„ç»„ä»¶ä½œä¸ºå­ç»„ä»¶ä¼ é€’ç»™å®ƒä»¬ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">WelcomeDialog</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">FancyBorder</span> <span class="hljs-attr">color</span>=<span class="hljs-string">&quot;blue&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;Dialog-title&quot;</span>&gt;</span></span><br><span class="language-xml">          Welcome      </span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>      </span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;Dialog-message&quot;</span>&gt;</span></span><br><span class="language-xml">          Thank you for visiting our spacecraft!      </span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>   </span><br><span class="language-xml">     <span class="hljs-tag">&lt;/<span class="hljs-name">FancyBorder</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><p><code>&lt;FancyBorder&gt;</code> JSX æ ‡ç­¾ä¸­çš„æ‰€æœ‰å†…å®¹éƒ½ä¼šä½œä¸ºä¸€ä¸ª <code>children</code> prop ä¼ é€’ç»™ <code>FancyBorder</code> ç»„ä»¶ã€‚å› ä¸º <code>FancyBorder</code> å°† <code>&#123;props.children&#125;</code> æ¸²æŸ“åœ¨ä¸€ä¸ª <code>&lt;div&gt;</code> ä¸­ï¼Œè¢«ä¼ é€’çš„è¿™äº›å­ç»„ä»¶æœ€ç»ˆéƒ½ä¼šå‡ºç°åœ¨è¾“å‡ºç»“æœä¸­ã€‚</p><p>å°‘æ•°æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½éœ€è¦åœ¨ä¸€ä¸ªç»„ä»¶ä¸­é¢„ç•™å‡ºå‡ ä¸ªâ€œæ´â€ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ä½¿ç”¨ <code>children</code>ï¼Œè€Œæ˜¯è‡ªè¡Œçº¦å®šï¼šå°†æ‰€éœ€å†…å®¹ä¼ å…¥ propsï¼Œå¹¶ä½¿ç”¨ç›¸åº”çš„ propã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">SplitPane</span>(<span class="hljs-params">props</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;SplitPane&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;SplitPane-left&quot;</span>&gt;</span></span><br><span class="language-xml">        &#123;props.left&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;SplitPane-right&quot;</span>&gt;</span></span><br><span class="language-xml">        &#123;props.right&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">SplitPane</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">left</span>=<span class="hljs-string">&#123;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        &lt;<span class="hljs-attr">Contacts</span> /&gt;</span></span><br><span class="language-xml">      &#125;</span><br><span class="language-xml">      right=&#123;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Chat</span> /&gt;</span></span><br><span class="language-xml">      &#125; /&gt;</span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><p><code>&lt;Contacts /&gt;</code> å’Œ <code>&lt;Chat /&gt;</code> ä¹‹ç±»çš„ React å…ƒç´ æœ¬è´¨å°±æ˜¯å¯¹è±¡ï¼ˆobjectï¼‰ï¼Œæ‰€ä»¥ä½ å¯ä»¥æŠŠå®ƒä»¬å½“ä½œ propsï¼Œåƒå…¶ä»–æ•°æ®ä¸€æ ·ä¼ é€’ã€‚è¿™ç§æ–¹æ³•å¯èƒ½ä½¿ä½ æƒ³èµ·åˆ«çš„åº“ä¸­â€œæ§½â€ï¼ˆslotï¼‰çš„æ¦‚å¿µï¼Œä½†åœ¨ React ä¸­æ²¡æœ‰â€œæ§½â€è¿™ä¸€æ¦‚å¿µçš„é™åˆ¶ï¼Œä½ å¯ä»¥å°†ä»»ä½•ä¸œè¥¿ä½œä¸º props è¿›è¡Œä¼ é€’ã€‚</p><p><strong>ç‰¹ä¾‹å…³ç³»</strong></p><p>æœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šæŠŠä¸€äº›ç»„ä»¶çœ‹ä½œæ˜¯å…¶ä»–ç»„ä»¶çš„ç‰¹æ®Šå®ä¾‹ï¼Œæ¯”å¦‚ <code>WelcomeDialog</code> å¯ä»¥è¯´æ˜¯ <code>Dialog</code> çš„ç‰¹æ®Šå®ä¾‹ã€‚</p><p>åœ¨ React ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ç»„åˆæ¥å®ç°è¿™ä¸€ç‚¹ã€‚â€œç‰¹æ®Šâ€ç»„ä»¶å¯ä»¥é€šè¿‡ props å®šåˆ¶å¹¶æ¸²æŸ“â€œä¸€èˆ¬â€ç»„ä»¶ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Dialog</span>(<span class="hljs-params">props</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">FancyBorder</span> <span class="hljs-attr">color</span>=<span class="hljs-string">&quot;blue&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;Dialog-title&quot;</span>&gt;</span></span><br><span class="language-xml">        &#123;props.title&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;Dialog-message&quot;</span>&gt;</span></span><br><span class="language-xml">        &#123;props.message&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">FancyBorder</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">WelcomeDialog</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Dialog</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;Welcome&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">message</span>=<span class="hljs-string">&quot;Thank you for visiting our spacecraft!&quot;</span> /&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><p>ç»„åˆä¹ŸåŒæ ·é€‚ç”¨äºä»¥ class å½¢å¼å®šä¹‰çš„ç»„ä»¶ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Dialog</span>(<span class="hljs-params">props</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">FancyBorder</span> <span class="hljs-attr">color</span>=<span class="hljs-string">&quot;blue&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;Dialog-title&quot;</span>&gt;</span></span><br><span class="language-xml">        &#123;props.title&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;Dialog-message&quot;</span>&gt;</span></span><br><span class="language-xml">        &#123;props.message&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">      &#123;props.children&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">FancyBorder</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SignUpDialog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(props);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleChange</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleChange</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleSignUp</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleSignUp</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<span class="hljs-attr">login</span>: <span class="hljs-string">&#x27;&#x27;</span>&#125;;<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Dialog</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;Mars Exploration Program&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">              <span class="hljs-attr">message</span>=<span class="hljs-string">&quot;How should we refer to you?&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;this.state.login&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">               <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;this.handleChange&#125;</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;this.handleSignUp&#125;</span>&gt;</span></span><br><span class="language-xml">          Sign Me Up!</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">Dialog</span>&gt;</span></span><br>    );<br>  &#125;<br><br>  <span class="hljs-title function_">handleChange</span>(<span class="hljs-params">e</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<span class="hljs-attr">login</span>: e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>&#125;);<br>  &#125;<br><br>  <span class="hljs-title function_">handleSignUp</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-title function_">alert</span>(<span class="hljs-string">`Welcome aboard, <span class="hljs-subst">$&#123;<span class="hljs-variable language_">this</span>.state.login&#125;</span>!`</span>);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="27-hook"><a href="#27-hook" class="headerlink" title="27. hook"></a>27. hook</h3><p>Hookæ˜¯ React 16.8 çš„æ–°å¢ç‰¹æ€§ã€‚å®ƒå¯ä»¥è®©ä½ åœ¨ä¸ç¼–å†™ class çš„æƒ…å†µä¸‹ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§ã€‚</p><p>è¿™ä¸ªä¾‹å­ç”¨æ¥æ˜¾ç¤ºä¸€ä¸ªè®¡æ•°å™¨ã€‚å½“ä½ ç‚¹å‡»æŒ‰é’®ï¼Œè®¡æ•°å™¨çš„å€¼å°±ä¼šå¢åŠ ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Example</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-comment">// å£°æ˜ä¸€ä¸ªæ–°çš„å«åš â€œcountâ€ çš„ state å˜é‡</span><br>  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>You clicked &#123;count&#125; times<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> setCount(count + 1)&#125;&gt;</span><br><span class="language-xml">        Click me</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½ å¯ä»¥åœ¨ä¸€ä¸ªç»„ä»¶ä¸­å¤šæ¬¡ä½¿ç”¨ State Hookï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ExampleWithManyStates</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-comment">// å£°æ˜å¤šä¸ª state å˜é‡ï¼</span><br>  <span class="hljs-keyword">const</span> [age, setAge] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">42</span>);<br>  <span class="hljs-keyword">const</span> [fruit, setFruit] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&#x27;banana&#x27;</span>);<br>  <span class="hljs-keyword">const</span> [todos, setTodos] = <span class="hljs-title function_">useState</span>([&#123; <span class="hljs-attr">text</span>: <span class="hljs-string">&#x27;Learn Hooks&#x27;</span> &#125;]);<br>  <span class="hljs-comment">// ...</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ä½¿ç”¨State Hook</strong></p><p>æ·±å…¥äº†è§£<code>useState</code></p><p><strong><code>useState</code> éœ€è¦å“ªäº›å‚æ•°ï¼Ÿ</strong> <code>useState()</code> æ–¹æ³•é‡Œé¢å”¯ä¸€çš„å‚æ•°å°±æ˜¯åˆå§‹ stateã€‚ä¸åŒäº class çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ç…§éœ€è¦ä½¿ç”¨æ•°å­—æˆ–å­—ç¬¦ä¸²å¯¹å…¶è¿›è¡Œèµ‹å€¼ï¼Œè€Œä¸ä¸€å®šæ˜¯å¯¹è±¡ã€‚åœ¨ç¤ºä¾‹ä¸­ï¼Œåªéœ€ä½¿ç”¨æ•°å­—æ¥è®°å½•ç”¨æˆ·ç‚¹å‡»æ¬¡æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼ äº† <code>0</code> ä½œä¸ºå˜é‡çš„åˆå§‹ stateã€‚ï¼ˆå¦‚æœæˆ‘ä»¬æƒ³è¦åœ¨ state ä¸­å­˜å‚¨ä¸¤ä¸ªä¸åŒçš„å˜é‡ï¼Œåªéœ€è°ƒç”¨ <code>useState()</code> ä¸¤æ¬¡å³å¯ã€‚ï¼‰</p><p><strong><code>useState</code> æ–¹æ³•çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Ÿ</strong> è¿”å›å€¼ä¸ºï¼šå½“å‰ state ä»¥åŠæ›´æ–° state çš„å‡½æ•°ã€‚è¿™å°±æ˜¯æˆ‘ä»¬å†™ <code>const [count, setCount] = useState()</code> çš„åŸå› ã€‚è¿™ä¸ class é‡Œé¢ <code>this.state.count</code> å’Œ <code>this.setState</code> ç±»ä¼¼ï¼Œå”¯ä¸€åŒºåˆ«å°±æ˜¯ä½ éœ€è¦æˆå¯¹çš„è·å–å®ƒä»¬ã€‚</p><p>ä»¥æ­¤äº†è§£ä¸‹ä¾‹ï¼šå£°æ˜äº†ä¸€ä¸ªå« <code>count</code> çš„ state å˜é‡ï¼Œç„¶åæŠŠå®ƒè®¾ä¸º <code>0</code>ã€‚React ä¼šåœ¨é‡å¤æ¸²æŸ“æ—¶è®°ä½å®ƒå½“å‰çš„å€¼ï¼Œå¹¶ä¸”æä¾›æœ€æ–°çš„å€¼ç»™å‡½æ•°ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨ <code>setCount</code> æ¥æ›´æ–°å½“å‰çš„ <code>count</code>ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Example</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-comment">// å£°æ˜ä¸€ä¸ªå« &quot;count&quot; çš„ state å˜é‡</span><br>  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);<br></code></pre></td></tr></table></figure><p>è¯»å–Stateï¼šåœ¨å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨ <code>count</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;p&gt;<span class="hljs-title class_">You</span> clicked &#123;count&#125; times&lt;/p&gt;<br></code></pre></td></tr></table></figure><p>æ›´æ–°Stateï¼šåœ¨å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å·²ç»æœ‰äº† <code>setCount</code> å’Œ <code>count</code> å˜é‡ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦ <code>this</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;button onClick=&#123;<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">setCount</span>(count + <span class="hljs-number">1</span>)&#125;&gt;<br>  <span class="hljs-title class_">Click</span> me<br>&lt;/button&gt;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨å¤šä¸ªstateå˜é‡</p><p>å°† state å˜é‡å£°æ˜ä¸ºä¸€å¯¹ <code>[something, setSomething]</code> ä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œå› ä¸ºå¦‚æœæˆ‘ä»¬æƒ³ä½¿ç”¨å¤šä¸ª state å˜é‡ï¼Œå®ƒå…è®¸æˆ‘ä»¬ç»™ä¸åŒçš„ state å˜é‡å–ä¸åŒçš„åç§°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx\">function ExampleWithManyStates() &#123;<br>  // å£°æ˜å¤šä¸ª state å˜é‡<br>  const [age, setAge] = useState(42);<br>  const [fruit, setFruit] = useState(&#x27;banana&#x27;);<br>  const [todos, setTodos] = useState([&#123; text: &#x27;å­¦ä¹  Hook&#x27; &#125;]);<br></code></pre></td></tr></table></figure><p>åœ¨ä»¥ä¸Šç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬æœ‰å±€éƒ¨å˜é‡ <code>age</code>ï¼Œ<code>fruit</code> å’Œ <code>todos</code>ï¼Œå¹¶ä¸”æˆ‘ä»¬å¯ä»¥å•ç‹¬æ›´æ–°å®ƒä»¬ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">handleOrangeClick</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-comment">// å’Œ this.setState(&#123; fruit: &#x27;orange&#x27; &#125;) ç±»ä¼¼</span><br>  <span class="hljs-title function_">setFruit</span>(<span class="hljs-string">&#x27;orange&#x27;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½ <strong>ä¸å¿…</strong>ä½¿ç”¨å¤šä¸ª state å˜é‡ã€‚State å˜é‡å¯ä»¥å¾ˆå¥½åœ°å­˜å‚¨å¯¹è±¡å’Œæ•°ç»„ï¼Œå› æ­¤ï¼Œä½ ä»ç„¶å¯ä»¥å°†ç›¸å…³æ•°æ®åˆ†ä¸ºä¸€ç»„ã€‚ç„¶è€Œï¼Œä¸åƒ class ä¸­çš„ <code>this.setState</code>ï¼Œæ›´æ–° state å˜é‡æ€»æ˜¯<em>æ›¿æ¢</em>å®ƒè€Œä¸æ˜¯åˆå¹¶å®ƒã€‚</p><p><strong>ä½¿ç”¨Effect Hookï¼š</strong></p><p>Hook æ˜¯ä¸€äº›å¯ä»¥è®©ä½ åœ¨å‡½æ•°ç»„ä»¶é‡Œâ€œé’©å…¥â€ React state åŠç”Ÿå‘½å‘¨æœŸç­‰ç‰¹æ€§çš„å‡½æ•°ã€‚React å†…ç½®äº†ä¸€äº›åƒ <code>useState</code> è¿™æ ·çš„ Hookã€‚ä½ ä¹Ÿå¯ä»¥åˆ›å»ºä½ è‡ªå·±çš„ Hook æ¥å¤ç”¨ä¸åŒç»„ä»¶ä¹‹é—´çš„çŠ¶æ€é€»è¾‘ã€‚</p><p><code>useEffect</code> æ˜¯ä¸€ä¸ª Effect Hookï¼Œç»™å‡½æ•°ç»„ä»¶å¢åŠ äº†æ“ä½œå‰¯ä½œç”¨çš„èƒ½åŠ›ã€‚å®ƒè·Ÿ class ç»„ä»¶ä¸­çš„ <code>componentDidMount</code>ã€<code>componentDidUpdate</code> å’Œ <code>componentWillUnmount</code> å…·æœ‰ç›¸åŒçš„ç”¨é€”ï¼Œåªä¸è¿‡è¢«åˆå¹¶æˆäº†ä¸€ä¸ª APIã€‚</p><p>ä¾‹å¦‚ï¼Œä¸‹é¢è¿™ä¸ªç»„ä»¶åœ¨ React æ›´æ–° DOM åä¼šè®¾ç½®ä¸€ä¸ªé¡µé¢æ ‡é¢˜ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState, useEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Example</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);<br><br>  <span class="hljs-comment">// ç›¸å½“äº componentDidMount å’Œ componentDidUpdate:</span><br>  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-comment">// ä½¿ç”¨æµè§ˆå™¨çš„ API æ›´æ–°é¡µé¢æ ‡é¢˜</span><br>    <span class="hljs-variable language_">document</span>.<span class="hljs-property">title</span> = <span class="hljs-string">`You clicked <span class="hljs-subst">$&#123;count&#125;</span> times`</span>;<br>  &#125;);<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>You clicked &#123;count&#125; times<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> setCount(count + 1)&#125;&gt;</span><br><span class="language-xml">        Click me</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><p>å½“ä½ è°ƒç”¨ <code>useEffect</code> æ—¶ï¼Œå°±æ˜¯åœ¨å‘Šè¯‰ React åœ¨å®Œæˆå¯¹ DOM çš„æ›´æ”¹åè¿è¡Œä½ çš„â€œå‰¯ä½œç”¨â€å‡½æ•°ã€‚ç”±äºå‰¯ä½œç”¨å‡½æ•°æ˜¯åœ¨ç»„ä»¶å†…å£°æ˜çš„ï¼Œæ‰€ä»¥å®ƒä»¬å¯ä»¥è®¿é—®åˆ°ç»„ä»¶çš„ props å’Œ stateã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒReact ä¼šåœ¨æ¯æ¬¡æ¸²æŸ“åè°ƒç”¨å‰¯ä½œç”¨å‡½æ•° â€”â€” <strong>åŒ…æ‹¬</strong>ç¬¬ä¸€æ¬¡æ¸²æŸ“çš„æ—¶å€™ã€‚</p><p>å‰¯ä½œç”¨å‡½æ•°è¿˜å¯ä»¥é€šè¿‡è¿”å›ä¸€ä¸ªå‡½æ•°æ¥æŒ‡å®šå¦‚ä½•â€œæ¸…é™¤â€å‰¯ä½œç”¨ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸‹é¢çš„ç»„ä»¶ä¸­ä½¿ç”¨å‰¯ä½œç”¨å‡½æ•°æ¥è®¢é˜…å¥½å‹çš„åœ¨çº¿çŠ¶æ€ï¼Œå¹¶é€šè¿‡å–æ¶ˆè®¢é˜…æ¥è¿›è¡Œæ¸…é™¤æ“ä½œï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState, useEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">FriendStatus</span>(<span class="hljs-params">props</span>) &#123;<br>  <span class="hljs-keyword">const</span> [isOnline, setIsOnline] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleStatusChange</span>(<span class="hljs-params">status</span>) &#123;<br>    <span class="hljs-title function_">setIsOnline</span>(status.<span class="hljs-property">isOnline</span>);<br>  &#125;<br><br>  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-title class_">ChatAPI</span>.<span class="hljs-title function_">subscribeToFriendStatus</span>(props.<span class="hljs-property">friend</span>.<span class="hljs-property">id</span>, handleStatusChange);<br>    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-title class_">ChatAPI</span>.<span class="hljs-title function_">unsubscribeFromFriendStatus</span>(props.<span class="hljs-property">friend</span>.<span class="hljs-property">id</span>, handleStatusChange);<br>    &#125;;<br>  &#125;);<br><br>  <span class="hljs-keyword">if</span> (isOnline === <span class="hljs-literal">null</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Loading...&#x27;</span>;<br>  &#125;<br>  <span class="hljs-keyword">return</span> isOnline ? <span class="hljs-string">&#x27;Online&#x27;</span> : <span class="hljs-string">&#x27;Offline&#x27;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ•°æ®è·å–ï¼Œè®¾ç½®è®¢é˜…ä»¥åŠæ‰‹åŠ¨æ›´æ”¹ React ç»„ä»¶ä¸­çš„ DOM éƒ½å±äºå‰¯ä½œç”¨ã€‚åœ¨ React ç»„ä»¶ä¸­æœ‰ä¸¤ç§å¸¸è§å‰¯ä½œç”¨æ“ä½œï¼šéœ€è¦æ¸…é™¤çš„å’Œä¸éœ€è¦æ¸…é™¤çš„ã€‚</p><p>ä¸éœ€è¦æ¸…é™¤çš„ï¼š</p><p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬åªæƒ³<strong>åœ¨ React æ›´æ–° DOM ä¹‹åè¿è¡Œä¸€äº›é¢å¤–çš„ä»£ç ã€‚</strong>æ¯”å¦‚å‘é€ç½‘ç»œè¯·æ±‚ï¼Œæ‰‹åŠ¨å˜æ›´ DOMï¼Œè®°å½•æ—¥å¿—ï¼Œè¿™äº›éƒ½æ˜¯å¸¸è§çš„æ— éœ€æ¸…é™¤çš„æ“ä½œã€‚å› ä¸ºæˆ‘ä»¬åœ¨æ‰§è¡Œå®Œè¿™äº›æ“ä½œä¹‹åï¼Œå°±å¯ä»¥å¿½ç•¥ä»–ä»¬äº†ã€‚</p><p>åœ¨ React çš„ class ç»„ä»¶ä¸­ï¼Œ<code>render</code> å‡½æ•°æ˜¯ä¸åº”è¯¥æœ‰ä»»ä½•å‰¯ä½œç”¨çš„ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œåœ¨è¿™é‡Œæ‰§è¡Œæ“ä½œå¤ªæ—©äº†ï¼Œæˆ‘ä»¬åŸºæœ¬ä¸Šéƒ½å¸Œæœ›åœ¨ React æ›´æ–° DOM ä¹‹åæ‰æ‰§è¡Œæˆ‘ä»¬çš„æ“ä½œã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨ React class ä¸­ï¼Œæˆ‘ä»¬æŠŠå‰¯ä½œç”¨æ“ä½œæ”¾åˆ° <code>componentDidMount</code> å’Œ <code>componentDidUpdate</code> å‡½æ•°ä¸­ã€‚å¾ˆå¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨ç»„ä»¶åŠ è½½å’Œæ›´æ–°æ—¶æ‰§è¡ŒåŒæ ·çš„æ“ä½œã€‚ä»æ¦‚å¿µä¸Šè¯´ï¼Œæˆ‘ä»¬å¸Œæœ›å®ƒåœ¨æ¯æ¬¡æ¸²æŸ“ä¹‹åæ‰§è¡Œ â€”â€” ä½† React çš„ class ç»„ä»¶æ²¡æœ‰æä¾›è¿™æ ·çš„æ–¹æ³•ã€‚å³ä½¿æˆ‘ä»¬æå–å‡ºä¸€ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦åœ¨ä¸¤ä¸ªåœ°æ–¹è°ƒç”¨å®ƒã€‚ç°åœ¨è®©æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ <code>useEffect</code> æ‰§è¡Œç›¸åŒçš„æ“ä½œã€‚</p><p><strong><code>useEffect</code> åšäº†ä»€ä¹ˆï¼Ÿ</strong> é€šè¿‡ä½¿ç”¨è¿™ä¸ª Hookï¼Œä½ å¯ä»¥å‘Šè¯‰ React ç»„ä»¶éœ€è¦åœ¨æ¸²æŸ“åæ‰§è¡ŒæŸäº›æ“ä½œã€‚React ä¼šä¿å­˜ä½ ä¼ é€’çš„å‡½æ•°ï¼ˆæˆ‘ä»¬å°†å®ƒç§°ä¹‹ä¸º â€œeffectâ€ï¼‰ï¼Œå¹¶ä¸”åœ¨æ‰§è¡Œ DOM æ›´æ–°ä¹‹åè°ƒç”¨å®ƒã€‚</p><p><strong>ä¸ºä»€ä¹ˆåœ¨ç»„ä»¶å†…éƒ¨è°ƒç”¨ <code>useEffect</code>ï¼Ÿ</strong> å°† <code>useEffect</code> æ”¾åœ¨ç»„ä»¶å†…éƒ¨è®©æˆ‘ä»¬å¯ä»¥åœ¨ effect ä¸­ç›´æ¥è®¿é—® <code>count</code> state å˜é‡ï¼ˆæˆ–å…¶ä»– propsï¼‰ã€‚æˆ‘ä»¬ä¸éœ€è¦ç‰¹æ®Šçš„ API æ¥è¯»å–å®ƒ â€”â€” å®ƒå·²ç»ä¿å­˜åœ¨å‡½æ•°ä½œç”¨åŸŸä¸­ã€‚Hook ä½¿ç”¨äº† JavaScript çš„é—­åŒ…æœºåˆ¶ï¼Œè€Œä¸ç”¨åœ¨ JavaScript å·²ç»æä¾›äº†è§£å†³æ–¹æ¡ˆçš„æƒ…å†µä¸‹ï¼Œè¿˜å¼•å…¥ç‰¹å®šçš„ React APIã€‚</p><p><strong><code>useEffect</code> ä¼šåœ¨æ¯æ¬¡æ¸²æŸ“åéƒ½æ‰§è¡Œå—ï¼Ÿ</strong> æ˜¯çš„ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒåœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“ä¹‹åå’Œæ¯æ¬¡æ›´æ–°ä¹‹åéƒ½ä¼šæ‰§è¡Œã€‚ä½ å¯èƒ½ä¼šæ›´å®¹æ˜“æ¥å— effect å‘ç”Ÿåœ¨â€œæ¸²æŸ“ä¹‹åâ€è¿™ç§æ¦‚å¿µï¼Œä¸ç”¨å†å»è€ƒè™‘â€œæŒ‚è½½â€è¿˜æ˜¯â€œæ›´æ–°â€ã€‚React ä¿è¯äº†æ¯æ¬¡è¿è¡Œ effect çš„åŒæ—¶ï¼ŒDOM éƒ½å·²ç»æ›´æ–°å®Œæ¯•ã€‚</p><p>éœ€è¦æ¸…é™¤çš„ï¼š</p><p>ä¹‹å‰ï¼Œæˆ‘ä»¬ç ”ç©¶äº†å¦‚ä½•ä½¿ç”¨ä¸éœ€è¦æ¸…é™¤çš„å‰¯ä½œç”¨ï¼Œè¿˜æœ‰ä¸€äº›å‰¯ä½œç”¨æ˜¯éœ€è¦æ¸…é™¤çš„ã€‚ä¾‹å¦‚<strong>è®¢é˜…å¤–éƒ¨æ•°æ®æº</strong>ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæ¸…é™¤å·¥ä½œæ˜¯éå¸¸é‡è¦çš„ï¼Œå¯ä»¥é˜²æ­¢å¼•èµ·å†…å­˜æ³„éœ²ï¼</p><p>ä½ å¯èƒ½è®¤ä¸ºéœ€è¦å•ç‹¬çš„ effect æ¥æ‰§è¡Œæ¸…é™¤æ“ä½œã€‚ä½†ç”±äºæ·»åŠ å’Œåˆ é™¤è®¢é˜…çš„ä»£ç çš„ç´§å¯†æ€§ï¼Œæ‰€ä»¥ <code>useEffect</code> çš„è®¾è®¡æ˜¯åœ¨åŒä¸€ä¸ªåœ°æ–¹æ‰§è¡Œã€‚å¦‚æœä½ çš„ effect è¿”å›ä¸€ä¸ªå‡½æ•°ï¼ŒReact å°†ä¼šåœ¨æ‰§è¡Œæ¸…é™¤æ“ä½œæ—¶è°ƒç”¨å®ƒï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState, useEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">FriendStatus</span>(<span class="hljs-params">props</span>) &#123;<br>  <span class="hljs-keyword">const</span> [isOnline, setIsOnline] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);<br><br>  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleStatusChange</span>(<span class="hljs-params">status</span>) &#123;<br>      <span class="hljs-title function_">setIsOnline</span>(status.<span class="hljs-property">isOnline</span>);<br>    &#125;<br>    <span class="hljs-title class_">ChatAPI</span>.<span class="hljs-title function_">subscribeToFriendStatus</span>(props.<span class="hljs-property">friend</span>.<span class="hljs-property">id</span>, handleStatusChange);<br>    <span class="hljs-comment">// Specify how to clean up after this effect:</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">cleanup</span>(<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-title class_">ChatAPI</span>.<span class="hljs-title function_">unsubscribeFromFriendStatus</span>(props.<span class="hljs-property">friend</span>.<span class="hljs-property">id</span>, handleStatusChange);<br>    &#125;;<br>  &#125;);<br><br>  <span class="hljs-keyword">if</span> (isOnline === <span class="hljs-literal">null</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Loading...&#x27;</span>;<br>  &#125;<br>  <span class="hljs-keyword">return</span> isOnline ? <span class="hljs-string">&#x27;Online&#x27;</span> : <span class="hljs-string">&#x27;Offline&#x27;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ä¸ºä»€ä¹ˆè¦åœ¨ effect ä¸­è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Ÿ</strong> è¿™æ˜¯ effect å¯é€‰çš„æ¸…é™¤æœºåˆ¶ã€‚æ¯ä¸ª effect éƒ½å¯ä»¥è¿”å›ä¸€ä¸ªæ¸…é™¤å‡½æ•°ã€‚å¦‚æ­¤å¯ä»¥å°†æ·»åŠ å’Œç§»é™¤è®¢é˜…çš„é€»è¾‘æ”¾åœ¨ä¸€èµ·ã€‚å®ƒä»¬éƒ½å±äº effect çš„ä¸€éƒ¨åˆ†ã€‚</p><p><strong>React ä½•æ—¶æ¸…é™¤ effectï¼Ÿ</strong> React ä¼šåœ¨ç»„ä»¶å¸è½½çš„æ—¶å€™æ‰§è¡Œæ¸…é™¤æ“ä½œã€‚æ­£å¦‚ä¹‹å‰å­¦åˆ°çš„ï¼Œeffect åœ¨æ¯æ¬¡æ¸²æŸ“çš„æ—¶å€™éƒ½ä¼šæ‰§è¡Œã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ React <em>ä¼š</em>åœ¨æ‰§è¡Œå½“å‰ effect ä¹‹å‰å¯¹ä¸Šä¸€ä¸ª effect è¿›è¡Œæ¸…é™¤ã€‚</p><p>é€šè¿‡è·³è¿‡ Effect è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ¯æ¬¡æ¸²æŸ“åéƒ½æ‰§è¡Œæ¸…ç†æˆ–è€…æ‰§è¡Œ effect å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚å¦‚æœæŸäº›ç‰¹å®šå€¼åœ¨ä¸¤æ¬¡é‡æ¸²æŸ“ä¹‹é—´æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œä½ å¯ä»¥é€šçŸ¥ React <strong>è·³è¿‡</strong>å¯¹ effect çš„è°ƒç”¨ï¼Œåªè¦ä¼ é€’æ•°ç»„ä½œä¸º <code>useEffect</code> çš„ç¬¬äºŒä¸ªå¯é€‰å‚æ•°å³å¯ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-property">title</span> = <span class="hljs-string">`You clicked <span class="hljs-subst">$&#123;count&#125;</span> times`</span>;<br>&#125;, [count]); <span class="hljs-comment">// ä»…åœ¨ count æ›´æ”¹æ—¶æ›´æ–°</span><br></code></pre></td></tr></table></figure><p>å¯¹äºæœ‰æ¸…é™¤æ“ä½œçš„ effect åŒæ ·é€‚ç”¨ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleStatusChange</span>(<span class="hljs-params">status</span>) &#123;<br>    <span class="hljs-title function_">setIsOnline</span>(status.<span class="hljs-property">isOnline</span>);<br>  &#125;<br><br>  <span class="hljs-title class_">ChatAPI</span>.<span class="hljs-title function_">subscribeToFriendStatus</span>(props.<span class="hljs-property">friend</span>.<span class="hljs-property">id</span>, handleStatusChange);<br>  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-title class_">ChatAPI</span>.<span class="hljs-title function_">unsubscribeFromFriendStatus</span>(props.<span class="hljs-property">friend</span>.<span class="hljs-property">id</span>, handleStatusChange);<br>  &#125;;<br>&#125;, [props.<span class="hljs-property">friend</span>.<span class="hljs-property">id</span>]); <span class="hljs-comment">// ä»…åœ¨ props.friend.id å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé‡æ–°è®¢é˜…</span><br></code></pre></td></tr></table></figure><p><strong>hookè§„åˆ™</strong></p><ol><li><p>ä¸è¦åœ¨å¾ªç¯ï¼Œæ¡ä»¶æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨ Hookï¼Œ ç¡®ä¿æ€»æ˜¯åœ¨ä½ çš„ React å‡½æ•°çš„æœ€é¡¶å±‚è°ƒç”¨ä»–ä»¬ã€‚</p></li><li><p>åªåœ¨ React å‡½æ•°ä¸­è°ƒç”¨ Hook</p></li></ol><h3 id="28-hook-apiç´¢å¼•"><a href="#28-hook-apiç´¢å¼•" class="headerlink" title="28. hook apiç´¢å¼•"></a>28. hook apiç´¢å¼•</h3><p><strong>åŸºç¡€hookï¼š</strong></p><p>&#x3D;&#x3D;useState&#x3D;&#x3D;ï¼šè¿”å›ä¸€ä¸ª stateï¼Œä»¥åŠæ›´æ–° state çš„å‡½æ•°ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> [state, setState] = <span class="hljs-title function_">useState</span>(initialState);<br><span class="hljs-title function_">setState</span>(newState);<br></code></pre></td></tr></table></figure><p>å‡½æ•°å¼æ›´æ–°ï¼šå¦‚æœæ–°çš„ state éœ€è¦é€šè¿‡ä½¿ç”¨å…ˆå‰çš„ state è®¡ç®—å¾—å‡ºï¼Œé‚£ä¹ˆå¯ä»¥å°†å‡½æ•°ä¼ é€’ç»™ <code>setState</code>ã€‚è¯¥å‡½æ•°å°†æ¥æ”¶å…ˆå‰çš„ stateï¼Œå¹¶è¿”å›ä¸€ä¸ªæ›´æ–°åçš„å€¼ã€‚ä¸‹é¢çš„è®¡æ•°å™¨ç»„ä»¶ç¤ºä¾‹å±•ç¤ºäº† <code>setState</code> çš„ä¸¤ç§ç”¨æ³•ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Counter</span>(<span class="hljs-params">&#123;initialCount&#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(initialCount);<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">      Count: &#123;count&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> setCount(initialCount)&#125;&gt;Reset<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> setCount(prevCount =&gt; prevCount - 1)&#125;&gt;-<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> setCount(prevCount =&gt; prevCount + 1)&#125;&gt;+<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸ class ç»„ä»¶ä¸­çš„ <code>setState</code> æ–¹æ³•ä¸åŒï¼Œ<code>useState</code> ä¸ä¼šè‡ªåŠ¨åˆå¹¶æ›´æ–°å¯¹è±¡ã€‚ä½ å¯ä»¥ç”¨å‡½æ•°å¼çš„ <code>setState</code> ç»“åˆå±•å¼€è¿ç®—ç¬¦æ¥è¾¾åˆ°åˆå¹¶æ›´æ–°å¯¹è±¡çš„æ•ˆæœã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-title function_">setState</span>(<span class="hljs-function"><span class="hljs-params">prevState</span> =&gt;</span> &#123;<br>  <span class="hljs-comment">// ä¹Ÿå¯ä»¥ä½¿ç”¨ Object.assign</span><br>  <span class="hljs-keyword">return</span> &#123;...prevState, ...updatedValues&#125;;<br>&#125;);<br></code></pre></td></tr></table></figure><p>æƒ°æ€§åˆå§‹ stateï¼š<code>initialState</code> å‚æ•°åªä¼šåœ¨ç»„ä»¶çš„åˆå§‹æ¸²æŸ“ä¸­èµ·ä½œç”¨ï¼Œåç»­æ¸²æŸ“æ—¶ä¼šè¢«å¿½ç•¥ã€‚å¦‚æœåˆå§‹ state éœ€è¦é€šè¿‡å¤æ‚è®¡ç®—è·å¾—ï¼Œåˆ™å¯ä»¥ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨å‡½æ•°ä¸­è®¡ç®—å¹¶è¿”å›åˆå§‹çš„ stateï¼Œæ­¤å‡½æ•°åªåœ¨åˆå§‹æ¸²æŸ“æ—¶è¢«è°ƒç”¨ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> [state, setState] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> initialState = <span class="hljs-title function_">someExpensiveComputation</span>(props);<br>  <span class="hljs-keyword">return</span> initialState;<br>&#125;);<br></code></pre></td></tr></table></figure><p>è·³è¿‡ state æ›´æ–°ï¼šè°ƒç”¨ State Hook çš„æ›´æ–°å‡½æ•°å¹¶ä¼ å…¥å½“å‰çš„ state æ—¶ï¼ŒReact å°†è·³è¿‡å­ç»„ä»¶çš„æ¸²æŸ“åŠ effect çš„æ‰§è¡Œã€‚ï¼ˆReact ä½¿ç”¨ <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is#Description"><code>Object.is</code> æ¯”è¾ƒç®—æ³•</a> æ¥æ¯”è¾ƒ stateã€‚ï¼‰</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒReact å¯èƒ½ä»éœ€è¦åœ¨è·³è¿‡æ¸²æŸ“å‰æ¸²æŸ“è¯¥ç»„ä»¶ã€‚ä¸è¿‡ç”±äº React ä¸ä¼šå¯¹ç»„ä»¶æ ‘çš„â€œæ·±å±‚â€èŠ‚ç‚¹è¿›è¡Œä¸å¿…è¦çš„æ¸²æŸ“ï¼Œæ‰€ä»¥å¤§å¯ä¸å¿…æ‹…å¿ƒã€‚å¦‚æœä½ åœ¨æ¸²æŸ“æœŸé—´æ‰§è¡Œäº†é«˜å¼€é”€çš„è®¡ç®—ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ <code>useMemo</code> æ¥è¿›è¡Œä¼˜åŒ–ã€‚</p><p>&#x3D;&#x3D;useEffect&#x3D;&#x3D;ï¼šæ¥æ”¶ä¸€ä¸ªåŒ…å«å‘½ä»¤å¼ã€ä¸”å¯èƒ½æœ‰å‰¯ä½œç”¨ä»£ç çš„å‡½æ•°</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-title function_">useEffect</span>(didUpdate);<br></code></pre></td></tr></table></figure><p>åœ¨å‡½æ•°ç»„ä»¶ä¸»ä½“å†…ï¼ˆè¿™é‡ŒæŒ‡åœ¨ React æ¸²æŸ“é˜¶æ®µï¼‰æ”¹å˜ DOMã€æ·»åŠ è®¢é˜…ã€è®¾ç½®å®šæ—¶å™¨ã€è®°å½•æ—¥å¿—ä»¥åŠæ‰§è¡Œå…¶ä»–åŒ…å«å‰¯ä½œç”¨çš„æ“ä½œéƒ½æ˜¯ä¸è¢«å…è®¸çš„ï¼Œå› ä¸ºè¿™å¯èƒ½ä¼šäº§ç”Ÿè«åå…¶å¦™çš„ bug å¹¶ç ´å UI çš„ä¸€è‡´æ€§ã€‚</p><p>ä½¿ç”¨ <code>useEffect</code> å®Œæˆå‰¯ä½œç”¨æ“ä½œã€‚èµ‹å€¼ç»™ <code>useEffect</code> çš„å‡½æ•°ä¼šåœ¨ç»„ä»¶æ¸²æŸ“åˆ°å±å¹•ä¹‹åæ‰§è¡Œã€‚ä½ å¯ä»¥æŠŠ effect çœ‹ä½œä» React çš„çº¯å‡½æ•°å¼ä¸–ç•Œé€šå¾€å‘½ä»¤å¼ä¸–ç•Œçš„é€ƒç”Ÿé€šé“ã€‚</p><p>æ¸…é™¤ effectï¼šé€šå¸¸ï¼Œç»„ä»¶å¸è½½æ—¶éœ€è¦æ¸…é™¤ effect åˆ›å»ºçš„è¯¸å¦‚è®¢é˜…æˆ–è®¡æ—¶å™¨ ID ç­‰èµ„æºã€‚è¦å®ç°è¿™ä¸€ç‚¹ï¼Œ<code>useEffect</code> å‡½æ•°éœ€è¿”å›ä¸€ä¸ªæ¸…é™¤å‡½æ•°ã€‚ä»¥ä¸‹å°±æ˜¯ä¸€ä¸ªåˆ›å»ºè®¢é˜…çš„ä¾‹å­ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> subscription = props.<span class="hljs-property">source</span>.<span class="hljs-title function_">subscribe</span>();<br>  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-comment">// æ¸…é™¤è®¢é˜…</span><br>    subscription.<span class="hljs-title function_">unsubscribe</span>();<br>  &#125;;<br>&#125;);<br></code></pre></td></tr></table></figure><p>ä¸ºé˜²æ­¢å†…å­˜æ³„æ¼ï¼Œæ¸…é™¤å‡½æ•°ä¼šåœ¨ç»„ä»¶å¸è½½å‰æ‰§è¡Œã€‚å¦å¤–ï¼Œå¦‚æœç»„ä»¶å¤šæ¬¡æ¸²æŸ“ï¼ˆé€šå¸¸å¦‚æ­¤ï¼‰ï¼Œåˆ™<strong>åœ¨æ‰§è¡Œä¸‹ä¸€ä¸ª effect ä¹‹å‰ï¼Œä¸Šä¸€ä¸ª effect å°±å·²è¢«æ¸…é™¤</strong>ã€‚åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œæ„å‘³ç€ç»„ä»¶çš„æ¯ä¸€æ¬¡æ›´æ–°éƒ½ä¼šåˆ›å»ºæ–°çš„è®¢é˜…ã€‚</p><p>effectçš„æ‰§è¡Œæ—¶æœºï¼šä¸ <code>componentDidMount</code>ã€<code>componentDidUpdate</code> ä¸åŒçš„æ˜¯ï¼Œåœ¨æµè§ˆå™¨å®Œæˆå¸ƒå±€ä¸ç»˜åˆ¶<strong>ä¹‹å</strong>ï¼Œä¼ ç»™ <code>useEffect</code> çš„å‡½æ•°ä¼šå»¶è¿Ÿè°ƒç”¨ã€‚è™½ç„¶ <code>useEffect</code> ä¼šåœ¨æµè§ˆå™¨ç»˜åˆ¶åå»¶è¿Ÿæ‰§è¡Œï¼Œä½†ä¼šä¿è¯åœ¨ä»»ä½•æ–°çš„æ¸²æŸ“å‰æ‰§è¡Œã€‚React å°†åœ¨ç»„ä»¶æ›´æ–°å‰åˆ·æ–°ä¸Šä¸€è½®æ¸²æŸ“çš„ effectã€‚</p><p>effectçš„æ¡ä»¶æ‰§è¡Œï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œeffect ä¼šåœ¨æ¯è½®ç»„ä»¶æ¸²æŸ“å®Œæˆåæ‰§è¡Œã€‚è¿™æ ·çš„è¯ï¼Œä¸€æ—¦ effect çš„ä¾èµ–å‘ç”Ÿå˜åŒ–ï¼Œå®ƒå°±ä¼šè¢«é‡æ–°åˆ›å»ºã€‚ç„¶è€Œï¼Œåœ¨æŸäº›åœºæ™¯ä¸‹è¿™ä¹ˆåšå¯èƒ½ä¼šçŸ«æ‰è¿‡æ­£ã€‚æ¯”å¦‚ï¼Œåœ¨ä¸Šä¸€ç« èŠ‚çš„è®¢é˜…ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä¸éœ€è¦åœ¨æ¯æ¬¡ç»„ä»¶æ›´æ–°æ—¶éƒ½åˆ›å»ºæ–°çš„è®¢é˜…ï¼Œè€Œæ˜¯ä»…éœ€è¦åœ¨ <code>source</code> prop æ”¹å˜æ—¶é‡æ–°åˆ›å»ºã€‚è¦å®ç°è¿™ä¸€ç‚¹ï¼Œå¯ä»¥ç»™ <code>useEffect</code> ä¼ é€’ç¬¬äºŒä¸ªå‚æ•°ï¼Œå®ƒæ˜¯ effect æ‰€ä¾èµ–çš„å€¼æ•°ç»„ã€‚æ›´æ–°åçš„ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-title function_">useEffect</span>(<br>  <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> subscription = props.<span class="hljs-property">source</span>.<span class="hljs-title function_">subscribe</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> &#123;<br>      subscription.<span class="hljs-title function_">unsubscribe</span>();<br>    &#125;;<br>  &#125;,<br>  [props.<span class="hljs-property">source</span>],<br>);<br></code></pre></td></tr></table></figure><p>&#x3D;&#x3D;useContext&#x3D;&#x3D;ï¼šæ¥æ”¶ä¸€ä¸ª context å¯¹è±¡ï¼ˆ<code>React.createContext</code> çš„è¿”å›å€¼ï¼‰å¹¶è¿”å›è¯¥ context çš„å½“å‰å€¼ã€‚å½“å‰çš„ context å€¼ç”±ä¸Šå±‚ç»„ä»¶ä¸­è·ç¦»å½“å‰ç»„ä»¶æœ€è¿‘çš„ <code>&lt;MyContext.Provider&gt;</code> çš„ <code>value</code> prop å†³å®šã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> value = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">MyContext</span>);<br></code></pre></td></tr></table></figure><p>å½“ç»„ä»¶ä¸Šå±‚æœ€è¿‘çš„ <code>&lt;MyContext.Provider&gt;</code> æ›´æ–°æ—¶ï¼Œè¯¥ Hook ä¼šè§¦å‘é‡æ¸²æŸ“ï¼Œå¹¶ä½¿ç”¨æœ€æ–°ä¼ é€’ç»™ <code>MyContext</code> provider çš„ context <code>value</code> å€¼ã€‚å³ä½¿ç¥–å…ˆä½¿ç”¨ <a href="https://react.docschina.org/docs/react-api.html#reactmemo"><code>React.memo</code></a> æˆ– <a href="https://react.docschina.org/docs/react-component.html#shouldcomponentupdate"><code>shouldComponentUpdate</code></a>ï¼Œä¹Ÿä¼šåœ¨ç»„ä»¶æœ¬èº«ä½¿ç”¨ <code>useContext</code> æ—¶é‡æ–°æ¸²æŸ“ã€‚åˆ«å¿˜è®° <code>useContext</code> çš„å‚æ•°å¿…é¡»æ˜¯ context å¯¹è±¡æœ¬èº«ï¼š<code>useContext(MyContext)</code></p><p>è°ƒç”¨äº† <code>useContext</code> çš„ç»„ä»¶æ€»ä¼šåœ¨ context å€¼å˜åŒ–æ—¶é‡æ–°æ¸²æŸ“ã€‚å¦‚æœé‡æ¸²æŸ“ç»„ä»¶çš„å¼€é”€è¾ƒå¤§ï¼Œä½ å¯ä»¥é€šè¿‡ä½¿ç”¨ memoization æ¥ä¼˜åŒ–ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> themes = &#123;<br>  <span class="hljs-attr">light</span>: &#123;<br>    <span class="hljs-attr">foreground</span>: <span class="hljs-string">&quot;#000000&quot;</span>,<br>    <span class="hljs-attr">background</span>: <span class="hljs-string">&quot;#eeeeee&quot;</span><br>  &#125;,<br>  <span class="hljs-attr">dark</span>: &#123;<br>    <span class="hljs-attr">foreground</span>: <span class="hljs-string">&quot;#ffffff&quot;</span>,<br>    <span class="hljs-attr">background</span>: <span class="hljs-string">&quot;#222222&quot;</span><br>  &#125;<br>&#125;;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">ThemeContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>(themes.<span class="hljs-property">light</span>);<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ThemeContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;themes.dark&#125;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Toolbar</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">ThemeContext.Provider</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Toolbar</span>(<span class="hljs-params">props</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">ThemedButton</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">ThemedButton</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> theme = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">ThemeContext</span>);<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span> <span class="hljs-attr">background:</span> <span class="hljs-attr">theme.background</span>, <span class="hljs-attr">color:</span> <span class="hljs-attr">theme.foreground</span> &#125;&#125;&gt;</span></span><br><span class="language-xml">      I am styled by theme context!</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><p>ä»¥ä¸‹ä»‹ç»çš„ Hookï¼Œæœ‰äº›æ˜¯ä¸Šä¸€èŠ‚ä¸­åŸºç¡€ Hook çš„å˜ä½“ï¼Œæœ‰äº›åˆ™ä»…åœ¨ç‰¹æ®Šæƒ…å†µä¸‹ä¼šç”¨åˆ°ã€‚ä¸ç”¨ç‰¹æ„é¢„å…ˆå­¦ä¹ å®ƒä»¬ã€‚</p><p>&#x3D;&#x3D;useReducer&#x3D;&#x3D;ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> [state, dispatch] = <span class="hljs-title function_">useReducer</span>(reducer, initialArg, init);<br></code></pre></td></tr></table></figure><p><a href="https://react.docschina.org/docs/hooks-reference.html#usestate"><code>useState</code></a> çš„æ›¿ä»£æ–¹æ¡ˆã€‚å®ƒæ¥æ”¶ä¸€ä¸ªå½¢å¦‚ <code>(state, action) =&gt; newState</code> çš„ reducerï¼Œå¹¶è¿”å›å½“å‰çš„ state ä»¥åŠä¸å…¶é…å¥—çš„ <code>dispatch</code> æ–¹æ³•ã€‚ï¼ˆå¦‚æœä½ ç†Ÿæ‚‰ Redux çš„è¯ï¼Œå°±å·²ç»çŸ¥é“å®ƒå¦‚ä½•å·¥ä½œäº†ã€‚ï¼‰</p><p>åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œ<code>useReducer</code> ä¼šæ¯” <code>useState</code> æ›´é€‚ç”¨ï¼Œä¾‹å¦‚ state é€»è¾‘è¾ƒå¤æ‚ä¸”åŒ…å«å¤šä¸ªå­å€¼ï¼Œæˆ–è€…ä¸‹ä¸€ä¸ª state ä¾èµ–äºä¹‹å‰çš„ state ç­‰ã€‚å¹¶ä¸”ï¼Œä½¿ç”¨ <code>useReducer</code> è¿˜èƒ½ç»™é‚£äº›ä¼šè§¦å‘æ·±æ›´æ–°çš„ç»„ä»¶åšæ€§èƒ½ä¼˜åŒ–ï¼Œå› ä¸ºä½ å¯ä»¥å‘å­ç»„ä»¶ä¼ é€’ <code>dispatch</code> è€Œä¸æ˜¯å›è°ƒå‡½æ•°ã€‚</p><p>ä»¥ä¸‹æ˜¯ç”¨ reducer é‡å†™<code>useState</code> ä¸€èŠ‚çš„è®¡æ•°å™¨ç¤ºä¾‹ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> initialState = &#123;<span class="hljs-attr">count</span>: <span class="hljs-number">0</span>&#125;;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">reducer</span>(<span class="hljs-params">state, action</span>) &#123;<br>  <span class="hljs-keyword">switch</span> (action.<span class="hljs-property">type</span>) &#123;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;increment&#x27;</span>:<br>      <span class="hljs-keyword">return</span> &#123;<span class="hljs-attr">count</span>: state.<span class="hljs-property">count</span> + <span class="hljs-number">1</span>&#125;;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;decrement&#x27;</span>:<br>      <span class="hljs-keyword">return</span> &#123;<span class="hljs-attr">count</span>: state.<span class="hljs-property">count</span> - <span class="hljs-number">1</span>&#125;;<br>    <span class="hljs-attr">default</span>:<br>      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>();<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Counter</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [state, dispatch] = <span class="hljs-title function_">useReducer</span>(reducer, initialState);<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">      Count: &#123;state.count&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> dispatch(&#123;type: &#x27;decrement&#x27;&#125;)&#125;&gt;-<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> dispatch(&#123;type: &#x27;increment&#x27;&#125;)&#125;&gt;+<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><p>React ä¼šç¡®ä¿ <code>dispatch</code> å‡½æ•°çš„æ ‡è¯†æ˜¯ç¨³å®šçš„ï¼Œå¹¶ä¸”ä¸ä¼šåœ¨ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶æ”¹å˜ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¯ä»¥å®‰å…¨åœ°ä» <code>useEffect</code> æˆ– <code>useCallback</code> çš„ä¾èµ–åˆ—è¡¨ä¸­çœç•¥ <code>dispatch</code>ã€‚</p><p>æŒ‡å®šåˆå§‹ stateï¼šæœ‰ä¸¤ç§ä¸åŒåˆå§‹åŒ– <code>useReducer</code> state çš„æ–¹å¼ï¼Œä½ å¯ä»¥æ ¹æ®ä½¿ç”¨åœºæ™¯é€‰æ‹©å…¶ä¸­çš„ä¸€ç§ã€‚å°†åˆå§‹ state ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ <code>useReducer</code> æ˜¯æœ€ç®€å•çš„æ–¹æ³•ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> [state, dispatch] = <span class="hljs-title function_">useReducer</span>(<br>  reducer,<br>  &#123;<span class="hljs-attr">count</span>: initialCount&#125;  );<br></code></pre></td></tr></table></figure><p>æƒ°æ€§åˆå§‹åŒ–ï¼šä½ å¯ä»¥é€‰æ‹©æƒ°æ€§åœ°åˆ›å»ºåˆå§‹ stateã€‚ä¸ºæ­¤ï¼Œéœ€è¦å°† <code>init</code> å‡½æ•°ä½œä¸º <code>useReducer</code> çš„ç¬¬ä¸‰ä¸ªå‚æ•°ä¼ å…¥ï¼Œè¿™æ ·åˆå§‹ state å°†è¢«è®¾ç½®ä¸º <code>init(initialArg)</code>ã€‚è¿™ä¹ˆåšå¯ä»¥å°†ç”¨äºè®¡ç®— state çš„é€»è¾‘æå–åˆ° reducer å¤–éƒ¨ï¼Œè¿™ä¹Ÿä¸ºå°†æ¥å¯¹é‡ç½® state çš„ action åšå¤„ç†æä¾›äº†ä¾¿åˆ©ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params">initialCount</span>) &#123;  <span class="hljs-keyword">return</span> &#123;<span class="hljs-attr">count</span>: initialCount&#125;;&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">reducer</span>(<span class="hljs-params">state, action</span>) &#123;<br>  <span class="hljs-keyword">switch</span> (action.<span class="hljs-property">type</span>) &#123;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;increment&#x27;</span>:<br>      <span class="hljs-keyword">return</span> &#123;<span class="hljs-attr">count</span>: state.<span class="hljs-property">count</span> + <span class="hljs-number">1</span>&#125;;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;decrement&#x27;</span>:<br>      <span class="hljs-keyword">return</span> &#123;<span class="hljs-attr">count</span>: state.<span class="hljs-property">count</span> - <span class="hljs-number">1</span>&#125;;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;reset&#x27;</span>:      <span class="hljs-keyword">return</span> <span class="hljs-title function_">init</span>(action.<span class="hljs-property">payload</span>);    <span class="hljs-attr">default</span>:<br>      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>();<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Counter</span>(<span class="hljs-params">&#123;initialCount&#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> [state, dispatch] = <span class="hljs-title function_">useReducer</span>(reducer, initialCount, init);  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">      Count: &#123;state.count&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> dispatch(&#123;type: &#x27;reset&#x27;, payload: initialCount&#125;)&#125;&gt;        Reset</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> dispatch(&#123;type: &#x27;decrement&#x27;&#125;)&#125;&gt;-<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> dispatch(&#123;type: &#x27;increment&#x27;&#125;)&#125;&gt;+<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><p>è·³è¿‡ dispatchï¼šå¦‚æœ Reducer Hook çš„è¿”å›å€¼ä¸å½“å‰ state ç›¸åŒï¼ŒReact å°†è·³è¿‡å­ç»„ä»¶çš„æ¸²æŸ“åŠå‰¯ä½œç”¨çš„æ‰§è¡Œã€‚ï¼ˆReact ä½¿ç”¨ <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is#Description"><code>Object.is</code> æ¯”è¾ƒç®—æ³•</a> æ¥æ¯”è¾ƒ stateã€‚ï¼‰éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒReact å¯èƒ½ä»éœ€è¦åœ¨è·³è¿‡æ¸²æŸ“å‰å†æ¬¡æ¸²æŸ“è¯¥ç»„ä»¶ã€‚ä¸è¿‡ç”±äº React ä¸ä¼šå¯¹ç»„ä»¶æ ‘çš„â€œæ·±å±‚â€èŠ‚ç‚¹è¿›è¡Œä¸å¿…è¦çš„æ¸²æŸ“ï¼Œæ‰€ä»¥å¤§å¯ä¸å¿…æ‹…å¿ƒã€‚å¦‚æœä½ åœ¨æ¸²æŸ“æœŸé—´æ‰§è¡Œäº†é«˜å¼€é”€çš„è®¡ç®—ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ <code>useMemo</code> æ¥è¿›è¡Œä¼˜åŒ–ã€‚</p><p>&#x3D;&#x3D;useCallback&#x3D;&#x3D;ï¼šè¿”å›ä¸€ä¸ªmemoizedå›è°ƒå‡½æ•°ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> memoizedCallback = <span class="hljs-title function_">useCallback</span>(<br>  <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-title function_">doSomething</span>(a, b);<br>  &#125;,<br>  [a, b],<br>);<br></code></pre></td></tr></table></figure><p>æŠŠå†…è”å›è°ƒå‡½æ•°åŠä¾èµ–é¡¹æ•°ç»„ä½œä¸ºå‚æ•°ä¼ å…¥ <code>useCallback</code>ï¼Œå®ƒå°†è¿”å›è¯¥å›è°ƒå‡½æ•°çš„ memoized ç‰ˆæœ¬ï¼Œè¯¥å›è°ƒå‡½æ•°ä»…åœ¨æŸä¸ªä¾èµ–é¡¹æ”¹å˜æ—¶æ‰ä¼šæ›´æ–°ã€‚å½“ä½ æŠŠå›è°ƒå‡½æ•°ä¼ é€’ç»™ç»è¿‡ä¼˜åŒ–çš„å¹¶ä½¿ç”¨å¼•ç”¨ç›¸ç­‰æ€§å»é¿å…éå¿…è¦æ¸²æŸ“ï¼ˆä¾‹å¦‚ <code>shouldComponentUpdate</code>ï¼‰çš„å­ç»„ä»¶æ—¶ï¼Œå®ƒå°†éå¸¸æœ‰ç”¨ã€‚</p><p><code>useCallback(fn, deps)</code> ç›¸å½“äº <code>useMemo(() =&gt; fn, deps)</code>ã€‚</p><p>&#x3D;&#x3D;useMemo&#x3D;&#x3D;ï¼šè¿”å›ä¸€ä¸ª <a href="https://en.wikipedia.org/wiki/Memoization">memoized</a> å€¼ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> memoizedValue = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">computeExpensiveValue</span>(a, b), [a, b]);<br></code></pre></td></tr></table></figure><p>æŠŠâ€œåˆ›å»ºâ€å‡½æ•°å’Œä¾èµ–é¡¹æ•°ç»„ä½œä¸ºå‚æ•°ä¼ å…¥ <code>useMemo</code>ï¼Œå®ƒä»…ä¼šåœ¨æŸä¸ªä¾èµ–é¡¹æ”¹å˜æ—¶æ‰é‡æ–°è®¡ç®— memoized å€¼ã€‚è¿™ç§ä¼˜åŒ–æœ‰åŠ©äºé¿å…åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½è¿›è¡Œé«˜å¼€é”€çš„è®¡ç®—ã€‚è®°ä½ï¼Œä¼ å…¥ <code>useMemo</code> çš„å‡½æ•°ä¼šåœ¨æ¸²æŸ“æœŸé—´æ‰§è¡Œã€‚è¯·ä¸è¦åœ¨è¿™ä¸ªå‡½æ•°å†…éƒ¨æ‰§è¡Œä¸æ¸²æŸ“æ— å…³çš„æ“ä½œï¼Œè¯¸å¦‚å‰¯ä½œç”¨è¿™ç±»çš„æ“ä½œå±äº <code>useEffect</code> çš„é€‚ç”¨èŒƒç•´ï¼Œè€Œä¸æ˜¯ <code>useMemo</code>ã€‚å¦‚æœæ²¡æœ‰æä¾›ä¾èµ–é¡¹æ•°ç»„ï¼Œ<code>useMemo</code> åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½ä¼šè®¡ç®—æ–°çš„å€¼ã€‚</p><p><strong>ä½ å¯ä»¥æŠŠ <code>useMemo</code> ä½œä¸ºæ€§èƒ½ä¼˜åŒ–çš„æ‰‹æ®µï¼Œä½†ä¸è¦æŠŠå®ƒå½“æˆè¯­ä¹‰ä¸Šçš„ä¿è¯ã€‚</strong>å°†æ¥ï¼ŒReact å¯èƒ½ä¼šé€‰æ‹©â€œé—å¿˜â€ä»¥å‰çš„ä¸€äº› memoized å€¼ï¼Œå¹¶åœ¨ä¸‹æ¬¡æ¸²æŸ“æ—¶é‡æ–°è®¡ç®—å®ƒä»¬ï¼Œæ¯”å¦‚ä¸ºç¦»å±ç»„ä»¶é‡Šæ”¾å†…å­˜ã€‚å…ˆç¼–å†™åœ¨æ²¡æœ‰ <code>useMemo</code> çš„æƒ…å†µä¸‹ä¹Ÿå¯ä»¥æ‰§è¡Œçš„ä»£ç  â€”â€” ä¹‹åå†åœ¨ä½ çš„ä»£ç ä¸­æ·»åŠ  <code>useMemo</code>ï¼Œä»¥è¾¾åˆ°ä¼˜åŒ–æ€§èƒ½çš„ç›®çš„ã€‚</p><p>&#x3D;&#x3D;useRef&#x3D;&#x3D;ï¼šè¿”å›ä¸€ä¸ªå¯å˜çš„ ref å¯¹è±¡ï¼Œå…¶ <code>.current</code> å±æ€§è¢«åˆå§‹åŒ–ä¸ºä¼ å…¥çš„å‚æ•°ï¼ˆ<code>initialValue</code>ï¼‰ã€‚è¿”å›çš„ ref å¯¹è±¡åœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…ä¿æŒä¸å˜ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx\">const refContainer = useRef(initialValue);<br></code></pre></td></tr></table></figure><p>ä¸€ä¸ªå¸¸è§çš„ç”¨ä¾‹ä¾¿æ˜¯å‘½ä»¤å¼åœ°è®¿é—®å­ç»„ä»¶ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">TextInputWithFocusButton</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> inputEl = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>);<br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onButtonClick</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-comment">// `current` æŒ‡å‘å·²æŒ‚è½½åˆ° DOM ä¸Šçš„æ–‡æœ¬è¾“å…¥å…ƒç´ </span><br>    inputEl.<span class="hljs-property">current</span>.<span class="hljs-title function_">focus</span>();<br>  &#125;;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;inputEl&#125;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;onButtonClick&#125;</span>&gt;</span>Focus the input<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><p>æœ¬è´¨ä¸Šï¼Œ<code>useRef</code> å°±åƒæ˜¯å¯ä»¥åœ¨å…¶ <code>.current</code> å±æ€§ä¸­ä¿å­˜ä¸€ä¸ªå¯å˜å€¼çš„â€œç›’å­â€ã€‚ä½ åº”è¯¥ç†Ÿæ‚‰ ref è¿™ä¸€ç§è®¿é—® DOMçš„ä¸»è¦æ–¹å¼ã€‚å¦‚æœä½ å°† ref å¯¹è±¡ä»¥ <code>&lt;div ref=&#123;myRef&#125; /&gt;</code> å½¢å¼ä¼ å…¥ç»„ä»¶ï¼Œåˆ™æ— è®ºè¯¥èŠ‚ç‚¹å¦‚ä½•æ”¹å˜ï¼ŒReact éƒ½ä¼šå°† ref å¯¹è±¡çš„ <code>.current</code> å±æ€§è®¾ç½®ä¸ºç›¸åº”çš„ DOM èŠ‚ç‚¹ã€‚</p><p>ç„¶è€Œï¼Œ<code>useRef()</code> æ¯” <code>ref</code> å±æ€§æ›´æœ‰ç”¨ã€‚å®ƒå¯ä»¥å¾ˆæ–¹ä¾¿åœ°ä¿å­˜ä»»ä½•å¯å˜å€¼ï¼Œå…¶ç±»ä¼¼äºåœ¨ class ä¸­ä½¿ç”¨å®ä¾‹å­—æ®µçš„æ–¹å¼ã€‚è¿™æ˜¯å› ä¸ºå®ƒåˆ›å»ºçš„æ˜¯ä¸€ä¸ªæ™®é€š Javascript å¯¹è±¡ã€‚è€Œ <code>useRef()</code> å’Œè‡ªå»ºä¸€ä¸ª <code>&#123;current: ...&#125;</code> å¯¹è±¡çš„å”¯ä¸€åŒºåˆ«æ˜¯ï¼Œ<code>useRef</code> ä¼šåœ¨æ¯æ¬¡æ¸²æŸ“æ—¶è¿”å›åŒä¸€ä¸ª ref å¯¹è±¡ã€‚è¯·è®°ä½ï¼Œå½“ ref å¯¹è±¡å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶ï¼Œ<code>useRef</code> å¹¶<em>ä¸ä¼š</em>é€šçŸ¥ä½ ã€‚å˜æ›´ <code>.current</code> å±æ€§ä¸ä¼šå¼•å‘ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚å¦‚æœæƒ³è¦åœ¨ React ç»‘å®šæˆ–è§£ç»‘ DOM èŠ‚ç‚¹çš„ ref æ—¶è¿è¡ŒæŸäº›ä»£ç ï¼Œåˆ™éœ€è¦ä½¿ç”¨<a href="https://react.docschina.org/docs/hooks-faq.html#how-can-i-measure-a-dom-node">å›è°ƒ ref</a> æ¥å®ç°ã€‚</p><p>&#x3D;&#x3D;useImperativeHandle&#x3D;&#x3D;ï¼šåœ¨ä½¿ç”¨ <code>ref</code> æ—¶è‡ªå®šä¹‰æš´éœ²ç»™çˆ¶ç»„ä»¶çš„å®ä¾‹å€¼ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåº”å½“é¿å…ä½¿ç”¨ ref è¿™æ ·çš„å‘½ä»¤å¼ä»£ç ã€‚<code>useImperativeHandle</code> åº”å½“ä¸ <a href="https://react.docschina.org/docs/react-api.html#reactforwardref"><code>forwardRef</code></a> ä¸€èµ·ä½¿ç”¨ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">FancyInput</span>(<span class="hljs-params">props, ref</span>) &#123;<br>  <span class="hljs-keyword">const</span> inputRef = <span class="hljs-title function_">useRef</span>();<br>  <span class="hljs-title function_">useImperativeHandle</span>(ref, <span class="hljs-function">() =&gt;</span> (&#123;<br>    <span class="hljs-attr">focus</span>: <span class="hljs-function">() =&gt;</span> &#123;<br>      inputRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">focus</span>();<br>    &#125;<br>  &#125;));<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;inputRef&#125;</span> <span class="hljs-attr">...</span> /&gt;</span></span>;<br>&#125;<br><span class="hljs-title class_">FancyInput</span> = <span class="hljs-title function_">forwardRef</span>(<span class="hljs-title class_">FancyInput</span>);<br></code></pre></td></tr></table></figure><p>åœ¨æœ¬ä¾‹ä¸­ï¼Œæ¸²æŸ“ <code>&lt;FancyInput ref=&#123;inputRef&#125; /&gt;</code> çš„çˆ¶ç»„ä»¶å¯ä»¥è°ƒç”¨ <code>inputRef.current.focus()</code>ã€‚</p><p>&#x3D;&#x3D;useLayoutEffect&#x3D;&#x3D;ï¼šå…¶å‡½æ•°ç­¾åä¸ <code>useEffect</code> ç›¸åŒï¼Œä½†å®ƒä¼šåœ¨æ‰€æœ‰çš„ DOM å˜æ›´ä¹‹ååŒæ­¥è°ƒç”¨ effectã€‚å¯ä»¥ä½¿ç”¨å®ƒæ¥è¯»å– DOM å¸ƒå±€å¹¶åŒæ­¥è§¦å‘é‡æ¸²æŸ“ã€‚åœ¨æµè§ˆå™¨æ‰§è¡Œç»˜åˆ¶ä¹‹å‰ï¼Œ<code>useLayoutEffect</code> å†…éƒ¨çš„æ›´æ–°è®¡åˆ’å°†è¢«åŒæ­¥åˆ·æ–°ã€‚å°½å¯èƒ½ä½¿ç”¨æ ‡å‡†çš„ <code>useEffect</code> ä»¥é¿å…é˜»å¡è§†è§‰æ›´æ–°ã€‚</p><p>&#x3D;&#x3D;useDebugValue&#x3D;&#x3D;ï¼š å¯ç”¨äºåœ¨ React å¼€å‘è€…å·¥å…·ä¸­æ˜¾ç¤ºè‡ªå®šä¹‰ hook çš„æ ‡ç­¾ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-title function_">useDebugValue</span>(value)<br></code></pre></td></tr></table></figure><h3 id="29-åŸºäºè·¯ç”±çš„ä»£ç åˆ†å‰²"><a href="#29-åŸºäºè·¯ç”±çš„ä»£ç åˆ†å‰²" class="headerlink" title="29. åŸºäºè·¯ç”±çš„ä»£ç åˆ†å‰²"></a>29. åŸºäºè·¯ç”±çš„ä»£ç åˆ†å‰²</h3><p>å¦‚ä½•åœ¨ä½ çš„åº”ç”¨ä¸­ä½¿ç”¨ <code>React.lazy</code> å’Œ <a href="https://react-router.docschina.org/">React Router</a> è¿™ç±»çš„ç¬¬ä¸‰æ–¹åº“ï¼Œæ¥é…ç½®åŸºäºè·¯ç”±çš„ä»£ç åˆ†å‰²ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; <span class="hljs-title class_">Suspense</span>, lazy &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">BrowserRouter</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">Router</span>, <span class="hljs-title class_">Route</span>, <span class="hljs-title class_">Switch</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-router-dom&#x27;</span>;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">Home</span> = <span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">import</span>(<span class="hljs-string">&#x27;./routes/Home&#x27;</span>));<br><span class="hljs-keyword">const</span> <span class="hljs-title class_">About</span> = <span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">import</span>(<span class="hljs-string">&#x27;./routes/About&#x27;</span>));<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"></span>) =&gt; (<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Router</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">&#123;</span>&lt;<span class="hljs-attr">div</span>&gt;</span>Loading...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>&#125;&gt;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Switch</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">exact</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/&quot;</span> <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;Home&#125;/</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/about&quot;</span> <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;About&#125;/</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">Switch</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">Router</span>&gt;</span></span><br>);<br></code></pre></td></tr></table></figure><h3 id="30-Contextï¼šåœ¨ç»„ä»¶æ ‘é—´è¿›è¡Œæ•°æ®ä¼ é€’çš„æ–¹æ³•"><a href="#30-Contextï¼šåœ¨ç»„ä»¶æ ‘é—´è¿›è¡Œæ•°æ®ä¼ é€’çš„æ–¹æ³•" class="headerlink" title="30.Contextï¼šåœ¨ç»„ä»¶æ ‘é—´è¿›è¡Œæ•°æ®ä¼ é€’çš„æ–¹æ³•"></a>30.Contextï¼šåœ¨ç»„ä»¶æ ‘é—´è¿›è¡Œæ•°æ®ä¼ é€’çš„æ–¹æ³•</h3><p>åœ¨ä¸€ä¸ªå…¸å‹çš„ React åº”ç”¨ä¸­ï¼Œæ•°æ®æ˜¯é€šè¿‡ props å±æ€§è‡ªä¸Šè€Œä¸‹ï¼ˆç”±çˆ¶åŠå­ï¼‰è¿›è¡Œä¼ é€’çš„ï¼Œä½†è¿™ç§åšæ³•å¯¹äºæŸäº›ç±»å‹çš„å±æ€§è€Œè¨€æ˜¯æå…¶ç¹ççš„ï¼ˆä¾‹å¦‚ï¼šåœ°åŒºåå¥½ï¼ŒUI ä¸»é¢˜ï¼‰ï¼Œè¿™äº›å±æ€§æ˜¯åº”ç”¨ç¨‹åºä¸­è®¸å¤šç»„ä»¶éƒ½éœ€è¦çš„ã€‚Context æä¾›äº†ä¸€ç§åœ¨ç»„ä»¶ä¹‹é—´å…±äº«æ­¤ç±»å€¼çš„æ–¹å¼ï¼Œè€Œä¸å¿…æ˜¾å¼åœ°é€šè¿‡ç»„ä»¶æ ‘çš„é€å±‚ä¼ é€’ propsã€‚</p><p>Context ä¸»è¦åº”ç”¨åœºæ™¯åœ¨äºå¾ˆå¤šä¸åŒå±‚çº§çš„ç»„ä»¶éœ€è¦è®¿é—®åŒæ ·ä¸€äº›çš„æ•°æ®ã€‚è¯·è°¨æ…ä½¿ç”¨ï¼Œå› ä¸ºè¿™ä¼šä½¿å¾—ç»„ä»¶çš„å¤ç”¨æ€§å˜å·®ã€‚</p><p><strong><code>React.createContext</code></strong></p><p>åˆ›å»ºä¸€ä¸ªContextå¯¹è±¡ã€‚å½“ React æ¸²æŸ“ä¸€ä¸ªè®¢é˜…äº†è¿™ä¸ª Context å¯¹è±¡çš„ç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶ä¼šä»ç»„ä»¶æ ‘ä¸­ç¦»è‡ªèº«æœ€è¿‘çš„é‚£ä¸ªåŒ¹é…çš„ <code>Provider</code> ä¸­è¯»å–åˆ°å½“å‰çš„ context å€¼ã€‚</p><p><strong>åªæœ‰</strong>å½“ç»„ä»¶æ‰€å¤„çš„æ ‘ä¸­æ²¡æœ‰åŒ¹é…åˆ° Provider æ—¶ï¼Œå…¶ <code>defaultValue</code> å‚æ•°æ‰ä¼šç”Ÿæ•ˆã€‚è¿™æœ‰åŠ©äºåœ¨ä¸ä½¿ç”¨ Provider åŒ…è£…ç»„ä»¶çš„æƒ…å†µä¸‹å¯¹ç»„ä»¶è¿›è¡Œæµ‹è¯•ã€‚æ³¨æ„ï¼šå°† <code>undefined</code> ä¼ é€’ç»™ Provider çš„ value æ—¶ï¼Œæ¶ˆè´¹ç»„ä»¶çš„ <code>defaultValue</code> ä¸ä¼šç”Ÿæ•ˆã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">MyContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>(defaultValue);<br></code></pre></td></tr></table></figure><p><strong><code>Context.Provider</code></strong></p><p>æ¯ä¸ª Context å¯¹è±¡éƒ½ä¼šè¿”å›ä¸€ä¸ª Provider React ç»„ä»¶ï¼Œå®ƒå…è®¸æ¶ˆè´¹ç»„ä»¶è®¢é˜… context çš„å˜åŒ–ã€‚</p><p>Provider æ¥æ”¶ä¸€ä¸ª <code>value</code> å±æ€§ï¼Œä¼ é€’ç»™æ¶ˆè´¹ç»„ä»¶ã€‚ä¸€ä¸ª Provider å¯ä»¥å’Œå¤šä¸ªæ¶ˆè´¹ç»„ä»¶æœ‰å¯¹åº”å…³ç³»ã€‚å¤šä¸ª Provider ä¹Ÿå¯ä»¥åµŒå¥—ä½¿ç”¨ï¼Œé‡Œå±‚çš„ä¼šè¦†ç›–å¤–å±‚çš„æ•°æ®ã€‚</p><p>å½“ Provider çš„ <code>value</code> å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒå†…éƒ¨çš„æ‰€æœ‰æ¶ˆè´¹ç»„ä»¶éƒ½ä¼šé‡æ–°æ¸²æŸ“ã€‚Provider åŠå…¶å†…éƒ¨ consumer ç»„ä»¶éƒ½ä¸å—åˆ¶äº <code>shouldComponentUpdate</code> å‡½æ•°ï¼Œå› æ­¤å½“ consumer ç»„ä»¶åœ¨å…¶ç¥–å…ˆç»„ä»¶é€€å‡ºæ›´æ–°çš„æƒ…å†µä¸‹ä¹Ÿèƒ½æ›´æ–°ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;<span class="hljs-title class_">MyContext</span>.<span class="hljs-property">Provider</span> value=&#123;<span class="hljs-comment">/* æŸä¸ªå€¼ */</span>&#125;&gt;<br></code></pre></td></tr></table></figure><p><strong><code>Context.Consumer</code></strong></p><p>è¿™é‡Œï¼ŒReact ç»„ä»¶ä¹Ÿå¯ä»¥è®¢é˜…åˆ° context å˜æ›´ã€‚è¿™èƒ½è®©ä½ åœ¨<a href="https://react.docschina.org/docs/components-and-props.html#function-and-class-components">å‡½æ•°å¼ç»„ä»¶</a>ä¸­å®Œæˆè®¢é˜… contextã€‚</p><p>è¿™éœ€è¦<a href="https://react.docschina.org/docs/render-props.html#using-props-other-than-render">å‡½æ•°ä½œä¸ºå­å…ƒç´ ï¼ˆfunction as a childï¼‰</a>è¿™ç§åšæ³•ã€‚è¿™ä¸ªå‡½æ•°æ¥æ”¶å½“å‰çš„ context å€¼ï¼Œè¿”å›ä¸€ä¸ª React èŠ‚ç‚¹ã€‚ä¼ é€’ç»™å‡½æ•°çš„ <code>value</code> å€¼ç­‰åŒäºå¾€ä¸Šç»„ä»¶æ ‘ç¦»è¿™ä¸ª context æœ€è¿‘çš„ Provider æä¾›çš„ <code>value</code> å€¼ã€‚å¦‚æœæ²¡æœ‰å¯¹åº”çš„ Providerï¼Œ<code>value</code> å‚æ•°ç­‰åŒäºä¼ é€’ç»™ <code>createContext()</code> çš„ <code>defaultValue</code>ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;<span class="hljs-title class_">MyContext</span>.<span class="hljs-property">Consumer</span>&gt;<br>  &#123;<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> <span class="hljs-comment">/* åŸºäº context å€¼è¿›è¡Œæ¸²æŸ“*/</span>&#125;<br>&lt;/<span class="hljs-title class_">MyContext</span>.<span class="hljs-property">Consumer</span>&gt;<br></code></pre></td></tr></table></figure><p><strong>åœ¨åµŒå¥—ç»„ä»¶ä¸­æ›´æ–° Context</strong></p><p>ä»ä¸€ä¸ªåœ¨ç»„ä»¶æ ‘ä¸­åµŒå¥—å¾ˆæ·±çš„ç»„ä»¶ä¸­æ›´æ–° context æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚åœ¨è¿™ç§åœºæ™¯ä¸‹ï¼Œä½ å¯ä»¥é€šè¿‡ context ä¼ é€’ä¸€ä¸ªå‡½æ•°ï¼Œä½¿å¾— consumers ç»„ä»¶æ›´æ–° contextï¼š</p><p>theme-context.js</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// ç¡®ä¿ä¼ é€’ç»™ createContext çš„é»˜è®¤å€¼æ•°æ®ç»“æ„æ˜¯è°ƒç”¨çš„ç»„ä»¶ï¼ˆconsumersï¼‰æ‰€èƒ½åŒ¹é…çš„ï¼</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">ThemeContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>(&#123;<br>  <span class="hljs-attr">theme</span>: themes.<span class="hljs-property">dark</span>,<br>  <span class="hljs-attr">toggleTheme</span>: <span class="hljs-function">() =&gt;</span> &#123;&#125;,<br>&#125;);<br></code></pre></td></tr></table></figure><p>theme-toggler-button.js</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123;<span class="hljs-title class_">ThemeContext</span>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./theme-context&#x27;</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">ThemeTogglerButton</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-comment">// Theme Toggler æŒ‰é’®ä¸ä»…ä»…åªè·å– theme å€¼ï¼Œå®ƒä¹Ÿä» context ä¸­è·å–åˆ°ä¸€ä¸ª toggleTheme å‡½æ•°</span><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ThemeContext.Consumer</span>&gt;</span></span><br><span class="language-xml">      &#123;(&#123;theme, toggleTheme&#125;) =&gt; (</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>          <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;toggleTheme&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;backgroundColor:</span> <span class="hljs-attr">theme.background</span>&#125;&#125;&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">          Toggle Theme</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      )&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">ThemeContext.Consumer</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">ThemeTogglerButton</span>;<br></code></pre></td></tr></table></figure><p>app.js</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123;<span class="hljs-title class_">ThemeContext</span>, themes&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./theme-context&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">ThemeTogglerButton</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./theme-toggler-button&#x27;</span>;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(props);<br><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">toggleTheme</span> = <span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(<span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> (&#123;<br>        <span class="hljs-attr">theme</span>:<br>          state.<span class="hljs-property">theme</span> === themes.<span class="hljs-property">dark</span><br>            ? themes.<span class="hljs-property">light</span><br>            : themes.<span class="hljs-property">dark</span>,<br>      &#125;));<br>    &#125;;<br><br>    <span class="hljs-comment">// State ä¹ŸåŒ…å«äº†æ›´æ–°å‡½æ•°ï¼Œå› æ­¤å®ƒä¼šè¢«ä¼ é€’è¿› context providerã€‚</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>      <span class="hljs-attr">theme</span>: themes.<span class="hljs-property">light</span>,<br>      <span class="hljs-attr">toggleTheme</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">toggleTheme</span>,<br>    &#125;;<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// æ•´ä¸ª state éƒ½è¢«ä¼ é€’è¿› provider</span><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ThemeContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;this.state&#125;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Content</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">ThemeContext.Provider</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Content</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">ThemeTogglerButton</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span>, <span class="hljs-variable language_">document</span>.<span class="hljs-property">root</span>);<br><br></code></pre></td></tr></table></figure><p><strong>æ¶ˆè´¹å¤šä¸ª Context</strong></p><p>ä¸ºäº†ç¡®ä¿ context å¿«é€Ÿè¿›è¡Œé‡æ¸²æŸ“ï¼ŒReact éœ€è¦ä½¿æ¯ä¸€ä¸ª consumers ç»„ä»¶çš„ context åœ¨ç»„ä»¶æ ‘ä¸­æˆä¸ºä¸€ä¸ªå•ç‹¬çš„èŠ‚ç‚¹ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// Theme contextï¼Œé»˜è®¤çš„ theme æ˜¯ â€œlightâ€ å€¼</span><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">ThemeContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>(<span class="hljs-string">&#x27;light&#x27;</span>);<br><br><span class="hljs-comment">// ç”¨æˆ·ç™»å½• context</span><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">UserContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>(&#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Guest&#x27;</span>,<br>&#125;);<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> &#123;signedInUser, theme&#125; = <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>;<br><br>    <span class="hljs-comment">// æä¾›åˆå§‹ context å€¼çš„ App ç»„ä»¶</span><br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ThemeContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;theme&#125;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">UserContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;signedInUser&#125;</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Layout</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">UserContext.Provider</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">ThemeContext.Provider</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Layout</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Sidebar</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Content</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-comment">// ä¸€ä¸ªç»„ä»¶å¯èƒ½ä¼šæ¶ˆè´¹å¤šä¸ª context</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Content</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ThemeContext.Consumer</span>&gt;</span></span><br><span class="language-xml">      &#123;theme =&gt; (</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">UserContext.Consumer</span>&gt;</span></span><br><span class="language-xml">          &#123;user =&gt; (</span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">ProfilePage</span> <span class="hljs-attr">user</span>=<span class="hljs-string">&#123;user&#125;</span> <span class="hljs-attr">theme</span>=<span class="hljs-string">&#123;theme&#125;</span> /&gt;</span></span><br><span class="language-xml">          )&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">UserContext.Consumer</span>&gt;</span></span><br><span class="language-xml">      )&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">ThemeContext.Consumer</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><p>å¦‚æœä¸¤ä¸ªæˆ–è€…æ›´å¤šçš„ context å€¼ç»å¸¸è¢«ä¸€èµ·ä½¿ç”¨ï¼Œé‚£ä½ å¯èƒ½è¦è€ƒè™‘ä¸€ä¸‹å¦å¤–åˆ›å»ºä½ è‡ªå·±çš„æ¸²æŸ“ç»„ä»¶ï¼Œä»¥æä¾›è¿™äº›å€¼ã€‚</p><p>æ³¨æ„äº‹é¡¹ï¼šå› ä¸º context ä¼šä½¿ç”¨å‚è€ƒæ ‡è¯†ï¼ˆreference identityï¼‰æ¥å†³å®šä½•æ—¶è¿›è¡Œæ¸²æŸ“ï¼Œè¿™é‡Œå¯èƒ½ä¼šæœ‰ä¸€äº›é™·é˜±ï¼Œå½“ provider çš„çˆ¶ç»„ä»¶è¿›è¡Œé‡æ¸²æŸ“æ—¶ï¼Œå¯èƒ½ä¼šåœ¨ consumers ç»„ä»¶ä¸­è§¦å‘æ„å¤–çš„æ¸²æŸ“ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå½“æ¯ä¸€æ¬¡ Provider é‡æ¸²æŸ“æ—¶ï¼Œä»¥ä¸‹çš„ä»£ç ä¼šé‡æ¸²æŸ“æ‰€æœ‰ä¸‹é¢çš„ consumers ç»„ä»¶ï¼Œå› ä¸º <code>value</code> å±æ€§æ€»æ˜¯è¢«èµ‹å€¼ä¸ºæ–°çš„å¯¹è±¡ã€‚</p><p>ä¸ºäº†é˜²æ­¢è¿™ç§æƒ…å†µï¼Œå°† value çŠ¶æ€æå‡åˆ°çˆ¶èŠ‚ç‚¹çš„ state é‡Œï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(props);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<br>      <span class="hljs-attr">value</span>: &#123;<span class="hljs-attr">something</span>: <span class="hljs-string">&#x27;something&#x27;</span>&#125;,<br>    &#125;;<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;this.state.value&#125;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Toolbar</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰ç«¯</tag>
      
      <tag>react</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
